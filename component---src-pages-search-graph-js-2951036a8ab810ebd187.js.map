{"version":3,"sources":["webpack:///./node_modules/aframe-extras/src/controls/touch-controls.js","webpack:///./node_modules/accessor-fn/dist/accessor-fn.module.js","webpack:///./node_modules/ngraph.quadtreebh3d/insertStack.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/core-js/internals/native-promise-constructor.js","webpack:///./node_modules/ngraph.physics.simulator/lib/dragForce.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/aframe-extras/lib/ColladaLoader.js","webpack:///./node_modules/bezier-js/lib/utils.js","webpack:///./node_modules/ngraph.random/index.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/aframe-extras/src/loaders/fbx-model.js","webpack:///./node_modules/aframe-extras/src/loaders/object-model.js","webpack:///./node_modules/aframe-extras/src/controls/checkpoint-controls.js","webpack:///./node_modules/aframe-extras/src/primitives/a-grid.js","webpack:///./node_modules/ngraph.expose/index.js","webpack:///./node_modules/aframe-extras/src/misc/normal-material.js","webpack:///./node_modules/aframe-extras/src/primitives/a-hexgrid.js","webpack:///./node_modules/aframe-extras/lib/default-hex-grid.js","webpack:///./node_modules/core-js/modules/es.string.trim-start.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/verletIntegrator.js","webpack:///./node_modules/core-js/internals/new-promise-capability.js","webpack:///./node_modules/aframe-extras/lib/fetch-script.js","webpack:///./node_modules/aframe-extras/src/misc/jump-ability.js","webpack:///./node_modules/ngraph.events/index.js","webpack:///./node_modules/aframe-extras/lib/GamepadButton.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/createBody.js","webpack:///./node_modules/ngraph.physics.simulator/lib/spring.js","webpack:///./node_modules/ngraph.physics.simulator/lib/springForce.js","webpack:///./node_modules/bezier-js/lib/poly-bezier.js","webpack:///./node_modules/aframe-extras/src/controls/gamepad-controls.js","webpack:///./node_modules/aframe-extras/src/misc/mesh-smooth.js","webpack:///./node_modules/aframe-extras/src/primitives/a-tube.js","webpack:///./node_modules/aframe-extras/src/pathfinding/nav-mesh.js","webpack:///./node_modules/aframe-extras/src/controls/index.js","webpack:///./node_modules/aframe-extras/src/pathfinding/system.js","webpack:///./node_modules/ngraph.quadtreebh3d/index.js","webpack:///./node_modules/ngraph.graph/index.js","webpack:///./node_modules/aframe-extras/src/pathfinding/nav-agent.js","webpack:///./node_modules/aframe-extras/src/misc/kinematic-body.js","webpack:///./node_modules/aframe-extras/lib/FBXLoader.js","webpack:///./node_modules/aframe-extras/src/misc/sphere-collider.js","webpack:///./node_modules/@tweenjs/tween.js/dist/tween.esm.js","webpack:///./node_modules/ngraph.forcelayout3d/index.js","webpack:///./node_modules/aframe-extras/lib/keyboard.polyfill.js","webpack:///./node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","webpack:///./node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","webpack:///./node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","webpack:///./node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","webpack:///./node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","webpack:///./node_modules/@juggle/resize-observer/lib/utils/element.js","webpack:///./node_modules/@juggle/resize-observer/lib/utils/global.js","webpack:///./node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","webpack:///./node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","webpack:///./node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","webpack:///./node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","webpack:///./node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","webpack:///./node_modules/@juggle/resize-observer/lib/utils/process.js","webpack:///./node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","webpack:///./node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","webpack:///./node_modules/@juggle/resize-observer/lib/utils/scheduler.js","webpack:///./node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","webpack:///./node_modules/@juggle/resize-observer/lib/ResizeObservation.js","webpack:///./node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","webpack:///./node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","webpack:///./node_modules/@juggle/resize-observer/lib/ResizeObserver.js","webpack:///./src/components/SearchGraph.js","webpack:///./src/utils/useDimensions.js","webpack:///./src/pages/searchGraph.js","webpack:///./node_modules/ngraph.quadtreebh/node.js","webpack:///./node_modules/ngraph.forcelayout/index.js","webpack:///./node_modules/ngraph.physics.primitives/index.js","webpack:///./node_modules/d3-force-3d/src/center.js","webpack:///./node_modules/d3-binarytree/src/add.js","webpack:///./node_modules/d3-binarytree/src/cover.js","webpack:///./node_modules/d3-binarytree/src/half.js","webpack:///./node_modules/d3-binarytree/src/x.js","webpack:///./node_modules/d3-binarytree/src/binarytree.js","webpack:///./node_modules/d3-binarytree/src/data.js","webpack:///./node_modules/d3-binarytree/src/extent.js","webpack:///./node_modules/d3-binarytree/src/find.js","webpack:///./node_modules/d3-binarytree/src/remove.js","webpack:///./node_modules/d3-binarytree/src/root.js","webpack:///./node_modules/d3-binarytree/src/size.js","webpack:///./node_modules/d3-binarytree/src/visit.js","webpack:///./node_modules/d3-binarytree/src/visitAfter.js","webpack:///./node_modules/d3-octree/src/add.js","webpack:///./node_modules/d3-octree/src/cover.js","webpack:///./node_modules/d3-octree/src/octant.js","webpack:///./node_modules/d3-octree/src/x.js","webpack:///./node_modules/d3-octree/src/y.js","webpack:///./node_modules/d3-octree/src/z.js","webpack:///./node_modules/d3-octree/src/octree.js","webpack:///./node_modules/d3-octree/src/data.js","webpack:///./node_modules/d3-octree/src/extent.js","webpack:///./node_modules/d3-octree/src/find.js","webpack:///./node_modules/d3-octree/src/remove.js","webpack:///./node_modules/d3-octree/src/root.js","webpack:///./node_modules/d3-octree/src/size.js","webpack:///./node_modules/d3-octree/src/visit.js","webpack:///./node_modules/d3-octree/src/visitAfter.js","webpack:///./node_modules/d3-force-3d/src/constant.js","webpack:///./node_modules/d3-force-3d/src/jiggle.js","webpack:///./node_modules/d3-force-3d/src/link.js","webpack:///./node_modules/d3-force-3d/src/simulation.js","webpack:///./node_modules/d3-force-3d/src/manyBody.js","webpack:///./node_modules/d3-force-3d/src/radial.js","webpack:///./node_modules/bezier-js/lib/bezier.js","webpack:///./node_modules/aframe-extras/index.js","webpack:///./node_modules/kapsule/dist/kapsule.module.js","webpack:///./node_modules/ngraph.physics.simulator/lib/createBody.js","webpack:///./node_modules/ngraph.quadtreebh3d/node.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/bounds.js","webpack:///./node_modules/aframe-extras/src/loaders/animation-mixer.js","webpack:///./node_modules/core-js/internals/species-constructor.js","webpack:///./node_modules/bezier-js/lib/svg-to-beziers.js","webpack:///./node_modules/ngraph.quadtreebh/index.js","webpack:///./node_modules/bezier-js/lib/normalise-svg.js","webpack:///./node_modules/aframe-extras/src/misc/cube-env-map.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/ngraph.merge/index.js","webpack:///./node_modules/jerrypick/dist/jerrypick.module.js","webpack:///./node_modules/react-kapsule/dist/react-kapsule.module.js","webpack:///./node_modules/3d-force-graph-vr/dist/3d-force-graph-vr.module.js","webpack:///./node_modules/3d-force-graph-ar/dist/3d-force-graph-ar.module.js","webpack:///./node_modules/three-dragcontrols/lib/index.module.js","webpack:///./node_modules/three/examples/jsm/controls/TrackballControls.js","webpack:///./node_modules/three/examples/jsm/controls/OrbitControls.js","webpack:///./node_modules/three/examples/jsm/controls/FlyControls.js","webpack:///./node_modules/three/examples/jsm/postprocessing/Pass.js","webpack:///./node_modules/three/examples/jsm/shaders/CopyShader.js","webpack:///./node_modules/three/examples/jsm/postprocessing/ShaderPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/MaskPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/EffectComposer.js","webpack:///./node_modules/three/examples/jsm/postprocessing/RenderPass.js","webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/polished/dist/polished.esm.js","webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/three-render-objects/dist/three-render-objects.module.js","webpack:///./node_modules/3d-force-graph/dist/3d-force-graph.module.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selector.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selectorAll.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/sparse.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/enter.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/data.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/sort.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/call.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/namespaces.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/namespace.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/attr.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/window.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/style.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/property.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/classed.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/text.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/html.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/raise.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/lower.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/creator.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/insert.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/remove.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/clone.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/on.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/dispatch.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/index.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/select.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/selectAll.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/filter.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/matcher.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/constant.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/exit.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/join.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/merge.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/order.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/nodes.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/node.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/size.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/empty.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/each.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/append.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/selection/datum.js","webpack:///./node_modules/force-graph/node_modules/d3-selection/src/select.js","webpack:///./node_modules/d3-drag/src/constant.js","webpack:///./node_modules/d3-drag/src/event.js","webpack:///./node_modules/d3-drag/src/drag.js","webpack:///./node_modules/force-graph/node_modules/d3-array/src/min.js","webpack:///./node_modules/force-graph/node_modules/d3-array/src/max.js","webpack:///./node_modules/canvas-color-tracker/dist/canvas-color-tracker.module.js","webpack:///./node_modules/force-graph/node_modules/d3-scale/src/init.js","webpack:///./node_modules/force-graph/node_modules/d3-scale/src/ordinal.js","webpack:///./node_modules/force-graph/dist/force-graph.module.js","webpack:///./node_modules/react-force-graph/dist/react-force-graph.module.js","webpack:///./node_modules/aframe-extras/src/misc/index.js","webpack:///./node_modules/tinycolor2/tinycolor.js","webpack:///./node_modules/aframe-extras/src/primitives/index.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/springForce.js","webpack:///./node_modules/aframe-extras/src/misc/checkpoint.js","webpack:///./node_modules/aframe-forcegraph-component/index.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/ngraph.physics.simulator/lib/bounds.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/dragForce.js","webpack:///./node_modules/aframe-extras/src/misc/grab.js","webpack:///./node_modules/aframe-extras/src/controls/movement-controls.js","webpack:///./node_modules/lodash.throttle/index.js","webpack:///./node_modules/aframe-extras/src/controls/keyboard-controls.js","webpack:///./node_modules/three-forcegraph/node_modules/d3-array/src/min.js","webpack:///./node_modules/three-forcegraph/node_modules/d3-array/src/max.js","webpack:///./node_modules/data-joint/dist/data-joint.module.js","webpack:///./node_modules/three-forcegraph/node_modules/d3-scale/src/init.js","webpack:///./node_modules/three-forcegraph/node_modules/d3-scale/src/ordinal.js","webpack:///./node_modules/three-forcegraph/dist/three-forcegraph.module.js","webpack:///./node_modules/aframe-extras/src/primitives/a-ocean.js","webpack:///./node_modules/ngraph.quadtreebh/insertStack.js","webpack:///./node_modules/aframe-extras/src/loaders/index.js","webpack:///./node_modules/index-array-by/dist/index-array-by.module.js","webpack:///./node_modules/fromentries/index.js","webpack:///./node_modules/aframe-extras/src/pathfinding/index.js","webpack:///./node_modules/aframe-extras/src/loaders/collada-model-legacy.js","webpack:///./node_modules/aframe-extras/lib/GamepadButtonEvent.js","webpack:///./node_modules/core-js/modules/es.promise.finally.js","webpack:///./node_modules/ngraph.quadtreebh3d/isSamePosition.js","webpack:///./node_modules/ngraph.forcelayout3d/lib/eulerIntegrator.js","webpack:///./node_modules/debounce/index.js","webpack:///./node_modules/aframe-extras/src/loaders/gltf-model-legacy.js","webpack:///./node_modules/bezier-js/index.js","webpack:///./node_modules/ngraph.physics.simulator/lib/eulerIntegrator.js","webpack:///./node_modules/three-pathfinding/dist/three-pathfinding.module.js","webpack:///./node_modules/ngraph.physics.simulator/index.js","webpack:///./node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack:///./node_modules/d3-scale-chromatic/src/colors.js","webpack:///./node_modules/ngraph.quadtreebh/isSamePosition.js","webpack:///./node_modules/aframe-extras/src/controls/trackpad-controls.js","webpack:///./node_modules/aframe-extras/lib/hex-grid.min.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./node_modules/core-js/internals/promise-resolve.js"],"names":["module","exports","AFRAME","registerComponent","schema","enabled","default","reverseEnabled","init","this","dVelocity","THREE","Vector3","bindMethods","direction","play","addEventListeners","pause","removeEventListeners","set","remove","sceneEl","el","canvasEl","canvas","addEventListener","onTouchStart","onTouchEnd","bind","removeEventListener","isVelocityActive","data","getVelocityDelta","z","clone","e","touches","length","preventDefault","p","Function","obj","InsertStack","stack","popIdx","InsertStackElement","node","body","prototype","isEmpty","push","item","pop","reset","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","arr","global","Promise","options","merge","api","update","force","x","dragCoeff","velocity","y","expose","iter","Symbol","iterator","Object","Array","from","ColladaLoader","manager","undefined","DefaultLoadingManager","constructor","crossOrigin","load","url","onLoad","onProgress","onError","scope","path","LoaderUtils","extractUrlBase","loader","FileLoader","setPath","text","parse","value","setResourcePath","resourcePath","console","warn","setCrossOrigin","getElementsByTagName","xml","name","array","childNodes","i","l","child","nodeName","parseStrings","parts","trim","split","parseFloats","parseFloat","parseInts","parseInt","parseId","substring","object","keys","parseAssetUnit","hasAttribute","getAttribute","parseAssetUpAxis","textContent","parseLibrary","libraryName","parser","library","elements","buildLibrary","builder","build","getBuild","parseAnimationSampler","inputs","nodeType","id","semantic","parseAnimationChannel","shift","sid","arraySyntax","indexOf","memberSyntax","member","indices","replace","sampler","buildAnimation","tracks","channels","samplers","sources","target","hasOwnProperty","channel","inputId","INPUT","outputId","OUTPUT","createKeyframeTracks","buildAnimationChannel","getAnimation","animations","inputSource","outputSource","time","stride","il","j","jl","nodes","object3D","getNode","transform","transforms","defaultMatrix","matrix","transpose","index","keyframes","sort","a","b","transformAnimationData","prepareAnimationData","uuid","position","scale","quaternion","Quaternion","animation","times","positionData","quaternionData","scaleData","keyframe","fromArray","decompose","w","VectorKeyframeTrack","QuaternionKeyframeTrack","property","defaultValue","empty","prev","next","getPrev","getNext","interpolate","createMissingKeyframes","key","buildAnimationClip","duration","end","start","animationTracks","AnimationClip","getAnimationClip","clips","parseSkin","bindShapeMatrix","parseSource","joints","parseJoints","vertexWeights","parseVertexWeights","offset","vcount","v","buildController","geometry","geometries","skin","weights","jointOffset","JOINT","weightOffset","WEIGHT","jointSource","inverseSource","INV_BIND_MATRIX","jointCount","vertexSkinData","skinIndex","weightId","skinWeight","weight","descending","d","bindMatrix","Matrix4","identity","boneInverse","buildSkin","skinIndices","skinWeights","buildImage","init_from","getImage","images","parseEffectProfileCOMMON","surfaces","parseEffectNewparam","technique","parseEffectTechnique","extra","parseEffectExtra","parseEffectSurface","parseEffectSampler","source","type","parameters","parseEffectParameters","parseEffectParameter","opaque","parseEffectParameterTexture","parseEffectParameterTextureExtra","parseEffectParameterTextureExtraTechnique","toUpperCase","parseEffectExtraTechnique","buildEffect","buildMaterial","material","effect","effects","profile","MeshPhongMaterial","MeshLambertMaterial","MeshBasicMaterial","getTexture","textureObject","image","extension","slice","lastIndexOf","toLowerCase","tgaLoader","textureLoader","getTextureLoader","texture","wrapS","wrapU","RepeatWrapping","ClampToEdgeWrapping","wrapT","wrapV","offsetU","offsetV","repeat","repeatU","repeatV","parameter","color","map","specular","specularMap","normalMap","lightMap","float","shininess","emissive","emissiveMap","transparent","transparency","opacity","double_sided","side","DoubleSide","getMaterial","materials","parseCameraOptics","parseCameraTechnique","parseCameraParameters","buildCamera","camera","optics","PerspectiveCamera","yfov","aspect_ratio","znear","zfar","ymag","xmag","aspectRatio","OrthographicCamera","getCamera","cameras","parseLightTechnique","parseLightParameters","Color","falloffAngle","f","distance","Math","sqrt","buildLight","light","DirectionalLight","PointLight","SpotLight","AmbientLight","copy","getLight","lights","accessor","parseGeometryVertices","parseGeometryPrimitive","primitive","count","hasUV","inputname","max","checkUVCoordinates","primitives","uvsNeedsFix","buildGeometry","vertices","groupedPrimitives","groupPrimitives","primitiveType","buildGeometryType","normal","uv","uv2","BufferGeometry","materialKeys","g","vc","addGroup","input","prevLength","buildGeometryData","addAttribute","Float32BufferAttribute","pushVector","sourceStride","sourceArray","c","k","kl","getGeometry","buildKinematicsModel","parseKinematicsTechniqueCommon","parseKinematicsJoint","links","parseKinematicsLink","parseKinematicsJointParameter","axis","limits","min","static","zeroPosition","middlePosition","attachments","parseKinematicsAttachment","parseKinematicsTransform","joint","angle","degToRad","parsePhysicsRigidBody","parsePhysicsTechniqueCommon","inertia","mass","parseKinematicsBindJointAxis","param","tmpJointIndex","jointIndex","substr","buildKinematicsScene","buildTransformList","collada","querySelector","vector","parseNode","instanceCameras","instanceControllers","instanceLights","instanceGeometries","instanceNodes","parseNodeInstance","multiply","makeTranslation","makeRotationAxis","log","hasNode","skeletons","instances","instance","symbol","buildSkeleton","boneData","sortedBoneData","skeleton","buildBoneHierarchy","visualScenes","children","error","bone","processed","bones","boneInverses","Skeleton","root","traverse","isBone","buildNode","objects","instanceCamera","controller","controllers","newObjects","buildObjects","isSkinnedMesh","normalizeSkinWeights","instanceLight","Bone","Group","add","fallbackMaterial","resolveMaterialBinding","instanceMaterials","LineBasicMaterial","skinning","attributes","LineSegments","Line","SkinnedMesh","Mesh","buildVisualScene","group","getVisualScene","scene","Scene","DOMParser","parseFromString","version","asset","unit","upAxis","parseAsset","TextureLoader","TGALoader","kinematics","kinematicsModels","physicsModels","kinematicsScenes","mesh","element","setAttribute","prepareNodes","rigidBodies","bindJointAxis","setupAnimations","kinematicsModelId","kinematicsSceneId","visualSceneId","kinematicsModel","kinematicsScene","getKinematicsScene","visualScene","jointMap","targetElement","parentVisualElement","parentElement","connect","m0","getJointValue","jointData","setJointValue","visualElement","visualElementName","setupKinematics","parseScene","setFromEuler","Euler","PI","multiplyScalar","abs","cos","sin","acos","atan2","pow","crt","pi","tau","quart","nMax","Number","MAX_SAFE_INTEGER","nMin","MIN_SAFE_INTEGER","ZERO","utils","Tvalues","Cvalues","arcfn","t","derivativeFn","compute","points","_3d","order","mt","ret","mt2","t2","dCpts","JSON","stringify","splice","computeWithRatios","ratios","r","f1","f2","f3","f4","derive","dpoints","dpt","list","between","m","M","approximately","precision","sum","len","ds","de","ts","te","lerp","v1","v2","pointToString","s","pointsToString","join","o","dx1","dy1","dx2","dy2","round","pos","dist","p1","p2","dx","dy","closest","LUT","point","mpos","mdist","forEach","idx","abcratio","n","bottom","projectionratio","top","lli8","x1","y1","x2","y2","x3","y3","x4","y4","lli4","p3","p4","lli","makeline","Bezier","findbbox","sections","mx","my","MX","MY","bbox","mid","size","shapeintersections","s1","bbox1","s2","bbox2","curveIntersectionThreshold","bboxoverlap","intersections","a1","startcap","forward","back","endcap","a2","l1","virtual","l2","iss","intersects","c1","c2","makeshape","bpl","fpl","shape","self","getminmax","curve","concat","get","align","line","tx","ty","roots","reduce","m1","m2","filter","pa","pb","pc","q","u1","q2","discriminant","mp3","phi","t1","sd","droots","curvature","kOnly","num","dnm","adk","dk","d1","d2","dd","qdsum","pk","nk","inflections","v3","trm","sq","b1","b2","dim","dims","expandbox","_bbox","pairiteration","c1b","c2b","threshold","_t1","_t2","cc1","cc2","pairs","left","right","pair","results","getccenter","_","dx1p","dy1p","dx2p","dy2p","mx1","my1","mx2","my2","mx1n","my1n","mx2n","my2n","arc","numberSort","random","inputSeed","Generator","Date","seed","nextDouble","randomIterator","customRandom","localRandom","Error","callback","shuffle","maxValue","floor","uniform","gaussian","arrayLikeToArray","isArray","FBXLoader","src","crossorigin","model","setObject3D","emit","format","removeObject3D","_this","ObjectLoader","mode","oneOf","animateSpeed","active","checkpoint","isNavMeshConstrained","targetPosition","setCheckpoint","sync","distanceTo","components","updateNavLocation","getVelocity","setLength","getWorldPosition","getOffset","sub","registerPrimitive","defaultComponents","width","height","rotation","mappings","augment","settings","toString","call","MeshNormalMaterial","flatShading","applyMaterial","isMesh","vg","defaultHexGrid","Primitive","Component","dependencies","fetch","then","response","json","addMesh","grid","HexGrid","fromJSON","board","Board","generateTilemap","addMaterial","$","$trimStart","FORCED","forcedStringTrimMethod","trimStart","proto","forced","trimLeft","bodies","timeStep","tz","coeff","prevPos","aFunction","PromiseCapability","C","resolve","reject","promise","$$resolve","$$reject","TypeError","removeScript","script","document","getElementById","parent","parentNode","removeChild","fetchScriptInternal","timeout","scriptId","now","ceil","createElement","async","createScript","timeoutId","setTimeout","disableTimeout","clearTimeout","ok","firstScript","insertBefore","appendScript","on","playerHeight","maxJumps","debug","numJumps","beginJump","events","bindings","collide","onCollide","event","initialVelocity","subject","reservedWords","validateSubject","eventsStorage","registeredEvents","create","eventName","ctx","handlers","off","callbacks","fire","fireArguments","arguments","callbackInfo","apply","createEventsStorage","assign","FACE_1","FACE_2","FACE_3","FACE_4","L_SHOULDER_1","R_SHOULDER_1","L_SHOULDER_2","R_SHOULDER_2","SELECT","START","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT","VENDOR","physics","Body3d","fromBody","toBody","to","spring","body1","body2","springLength","springCoeff","PolyBezier","curves","valueOf","addCurve","GamepadButton","GamepadButtonEvent","Joystick","rotationSensitivity","system","systems","prevTime","window","performance","buttons","pitch","Object3D","yaw","_lookVector","Vector2","_moveVector","_dpadVector","addBehavior","tick","dt","updateButtonState","updateRotation","isConnected","dpad","joystick","getDpad","getJoystick","inputX","inputY","isRotationActive","lookControls","hasLookControls","pitchObject","yawObject","lookVector","gamepad","getGamepad","pressed","stdGamepad","navigator","getGamepads","xrController","xrGamepad","proxyControls","getButton","getAxis","axes","mapping","connected","getID","detail","computeVertexNormals","tube","segments","radius","closed","radialSegments","CatmullRomCurve3","TubeGeometry","prevData","nav","hasLoadedNavMesh","loadNavMesh","navMesh","getObject3D","navMeshGeometry","isBufferGeometry","Geometry","fromBufferGeometry","updateMatrixWorld","applyMatrix","matrixWorld","setNavMeshGeometry","Pathfinding","pathfinder","ZONE","registerSystem","agents","Set","setZoneData","createZone","agent","getNavMesh","addAgent","ctrl","removeAgent","delete","getPath","groupID","findPath","getGroup","getClosestNode","clampStep","endTarget","getChild","quad0","quad1","quad2","quad3","quad4","quad5","quad6","quad7","setChild","gravity","theta","Node","isSamePosition","updateQueue","insertStack","nodesCache","currentInCache","newNode","massX","massY","massZ","front","insert","newBody","stackItem","oldBody","retriesCount","dz","quadIdx","oldLeft","oldTop","oldBack","insertBodies","MAX_VALUE","z1","MIN_VALUE","z2","maxSide","updateBodyForce","sourceBody","queue","fx","fy","fz","queueLength","shiftIdx","pushIdx","differentBody","newOptions","multigraph","uniqueLinkId","Map","multiEdges","suspendEvents","createLink","fromId","toId","linkId","makeLinkId","isMultiEdge","getLink","suffix","Link","changes","recordLinkChange","noop","recordNodeChange","enterModification","exitModification","graphPart","addNode","addLink","fromNode","toNode","link","addLinkToNode","removeLink","removeNode","getNodeCount","getLinkCount","getLinksCount","getNodesCount","getLinks","nodeId","forEachNode","forEachLinkedNode","oriented","forEachOrientedLink","linkedNodeId","forEachNonOrientedLink","forEachLink","beginUpdate","endUpdate","clear","hasLink","eventify","realOn","enterModificationReal","exitModificationReal","recordLinkChangeReal","recordNodeChangeReal","monitorSubscribers","changeType","prevLinks","indexOfElementInArray","fromNodeId","toNodeId","valuesIterator","values","nextValue","done","vDest","vDelta","vNext","destination","speed","raycaster","Raycaster","gazeTarget","vCurrent","vWaypoint","subVectors","lookAt","ray","origin","intersectObject","normalizedVelocity","currentSurfaceNormal","groundNormal","linearDamping","enableSlopes","enableJumps","addComponent","CANNON","Vec3","Body","fixedRotation","addShape","Sphere","addBody","removeBody","removeComponent","beforeStep","step","groundBody","groundHeight","contacts","getContacts","maxInterval","contact","bi","ni","negate","bj","dot","projectOnPlane","rj","ri","normalize","raycastToGround","driver","world","hitNormal","vFrom","vTo","Ray","_updateDirection","intersectBody","hasHit","result","hitNormalWorld","fbxTree","connections","sceneGraph","FBXTreeParser","GeometryParser","AnimationParser","TextParser","BinaryParser","BinaryReader","buffer","littleEndian","dv","DataView","FBXTree","getFbxVersion","match","convertFBXTimeToSeconds","resourceDirectory","setResponseType","itemError","FBXBuffer","CORRECT","byteLength","convertArrayBufferToString","FBXText","cursor","isFbxFormatASCII","parseConnections","parseImages","textures","parseTextures","parseMaterials","deformers","parseDeformers","geometryMap","connectionMap","Connections","rawConnection","fromID","toID","relationship","has","parents","parentRelationship","ID","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","base64Content","parseImage","filename","content","fileName","Loader","Handlers","Uint8Array","URL","createObjectURL","Blob","textureMap","textureNodes","Texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","Scaling","currentPath","FileName","materialMap","materialNodes","Material","parseMaterial","materialNode","ShadingModel","parseParameters","setValues","BumpFactor","bumpScale","Diffuse","DiffuseColor","DisplacementFactor","displacementScale","Emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","Opacity","ReflectionFactor","reflectivity","Shininess","Specular","SpecularColor","bumpMap","displacementMap","envMap","EquirectangularReflectionMapping","alphaMap","LayeredTexture","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","Transform","transformLink","TransformLink","linkMode","Mode","Indexes","Weights","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","modelMap","parseModels","modelNodes","Model","modelNode","setLookAtProperties","connection","bindSkeleton","createAmbientLight","setupMorphMaterials","isGroup","createCamera","createLight","createMesh","createCurve","PropertyBinding","sanitizeNodeName","setModelTransforms","subBone","cameraAttribute","attr","NodeAttribute","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","innerWidth","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","setFocalLength","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","FarAttenuationEnd","EnableFarAttenuation","InnerAngle","penumbra","OuterAngle","CastShadows","castShadow","vertexColors","VertexColors","FBX_Deformer","geo","linewidth","transformData","eulerOrder","RotationOrder","translation","Lcl_Translation","rotationOffset","RotationOffset","Lcl_Rotation","preRotation","PreRotation","postRotation","PostRotation","Lcl_Scaling","generateTransform","lookAtTarget","bindMatrices","parsePoseNodes","geoConnParent","BindPoseNode","Pose","poseNodes","PoseNode","poseNode","Matrix","GlobalSettings","ambientColor","AmbientColor","morphAttributes","matUuid","sharedMat","geoNodes","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","vertex","applyToBufferAttribute","colors","Uint16BufferAttribute","weightsIndices","normalAttribute","Matrix3","getNormalMatrix","uvs","uvBuffer","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","groups","lastGroup","lastIndex","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","parseUVs","weightTable","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","rawTarget","morphGeoNode","genMorphGeometry","morphGeo","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UV","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","NURBSCurve","Order","isNaN","startKnot","endKnot","degree","knots","KnotVector","controlPoints","pointsValues","Points","Vector4","Form","getPoints","positions","Float32Array","toArray","BufferAttribute","animationClips","rawClips","parseClips","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","rawCurves","animationCurve","KeyTime","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","getModelAnimTransform","preRotations","postRotations","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","rawTracks","generateTracks","setFromQuaternion","T","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","S","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","interpolateRotations","inverse","euler","quaternionValues","premultiply","val","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","elem","prevValue","xIndex","yIndex","zIndex","xValue","yValue","zValue","valuesSpan","absoluteSpan","numSubIntervals","initialTime","interval","nextTime","interpolatedTimes","interpolatedValues","inject","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","connProps","rest","append","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","reader","skip","getUint32","endOfContent","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","encoding","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","Zlib","reader2","Inflate","decompress","low","high","nullByte","decodeText","dataArray","infoObject","tempMat","tempEuler","tempVec","getEulerOrder","makeRotationFromEuler","getInverse","setPosition","enums","meshPosition","colliderScale","box","distanceMap","state","watch","observer","els","collisions","handleHit","handleHitEnd","MutationObserver","observe","childList","subtree","disconnect","objectEls","querySelectorAll","Box3","colliderRadius","scaleVec","getWorldScale","extent","isEntity","setFromObject","getSize","getCenter","targetEl","addState","removeState","_extendStatics","NOW$1","process","hrtime","getTime","_tweens","_tweensAddedDuringUpdate","getAll","tweenId","removeAll","tween","getId","preserve","tweenIds","Easing","Linear","None","amount","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce","Interpolation","fn","Utils","pw","bn","Bernstein","CatmullRom","p0","fc","Factorial","v0","Sequence","nextId","_nextId","Tween","_object","_group","TWEEN","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_id","_isChainStopped","isPlaying","isPaused","properties","_swapEndStartRepeatValues","_setupProperties","startValue","startValueIsArray","propType","isInterpolationList","endValues","_handleRelativeValue","reverse","stop","stopChainedTweens","_onStopCallback","Infinity","resume","numChainedTweens","delay","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","tweens","_i","onStart","_onStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","elapsed","_updateProperties","isFinite","startIsArray","endIsArray","charAt","__extends","setPrototypeOf","__proto__","__","_super","Main","createLayout","graph","physicsSettings","createQuadTree","createBounds","createDragForce","createSpringForce","integrator","getIntegrator","createBody","get2dLayout","nativeKeyboardEvent","KeyboardEvent","DOM_KEY_LOCATION_STANDARD","DOM_KEY_LOCATION_LEFT","DOM_KEY_LOCATION_RIGHT","DOM_KEY_LOCATION_NUMPAD","STANDARD","LEFT","RIGHT","NUMPAD","contains","ss","String","os","platform","userAgent","browser","vendor","browser_os","mergeIf","baseTable","select","table","keyCode","keyCodeToInfoTable","code","keyCap","location","keyIdentifierTable","locationTable","codeToKeyTable","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","OSLeft","OSRight","NumpadEnter","Space","Digit0","shiftKey","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd","NumpadComma","NumpadSubtract","NumpadDecimal","NumpadDivide","Semicolon","Equal","Comma","Minus","Period","Slash","Backquote","BracketLeft","Backslash","BracketRight","Quote","IntlBackslash","keyFixTable","Esc","Nonconvert","Left","Up","Right","Down","Del","Menu","MediaNextTrack","MediaPreviousTrack","SelectMedia","HalfWidth","FullWidth","RomanCharacters","Crsel","Exsel","Zoom","codeTable","nativeLocation","keyInfoForEvent","which","keyInfo","keyLocation","keyIdentifier","entry","define","defineProperty","desc","getOwnPropertyDescriptor","queryKeyCap","locale","identifyKey","ResizeObserverBoxOptions","resizeObservers","msg","trigger","DOMRectReadOnly","freeze","toJSON","_a","fromRect","rectangle","isSVG","SVGElement","isHidden","getBBox","_b","offsetWidth","offsetHeight","getClientRects","isElement","ownerDocument","defaultView","Element","cache","WeakMap","scrollRegexp","verticalRegexp","IE","test","parseDimension","pixel","inlineSize","blockSize","switchSizes","zeroBoxes","devicePixelContentBoxSize","borderBoxSize","contentBoxSize","contentRect","forceRecalculation","cs","getComputedStyle","svg","ownerSVGElement","removePadding","boxSizing","writingMode","canScrollVertically","overflowY","canScrollHorizontally","overflowX","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","horizontalPadding","verticalPadding","horizontalBorderArea","borderLeftWidth","verticalBorderArea","horizontalScrollbarThickness","clientHeight","verticalScrollbarThickness","clientWidth","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","devicePixelRatio","observedBox","DEVICE_PIXEL_CONTENT_BOX","BORDER_BOX","depth","shallowestDepth","ro","activeTargets","entries","ot","targetDepth","lastReportedSize","callbacks_1","skippedTargets","observationTargets","isActive","some","ErrorEvent","message","createEvent","initEvent","dispatchEvent","queueMicroTask","toggle_1","el_1","createTextNode","cb","characterData","watching","observerConfig","scheduled","scheduler","Scheduler","stopped","listener","schedule","run","until","elementsHaveResized","requestAnimationFrame","updateCount","ResizeObservation","CONTENT_BOX","tagName","isReplacedElement","display","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","ResizeObserverController","firstObservation","unobserve","lastObservation","ResizeObserver","ForceGraph2D","require","SearchGraph","indexQuery","useStaticQuery","siteSearchIndex","ref","useRef","useState","setWidth","setHeight","useMemo","useEffect","current","useDimensions","viewRef","viewWidth","graphData","setGraphData","setResults","highlightLinks","setHighlightLinks","Index","d3Force","forceCollide","search","useCallback","query","expand","documentStore","getDoc","tmpNodes","newNodes","newTags","tags","flat","includes","currentNodes","title","slug","description","kebabCase","tag","className","class","placeholder","onChange","backgroundColor","d3VelocityDecay","linkCurvature","nodeLabel","onNodeClick","open","navigate","onNodeHover","linkHoverPrecision","linkWidth","linkColor","nodeCanvasObject","globalScale","fontSize","padding","linePadding","font","maxWidth","wrap","words","widths","measureText","lines","word","finalWidth","measures","getTextWithMeasures","fillStyle","fillRect","textAlign","textBaseline","fillText","enableZoomPanInteraction","SearchGraphPage","Layout","headerConfig","physicsSimulator","createSimulator","nodeMass","nodeBodies","springs","bodiesCount","springTransform","initBody","initLink","onGraphChanged","wasStable","lastMove","isStable","isStableNow","getNodePosition","getInitializedBody","setNodePosition","invalidateBBox","getLinkPosition","getGraphRect","forEachBody","bodyId","pinNode","isPinned","isNodePinned","dispose","getBody","getSpring","simulator","change","releaseNode","releaseLink","neighbors","maxNeighbors","otherBody","getNeighborBodies","getBestNewBodyPosition","addBodyAt","updateBodyMass","isNodeOriginallyPinned","addSpring","removeSpring","Vector2d","Vector3d","sx","sy","sz","initialize","tree","xm","xp","_root","leaf","x0","_x0","_x1","_x","defaultX","binarytree","Binarytree","NaN","addAll","leaf_copy","treeProto","cover","xz","visit","find","halves","retainer","previous","visitAfter","ym","zm","yp","zp","deep","y0","_y0","z0","_z0","_y1","_z1","_y","_z","defaultY","defaultZ","octree","Octree","yz","zz","z3","octs","nodeById","strengths","distances","nDim","bias","strength","constant","iterations","alpha","vx","jiggle","vy","vz","initializeStrength","initializeDistance","initNodes","numDimensions","initialAngleRoll","initialAngleYaw","simulation","_alpha","_alphaMin","_alphaDecay","_alphaTarget","_velocityDecay","forces","stepper","timer","dispatch","_nodes","initializeNodes","cbrt","rollAngle","yawAngle","initializeForce","restart","alphaMin","alphaDecay","alphaTarget","velocityDecay","args","distanceMin2","distanceMax2","theta2","quadtree","accumulate","treeNode","numChildren","arg1","arg2","arg3","distanceMin","distanceMax","radiuses","coords","coordlen","newargs","higher","dimlen","_linear","svgToBeziers","getABC","B","E","u","um","A","SVGtoBeziers","quadraticFromPoints","abc","cubicFromPoints","selen","lx","ly","bx1","by1","bx2","by2","e1","e2","nc1","nc2","getUtils","toSVG","relative","last","setRatios","_lut","verify","print","coordDigest","_print","newprint","computedirection","clockwise","derivative","getLUT","steps","lut","hits","project","ft","raise","pim","np","__normal3","__normal2","r1","r2","q1","hull","pt","_p","span","extrema","mfn","overlaps","lbbox","tbbox","nv","simple","n1","n2","segment","pass1","pass2","distanceFn","ov","rc","outline","d3","d4","reduced","fcurves","bcurves","alen","tlen","graduated","linearDistanceFunction","slen","fs","fe","bs","be","ls","le","outlineshapes","shapes","lineIntersects","curveintersects","selfintersects","arcs","errorThreshold","_iterate","_error","np1","circles","safety","t_s","t_e","np2","np3","prev_arc","curr_good","prev_good","t_m","prev_e","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_e","_s","err","_iterableToArrayLimit","_nonIterableRest","Prop","_ref","_ref$default","defaultVal","_ref$triggerUpdate","triggerUpdate","_ref$onChange","newVal","Constructor","_classCallCheck","_ref2","_ref2$stateInit","stateInit","_ref2$props","rawProps","_ref2$methods","methods","_ref2$aliases","aliases","_ref2$init","initFn","_ref2$update","updateFn","initialised","changedProps","comp","nodeElement","initStatic","digest","_ref3","_ref3$triggerUpdate","redigest","_ref3$onChange","_ref3$defaultVal","curVal","getSetProp","methodName","_methods$methodName","_len","_key","_ref4","_ref5","alias","resetProps","_rerender","boundingBox","getBestNewPosition","graphRect","baseX","baseY","baseZ","LoopMode","once","LoopOnce","LoopRepeat","pingpong","LoopPingPong","regExpEscape","clampWhenFinished","crossFadeDuration","loop","repetitions","timeScale","mixer","activeActions","AnimationMixer","action","loopDelta","stopAllAction","diff","stopAction","playAction","setDuration","setLoop","setEffectiveTimeScale","fadeOut","re","RegExp","clipAction","fadeIn","anObject","SPECIES","wellKnownSymbol","O","defaultConstructor","normalise","makeBezier","term","cvalues","terms","matcher","ARGS","getRoot","instruction","op","lop","instructions","instructionLength","cx","cy","cx2","cy2","normalized","applyEnvMap","materialNames","needsUpdate","multiple","enableBackground","CubeTextureLoader","object3dsetHandler","oldData","addedMaterialNames","removedMaterialNames","maintainedMaterialNames","setBackground","background","requireObjectCoercible","whitespace","ltrim","rtrim","createMethod","TYPE","$this","string","targetHasIt","optionsValueType","_defineProperty","enumerable","configurable","writable","_toConsumableArray","arr2","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","omit","keySet","_typeof","_unsupportedIterableToArray","_arrayLikeToArray","minLen","kapsuleComponent","comboParam","wrapperElementType","methodNames","initPropNames","_ref$wrapperElementTy","_ref$nodeMapper","nodeMapper","_ref$methodNames","_ref$initPropNames","domEl","_useState2","prevProps","setPrevProps","configOptions","_destructor","_call","method","dynamicProps","_len2","_key2","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","_objectSpread2","getOwnPropertyDescriptors","defineProperties","css","insertAt","head","style","firstChild","appendChild","styleSheet","cssText","styleInject","container","jsonUrl","dagMode","dagLevelDistance","dagNodeFilter","onDagError","showNavInfo","nodeRelSize","nodeDesc","onNodeCenterHover","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkLabel","linkDesc","onLinkCenterHover","linkVisibility","linkAutoColorBy","linkOpacity","linkResolution","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AlphaDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop","aframeComp","forcegraph","returnVal","domNode","innerHTML","navInfo","cameraG","sky","passThroughProps","newProps","_ref7","_ref8","yOffset","glScale","_ref2$markerAttrs","markerAttrs","preset","arMarker","cameraEntity","_ref6","_ref10","_ref11","DragControls","_objects","_camera","_domElement","isCamera","temp","_plane","_raycaster","_mouse","_offset","_intersection","_selected","_hovered","activate","onDocumentMouseMove","onDocumentMouseDown","onDocumentMouseCancel","onDocumentTouchMove","onDocumentTouchStart","onDocumentTouchEnd","deactivate","rect","getBoundingClientRect","clientX","clientY","setFromCamera","intersectPlane","intersectObjects","setFromNormalAndCoplanarPoint","getWorldDirection","changedTouches","setObjects","notify","domElement","STATE","screen","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","mouseButtons","ROTATE","MIDDLE","ZOOM","PAN","lastPosition","lastZoom","_state","_keyState","_eye","_movePrev","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","position0","up0","up","zoom0","zoom","changeEvent","startEvent","endEvent","handleResize","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","mouseChange","objectUp","pan","getMouseOnScreen","pageX","pageY","getMouseOnCircle","keydown","keyup","mousedown","stopPropagation","button","mousemove","mouseup","mousewheel","deltaMode","deltaY","touchstart","touchmove","touchend","contextmenu","rotateCamera","crossVectors","setFromAxisAngle","applyQuaternion","zoomCamera","factor","isPerspectiveCamera","isOrthographicCamera","updateProjectionMatrix","panCamera","lengthSq","scale_x","scale_y","cross","checkDistances","addVectors","distanceToSquared","quat","quatInverse","lastQuaternion","twoPI","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","enableRotate","enablePan","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","UP","BOTTOM","DOLLY","ONE","TWO","DOLLY_PAN","getPolarAngle","spherical","getAzimuthalAngle","saveState","NONE","setFromUnitVectors","setFromVector3","rotateLeft","sphericalDelta","makeSafe","addScaledVector","panOffset","setFromSpherical","zoomChanged","EPS","onContextMenu","onMouseDown","onMouseWheel","onTouchMove","onMouseMove","onMouseUp","onKeyDown","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","deltaX","targetDistance","tan","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","handleMouseDownPan","handleTouchStartRotate","handleTouchStartPan","handleTouchStartDolly","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","mouseAction","focus","handleMouseDownDolly","ctrlKey","metaKey","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","tabIndex","FullScreenQuad","movementSpeed","rollSpeed","dragToLook","autoForward","tmpQuaternion","mouseStatus","moveState","down","pitchUp","pitchDown","yawLeft","yawRight","rollLeft","rollRight","moveVector","rotationVector","altKey","movementSpeedMultiplier","updateMovementVector","updateRotationVector","getContainerDimensions","halfWidth","halfHeight","delta","moveMult","rotMult","translateX","translateY","translateZ","offsetLeft","offsetTop","_mousedown","_mousemove","_mouseup","_keydown","_keyup","CopyShader","uniforms","vertexShader","fragmentShader","Pass","needsSwap","renderToScreen","setSize","render","_mesh","renderer","shader","textureID","defines","fsQuad","writeBuffer","readBuffer","setRenderTarget","autoClearColor","autoClearDepth","autoClearStencil","writeValue","clearValue","context","getContext","setMask","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","renderTarget","minFilter","magFilter","stencilBuffer","_pixelRatio","getPixelRatio","_width","_height","renderTarget1","renderTarget2","passes","copyPass","clock","swapBuffers","addPass","pass","insertPass","isLastEnabledPass","passIndex","deltaTime","getDelta","currentRenderTarget","getRenderTarget","maskActive","NOTEQUAL","effectiveWidth","effectiveHeight","setPixelRatio","pixelRatio","overrideMaterial","clearColor","clearAlpha","clearDepth","_extends","oldClearColor","oldClearAlpha","oldOverrideMaterial","oldAutoClear","autoClear","getClearColor","getHex","getClearAlpha","setClearColor","_getPrototypeOf","getPrototypeOf","_setPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Parent","Class","_cache","Wrapper","_Error","PolishedError","ReferenceError","_assertThisInitialized","colorToInt","convertToInt","red","green","blue","hslToRgb","hue","saturation","lightness","convert","huePrime","chroma","secondComponent","lightnessModification","namedColorMap","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","hexRegex","hexRgbaRegex","reducedHexRegex","reducedRgbaHexRegex","rgbRegex","rgbaRegex","hslRegex","hslaRegex","parseToRgb","normalizedColor","normalizedColorName","nameToHex","toFixed","rgbMatched","exec","rgbaMatched","hslMatched","rgbColorString","hslRgbMatched","hslaMatched","_rgbColorString","_hslRgbMatched","reduceHexValue","numberToHex","hex","rgb","rgba","firstValue","secondValue","thirdValue","fourthValue","rgbValue","curry","curried","acc","combined","guard","lowerBoundary","upperBoundary","opacify","parsedColor","curriedOpacify","three","WebGLRenderer","SphereGeometry","BackSide","EventDispatcher","MOUSE","Spherical","Clock","prevWidth","prevHeight","backgroundImageUrl","onBackgroundImageLoaded","skyRadius","enablePointerInteraction","hoverObj","toolTipElem","lineHoverPrecision","hoverOrderComparator","hoverFilter","tooltipContent","hoverDuringDrag","clickAfterDrag","onHover","onClick","onRightClick","controls","postProcessingComposer","topObject","isPointerDragging","intersectingObjects","pointerPos","topIntersect","intersectionPoint","getPointerPos","_state$pointerPos","cameraPosition","transitionDuration","finalPos","finalLookAt","camPos","camLookAt","getLookAt","setCameraPos","setLookAt","zoomToFit","bboxArgs","fitToBbox","getBbox","center","maxBoxSide","coordType","paddedFov","fitHeightDistance","atan","fitWidthDistance","newCameraPosition","objFilter","objs","expandByObject","getScreenCoords","vec","relCoords","params","tbControls","_ref4$controlType","controlType","_ref4$rendererConfig","rendererConfig","_ref4$waitForLoadComp","waitForLoadComplete","orbit","trackball","fly","classList","evType","ev","pressure","movementX","movementY","scrollLeft","scrollTop","antialias","controlsEngaged","controlsDragging","skysphere","visible","loadComplete","far","finishLoad","linkKapsule","kapsulePropName","kapsuleType","dummyK","linkProp","linkMethod","kapsuleInstance","bindFG","linkedFGProps","linkedFGMethods","bindRenderObjs","linkedRenderObjsProps","linkedRenderObjsMethods","graph2ScreenCoords","renderObjs","enableNavigationControls","enable","enableNodeDrag","onNodeDrag","onNodeDragEnd","onNodeRightClick","onLinkClick","onLinkRightClick","onLinkHover","onBackgroundClick","onBackgroundRightClick","_state$forceGraph","forceGraph","getGraphBbox","pauseAnimation","animationFrameRequestId","cancelAnimationFrame","resumeAnimation","_animationCycle","tickFrame","roDomNode","infoElem","lastSetCameraZ","onLoading","onFinishLoading","onFinishUpdate","_dragControls","curNodeDrag","__initialFixedPos","__disposeControlsAfterDrag","dragControls","__threeObj","__data","__initialPos","newPos","translate","d3AlphaTarget","resetCountdown","__dragged","initFixedPos","initPos","getGraphObj","aObj","bObj","isNode","__graphObjType","graphObj","prevObjType","prevObjData","objType","objData","none","selector","EnterNode","datum","namespaceURI","_next","_parent","__data__","bindIndex","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","ascending","xhtml","xlink","xmlns","prefix","namespaces","space","local","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","propertyRemove","propertyConstant","propertyFunction","classArray","ClassList","_node","_names","classedAdd","names","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","nextSibling","lower","previousSibling","creatorInherit","uri","createElementNS","creatorFixed","namespace","constantNull","selection_cloneShallow","cloneNode","selection_cloneDeep","filterEvents","mouseenter","mouseleave","filterContextListener","contextListener","related","relatedTarget","compareDocumentPosition","event1","event0","parseTypenames","typenames","onRemove","typename","__on","capture","onAdd","CustomEvent","bubbles","cancelable","dispatchConstant","dispatchFunction","Selection","_groups","_parents","subgroups","subnode","subgroup","selectAll","matches","each","enterGroup","updateGroup","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","groups0","groups1","selection","merges","group0","group1","compareNode","compare","sortgroups","sortgroup","getAttributeNS","classed","html","creator","before","DragEvent","identifier","defaultFilter","defaultContainer","defaultSubject","defaultTouchable","maxTouchPoints","_createForOfIteratorHelper","allowArrayLike","it","F","normalCompletion","didErr","_e2","return","valueof","_step","_iterator","_step2","_iterator2","_value","_defineProperties","descriptor","rgb2Int","checksum","csBits","_default","registry","protoProps","staticProps","padStart","str","_tinyColor$toRgb","toRgb","initRange","domain","range","implicit","autoColorScale","ordinal","unknown","autoColorObjects","colorByAccessor","colorField","CanvasForceGraph","engineRunning","nodeCanvasObjectMode","linkLineDash","linkCanvasObject","linkCanvasObjectMode","forceLayout","isShadow","forceName","forceFn","d3ReheatSimulation","cntTicks","startTickTime","getLength","getRelPos","getVisibility","getColor","getNodeVal","getWidth","getLineDash","getCurvature","getLinkCanvasObjectMode","padAmount","visibleLinks","__controlPoints","cp","beforeCustomLinks","afterCustomLinks","defaultPaintLinks","replaceCustomLinks","otherCustomLinks","after","save","restore","linksPerColor","linksPerWidth","lineColor","linesPerLineDash","lineWidth","lineDashSegments","beginPath","moveTo","lineTo","strokeStyle","setLineDash","stroke","paintLinks","arrowLength","startR","endR","arrowRelPos","arrowColor","arrowHalfWidth","bzLine","getCoordsAlongLine","lineLen","posAlongLine","arrowHead","arrowTail","arrowTailVertex","arrowTailAngle","fill","getNumPhotons","getSpeed","getDiameter","numCyclePhotons","__photons","particleSpeed","photons","photonR","photonColor","cyclePhotonIdx","needsCleanup","photon","singleHop","__singleHop","__progressRatio","photonPosRatio","paintPhotons","getVal","getNodeCanvasObjectMode","visibleNodes","paintNodes","emitParticle","canvasCtx","linkParticlesAccessor","numPhotons","linkForce","nodeDepths","idAccessor","_ref2$nodeFilter","nodeFilter","_ref2$onLoopError","onLoopError","loopIds","out","sourceId","getNodeId","targetId","sourceNode","targetNode","foundLoops","currentDepth","_ret","foundLoop","every","getDagDepths","maxDepth","getFFn","fix","invert","fxFn","fyFn","nodeDepth","kapsulePropNames","propNames","returnVals","bindBoth","linkedProps","linkedMethods","adjustCanvasSize","curWidth","curHeight","pxScale","shadowCanvas","translateBy","__baseElem","resetTransform","pxRatio","setTransform","clearCanvas","clearRect","info","cur","colorTracker","lookup","__indexColor","register","shadowGraph","onZoom","onZoomEnd","stopAnimation","screen2GraphCoords","centerAt","setCenter","translateTo","getZoom","setZoom","scaleTo","zoomK","getR","nodesPos","lastSetZoom","shadowCtx","mousedownx","mousedowny","mousemoving","touchending","touchable","gestures","listeners","clickDistance2","drag","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mouse","view","mousemoved","mouseupped","nodrag","noevent","touch","that","sublisteners","clickDistance","__initialDragPos","dragPos","scaleExtent","refreshShadowCanvas","animate","px","getImageData","prevObj","visibility","commonPropTypes","number","arrayOf","isRequired","oneOfType","func","bool","pointerBasedPropTypes","threeBasedPropTypes","ForceGraph2DPropTypes","ForceGraph3DPropTypes","ForceGraphVRPropTypes","ForceGraphARPropTypes","ForceGraphVR","displayName","propTypes","ForceGraphAR","ForceGraph3D","trimRight","tinyCounter","mathRound","mathMin","mathMax","mathRandom","tinycolor","opts","named","matchers","hsl","h","hsla","hsv","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","convertToPercentage","mod","hsvToRgb","hue2rgb","boundAlpha","inputToRGB","_originalInput","_r","_g","_roundA","_format","_gradientType","gradientType","_ok","_tc_id","rgbToHsl","rgbToHsv","rgbToHex","allow3Char","pad2","rgbaToArgbHex","convertDecimalToHex","_desaturate","toHsl","clamp01","_saturate","_greyscale","desaturate","_lighten","_brighten","_darken","_spin","_complement","_triad","_tetrad","_splitcomplement","_analogous","slices","part","_monochromatic","toHsv","modification","isDark","getBrightness","isLight","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","setAlpha","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","_applyModification","lighten","brighten","darken","saturate","greyscale","spin","_applyCombination","analogous","complement","monochromatic","splitcomplement","triad","tetrad","fromRatio","newColor","equals","color1","color2","mix","rgb1","rgb2","readability","isReadable","wcag2","wcag2Parms","parms","level","validateWCAG2Parms","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","burntsienna","flipped","flip","isOnePointZero","processPercent","isPercentage","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","accessorFn","ThreeForceGraph","parseJson","parseFn","geval","eval","parseAccessor","function","refresh","infoEl","tooltipEl","subTooltipEl","cameraEl","cameraObj","evt","elData","td","centerRaycaster","linePrecision","GRABBED_STATE","grabbing","hitEl","constraint","onHit","onGripOpen","onGripClose","removeConstraint","is","LockConstraint","addConstraint","vector2","clampedEnd","constrainToNavMesh","velocityCtrl","heading","navGroup","navNode","hasLoaded","injectControls","updateVelocityCtrl","updateVelocity","control","getPositionDelta","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","freeGlobal","freeSelf","objectToString","nativeMax","nativeMin","debounce","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","thisArg","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","remainingWait","debounced","isInvoking","toNumber","isObject","cancel","flush","isObjectLike","isSymbol","other","isBinary","localKeys","onKeyUp","blur","onBlur","attachEventListeners","getKeys","ArrowUp","ArrowLeft","ArrowDown","ArrowRight","shouldCaptureKeyEvent","isPressed","isProxied","getKeyboard","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","dataBindDiff","existingObjs","_ref3$objBindAttr","objBindAttr","_ref3$dataBindAttr","dataBindAttr","_ref3$purge","purge","isObjValid","removeObjs","prevD","prevById","nextById","byId","prevSet","nextSet","diffArrays","nextD","appendObj","removeObj","_ref7$createObj","createObj","_ref7$updateObj","updateObj","_ref7$exitObj","exitObj","_ref7$objBindAttr","_ref7$dataBindAttr","dataDiffOptions","_dataBindDiff","newObjs","createObjs","updateObjs","_inherits","subClass","superClass","_construct","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","deallocate","materialDispose","emptyObject","childObj","threeDigest","_ref$objFilter","SphereBufferGeometry","CylinderBufferGeometry","TubeBufferGeometry","ConeBufferGeometry","QuadraticBezierCurve3","CubicBezierCurve3","ngraph","forcelayout","forcelayout3d","setAttributeFn","applyMatrix4Fn","applyMatrix4","threeForcegraph","kapsule","baseClass","initKapsuleWithSelf","FromKapsule","_baseClass","__kapsuleInstance","_this$__kapsuleInstan","fromKapsule","fetchingJson","numDim","chargeForce","d3ForceLayout","eraseDimension","_flushObjects","arrowRelPosAccessor","arrowLengthAccessor","nodeValAccessor","particleSpeedAccessor","isD3Sim","layout","linkWidthAccessor","linkCurvatureAccessor","linkCurveRotationAccessor","linkThreeObjectExtendAccessor","lineObj","__lineObj","vStart","vEnd","curveRotation","vLine","applyAxisAngle","divideScalar","endAngle","startAngle","__curve","calcLinkCurve","extendedObj","setFromPoints","linePos","computeBoundingSphere","_geometry","makeRotationX","localToWorld","layoutTick","arrowObj","__arrowObj","getPosAlongLine","getPoint","iplt","headVec","cyclePhotons","__photonsObj","singleHopPhotons","__singleHopPhotonsObj","getPhotonPos","__linkThreeObjType","graphScene","particleWidthAccessor","numSegments","particleGeometry","linkColorAccessor","particleColorAccessor","materialColor","particleMaterial","bboxes","getBboxes","computeBoundingBox","bb","threeObj","hasAnyPropChanged","propList","customObjectAccessor","customObjectExtendAccessor","valAccessor","colorAccessor","visibilityAccessor","sphereGeometries","sphereMaterials","customObj","extendObj","__graphDefaultObj","widthSegments","_customObjectAccessor","_customObjectExtendAccessor","customMaterialAccessor","_visibilityAccessor","_colorAccessor","widthAccessor","cylinderGeometries","lambertLineMaterials","basicLineMaterials","defaultObj","lineGeometry","renderOrder","updObj","useCylinder","radiusTop","customMaterial","materialType","lineMaterials","depthWrite","arrowColorAccessor","coneGeometry","rotateX","particlesAccessor","particleMaterials","particleGeometries","curPhoton","fzFn","_graph","ocean","density","amplitude","amplitudeVariance","speedVariance","PlaneGeometry","mergeVertices","waves","ang","amp","shading","FlatShading","vprops","verts","verticesNeedUpdate","_toPropertyKey","arg","hint","prim","toPrimitive","res","_toPrimitive","keyAccessors","multiItem","flattenKeys","keyAccessor","isProp","indexedResult","iterObj","itemVal","_itemVal","propVal","flatten","accKeys","vals","iterable","rendererSystem","colladaModel","applyColorCorrection","details","IS_PURE","NativePromise","fails","getBuiltIn","speciesConstructor","promiseResolve","redefine","real","onFinally","isFunction","point1","point2","immediate","timestamp","later","callNow","fetchScript","loadLoader","loaderPromise","GLTFLoader","_this2","gltfModel","computeCentroids","faces","centroid","roundNumber","sample","mergeVertexIds","setPolygonCentroid","vertexIds","cleanPolygon","angleTo","neighbours","isConvex","isPointInPoly","isVectorInPolygon","triarea2","vequal","scoreFunction","sinkDown","bubbleUp","rescoreElement","cost","visited","cleanUp","heap","heuristic","buildZone","_buildNavigationMesh","_buildPolygonGroups","_getSharedVerticesInOrder","portals","_buildPolygonsFromGeometry","polygons","_buildPolygonNeighbours","faceVertexUvs","stringPull","zones","getRandomNode","Plane","Triangle","setFromCoplanarPoints","projectPoint","closestPointToPoint","I","Spring","integrate","quadTree","bounds","springForce","dragForce","bboxNeedsUpdate","publicApi","accumulateForces","movement","springCoefficient","getTotalMovement","specifier","enableNegX","enablePosX","enableNegZ","enablePosZ","zVel","xVel","onAxisMove","isMoving","canRecordAxis","startingAxisData","handleSwipeAxis","handleTouchAxis","axisData","velX","velZ","absChangeZ","VERSION","TAU","DEG_TO_RAD","RAD_TO_DEG","SQRT3","TILE","ENT","STR","HEX","SQR","ABS","tiles","tileGroup","overlay","finder","AStarFinder","setGrid","setEntityOnTile","cellToPixel","cell","heightOffset","tile","entity","addTile","snapTileToGrid","removeTile","removeAllTiles","getTileAtCell","cellToHash","cells","snapToGrid","pixelToCell","getRandomTile","Tools","randomInt","generateOverlay","generateTiles","Cell","userData","walkable","_calcCost","_priority","_visited","uniqueID","LinkedList","generateID","cellSize","numCells","extrudeSettings","autogenerated","_createVertex","cellShape","Shape","autoClose","cellGeo","cellShapeGeo","ShapeGeometry","_cellWidth","_cellLength","_hashDelimeter","_directions","_diagonals","_list","_vec3","_cel","_conversionVec","_geoCache","_matCache","TWO_THIRDS","_cubeRound","getCellAt","getNeighbors","getRandomCell","clearPath","generateTile","ExtrudeGeometry","Tile","tileScale","bevelEnabled","bevelSegments","bevelSize","bevelThickness","generateTilePoly","rotateOnAxis","generate","createPointsGeometry","getJSON","SqrGrid","_fullCellSize","randomizeRGB","objectType","selected","highlight","structure","_emissive","setHex","deselect","toggle","free","first","objToNodeMap","sortArray","swapObjects","showDebug","dump","moveUp","moveDown","_listener","isOnce","signal","execute","detach","isBound","_destroy","_bindings","_prevParams","memorize","_shouldPropagate","validateListener","_registerListener","_indexOfListener","_addBinding","addOnce","getNumListeners","halt","forget","Signal","allowDiagonal","heuristicFilter","PathUtil","backtrace","biBacktrace","pathLength","expandPath","smoothenPath","isWalkableAt","compressPath","imageLoader","LoadingManager","ImageLoader","sourceFile","MouseCaster","rightDown","pickedObject","selectedObject","allHits","wheel","screenPosition","_preventDefault","_onDocumentMouseMove","_onDocumentMouseDown","_onDocumentMouseUp","_onMouseWheel","OVER","OUT","DOWN","CLICK","WHEEL","wheelDelta","sortObjects","fog","lightPosition","cameraType","orthoZoom","contolled","OrbitControls","attachTo","updateOrthoZoom","focusOn","SelectionManager","onSelect","onDeselect","toggleSelection","onMouse","clearSelection","clamp","sign","getShortRotation","isPlainObject","nwf","Performance","elapsedTime","lastChild","radixSort","XMLHttpRequest","onreadystatechange","status","statusText","responseText","setRequestHeader","send","whitespaces","METHOD_NAME","newPromiseCapability","promiseCapability"],"mappings":"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","file":"component---src-pages-search-graph-js-2951036a8ab810ebd187.js","sourcesContent":["/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: {\n      default: true\n    },\n    reverseEnabled: {\n      default: true\n    }\n  },\n  init: function init() {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n  play: function play() {\n    this.addEventListeners();\n  },\n  pause: function pause() {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  addEventListeners: function addEventListeners() {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart);\n    canvasEl.addEventListener('touchend', this.onTouchEnd);\n  },\n  removeEventListeners: function removeEventListeners() {\n    var canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n\n    if (!canvasEl) {\n      return;\n    }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n  },\n  isVelocityActive: function isVelocityActive() {\n    return this.data.enabled && !!this.direction;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n  bindMethods: function bindMethods() {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  },\n  onTouchStart: function onTouchStart(e) {\n    this.direction = -1;\n\n    if (this.data.reverseEnabled && e.touches.length === 2) {\n      this.direction = 1;\n    }\n\n    e.preventDefault();\n  },\n  onTouchEnd: function onTouchEnd(e) {\n    this.direction = 0;\n    e.preventDefault();\n  }\n});","var index = function index(p) {\n  return p instanceof Function ? p // fn\n  : typeof p === 'string' ? function (obj) {\n    return obj[p];\n  } // property name\n  : function (obj) {\n    return p;\n  };\n}; // constant\n\n\nexport default index;","module.exports = InsertStack;\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\n\nfunction InsertStack() {\n  this.stack = [];\n  this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n  isEmpty: function isEmpty() {\n    return this.popIdx === 0;\n  },\n  push: function push(node, body) {\n    var item = this.stack[this.popIdx];\n\n    if (!item) {\n      // we are trying to avoid memory pressure: create new element\n      // only when absolutely necessary\n      this.stack[this.popIdx] = new InsertStackElement(node, body);\n    } else {\n      item.node = node;\n      item.body = body;\n    }\n\n    ++this.popIdx;\n  },\n  pop: function pop() {\n    if (this.popIdx > 0) {\n      return this.stack[--this.popIdx];\n    }\n  },\n  reset: function reset() {\n    this.popIdx = 0;\n  }\n};\n\nfunction InsertStackElement(node, body) {\n  this.node = node; // QuadTree node\n\n  this.body = body; // physical body which needs to be inserted to node\n}","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","/**\n * Represents drag force, which reduces force value on each step by given\n * coefficient.\n *\n * @param {Object} options for the drag force\n * @param {Number=} options.dragCoeff drag force coefficient. 0.1 by default\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge'),\n      expose = require('ngraph.expose');\n\n  options = merge(options, {\n    dragCoeff: 0.02\n  });\n  var api = {\n    update: function update(body) {\n      body.force.x -= options.dragCoeff * body.velocity.x;\n      body.force.y -= options.dragCoeff * body.velocity.y;\n    }\n  }; // let easy access to dragCoeff:\n\n  expose(options, api, ['dragCoeff']);\n  return api;\n};","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\nmodule.exports = THREE.ColladaLoader = function (manager) {\n  this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n};\n\nTHREE.ColladaLoader.prototype = {\n  constructor: THREE.ColladaLoader,\n  crossOrigin: 'anonymous',\n  load: function load(url, onLoad, onProgress, onError) {\n    var scope = this;\n    var path = scope.path === undefined ? THREE.LoaderUtils.extractUrlBase(url) : scope.path;\n    var loader = new THREE.FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.load(url, function (text) {\n      onLoad(scope.parse(text, path));\n    }, onProgress, onError);\n  },\n  setPath: function setPath(value) {\n    this.path = value;\n    return this;\n  },\n  setResourcePath: function setResourcePath(value) {\n    this.resourcePath = value;\n    return this;\n  },\n  options: {\n    set convertUpAxis(value) {\n      console.warn('THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.');\n    }\n\n  },\n  setCrossOrigin: function setCrossOrigin(value) {\n    this.crossOrigin = value;\n    return this;\n  },\n  parse: function parse(text, path) {\n    function getElementsByTagName(xml, name) {\n      // Non recursive xml.getElementsByTagName() ...\n      var array = [];\n      var childNodes = xml.childNodes;\n\n      for (var i = 0, l = childNodes.length; i < l; i++) {\n        var child = childNodes[i];\n\n        if (child.nodeName === name) {\n          array.push(child);\n        }\n      }\n\n      return array;\n    }\n\n    function parseStrings(text) {\n      if (text.length === 0) return [];\n      var parts = text.trim().split(/\\s+/);\n      var array = new Array(parts.length);\n\n      for (var i = 0, l = parts.length; i < l; i++) {\n        array[i] = parts[i];\n      }\n\n      return array;\n    }\n\n    function parseFloats(text) {\n      if (text.length === 0) return [];\n      var parts = text.trim().split(/\\s+/);\n      var array = new Array(parts.length);\n\n      for (var i = 0, l = parts.length; i < l; i++) {\n        array[i] = parseFloat(parts[i]);\n      }\n\n      return array;\n    }\n\n    function parseInts(text) {\n      if (text.length === 0) return [];\n      var parts = text.trim().split(/\\s+/);\n      var array = new Array(parts.length);\n\n      for (var i = 0, l = parts.length; i < l; i++) {\n        array[i] = parseInt(parts[i]);\n      }\n\n      return array;\n    }\n\n    function parseId(text) {\n      return text.substring(1);\n    }\n\n    function generateId() {\n      return 'three_default_' + count++;\n    }\n\n    function isEmpty(object) {\n      return Object.keys(object).length === 0;\n    } // asset\n\n\n    function parseAsset(xml) {\n      return {\n        unit: parseAssetUnit(getElementsByTagName(xml, 'unit')[0]),\n        upAxis: parseAssetUpAxis(getElementsByTagName(xml, 'up_axis')[0])\n      };\n    }\n\n    function parseAssetUnit(xml) {\n      if (xml !== undefined && xml.hasAttribute('meter') === true) {\n        return parseFloat(xml.getAttribute('meter'));\n      } else {\n        return 1; // default 1 meter\n      }\n    }\n\n    function parseAssetUpAxis(xml) {\n      return xml !== undefined ? xml.textContent : 'Y_UP';\n    } // library\n\n\n    function parseLibrary(xml, libraryName, nodeName, parser) {\n      var library = getElementsByTagName(xml, libraryName)[0];\n\n      if (library !== undefined) {\n        var elements = getElementsByTagName(library, nodeName);\n\n        for (var i = 0; i < elements.length; i++) {\n          parser(elements[i]);\n        }\n      }\n    }\n\n    function buildLibrary(data, builder) {\n      for (var name in data) {\n        var object = data[name];\n        object.build = builder(data[name]);\n      }\n    } // get\n\n\n    function getBuild(data, builder) {\n      if (data.build !== undefined) return data.build;\n      data.build = builder(data);\n      return data.build;\n    } // animation\n\n\n    function parseAnimation(xml) {\n      var data = {\n        sources: {},\n        samplers: {},\n        channels: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n        var id;\n\n        switch (child.nodeName) {\n          case 'source':\n            id = child.getAttribute('id');\n            data.sources[id] = parseSource(child);\n            break;\n\n          case 'sampler':\n            id = child.getAttribute('id');\n            data.samplers[id] = parseAnimationSampler(child);\n            break;\n\n          case 'channel':\n            id = child.getAttribute('target');\n            data.channels[id] = parseAnimationChannel(child);\n            break;\n\n          default:\n            console.log(child);\n        }\n      }\n\n      library.animations[xml.getAttribute('id')] = data;\n    }\n\n    function parseAnimationSampler(xml) {\n      var data = {\n        inputs: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'input':\n            var id = parseId(child.getAttribute('source'));\n            var semantic = child.getAttribute('semantic');\n            data.inputs[semantic] = id;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseAnimationChannel(xml) {\n      var data = {};\n      var target = xml.getAttribute('target'); // parsing SID Addressing Syntax\n\n      var parts = target.split('/');\n      var id = parts.shift();\n      var sid = parts.shift(); // check selection syntax\n\n      var arraySyntax = sid.indexOf('(') !== -1;\n      var memberSyntax = sid.indexOf('.') !== -1;\n\n      if (memberSyntax) {\n        //  member selection access\n        parts = sid.split('.');\n        sid = parts.shift();\n        data.member = parts.shift();\n      } else if (arraySyntax) {\n        // array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.\n        var indices = sid.split('(');\n        sid = indices.shift();\n\n        for (var i = 0; i < indices.length; i++) {\n          indices[i] = parseInt(indices[i].replace(/\\)/, ''));\n        }\n\n        data.indices = indices;\n      }\n\n      data.id = id;\n      data.sid = sid;\n      data.arraySyntax = arraySyntax;\n      data.memberSyntax = memberSyntax;\n      data.sampler = parseId(xml.getAttribute('source'));\n      return data;\n    }\n\n    function buildAnimation(data) {\n      var tracks = [];\n      var channels = data.channels;\n      var samplers = data.samplers;\n      var sources = data.sources;\n\n      for (var target in channels) {\n        if (channels.hasOwnProperty(target)) {\n          var channel = channels[target];\n          var sampler = samplers[channel.sampler];\n          var inputId = sampler.inputs.INPUT;\n          var outputId = sampler.inputs.OUTPUT;\n          var inputSource = sources[inputId];\n          var outputSource = sources[outputId];\n          var animation = buildAnimationChannel(channel, inputSource, outputSource);\n          createKeyframeTracks(animation, tracks);\n        }\n      }\n\n      return tracks;\n    }\n\n    function getAnimation(id) {\n      return getBuild(library.animations[id], buildAnimation);\n    }\n\n    function buildAnimationChannel(channel, inputSource, outputSource) {\n      var node = library.nodes[channel.id];\n      var object3D = getNode(node.id);\n      var transform = node.transforms[channel.sid];\n      var defaultMatrix = node.matrix.clone().transpose();\n      var time, stride;\n      var i, il, j, jl;\n      var data = {}; // the collada spec allows the animation of data in various ways.\n      // depending on the transform type (matrix, translate, rotate, scale), we execute different logic\n\n      switch (transform) {\n        case 'matrix':\n          for (i = 0, il = inputSource.array.length; i < il; i++) {\n            time = inputSource.array[i];\n            stride = i * outputSource.stride;\n            if (data[time] === undefined) data[time] = {};\n\n            if (channel.arraySyntax === true) {\n              var value = outputSource.array[stride];\n              var index = channel.indices[0] + 4 * channel.indices[1];\n              data[time][index] = value;\n            } else {\n              for (j = 0, jl = outputSource.stride; j < jl; j++) {\n                data[time][j] = outputSource.array[stride + j];\n              }\n            }\n          }\n\n          break;\n\n        case 'translate':\n          console.warn('THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n          break;\n\n        case 'rotate':\n          console.warn('THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n          break;\n\n        case 'scale':\n          console.warn('THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n          break;\n      }\n\n      var keyframes = prepareAnimationData(data, defaultMatrix);\n      var animation = {\n        name: object3D.uuid,\n        keyframes: keyframes\n      };\n      return animation;\n    }\n\n    function prepareAnimationData(data, defaultMatrix) {\n      var keyframes = []; // transfer data into a sortable array\n\n      for (var time in data) {\n        keyframes.push({\n          time: parseFloat(time),\n          value: data[time]\n        });\n      } // ensure keyframes are sorted by time\n\n\n      keyframes.sort(ascending); // now we clean up all animation data, so we can use them for keyframe tracks\n\n      for (var i = 0; i < 16; i++) {\n        transformAnimationData(keyframes, i, defaultMatrix.elements[i]);\n      }\n\n      return keyframes; // array sort function\n\n      function ascending(a, b) {\n        return a.time - b.time;\n      }\n    }\n\n    var position = new THREE.Vector3();\n    var scale = new THREE.Vector3();\n    var quaternion = new THREE.Quaternion();\n\n    function createKeyframeTracks(animation, tracks) {\n      var keyframes = animation.keyframes;\n      var name = animation.name;\n      var times = [];\n      var positionData = [];\n      var quaternionData = [];\n      var scaleData = [];\n\n      for (var i = 0, l = keyframes.length; i < l; i++) {\n        var keyframe = keyframes[i];\n        var time = keyframe.time;\n        var value = keyframe.value;\n        matrix.fromArray(value).transpose();\n        matrix.decompose(position, quaternion, scale);\n        times.push(time);\n        positionData.push(position.x, position.y, position.z);\n        quaternionData.push(quaternion.x, quaternion.y, quaternion.z, quaternion.w);\n        scaleData.push(scale.x, scale.y, scale.z);\n      }\n\n      if (positionData.length > 0) tracks.push(new THREE.VectorKeyframeTrack(name + '.position', times, positionData));\n      if (quaternionData.length > 0) tracks.push(new THREE.QuaternionKeyframeTrack(name + '.quaternion', times, quaternionData));\n      if (scaleData.length > 0) tracks.push(new THREE.VectorKeyframeTrack(name + '.scale', times, scaleData));\n      return tracks;\n    }\n\n    function transformAnimationData(keyframes, property, defaultValue) {\n      var keyframe;\n      var empty = true;\n      var i, l; // check, if values of a property are missing in our keyframes\n\n      for (i = 0, l = keyframes.length; i < l; i++) {\n        keyframe = keyframes[i];\n\n        if (keyframe.value[property] === undefined) {\n          keyframe.value[property] = null; // mark as missing\n        } else {\n          empty = false;\n        }\n      }\n\n      if (empty === true) {\n        // no values at all, so we set a default value\n        for (i = 0, l = keyframes.length; i < l; i++) {\n          keyframe = keyframes[i];\n          keyframe.value[property] = defaultValue;\n        }\n      } else {\n        // filling gaps\n        createMissingKeyframes(keyframes, property);\n      }\n    }\n\n    function createMissingKeyframes(keyframes, property) {\n      var prev, next;\n\n      for (var i = 0, l = keyframes.length; i < l; i++) {\n        var keyframe = keyframes[i];\n\n        if (keyframe.value[property] === null) {\n          prev = getPrev(keyframes, i, property);\n          next = getNext(keyframes, i, property);\n\n          if (prev === null) {\n            keyframe.value[property] = next.value[property];\n            continue;\n          }\n\n          if (next === null) {\n            keyframe.value[property] = prev.value[property];\n            continue;\n          }\n\n          interpolate(keyframe, prev, next, property);\n        }\n      }\n    }\n\n    function getPrev(keyframes, i, property) {\n      while (i >= 0) {\n        var keyframe = keyframes[i];\n        if (keyframe.value[property] !== null) return keyframe;\n        i--;\n      }\n\n      return null;\n    }\n\n    function getNext(keyframes, i, property) {\n      while (i < keyframes.length) {\n        var keyframe = keyframes[i];\n        if (keyframe.value[property] !== null) return keyframe;\n        i++;\n      }\n\n      return null;\n    }\n\n    function interpolate(key, prev, next, property) {\n      if (next.time - prev.time === 0) {\n        key.value[property] = prev.value[property];\n        return;\n      }\n\n      key.value[property] = (key.time - prev.time) * (next.value[property] - prev.value[property]) / (next.time - prev.time) + prev.value[property];\n    } // animation clips\n\n\n    function parseAnimationClip(xml) {\n      var data = {\n        name: xml.getAttribute('id') || 'default',\n        start: parseFloat(xml.getAttribute('start') || 0),\n        end: parseFloat(xml.getAttribute('end') || 0),\n        animations: []\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'instance_animation':\n            data.animations.push(parseId(child.getAttribute('url')));\n            break;\n        }\n      }\n\n      library.clips[xml.getAttribute('id')] = data;\n    }\n\n    function buildAnimationClip(data) {\n      var tracks = [];\n      var name = data.name;\n      var duration = data.end - data.start || -1;\n      var animations = data.animations;\n\n      for (var i = 0, il = animations.length; i < il; i++) {\n        var animationTracks = getAnimation(animations[i]);\n\n        for (var j = 0, jl = animationTracks.length; j < jl; j++) {\n          tracks.push(animationTracks[j]);\n        }\n      }\n\n      return new THREE.AnimationClip(name, duration, tracks);\n    }\n\n    function getAnimationClip(id) {\n      return getBuild(library.clips[id], buildAnimationClip);\n    } // controller\n\n\n    function parseController(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'skin':\n            // there is exactly one skin per controller\n            data.id = parseId(child.getAttribute('source'));\n            data.skin = parseSkin(child);\n            break;\n\n          case 'morph':\n            data.id = parseId(child.getAttribute('source'));\n            console.warn('THREE.ColladaLoader: Morph target animation not supported yet.');\n            break;\n        }\n      }\n\n      library.controllers[xml.getAttribute('id')] = data;\n    }\n\n    function parseSkin(xml) {\n      var data = {\n        sources: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'bind_shape_matrix':\n            data.bindShapeMatrix = parseFloats(child.textContent);\n            break;\n\n          case 'source':\n            var id = child.getAttribute('id');\n            data.sources[id] = parseSource(child);\n            break;\n\n          case 'joints':\n            data.joints = parseJoints(child);\n            break;\n\n          case 'vertex_weights':\n            data.vertexWeights = parseVertexWeights(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseJoints(xml) {\n      var data = {\n        inputs: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'input':\n            var semantic = child.getAttribute('semantic');\n            var id = parseId(child.getAttribute('source'));\n            data.inputs[semantic] = id;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseVertexWeights(xml) {\n      var data = {\n        inputs: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'input':\n            var semantic = child.getAttribute('semantic');\n            var id = parseId(child.getAttribute('source'));\n            var offset = parseInt(child.getAttribute('offset'));\n            data.inputs[semantic] = {\n              id: id,\n              offset: offset\n            };\n            break;\n\n          case 'vcount':\n            data.vcount = parseInts(child.textContent);\n            break;\n\n          case 'v':\n            data.v = parseInts(child.textContent);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildController(data) {\n      var build = {\n        id: data.id\n      };\n      var geometry = library.geometries[build.id];\n\n      if (data.skin !== undefined) {\n        build.skin = buildSkin(data.skin); // we enhance the 'sources' property of the corresponding geometry with our skin data\n\n        geometry.sources.skinIndices = build.skin.indices;\n        geometry.sources.skinWeights = build.skin.weights;\n      }\n\n      return build;\n    }\n\n    function buildSkin(data) {\n      var BONE_LIMIT = 4;\n      var build = {\n        joints: [],\n        // this must be an array to preserve the joint order\n        indices: {\n          array: [],\n          stride: BONE_LIMIT\n        },\n        weights: {\n          array: [],\n          stride: BONE_LIMIT\n        }\n      };\n      var sources = data.sources;\n      var vertexWeights = data.vertexWeights;\n      var vcount = vertexWeights.vcount;\n      var v = vertexWeights.v;\n      var jointOffset = vertexWeights.inputs.JOINT.offset;\n      var weightOffset = vertexWeights.inputs.WEIGHT.offset;\n      var jointSource = data.sources[data.joints.inputs.JOINT];\n      var inverseSource = data.sources[data.joints.inputs.INV_BIND_MATRIX];\n      var weights = sources[vertexWeights.inputs.WEIGHT.id].array;\n      var stride = 0;\n      var i, j, l; // procces skin data for each vertex\n\n      for (i = 0, l = vcount.length; i < l; i++) {\n        var jointCount = vcount[i]; // this is the amount of joints that affect a single vertex\n\n        var vertexSkinData = [];\n\n        for (j = 0; j < jointCount; j++) {\n          var skinIndex = v[stride + jointOffset];\n          var weightId = v[stride + weightOffset];\n          var skinWeight = weights[weightId];\n          vertexSkinData.push({\n            index: skinIndex,\n            weight: skinWeight\n          });\n          stride += 2;\n        } // we sort the joints in descending order based on the weights.\n        // this ensures, we only procced the most important joints of the vertex\n\n\n        vertexSkinData.sort(descending); // now we provide for each vertex a set of four index and weight values.\n        // the order of the skin data matches the order of vertices\n\n        for (j = 0; j < BONE_LIMIT; j++) {\n          var d = vertexSkinData[j];\n\n          if (d !== undefined) {\n            build.indices.array.push(d.index);\n            build.weights.array.push(d.weight);\n          } else {\n            build.indices.array.push(0);\n            build.weights.array.push(0);\n          }\n        }\n      } // setup bind matrix\n\n\n      if (data.bindShapeMatrix) {\n        build.bindMatrix = new THREE.Matrix4().fromArray(data.bindShapeMatrix).transpose();\n      } else {\n        build.bindMatrix = new THREE.Matrix4().identity();\n      } // process bones and inverse bind matrix data\n\n\n      for (i = 0, l = jointSource.array.length; i < l; i++) {\n        var name = jointSource.array[i];\n        var boneInverse = new THREE.Matrix4().fromArray(inverseSource.array, i * inverseSource.stride).transpose();\n        build.joints.push({\n          name: name,\n          boneInverse: boneInverse\n        });\n      }\n\n      return build; // array sort function\n\n      function descending(a, b) {\n        return b.weight - a.weight;\n      }\n    }\n\n    function getController(id) {\n      return getBuild(library.controllers[id], buildController);\n    } // image\n\n\n    function parseImage(xml) {\n      var data = {\n        init_from: getElementsByTagName(xml, 'init_from')[0].textContent\n      };\n      library.images[xml.getAttribute('id')] = data;\n    }\n\n    function buildImage(data) {\n      if (data.build !== undefined) return data.build;\n      return data.init_from;\n    }\n\n    function getImage(id) {\n      var data = library.images[id];\n\n      if (data !== undefined) {\n        return getBuild(data, buildImage);\n      }\n\n      console.warn('THREE.ColladaLoader: Couldn\\'t find image with ID:', id);\n      return null;\n    } // effect\n\n\n    function parseEffect(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'profile_COMMON':\n            data.profile = parseEffectProfileCOMMON(child);\n            break;\n        }\n      }\n\n      library.effects[xml.getAttribute('id')] = data;\n    }\n\n    function parseEffectProfileCOMMON(xml) {\n      var data = {\n        surfaces: {},\n        samplers: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'newparam':\n            parseEffectNewparam(child, data);\n            break;\n\n          case 'technique':\n            data.technique = parseEffectTechnique(child);\n            break;\n\n          case 'extra':\n            data.extra = parseEffectExtra(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectNewparam(xml, data) {\n      var sid = xml.getAttribute('sid');\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'surface':\n            data.surfaces[sid] = parseEffectSurface(child);\n            break;\n\n          case 'sampler2D':\n            data.samplers[sid] = parseEffectSampler(child);\n            break;\n        }\n      }\n    }\n\n    function parseEffectSurface(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'init_from':\n            data.init_from = child.textContent;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectSampler(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'source':\n            data.source = child.textContent;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectTechnique(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'constant':\n          case 'lambert':\n          case 'blinn':\n          case 'phong':\n            data.type = child.nodeName;\n            data.parameters = parseEffectParameters(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectParameters(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'emission':\n          case 'diffuse':\n          case 'specular':\n          case 'bump':\n          case 'ambient':\n          case 'shininess':\n          case 'transparency':\n            data[child.nodeName] = parseEffectParameter(child);\n            break;\n\n          case 'transparent':\n            data[child.nodeName] = {\n              opaque: child.getAttribute('opaque'),\n              data: parseEffectParameter(child)\n            };\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectParameter(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'color':\n            data[child.nodeName] = parseFloats(child.textContent);\n            break;\n\n          case 'float':\n            data[child.nodeName] = parseFloat(child.textContent);\n            break;\n\n          case 'texture':\n            data[child.nodeName] = {\n              id: child.getAttribute('texture'),\n              extra: parseEffectParameterTexture(child)\n            };\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectParameterTexture(xml) {\n      var data = {\n        technique: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'extra':\n            parseEffectParameterTextureExtra(child, data);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectParameterTextureExtra(xml, data) {\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique':\n            parseEffectParameterTextureExtraTechnique(child, data);\n            break;\n        }\n      }\n    }\n\n    function parseEffectParameterTextureExtraTechnique(xml, data) {\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'repeatU':\n          case 'repeatV':\n          case 'offsetU':\n          case 'offsetV':\n            data.technique[child.nodeName] = parseFloat(child.textContent);\n            break;\n\n          case 'wrapU':\n          case 'wrapV':\n            // some files have values for wrapU/wrapV which become NaN via parseInt\n            if (child.textContent.toUpperCase() === 'TRUE') {\n              data.technique[child.nodeName] = 1;\n            } else if (child.textContent.toUpperCase() === 'FALSE') {\n              data.technique[child.nodeName] = 0;\n            } else {\n              data.technique[child.nodeName] = parseInt(child.textContent);\n            }\n\n            break;\n        }\n      }\n    }\n\n    function parseEffectExtra(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique':\n            data.technique = parseEffectExtraTechnique(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectExtraTechnique(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'double_sided':\n            data[child.nodeName] = parseInt(child.textContent);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildEffect(data) {\n      return data;\n    }\n\n    function getEffect(id) {\n      return getBuild(library.effects[id], buildEffect);\n    } // material\n\n\n    function parseMaterial(xml) {\n      var data = {\n        name: xml.getAttribute('name')\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'instance_effect':\n            data.url = parseId(child.getAttribute('url'));\n            break;\n        }\n      }\n\n      library.materials[xml.getAttribute('id')] = data;\n    }\n\n    function getTextureLoader(image) {\n      var loader;\n      var extension = image.slice((image.lastIndexOf('.') - 1 >>> 0) + 2); // http://www.jstips.co/en/javascript/get-file-extension/\n\n      extension = extension.toLowerCase();\n\n      switch (extension) {\n        case 'tga':\n          loader = tgaLoader;\n          break;\n\n        default:\n          loader = textureLoader;\n      }\n\n      return loader;\n    }\n\n    function buildMaterial(data) {\n      var effect = getEffect(data.url);\n      var technique = effect.profile.technique;\n      var extra = effect.profile.extra;\n      var material;\n\n      switch (technique.type) {\n        case 'phong':\n        case 'blinn':\n          material = new THREE.MeshPhongMaterial();\n          break;\n\n        case 'lambert':\n          material = new THREE.MeshLambertMaterial();\n          break;\n\n        default:\n          material = new THREE.MeshBasicMaterial();\n          break;\n      }\n\n      material.name = data.name;\n\n      function getTexture(textureObject) {\n        var sampler = effect.profile.samplers[textureObject.id];\n        var image = null; // get image\n\n        if (sampler !== undefined) {\n          var surface = effect.profile.surfaces[sampler.source];\n          image = getImage(surface.init_from);\n        } else {\n          console.warn('THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).');\n          image = getImage(textureObject.id);\n        } // create texture if image is avaiable\n\n\n        if (image !== null) {\n          var loader = getTextureLoader(image);\n\n          if (loader !== undefined) {\n            var texture = loader.load(image);\n            var extra = textureObject.extra;\n\n            if (extra !== undefined && extra.technique !== undefined && isEmpty(extra.technique) === false) {\n              var technique = extra.technique;\n              texture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n              texture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n              texture.offset.set(technique.offsetU || 0, technique.offsetV || 0);\n              texture.repeat.set(technique.repeatU || 1, technique.repeatV || 1);\n            } else {\n              texture.wrapS = THREE.RepeatWrapping;\n              texture.wrapT = THREE.RepeatWrapping;\n            }\n\n            return texture;\n          } else {\n            console.warn('THREE.ColladaLoader: Loader for texture %s not found.', image);\n            return null;\n          }\n        } else {\n          console.warn('THREE.ColladaLoader: Couldn\\'t create texture with ID:', textureObject.id);\n          return null;\n        }\n      }\n\n      var parameters = technique.parameters;\n\n      for (var key in parameters) {\n        var parameter = parameters[key];\n\n        switch (key) {\n          case 'diffuse':\n            if (parameter.color) material.color.fromArray(parameter.color);\n            if (parameter.texture) material.map = getTexture(parameter.texture);\n            break;\n\n          case 'specular':\n            if (parameter.color && material.specular) material.specular.fromArray(parameter.color);\n            if (parameter.texture) material.specularMap = getTexture(parameter.texture);\n            break;\n\n          case 'bump':\n            if (parameter.texture) material.normalMap = getTexture(parameter.texture);\n            break;\n\n          case 'ambient':\n            if (parameter.texture) material.lightMap = getTexture(parameter.texture);\n            break;\n\n          case 'shininess':\n            if (parameter.float && material.shininess) material.shininess = parameter.float;\n            break;\n\n          case 'emission':\n            if (parameter.color && material.emissive) material.emissive.fromArray(parameter.color);\n            if (parameter.texture) material.emissiveMap = getTexture(parameter.texture);\n            break;\n        }\n      } //\n\n\n      var transparent = parameters['transparent'];\n      var transparency = parameters['transparency']; // <transparency> does not exist but <transparent>\n\n      if (transparency === undefined && transparent) {\n        transparency = {\n          float: 1\n        };\n      } // <transparent> does not exist but <transparency>\n\n\n      if (transparent === undefined && transparency) {\n        transparent = {\n          opaque: 'A_ONE',\n          data: {\n            color: [1, 1, 1, 1]\n          }\n        };\n      }\n\n      if (transparent && transparency) {\n        // handle case if a texture exists but no color\n        if (transparent.data.texture) {\n          // we do not set an alpha map (see #13792)\n          material.transparent = true;\n        } else {\n          var color = transparent.data.color;\n\n          switch (transparent.opaque) {\n            case 'A_ONE':\n              material.opacity = color[3] * transparency.float;\n              break;\n\n            case 'RGB_ZERO':\n              material.opacity = 1 - color[0] * transparency.float;\n              break;\n\n            case 'A_ZERO':\n              material.opacity = 1 - color[3] * transparency.float;\n              break;\n\n            case 'RGB_ONE':\n              material.opacity = color[0] * transparency.float;\n              break;\n\n            default:\n              console.warn('THREE.ColladaLoader: Invalid opaque type \"%s\" of transparent tag.', transparent.opaque);\n          }\n\n          if (material.opacity < 1) material.transparent = true;\n        }\n      } //\n\n\n      if (extra !== undefined && extra.technique !== undefined && extra.technique.double_sided === 1) {\n        material.side = THREE.DoubleSide;\n      }\n\n      return material;\n    }\n\n    function getMaterial(id) {\n      return getBuild(library.materials[id], buildMaterial);\n    } // camera\n\n\n    function parseCamera(xml) {\n      var data = {\n        name: xml.getAttribute('name')\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'optics':\n            data.optics = parseCameraOptics(child);\n            break;\n        }\n      }\n\n      library.cameras[xml.getAttribute('id')] = data;\n    }\n\n    function parseCameraOptics(xml) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n\n        switch (child.nodeName) {\n          case 'technique_common':\n            return parseCameraTechnique(child);\n        }\n      }\n\n      return {};\n    }\n\n    function parseCameraTechnique(xml) {\n      var data = {};\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n\n        switch (child.nodeName) {\n          case 'perspective':\n          case 'orthographic':\n            data.technique = child.nodeName;\n            data.parameters = parseCameraParameters(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseCameraParameters(xml) {\n      var data = {};\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n\n        switch (child.nodeName) {\n          case 'xfov':\n          case 'yfov':\n          case 'xmag':\n          case 'ymag':\n          case 'znear':\n          case 'zfar':\n          case 'aspect_ratio':\n            data[child.nodeName] = parseFloat(child.textContent);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildCamera(data) {\n      var camera;\n\n      switch (data.optics.technique) {\n        case 'perspective':\n          camera = new THREE.PerspectiveCamera(data.optics.parameters.yfov, data.optics.parameters.aspect_ratio, data.optics.parameters.znear, data.optics.parameters.zfar);\n          break;\n\n        case 'orthographic':\n          var ymag = data.optics.parameters.ymag;\n          var xmag = data.optics.parameters.xmag;\n          var aspectRatio = data.optics.parameters.aspect_ratio;\n          xmag = xmag === undefined ? ymag * aspectRatio : xmag;\n          ymag = ymag === undefined ? xmag / aspectRatio : ymag;\n          xmag *= 0.5;\n          ymag *= 0.5;\n          camera = new THREE.OrthographicCamera(-xmag, xmag, ymag, -ymag, // left, right, top, bottom\n          data.optics.parameters.znear, data.optics.parameters.zfar);\n          break;\n\n        default:\n          camera = new THREE.PerspectiveCamera();\n          break;\n      }\n\n      camera.name = data.name;\n      return camera;\n    }\n\n    function getCamera(id) {\n      var data = library.cameras[id];\n\n      if (data !== undefined) {\n        return getBuild(data, buildCamera);\n      }\n\n      console.warn('THREE.ColladaLoader: Couldn\\'t find camera with ID:', id);\n      return null;\n    } // light\n\n\n    function parseLight(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique_common':\n            data = parseLightTechnique(child);\n            break;\n        }\n      }\n\n      library.lights[xml.getAttribute('id')] = data;\n    }\n\n    function parseLightTechnique(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'directional':\n          case 'point':\n          case 'spot':\n          case 'ambient':\n            data.technique = child.nodeName;\n            data.parameters = parseLightParameters(child);\n        }\n      }\n\n      return data;\n    }\n\n    function parseLightParameters(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'color':\n            var array = parseFloats(child.textContent);\n            data.color = new THREE.Color().fromArray(array);\n            break;\n\n          case 'falloff_angle':\n            data.falloffAngle = parseFloat(child.textContent);\n            break;\n\n          case 'quadratic_attenuation':\n            var f = parseFloat(child.textContent);\n            data.distance = f ? Math.sqrt(1 / f) : 0;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildLight(data) {\n      var light;\n\n      switch (data.technique) {\n        case 'directional':\n          light = new THREE.DirectionalLight();\n          break;\n\n        case 'point':\n          light = new THREE.PointLight();\n          break;\n\n        case 'spot':\n          light = new THREE.SpotLight();\n          break;\n\n        case 'ambient':\n          light = new THREE.AmbientLight();\n          break;\n      }\n\n      if (data.parameters.color) light.color.copy(data.parameters.color);\n      if (data.parameters.distance) light.distance = data.parameters.distance;\n      return light;\n    }\n\n    function getLight(id) {\n      var data = library.lights[id];\n\n      if (data !== undefined) {\n        return getBuild(data, buildLight);\n      }\n\n      console.warn('THREE.ColladaLoader: Couldn\\'t find light with ID:', id);\n      return null;\n    } // geometry\n\n\n    function parseGeometry(xml) {\n      var data = {\n        name: xml.getAttribute('name'),\n        sources: {},\n        vertices: {},\n        primitives: []\n      };\n      var mesh = getElementsByTagName(xml, 'mesh')[0]; // the following tags inside geometry are not supported yet (see https://github.com/mrdoob/three.js/pull/12606): convex_mesh, spline, brep\n\n      if (mesh === undefined) return;\n\n      for (var i = 0; i < mesh.childNodes.length; i++) {\n        var child = mesh.childNodes[i];\n        if (child.nodeType !== 1) continue;\n        var id = child.getAttribute('id');\n\n        switch (child.nodeName) {\n          case 'source':\n            data.sources[id] = parseSource(child);\n            break;\n\n          case 'vertices':\n            // data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];\n            data.vertices = parseGeometryVertices(child);\n            break;\n\n          case 'polygons':\n            console.warn('THREE.ColladaLoader: Unsupported primitive type: ', child.nodeName);\n            break;\n\n          case 'lines':\n          case 'linestrips':\n          case 'polylist':\n          case 'triangles':\n            data.primitives.push(parseGeometryPrimitive(child));\n            break;\n\n          default:\n            console.log(child);\n        }\n      }\n\n      library.geometries[xml.getAttribute('id')] = data;\n    }\n\n    function parseSource(xml) {\n      var data = {\n        array: [],\n        stride: 3\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'float_array':\n            data.array = parseFloats(child.textContent);\n            break;\n\n          case 'Name_array':\n            data.array = parseStrings(child.textContent);\n            break;\n\n          case 'technique_common':\n            var accessor = getElementsByTagName(child, 'accessor')[0];\n\n            if (accessor !== undefined) {\n              data.stride = parseInt(accessor.getAttribute('stride'));\n            }\n\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseGeometryVertices(xml) {\n      var data = {};\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n        data[child.getAttribute('semantic')] = parseId(child.getAttribute('source'));\n      }\n\n      return data;\n    }\n\n    function parseGeometryPrimitive(xml) {\n      var primitive = {\n        type: xml.nodeName,\n        material: xml.getAttribute('material'),\n        count: parseInt(xml.getAttribute('count')),\n        inputs: {},\n        stride: 0,\n        hasUV: false\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'input':\n            var id = parseId(child.getAttribute('source'));\n            var semantic = child.getAttribute('semantic');\n            var offset = parseInt(child.getAttribute('offset'));\n            var set = parseInt(child.getAttribute('set'));\n            var inputname = set > 0 ? semantic + set : semantic;\n            primitive.inputs[inputname] = {\n              id: id,\n              offset: offset\n            };\n            primitive.stride = Math.max(primitive.stride, offset + 1);\n            if (semantic === 'TEXCOORD') primitive.hasUV = true;\n            break;\n\n          case 'vcount':\n            primitive.vcount = parseInts(child.textContent);\n            break;\n\n          case 'p':\n            primitive.p = parseInts(child.textContent);\n            break;\n        }\n      }\n\n      return primitive;\n    }\n\n    function groupPrimitives(primitives) {\n      var build = {};\n\n      for (var i = 0; i < primitives.length; i++) {\n        var primitive = primitives[i];\n        if (build[primitive.type] === undefined) build[primitive.type] = [];\n        build[primitive.type].push(primitive);\n      }\n\n      return build;\n    }\n\n    function checkUVCoordinates(primitives) {\n      var count = 0;\n\n      for (var i = 0, l = primitives.length; i < l; i++) {\n        var primitive = primitives[i];\n\n        if (primitive.hasUV === true) {\n          count++;\n        }\n      }\n\n      if (count > 0 && count < primitives.length) {\n        primitives.uvsNeedsFix = true;\n      }\n    }\n\n    function buildGeometry(data) {\n      var build = {};\n      var sources = data.sources;\n      var vertices = data.vertices;\n      var primitives = data.primitives;\n      if (primitives.length === 0) return {}; // our goal is to create one buffer geometry for a single type of primitives\n      // first, we group all primitives by their type\n\n      var groupedPrimitives = groupPrimitives(primitives);\n\n      for (var type in groupedPrimitives) {\n        var primitiveType = groupedPrimitives[type]; // second, ensure consistent uv coordinates for each type of primitives (polylist,triangles or lines)\n\n        checkUVCoordinates(primitiveType); // third, create a buffer geometry for each type of primitives\n\n        build[type] = buildGeometryType(primitiveType, sources, vertices);\n      }\n\n      return build;\n    }\n\n    function buildGeometryType(primitives, sources, vertices) {\n      var build = {};\n      var position = {\n        array: [],\n        stride: 0\n      };\n      var normal = {\n        array: [],\n        stride: 0\n      };\n      var uv = {\n        array: [],\n        stride: 0\n      };\n      var uv2 = {\n        array: [],\n        stride: 0\n      };\n      var color = {\n        array: [],\n        stride: 0\n      };\n      var skinIndex = {\n        array: [],\n        stride: 4\n      };\n      var skinWeight = {\n        array: [],\n        stride: 4\n      };\n      var geometry = new THREE.BufferGeometry();\n      var materialKeys = [];\n      var start = 0;\n\n      for (var p = 0; p < primitives.length; p++) {\n        var primitive = primitives[p];\n        var inputs = primitive.inputs; // groups\n\n        var count = 0;\n\n        switch (primitive.type) {\n          case 'lines':\n          case 'linestrips':\n            count = primitive.count * 2;\n            break;\n\n          case 'triangles':\n            count = primitive.count * 3;\n            break;\n\n          case 'polylist':\n            for (var g = 0; g < primitive.count; g++) {\n              var vc = primitive.vcount[g];\n\n              switch (vc) {\n                case 3:\n                  count += 3; // single triangle\n\n                  break;\n\n                case 4:\n                  count += 6; // quad, subdivided into two triangles\n\n                  break;\n\n                default:\n                  count += (vc - 2) * 3; // polylist with more than four vertices\n\n                  break;\n              }\n            }\n\n            break;\n\n          default:\n            console.warn('THREE.ColladaLoader: Unknow primitive type:', primitive.type);\n        }\n\n        geometry.addGroup(start, count, p);\n        start += count; // material\n\n        if (primitive.material) {\n          materialKeys.push(primitive.material);\n        } // geometry data\n\n\n        for (var name in inputs) {\n          var input = inputs[name];\n\n          switch (name) {\n            case 'VERTEX':\n              for (var key in vertices) {\n                var id = vertices[key];\n\n                switch (key) {\n                  case 'POSITION':\n                    var prevLength = position.array.length;\n                    buildGeometryData(primitive, sources[id], input.offset, position.array);\n                    position.stride = sources[id].stride;\n\n                    if (sources.skinWeights && sources.skinIndices) {\n                      buildGeometryData(primitive, sources.skinIndices, input.offset, skinIndex.array);\n                      buildGeometryData(primitive, sources.skinWeights, input.offset, skinWeight.array);\n                    } // see #3803\n\n\n                    if (primitive.hasUV === false && primitives.uvsNeedsFix === true) {\n                      var count = (position.array.length - prevLength) / position.stride;\n\n                      for (var i = 0; i < count; i++) {\n                        // fill missing uv coordinates\n                        uv.array.push(0, 0);\n                      }\n                    }\n\n                    break;\n\n                  case 'NORMAL':\n                    buildGeometryData(primitive, sources[id], input.offset, normal.array);\n                    normal.stride = sources[id].stride;\n                    break;\n\n                  case 'COLOR':\n                    buildGeometryData(primitive, sources[id], input.offset, color.array);\n                    color.stride = sources[id].stride;\n                    break;\n\n                  case 'TEXCOORD':\n                    buildGeometryData(primitive, sources[id], input.offset, uv.array);\n                    uv.stride = sources[id].stride;\n                    break;\n\n                  case 'TEXCOORD1':\n                    buildGeometryData(primitive, sources[id], input.offset, uv2.array);\n                    uv.stride = sources[id].stride;\n                    break;\n\n                  default:\n                    console.warn('THREE.ColladaLoader: Semantic \"%s\" not handled in geometry build process.', key);\n                }\n              }\n\n              break;\n\n            case 'NORMAL':\n              buildGeometryData(primitive, sources[input.id], input.offset, normal.array);\n              normal.stride = sources[input.id].stride;\n              break;\n\n            case 'COLOR':\n              buildGeometryData(primitive, sources[input.id], input.offset, color.array);\n              color.stride = sources[input.id].stride;\n              break;\n\n            case 'TEXCOORD':\n              buildGeometryData(primitive, sources[input.id], input.offset, uv.array);\n              uv.stride = sources[input.id].stride;\n              break;\n\n            case 'TEXCOORD1':\n              buildGeometryData(primitive, sources[input.id], input.offset, uv2.array);\n              uv2.stride = sources[input.id].stride;\n              break;\n          }\n        }\n      } // build geometry\n\n\n      if (position.array.length > 0) geometry.addAttribute('position', new THREE.Float32BufferAttribute(position.array, position.stride));\n      if (normal.array.length > 0) geometry.addAttribute('normal', new THREE.Float32BufferAttribute(normal.array, normal.stride));\n      if (color.array.length > 0) geometry.addAttribute('color', new THREE.Float32BufferAttribute(color.array, color.stride));\n      if (uv.array.length > 0) geometry.addAttribute('uv', new THREE.Float32BufferAttribute(uv.array, uv.stride));\n      if (uv2.array.length > 0) geometry.addAttribute('uv2', new THREE.Float32BufferAttribute(uv2.array, uv2.stride));\n      if (skinIndex.array.length > 0) geometry.addAttribute('skinIndex', new THREE.Float32BufferAttribute(skinIndex.array, skinIndex.stride));\n      if (skinWeight.array.length > 0) geometry.addAttribute('skinWeight', new THREE.Float32BufferAttribute(skinWeight.array, skinWeight.stride));\n      build.data = geometry;\n      build.type = primitives[0].type;\n      build.materialKeys = materialKeys;\n      return build;\n    }\n\n    function buildGeometryData(primitive, source, offset, array) {\n      var indices = primitive.p;\n      var stride = primitive.stride;\n      var vcount = primitive.vcount;\n\n      function pushVector(i) {\n        var index = indices[i + offset] * sourceStride;\n        var length = index + sourceStride;\n\n        for (; index < length; index++) {\n          array.push(sourceArray[index]);\n        }\n      }\n\n      var sourceArray = source.array;\n      var sourceStride = source.stride;\n\n      if (primitive.vcount !== undefined) {\n        var index = 0;\n\n        for (var i = 0, l = vcount.length; i < l; i++) {\n          var count = vcount[i];\n\n          if (count === 4) {\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n            var d = index + stride * 3;\n            pushVector(a);\n            pushVector(b);\n            pushVector(d);\n            pushVector(b);\n            pushVector(c);\n            pushVector(d);\n          } else if (count === 3) {\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n            pushVector(a);\n            pushVector(b);\n            pushVector(c);\n          } else if (count > 4) {\n            for (var k = 1, kl = count - 2; k <= kl; k++) {\n              var a = index + stride * 0;\n              var b = index + stride * k;\n              var c = index + stride * (k + 1);\n              pushVector(a);\n              pushVector(b);\n              pushVector(c);\n            }\n          }\n\n          index += stride * count;\n        }\n      } else {\n        for (var i = 0, l = indices.length; i < l; i += stride) {\n          pushVector(i);\n        }\n      }\n    }\n\n    function getGeometry(id) {\n      return getBuild(library.geometries[id], buildGeometry);\n    } // kinematics\n\n\n    function parseKinematicsModel(xml) {\n      var data = {\n        name: xml.getAttribute('name') || '',\n        joints: {},\n        links: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique_common':\n            parseKinematicsTechniqueCommon(child, data);\n            break;\n        }\n      }\n\n      library.kinematicsModels[xml.getAttribute('id')] = data;\n    }\n\n    function buildKinematicsModel(data) {\n      if (data.build !== undefined) return data.build;\n      return data;\n    }\n\n    function getKinematicsModel(id) {\n      return getBuild(library.kinematicsModels[id], buildKinematicsModel);\n    }\n\n    function parseKinematicsTechniqueCommon(xml, data) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'joint':\n            data.joints[child.getAttribute('sid')] = parseKinematicsJoint(child);\n            break;\n\n          case 'link':\n            data.links.push(parseKinematicsLink(child));\n            break;\n        }\n      }\n    }\n\n    function parseKinematicsJoint(xml) {\n      var data;\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'prismatic':\n          case 'revolute':\n            data = parseKinematicsJointParameter(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseKinematicsJointParameter(xml, data) {\n      var data = {\n        sid: xml.getAttribute('sid'),\n        name: xml.getAttribute('name') || '',\n        axis: new THREE.Vector3(),\n        limits: {\n          min: 0,\n          max: 0\n        },\n        type: xml.nodeName,\n        static: false,\n        zeroPosition: 0,\n        middlePosition: 0\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'axis':\n            var array = parseFloats(child.textContent);\n            data.axis.fromArray(array);\n            break;\n\n          case 'limits':\n            var max = child.getElementsByTagName('max')[0];\n            var min = child.getElementsByTagName('min')[0];\n            data.limits.max = parseFloat(max.textContent);\n            data.limits.min = parseFloat(min.textContent);\n            break;\n        }\n      } // if min is equal to or greater than max, consider the joint static\n\n\n      if (data.limits.min >= data.limits.max) {\n        data.static = true;\n      } // calculate middle position\n\n\n      data.middlePosition = (data.limits.min + data.limits.max) / 2.0;\n      return data;\n    }\n\n    function parseKinematicsLink(xml) {\n      var data = {\n        sid: xml.getAttribute('sid'),\n        name: xml.getAttribute('name') || '',\n        attachments: [],\n        transforms: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'attachment_full':\n            data.attachments.push(parseKinematicsAttachment(child));\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push(parseKinematicsTransform(child));\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseKinematicsAttachment(xml) {\n      var data = {\n        joint: xml.getAttribute('joint').split('/').pop(),\n        transforms: [],\n        links: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'link':\n            data.links.push(parseKinematicsLink(child));\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push(parseKinematicsTransform(child));\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseKinematicsTransform(xml) {\n      var data = {\n        type: xml.nodeName\n      };\n      var array = parseFloats(xml.textContent);\n\n      switch (data.type) {\n        case 'matrix':\n          data.obj = new THREE.Matrix4();\n          data.obj.fromArray(array).transpose();\n          break;\n\n        case 'translate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray(array);\n          break;\n\n        case 'rotate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray(array);\n          data.angle = THREE.Math.degToRad(array[3]);\n          break;\n      }\n\n      return data;\n    } // physics\n\n\n    function parsePhysicsModel(xml) {\n      var data = {\n        name: xml.getAttribute('name') || '',\n        rigidBodies: {}\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'rigid_body':\n            data.rigidBodies[child.getAttribute('name')] = {};\n            parsePhysicsRigidBody(child, data.rigidBodies[child.getAttribute('name')]);\n            break;\n        }\n      }\n\n      library.physicsModels[xml.getAttribute('id')] = data;\n    }\n\n    function parsePhysicsRigidBody(xml, data) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique_common':\n            parsePhysicsTechniqueCommon(child, data);\n            break;\n        }\n      }\n    }\n\n    function parsePhysicsTechniqueCommon(xml, data) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'inertia':\n            data.inertia = parseFloats(child.textContent);\n            break;\n\n          case 'mass':\n            data.mass = parseFloats(child.textContent)[0];\n            break;\n        }\n      }\n    } // scene\n\n\n    function parseKinematicsScene(xml) {\n      var data = {\n        bindJointAxis: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'bind_joint_axis':\n            data.bindJointAxis.push(parseKinematicsBindJointAxis(child));\n            break;\n        }\n      }\n\n      library.kinematicsScenes[parseId(xml.getAttribute('url'))] = data;\n    }\n\n    function parseKinematicsBindJointAxis(xml) {\n      var data = {\n        target: xml.getAttribute('target').split('/').pop()\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'axis':\n            var param = child.getElementsByTagName('param')[0];\n            data.axis = param.textContent;\n            var tmpJointIndex = data.axis.split('inst_').pop().split('axis')[0];\n            data.jointIndex = tmpJointIndex.substr(0, tmpJointIndex.length - 1);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildKinematicsScene(data) {\n      if (data.build !== undefined) return data.build;\n      return data;\n    }\n\n    function getKinematicsScene(id) {\n      return getBuild(library.kinematicsScenes[id], buildKinematicsScene);\n    }\n\n    function setupKinematics() {\n      var kinematicsModelId = Object.keys(library.kinematicsModels)[0];\n      var kinematicsSceneId = Object.keys(library.kinematicsScenes)[0];\n      var visualSceneId = Object.keys(library.visualScenes)[0];\n      if (kinematicsModelId === undefined || kinematicsSceneId === undefined) return;\n      var kinematicsModel = getKinematicsModel(kinematicsModelId);\n      var kinematicsScene = getKinematicsScene(kinematicsSceneId);\n      var visualScene = getVisualScene(visualSceneId);\n      var bindJointAxis = kinematicsScene.bindJointAxis;\n      var jointMap = {};\n\n      for (var i = 0, l = bindJointAxis.length; i < l; i++) {\n        var axis = bindJointAxis[i]; // the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'\n\n        var targetElement = collada.querySelector('[sid=\"' + axis.target + '\"]');\n\n        if (targetElement) {\n          // get the parent of the transfrom element\n          var parentVisualElement = targetElement.parentElement; // connect the joint of the kinematics model with the element in the visual scene\n\n          connect(axis.jointIndex, parentVisualElement);\n        }\n      }\n\n      function connect(jointIndex, visualElement) {\n        var visualElementName = visualElement.getAttribute('name');\n        var joint = kinematicsModel.joints[jointIndex];\n        visualScene.traverse(function (object) {\n          if (object.name === visualElementName) {\n            jointMap[jointIndex] = {\n              object: object,\n              transforms: buildTransformList(visualElement),\n              joint: joint,\n              position: joint.zeroPosition\n            };\n          }\n        });\n      }\n\n      var m0 = new THREE.Matrix4();\n      kinematics = {\n        joints: kinematicsModel && kinematicsModel.joints,\n        getJointValue: function getJointValue(jointIndex) {\n          var jointData = jointMap[jointIndex];\n\n          if (jointData) {\n            return jointData.position;\n          } else {\n            console.warn('THREE.ColladaLoader: Joint ' + jointIndex + ' doesn\\'t exist.');\n          }\n        },\n        setJointValue: function setJointValue(jointIndex, value) {\n          var jointData = jointMap[jointIndex];\n\n          if (jointData) {\n            var joint = jointData.joint;\n\n            if (value > joint.limits.max || value < joint.limits.min) {\n              console.warn('THREE.ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').');\n            } else if (joint.static) {\n              console.warn('THREE.ColladaLoader: Joint ' + jointIndex + ' is static.');\n            } else {\n              var object = jointData.object;\n              var axis = joint.axis;\n              var transforms = jointData.transforms;\n              matrix.identity(); // each update, we have to apply all transforms in the correct order\n\n              for (var i = 0; i < transforms.length; i++) {\n                var transform = transforms[i]; // if there is a connection of the transform node with a joint, apply the joint value\n\n                if (transform.sid && transform.sid.indexOf(jointIndex) !== -1) {\n                  switch (joint.type) {\n                    case 'revolute':\n                      matrix.multiply(m0.makeRotationAxis(axis, THREE.Math.degToRad(value)));\n                      break;\n\n                    case 'prismatic':\n                      matrix.multiply(m0.makeTranslation(axis.x * value, axis.y * value, axis.z * value));\n                      break;\n\n                    default:\n                      console.warn('THREE.ColladaLoader: Unknown joint type: ' + joint.type);\n                      break;\n                  }\n                } else {\n                  switch (transform.type) {\n                    case 'matrix':\n                      matrix.multiply(transform.obj);\n                      break;\n\n                    case 'translate':\n                      matrix.multiply(m0.makeTranslation(transform.obj.x, transform.obj.y, transform.obj.z));\n                      break;\n\n                    case 'scale':\n                      matrix.scale(transform.obj);\n                      break;\n\n                    case 'rotate':\n                      matrix.multiply(m0.makeRotationAxis(transform.obj, transform.angle));\n                      break;\n                  }\n                }\n              }\n\n              object.matrix.copy(matrix);\n              object.matrix.decompose(object.position, object.quaternion, object.scale);\n              jointMap[jointIndex].position = value;\n            }\n          } else {\n            console.log('THREE.ColladaLoader: ' + jointIndex + ' does not exist.');\n          }\n        }\n      };\n    }\n\n    function buildTransformList(node) {\n      var transforms = [];\n      var xml = collada.querySelector('[id=\"' + node.id + '\"]');\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'matrix':\n            var array = parseFloats(child.textContent);\n            var matrix = new THREE.Matrix4().fromArray(array).transpose();\n            transforms.push({\n              sid: child.getAttribute('sid'),\n              type: child.nodeName,\n              obj: matrix\n            });\n            break;\n\n          case 'translate':\n          case 'scale':\n            var array = parseFloats(child.textContent);\n            var vector = new THREE.Vector3().fromArray(array);\n            transforms.push({\n              sid: child.getAttribute('sid'),\n              type: child.nodeName,\n              obj: vector\n            });\n            break;\n\n          case 'rotate':\n            var array = parseFloats(child.textContent);\n            var vector = new THREE.Vector3().fromArray(array);\n            var angle = THREE.Math.degToRad(array[3]);\n            transforms.push({\n              sid: child.getAttribute('sid'),\n              type: child.nodeName,\n              obj: vector,\n              angle: angle\n            });\n            break;\n        }\n      }\n\n      return transforms;\n    } // nodes\n\n\n    function prepareNodes(xml) {\n      var elements = xml.getElementsByTagName('node'); // ensure all node elements have id attributes\n\n      for (var i = 0; i < elements.length; i++) {\n        var element = elements[i];\n\n        if (element.hasAttribute('id') === false) {\n          element.setAttribute('id', generateId());\n        }\n      }\n    }\n\n    var matrix = new THREE.Matrix4();\n    var vector = new THREE.Vector3();\n\n    function parseNode(xml) {\n      var data = {\n        name: xml.getAttribute('name') || '',\n        type: xml.getAttribute('type'),\n        id: xml.getAttribute('id'),\n        sid: xml.getAttribute('sid'),\n        matrix: new THREE.Matrix4(),\n        nodes: [],\n        instanceCameras: [],\n        instanceControllers: [],\n        instanceLights: [],\n        instanceGeometries: [],\n        instanceNodes: [],\n        transforms: {}\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'node':\n            data.nodes.push(child.getAttribute('id'));\n            parseNode(child);\n            break;\n\n          case 'instance_camera':\n            data.instanceCameras.push(parseId(child.getAttribute('url')));\n            break;\n\n          case 'instance_controller':\n            data.instanceControllers.push(parseNodeInstance(child));\n            break;\n\n          case 'instance_light':\n            data.instanceLights.push(parseId(child.getAttribute('url')));\n            break;\n\n          case 'instance_geometry':\n            data.instanceGeometries.push(parseNodeInstance(child));\n            break;\n\n          case 'instance_node':\n            data.instanceNodes.push(parseId(child.getAttribute('url')));\n            break;\n\n          case 'matrix':\n            var array = parseFloats(child.textContent);\n            data.matrix.multiply(matrix.fromArray(array).transpose());\n            data.transforms[child.getAttribute('sid')] = child.nodeName;\n            break;\n\n          case 'translate':\n            var array = parseFloats(child.textContent);\n            vector.fromArray(array);\n            data.matrix.multiply(matrix.makeTranslation(vector.x, vector.y, vector.z));\n            data.transforms[child.getAttribute('sid')] = child.nodeName;\n            break;\n\n          case 'rotate':\n            var array = parseFloats(child.textContent);\n            var angle = THREE.Math.degToRad(array[3]);\n            data.matrix.multiply(matrix.makeRotationAxis(vector.fromArray(array), angle));\n            data.transforms[child.getAttribute('sid')] = child.nodeName;\n            break;\n\n          case 'scale':\n            var array = parseFloats(child.textContent);\n            data.matrix.scale(vector.fromArray(array));\n            data.transforms[child.getAttribute('sid')] = child.nodeName;\n            break;\n\n          case 'extra':\n            break;\n\n          default:\n            console.log(child);\n        }\n      }\n\n      if (hasNode(data.id)) {\n        console.warn('THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.', data.id);\n      } else {\n        library.nodes[data.id] = data;\n      }\n\n      return data;\n    }\n\n    function parseNodeInstance(xml) {\n      var data = {\n        id: parseId(xml.getAttribute('url')),\n        materials: {},\n        skeletons: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n\n        switch (child.nodeName) {\n          case 'bind_material':\n            var instances = child.getElementsByTagName('instance_material');\n\n            for (var j = 0; j < instances.length; j++) {\n              var instance = instances[j];\n              var symbol = instance.getAttribute('symbol');\n              var target = instance.getAttribute('target');\n              data.materials[symbol] = parseId(target);\n            }\n\n            break;\n\n          case 'skeleton':\n            data.skeletons.push(parseId(child.textContent));\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildSkeleton(skeletons, joints) {\n      var boneData = [];\n      var sortedBoneData = [];\n      var i, j, data; // a skeleton can have multiple root bones. collada expresses this\n      // situtation with multiple \"skeleton\" tags per controller instance\n\n      for (i = 0; i < skeletons.length; i++) {\n        var skeleton = skeletons[i];\n        var root;\n\n        if (hasNode(skeleton)) {\n          root = getNode(skeleton);\n          buildBoneHierarchy(root, joints, boneData);\n        } else if (hasVisualScene(skeleton)) {\n          // handle case where the skeleton refers to the visual scene (#13335)\n          var visualScene = library.visualScenes[skeleton];\n          var children = visualScene.children;\n\n          for (var j = 0; j < children.length; j++) {\n            var child = children[j];\n\n            if (child.type === 'JOINT') {\n              var root = getNode(child.id);\n              buildBoneHierarchy(root, joints, boneData);\n            }\n          }\n        } else {\n          console.error('THREE.ColladaLoader: Unable to find root bone of skeleton with ID:', skeleton);\n        }\n      } // sort bone data (the order is defined in the corresponding controller)\n\n\n      for (i = 0; i < joints.length; i++) {\n        for (j = 0; j < boneData.length; j++) {\n          data = boneData[j];\n\n          if (data.bone.name === joints[i].name) {\n            sortedBoneData[i] = data;\n            data.processed = true;\n            break;\n          }\n        }\n      } // add unprocessed bone data at the end of the list\n\n\n      for (i = 0; i < boneData.length; i++) {\n        data = boneData[i];\n\n        if (data.processed === false) {\n          sortedBoneData.push(data);\n          data.processed = true;\n        }\n      } // setup arrays for skeleton creation\n\n\n      var bones = [];\n      var boneInverses = [];\n\n      for (i = 0; i < sortedBoneData.length; i++) {\n        data = sortedBoneData[i];\n        bones.push(data.bone);\n        boneInverses.push(data.boneInverse);\n      }\n\n      return new THREE.Skeleton(bones, boneInverses);\n    }\n\n    function buildBoneHierarchy(root, joints, boneData) {\n      // setup bone data from visual scene\n      root.traverse(function (object) {\n        if (object.isBone === true) {\n          var boneInverse; // retrieve the boneInverse from the controller data\n\n          for (var i = 0; i < joints.length; i++) {\n            var joint = joints[i];\n\n            if (joint.name === object.name) {\n              boneInverse = joint.boneInverse;\n              break;\n            }\n          }\n\n          if (boneInverse === undefined) {\n            // Unfortunately, there can be joints in the visual scene that are not part of the\n            // corresponding controller. In this case, we have to create a dummy boneInverse matrix\n            // for the respective bone. This bone won't affect any vertices, because there are no skin indices\n            // and weights defined for it. But we still have to add the bone to the sorted bone list in order to\n            // ensure a correct animation of the model.\n            boneInverse = new THREE.Matrix4();\n          }\n\n          boneData.push({\n            bone: object,\n            boneInverse: boneInverse,\n            processed: false\n          });\n        }\n      });\n    }\n\n    function buildNode(data) {\n      var objects = [];\n      var matrix = data.matrix;\n      var nodes = data.nodes;\n      var type = data.type;\n      var instanceCameras = data.instanceCameras;\n      var instanceControllers = data.instanceControllers;\n      var instanceLights = data.instanceLights;\n      var instanceGeometries = data.instanceGeometries;\n      var instanceNodes = data.instanceNodes; // nodes\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        objects.push(getNode(nodes[i]));\n      } // instance cameras\n\n\n      for (var i = 0, l = instanceCameras.length; i < l; i++) {\n        var instanceCamera = getCamera(instanceCameras[i]);\n\n        if (instanceCamera !== null) {\n          objects.push(instanceCamera.clone());\n        }\n      } // instance controllers\n\n\n      for (var i = 0, l = instanceControllers.length; i < l; i++) {\n        var instance = instanceControllers[i];\n        var controller = getController(instance.id);\n        var geometries = getGeometry(controller.id);\n        var newObjects = buildObjects(geometries, instance.materials);\n        var skeletons = instance.skeletons;\n        var joints = controller.skin.joints;\n        var skeleton = buildSkeleton(skeletons, joints);\n\n        for (var j = 0, jl = newObjects.length; j < jl; j++) {\n          var object = newObjects[j];\n\n          if (object.isSkinnedMesh) {\n            object.bind(skeleton, controller.skin.bindMatrix);\n            object.normalizeSkinWeights();\n          }\n\n          objects.push(object);\n        }\n      } // instance lights\n\n\n      for (var i = 0, l = instanceLights.length; i < l; i++) {\n        var instanceLight = getLight(instanceLights[i]);\n\n        if (instanceLight !== null) {\n          objects.push(instanceLight.clone());\n        }\n      } // instance geometries\n\n\n      for (var i = 0, l = instanceGeometries.length; i < l; i++) {\n        var instance = instanceGeometries[i]; // a single geometry instance in collada can lead to multiple object3Ds.\n        // this is the case when primitives are combined like triangles and lines\n\n        var geometries = getGeometry(instance.id);\n        var newObjects = buildObjects(geometries, instance.materials);\n\n        for (var j = 0, jl = newObjects.length; j < jl; j++) {\n          objects.push(newObjects[j]);\n        }\n      } // instance nodes\n\n\n      for (var i = 0, l = instanceNodes.length; i < l; i++) {\n        objects.push(getNode(instanceNodes[i]).clone());\n      }\n\n      var object;\n\n      if (nodes.length === 0 && objects.length === 1) {\n        object = objects[0];\n      } else {\n        object = type === 'JOINT' ? new THREE.Bone() : new THREE.Group();\n\n        for (var i = 0; i < objects.length; i++) {\n          object.add(objects[i]);\n        }\n      }\n\n      if (object.name === '') {\n        object.name = type === 'JOINT' ? data.sid : data.name;\n      }\n\n      object.matrix.copy(matrix);\n      object.matrix.decompose(object.position, object.quaternion, object.scale);\n      return object;\n    }\n\n    var fallbackMaterial = new THREE.MeshBasicMaterial({\n      color: 0xff00ff\n    });\n\n    function resolveMaterialBinding(keys, instanceMaterials) {\n      var materials = [];\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var id = instanceMaterials[keys[i]];\n\n        if (id === undefined) {\n          console.warn('THREE.ColladaLoader: Material with key %s not found. Apply fallback material.', keys[i]);\n          materials.push(fallbackMaterial);\n        } else {\n          materials.push(getMaterial(id));\n        }\n      }\n\n      return materials;\n    }\n\n    function buildObjects(geometries, instanceMaterials) {\n      var objects = [];\n\n      for (var type in geometries) {\n        var geometry = geometries[type];\n        var materials = resolveMaterialBinding(geometry.materialKeys, instanceMaterials); // handle case if no materials are defined\n\n        if (materials.length === 0) {\n          if (type === 'lines' || type === 'linestrips') {\n            materials.push(new THREE.LineBasicMaterial());\n          } else {\n            materials.push(new THREE.MeshPhongMaterial());\n          }\n        } // regard skinning\n\n\n        var skinning = geometry.data.attributes.skinIndex !== undefined;\n\n        if (skinning) {\n          for (var i = 0, l = materials.length; i < l; i++) {\n            materials[i].skinning = true;\n          }\n        } // choose between a single or multi materials (material array)\n\n\n        var material = materials.length === 1 ? materials[0] : materials; // now create a specific 3D object\n\n        var object;\n\n        switch (type) {\n          case 'lines':\n            object = new THREE.LineSegments(geometry.data, material);\n            break;\n\n          case 'linestrips':\n            object = new THREE.Line(geometry.data, material);\n            break;\n\n          case 'triangles':\n          case 'polylist':\n            if (skinning) {\n              object = new THREE.SkinnedMesh(geometry.data, material);\n            } else {\n              object = new THREE.Mesh(geometry.data, material);\n            }\n\n            break;\n        }\n\n        objects.push(object);\n      }\n\n      return objects;\n    }\n\n    function hasNode(id) {\n      return library.nodes[id] !== undefined;\n    }\n\n    function getNode(id) {\n      return getBuild(library.nodes[id], buildNode);\n    } // visual scenes\n\n\n    function parseVisualScene(xml) {\n      var data = {\n        name: xml.getAttribute('name'),\n        children: []\n      };\n      prepareNodes(xml);\n      var elements = getElementsByTagName(xml, 'node');\n\n      for (var i = 0; i < elements.length; i++) {\n        data.children.push(parseNode(elements[i]));\n      }\n\n      library.visualScenes[xml.getAttribute('id')] = data;\n    }\n\n    function buildVisualScene(data) {\n      var group = new THREE.Group();\n      group.name = data.name;\n      var children = data.children;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        group.add(getNode(child.id));\n      }\n\n      return group;\n    }\n\n    function hasVisualScene(id) {\n      return library.visualScenes[id] !== undefined;\n    }\n\n    function getVisualScene(id) {\n      return getBuild(library.visualScenes[id], buildVisualScene);\n    } // scenes\n\n\n    function parseScene(xml) {\n      var instance = getElementsByTagName(xml, 'instance_visual_scene')[0];\n      return getVisualScene(parseId(instance.getAttribute('url')));\n    }\n\n    function setupAnimations() {\n      var clips = library.clips;\n\n      if (isEmpty(clips) === true) {\n        if (isEmpty(library.animations) === false) {\n          // if there are animations but no clips, we create a default clip for playback\n          var tracks = [];\n\n          for (var id in library.animations) {\n            var animationTracks = getAnimation(id);\n\n            for (var i = 0, l = animationTracks.length; i < l; i++) {\n              tracks.push(animationTracks[i]);\n            }\n          }\n\n          animations.push(new THREE.AnimationClip('default', -1, tracks));\n        }\n      } else {\n        for (var id in clips) {\n          animations.push(getAnimationClip(id));\n        }\n      }\n    }\n\n    if (text.length === 0) {\n      return {\n        scene: new THREE.Scene()\n      };\n    }\n\n    var xml = new DOMParser().parseFromString(text, 'application/xml');\n    var collada = getElementsByTagName(xml, 'COLLADA')[0]; // metadata\n\n    var version = collada.getAttribute('version');\n    console.log('THREE.ColladaLoader: File version', version);\n    var asset = parseAsset(getElementsByTagName(collada, 'asset')[0]);\n    var textureLoader = new THREE.TextureLoader(this.manager);\n    textureLoader.setPath(this.resourcePath || path).setCrossOrigin(this.crossOrigin);\n    var tgaLoader;\n\n    if (THREE.TGALoader) {\n      tgaLoader = new THREE.TGALoader(this.manager);\n      tgaLoader.setPath(this.resourcePath || path);\n    } //\n\n\n    var animations = [];\n    var kinematics = {};\n    var count = 0; //\n\n    var library = {\n      animations: {},\n      clips: {},\n      controllers: {},\n      images: {},\n      effects: {},\n      materials: {},\n      cameras: {},\n      lights: {},\n      geometries: {},\n      nodes: {},\n      visualScenes: {},\n      kinematicsModels: {},\n      physicsModels: {},\n      kinematicsScenes: {}\n    };\n    parseLibrary(collada, 'library_animations', 'animation', parseAnimation);\n    parseLibrary(collada, 'library_animation_clips', 'animation_clip', parseAnimationClip);\n    parseLibrary(collada, 'library_controllers', 'controller', parseController);\n    parseLibrary(collada, 'library_images', 'image', parseImage);\n    parseLibrary(collada, 'library_effects', 'effect', parseEffect);\n    parseLibrary(collada, 'library_materials', 'material', parseMaterial);\n    parseLibrary(collada, 'library_cameras', 'camera', parseCamera);\n    parseLibrary(collada, 'library_lights', 'light', parseLight);\n    parseLibrary(collada, 'library_geometries', 'geometry', parseGeometry);\n    parseLibrary(collada, 'library_nodes', 'node', parseNode);\n    parseLibrary(collada, 'library_visual_scenes', 'visual_scene', parseVisualScene);\n    parseLibrary(collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel);\n    parseLibrary(collada, 'library_physics_models', 'physics_model', parsePhysicsModel);\n    parseLibrary(collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene);\n    buildLibrary(library.animations, buildAnimation);\n    buildLibrary(library.clips, buildAnimationClip);\n    buildLibrary(library.controllers, buildController);\n    buildLibrary(library.images, buildImage);\n    buildLibrary(library.effects, buildEffect);\n    buildLibrary(library.materials, buildMaterial);\n    buildLibrary(library.cameras, buildCamera);\n    buildLibrary(library.lights, buildLight);\n    buildLibrary(library.geometries, buildGeometry);\n    buildLibrary(library.visualScenes, buildVisualScene);\n    setupAnimations();\n    setupKinematics();\n    var scene = parseScene(getElementsByTagName(collada, 'scene')[0]);\n\n    if (asset.upAxis === 'Z_UP') {\n      scene.quaternion.setFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));\n    }\n\n    scene.scale.multiplyScalar(asset.unit);\n    return {\n      animations: animations,\n      kinematics: kinematics,\n      library: library,\n      scene: scene\n    };\n  }\n};","(function () {\n  \"use strict\"; // math-inlining.\n\n  var abs = Math.abs,\n      cos = Math.cos,\n      sin = Math.sin,\n      acos = Math.acos,\n      atan2 = Math.atan2,\n      sqrt = Math.sqrt,\n      pow = Math.pow,\n      // cube root function yielding real roots\n  crt = function crt(v) {\n    return v < 0 ? -pow(-v, 1 / 3) : pow(v, 1 / 3);\n  },\n      // trig constants\n  pi = Math.PI,\n      tau = 2 * pi,\n      quart = pi / 2,\n      // float precision significant decimal\n  epsilon = 0.000001,\n      // extremas used in bbox calculation and similar algorithms\n  nMax = Number.MAX_SAFE_INTEGER || 9007199254740991,\n      nMin = Number.MIN_SAFE_INTEGER || -9007199254740991,\n      // a zero coordinate, which is surprisingly useful\n  ZERO = {\n    x: 0,\n    y: 0,\n    z: 0\n  }; // Bezier utility functions\n\n\n  var utils = {\n    // Legendre-Gauss abscissae with n=24 (x_i values, defined at i=n as the roots of the nth order Legendre polynomial Pn(x))\n    Tvalues: [-0.0640568928626056260850430826247450385909, 0.0640568928626056260850430826247450385909, -0.1911188674736163091586398207570696318404, 0.1911188674736163091586398207570696318404, -0.3150426796961633743867932913198102407864, 0.3150426796961633743867932913198102407864, -0.4337935076260451384870842319133497124524, 0.4337935076260451384870842319133497124524, -0.5454214713888395356583756172183723700107, 0.5454214713888395356583756172183723700107, -0.6480936519369755692524957869107476266696, 0.6480936519369755692524957869107476266696, -0.7401241915785543642438281030999784255232, 0.7401241915785543642438281030999784255232, -0.8200019859739029219539498726697452080761, 0.8200019859739029219539498726697452080761, -0.8864155270044010342131543419821967550873, 0.8864155270044010342131543419821967550873, -0.9382745520027327585236490017087214496548, 0.9382745520027327585236490017087214496548, -0.9747285559713094981983919930081690617411, 0.9747285559713094981983919930081690617411, -0.9951872199970213601799974097007368118745, 0.9951872199970213601799974097007368118745],\n    // Legendre-Gauss weights with n=24 (w_i values, defined by a function linked to in the Bezier primer article)\n    Cvalues: [0.1279381953467521569740561652246953718517, 0.1279381953467521569740561652246953718517, 0.1258374563468282961213753825111836887264, 0.1258374563468282961213753825111836887264, 0.121670472927803391204463153476262425607, 0.121670472927803391204463153476262425607, 0.1155056680537256013533444839067835598622, 0.1155056680537256013533444839067835598622, 0.1074442701159656347825773424466062227946, 0.1074442701159656347825773424466062227946, 0.0976186521041138882698806644642471544279, 0.0976186521041138882698806644642471544279, 0.086190161531953275917185202983742667185, 0.086190161531953275917185202983742667185, 0.0733464814110803057340336152531165181193, 0.0733464814110803057340336152531165181193, 0.0592985849154367807463677585001085845412, 0.0592985849154367807463677585001085845412, 0.0442774388174198061686027482113382288593, 0.0442774388174198061686027482113382288593, 0.0285313886289336631813078159518782864491, 0.0285313886289336631813078159518782864491, 0.0123412297999871995468056670700372915759, 0.0123412297999871995468056670700372915759],\n    arcfn: function arcfn(t, derivativeFn) {\n      var d = derivativeFn(t);\n      var l = d.x * d.x + d.y * d.y;\n\n      if (typeof d.z !== \"undefined\") {\n        l += d.z * d.z;\n      }\n\n      return sqrt(l);\n    },\n    compute: function compute(t, points, _3d) {\n      // shortcuts\n      if (t === 0) {\n        return points[0];\n      }\n\n      var order = points.length - 1;\n\n      if (t === 1) {\n        return points[order];\n      }\n\n      var p = points;\n      var mt = 1 - t; // constant?\n\n      if (order === 0) {\n        return points[0];\n      } // linear?\n\n\n      if (order === 1) {\n        ret = {\n          x: mt * p[0].x + t * p[1].x,\n          y: mt * p[0].y + t * p[1].y\n        };\n\n        if (_3d) {\n          ret.z = mt * p[0].z + t * p[1].z;\n        }\n\n        return ret;\n      } // quadratic/cubic curve?\n\n\n      if (order < 4) {\n        var mt2 = mt * mt,\n            t2 = t * t,\n            a,\n            b,\n            c,\n            d = 0;\n\n        if (order === 2) {\n          p = [p[0], p[1], p[2], ZERO];\n          a = mt2;\n          b = mt * t * 2;\n          c = t2;\n        } else if (order === 3) {\n          a = mt2 * mt;\n          b = mt2 * t * 3;\n          c = mt * t2 * 3;\n          d = t * t2;\n        }\n\n        var ret = {\n          x: a * p[0].x + b * p[1].x + c * p[2].x + d * p[3].x,\n          y: a * p[0].y + b * p[1].y + c * p[2].y + d * p[3].y\n        };\n\n        if (_3d) {\n          ret.z = a * p[0].z + b * p[1].z + c * p[2].z + d * p[3].z;\n        }\n\n        return ret;\n      } // higher order curves: use de Casteljau's computation\n\n\n      var dCpts = JSON.parse(JSON.stringify(points));\n\n      while (dCpts.length > 1) {\n        for (var i = 0; i < dCpts.length - 1; i++) {\n          dCpts[i] = {\n            x: dCpts[i].x + (dCpts[i + 1].x - dCpts[i].x) * t,\n            y: dCpts[i].y + (dCpts[i + 1].y - dCpts[i].y) * t\n          };\n\n          if (typeof dCpts[i].z !== \"undefined\") {\n            dCpts[i] = dCpts[i].z + (dCpts[i + 1].z - dCpts[i].z) * t;\n          }\n        }\n\n        dCpts.splice(dCpts.length - 1, 1);\n      }\n\n      return dCpts[0];\n    },\n    computeWithRatios: function computeWithRatios(t, points, ratios, _3d) {\n      var mt = 1 - t,\n          r = ratios,\n          p = points,\n          d;\n      var f1 = r[0],\n          f2 = r[1],\n          f3 = r[2],\n          f4 = r[3]; // spec for linear\n\n      f1 *= mt;\n      f2 *= t;\n\n      if (p.length === 2) {\n        d = f1 + f2;\n        return {\n          x: (f1 * p[0].x + f2 * p[1].x) / d,\n          y: (f1 * p[0].y + f2 * p[1].y) / d,\n          z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z) / d\n        };\n      } // upgrade to quadratic\n\n\n      f1 *= mt;\n      f2 *= 2 * mt;\n      f3 *= t * t;\n\n      if (p.length === 3) {\n        d = f1 + f2 + f3;\n        return {\n          x: (f1 * p[0].x + f2 * p[1].x + f3 * p[2].x) / d,\n          y: (f1 * p[0].y + f2 * p[1].y + f3 * p[2].y) / d,\n          z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z + f3 * p[2].z) / d\n        };\n      } // upgrade to cubic\n\n\n      f1 *= mt;\n      f2 *= 1.5 * mt;\n      f3 *= 3 * mt;\n      f4 *= t * t * t;\n\n      if (p.length === 4) {\n        d = f1 + f2 + f3 + f4;\n        return {\n          x: (f1 * p[0].x + f2 * p[1].x + f3 * p[2].x + f4 * p[3].x) / d,\n          y: (f1 * p[0].y + f2 * p[1].y + f3 * p[2].y + f4 * p[3].y) / d,\n          z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z + f3 * p[2].z + f4 * p[3].z) / d\n        };\n      }\n    },\n    derive: function derive(points, _3d) {\n      var dpoints = [];\n\n      for (var p = points, d = p.length, c = d - 1; d > 1; d--, c--) {\n        var list = [];\n\n        for (var j = 0, dpt; j < c; j++) {\n          dpt = {\n            x: c * (p[j + 1].x - p[j].x),\n            y: c * (p[j + 1].y - p[j].y)\n          };\n\n          if (_3d) {\n            dpt.z = c * (p[j + 1].z - p[j].z);\n          }\n\n          list.push(dpt);\n        }\n\n        dpoints.push(list);\n        p = list;\n      }\n\n      return dpoints;\n    },\n    between: function between(v, m, M) {\n      return m <= v && v <= M || utils.approximately(v, m) || utils.approximately(v, M);\n    },\n    approximately: function approximately(a, b, precision) {\n      return abs(a - b) <= (precision || epsilon);\n    },\n    length: function length(derivativeFn) {\n      var z = 0.5,\n          sum = 0,\n          len = utils.Tvalues.length,\n          i,\n          t;\n\n      for (i = 0; i < len; i++) {\n        t = z * utils.Tvalues[i] + z;\n        sum += utils.Cvalues[i] * utils.arcfn(t, derivativeFn);\n      }\n\n      return z * sum;\n    },\n    map: function map(v, ds, de, ts, te) {\n      var d1 = de - ds,\n          d2 = te - ts,\n          v2 = v - ds,\n          r = v2 / d1;\n      return ts + d2 * r;\n    },\n    lerp: function lerp(r, v1, v2) {\n      var ret = {\n        x: v1.x + r * (v2.x - v1.x),\n        y: v1.y + r * (v2.y - v1.y)\n      };\n\n      if (!!v1.z && !!v2.z) {\n        ret.z = v1.z + r * (v2.z - v1.z);\n      }\n\n      return ret;\n    },\n    pointToString: function pointToString(p) {\n      var s = p.x + \"/\" + p.y;\n\n      if (typeof p.z !== \"undefined\") {\n        s += \"/\" + p.z;\n      }\n\n      return s;\n    },\n    pointsToString: function pointsToString(points) {\n      return \"[\" + points.map(utils.pointToString).join(\", \") + \"]\";\n    },\n    copy: function copy(obj) {\n      return JSON.parse(JSON.stringify(obj));\n    },\n    angle: function angle(o, v1, v2) {\n      var dx1 = v1.x - o.x,\n          dy1 = v1.y - o.y,\n          dx2 = v2.x - o.x,\n          dy2 = v2.y - o.y,\n          cross = dx1 * dy2 - dy1 * dx2,\n          dot = dx1 * dx2 + dy1 * dy2;\n      return atan2(cross, dot);\n    },\n    // round as string, to avoid rounding errors\n    round: function round(v, d) {\n      var s = \"\" + v;\n      var pos = s.indexOf(\".\");\n      return parseFloat(s.substring(0, pos + 1 + d));\n    },\n    dist: function dist(p1, p2) {\n      var dx = p1.x - p2.x,\n          dy = p1.y - p2.y;\n      return sqrt(dx * dx + dy * dy);\n    },\n    closest: function closest(LUT, point) {\n      var mdist = pow(2, 63),\n          mpos,\n          d;\n      LUT.forEach(function (p, idx) {\n        d = utils.dist(point, p);\n\n        if (d < mdist) {\n          mdist = d;\n          mpos = idx;\n        }\n      });\n      return {\n        mdist: mdist,\n        mpos: mpos\n      };\n    },\n    abcratio: function abcratio(t, n) {\n      // see ratio(t) note on http://pomax.github.io/bezierinfo/#abc\n      if (n !== 2 && n !== 3) {\n        return false;\n      }\n\n      if (typeof t === \"undefined\") {\n        t = 0.5;\n      } else if (t === 0 || t === 1) {\n        return t;\n      }\n\n      var bottom = pow(t, n) + pow(1 - t, n),\n          top = bottom - 1;\n      return abs(top / bottom);\n    },\n    projectionratio: function projectionratio(t, n) {\n      // see u(t) note on http://pomax.github.io/bezierinfo/#abc\n      if (n !== 2 && n !== 3) {\n        return false;\n      }\n\n      if (typeof t === \"undefined\") {\n        t = 0.5;\n      } else if (t === 0 || t === 1) {\n        return t;\n      }\n\n      var top = pow(1 - t, n),\n          bottom = pow(t, n) + top;\n      return top / bottom;\n    },\n    lli8: function lli8(x1, y1, x2, y2, x3, y3, x4, y4) {\n      var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n          ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n          d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n      if (d == 0) {\n        return false;\n      }\n\n      return {\n        x: nx / d,\n        y: ny / d\n      };\n    },\n    lli4: function lli4(p1, p2, p3, p4) {\n      var x1 = p1.x,\n          y1 = p1.y,\n          x2 = p2.x,\n          y2 = p2.y,\n          x3 = p3.x,\n          y3 = p3.y,\n          x4 = p4.x,\n          y4 = p4.y;\n      return utils.lli8(x1, y1, x2, y2, x3, y3, x4, y4);\n    },\n    lli: function lli(v1, v2) {\n      return utils.lli4(v1, v1.c, v2, v2.c);\n    },\n    makeline: function makeline(p1, p2) {\n      var Bezier = require(\"./bezier\");\n\n      var x1 = p1.x,\n          y1 = p1.y,\n          x2 = p2.x,\n          y2 = p2.y,\n          dx = (x2 - x1) / 3,\n          dy = (y2 - y1) / 3;\n      return new Bezier(x1, y1, x1 + dx, y1 + dy, x1 + 2 * dx, y1 + 2 * dy, x2, y2);\n    },\n    findbbox: function findbbox(sections) {\n      var mx = nMax,\n          my = nMax,\n          MX = nMin,\n          MY = nMin;\n      sections.forEach(function (s) {\n        var bbox = s.bbox();\n        if (mx > bbox.x.min) mx = bbox.x.min;\n        if (my > bbox.y.min) my = bbox.y.min;\n        if (MX < bbox.x.max) MX = bbox.x.max;\n        if (MY < bbox.y.max) MY = bbox.y.max;\n      });\n      return {\n        x: {\n          min: mx,\n          mid: (mx + MX) / 2,\n          max: MX,\n          size: MX - mx\n        },\n        y: {\n          min: my,\n          mid: (my + MY) / 2,\n          max: MY,\n          size: MY - my\n        }\n      };\n    },\n    shapeintersections: function shapeintersections(s1, bbox1, s2, bbox2, curveIntersectionThreshold) {\n      if (!utils.bboxoverlap(bbox1, bbox2)) return [];\n      var intersections = [];\n      var a1 = [s1.startcap, s1.forward, s1.back, s1.endcap];\n      var a2 = [s2.startcap, s2.forward, s2.back, s2.endcap];\n      a1.forEach(function (l1) {\n        if (l1.virtual) return;\n        a2.forEach(function (l2) {\n          if (l2.virtual) return;\n          var iss = l1.intersects(l2, curveIntersectionThreshold);\n\n          if (iss.length > 0) {\n            iss.c1 = l1;\n            iss.c2 = l2;\n            iss.s1 = s1;\n            iss.s2 = s2;\n            intersections.push(iss);\n          }\n        });\n      });\n      return intersections;\n    },\n    makeshape: function makeshape(forward, back, curveIntersectionThreshold) {\n      var bpl = back.points.length;\n      var fpl = forward.points.length;\n      var start = utils.makeline(back.points[bpl - 1], forward.points[0]);\n      var end = utils.makeline(forward.points[fpl - 1], back.points[0]);\n      var shape = {\n        startcap: start,\n        forward: forward,\n        back: back,\n        endcap: end,\n        bbox: utils.findbbox([start, forward, back, end])\n      };\n      var self = utils;\n\n      shape.intersections = function (s2) {\n        return self.shapeintersections(shape, shape.bbox, s2, s2.bbox, curveIntersectionThreshold);\n      };\n\n      return shape;\n    },\n    getminmax: function getminmax(curve, d, list) {\n      if (!list) return {\n        min: 0,\n        max: 0\n      };\n      var min = nMax,\n          max = nMin,\n          t,\n          c;\n\n      if (list.indexOf(0) === -1) {\n        list = [0].concat(list);\n      }\n\n      if (list.indexOf(1) === -1) {\n        list.push(1);\n      }\n\n      for (var i = 0, len = list.length; i < len; i++) {\n        t = list[i];\n        c = curve.get(t);\n\n        if (c[d] < min) {\n          min = c[d];\n        }\n\n        if (c[d] > max) {\n          max = c[d];\n        }\n      }\n\n      return {\n        min: min,\n        mid: (min + max) / 2,\n        max: max,\n        size: max - min\n      };\n    },\n    align: function align(points, line) {\n      var tx = line.p1.x,\n          ty = line.p1.y,\n          a = -atan2(line.p2.y - ty, line.p2.x - tx),\n          d = function d(v) {\n        return {\n          x: (v.x - tx) * cos(a) - (v.y - ty) * sin(a),\n          y: (v.x - tx) * sin(a) + (v.y - ty) * cos(a)\n        };\n      };\n\n      return points.map(d);\n    },\n    roots: function roots(points, line) {\n      line = line || {\n        p1: {\n          x: 0,\n          y: 0\n        },\n        p2: {\n          x: 1,\n          y: 0\n        }\n      };\n      var order = points.length - 1;\n      var p = utils.align(points, line);\n\n      var reduce = function reduce(t) {\n        return 0 <= t && t <= 1;\n      };\n\n      if (order === 2) {\n        var a = p[0].y,\n            b = p[1].y,\n            c = p[2].y,\n            d = a - 2 * b + c;\n\n        if (d !== 0) {\n          var m1 = -sqrt(b * b - a * c),\n              m2 = -a + b,\n              v1 = -(m1 + m2) / d,\n              v2 = -(-m1 + m2) / d;\n          return [v1, v2].filter(reduce);\n        } else if (b !== c && d === 0) {\n          return [(2 * b - c) / (2 * b - 2 * c)].filter(reduce);\n        }\n\n        return [];\n      } // see http://www.trans4mind.com/personal_development/mathematics/polynomials/cubicAlgebra.htm\n\n\n      var pa = p[0].y,\n          pb = p[1].y,\n          pc = p[2].y,\n          pd = p[3].y,\n          d = -pa + 3 * pb - 3 * pc + pd,\n          a = 3 * pa - 6 * pb + 3 * pc,\n          b = -3 * pa + 3 * pb,\n          c = pa;\n\n      if (utils.approximately(d, 0)) {\n        // this is not a cubic curve.\n        if (utils.approximately(a, 0)) {\n          // in fact, this is not a quadratic curve either.\n          if (utils.approximately(b, 0)) {\n            // in fact in fact, there are no solutions.\n            return [];\n          } // linear solution:\n\n\n          return [-c / b].filter(reduce);\n        } // quadratic solution:\n\n\n        var q = sqrt(b * b - 4 * a * c),\n            a2 = 2 * a;\n        return [(q - b) / a2, (-b - q) / a2].filter(reduce);\n      } // at this point, we know we need a cubic solution:\n\n\n      a /= d;\n      b /= d;\n      c /= d;\n      var p = (3 * b - a * a) / 3,\n          p3 = p / 3,\n          q = (2 * a * a * a - 9 * a * b + 27 * c) / 27,\n          q2 = q / 2,\n          discriminant = q2 * q2 + p3 * p3 * p3,\n          u1,\n          v1,\n          x1,\n          x2,\n          x3;\n\n      if (discriminant < 0) {\n        var mp3 = -p / 3,\n            mp33 = mp3 * mp3 * mp3,\n            r = sqrt(mp33),\n            t = -q / (2 * r),\n            cosphi = t < -1 ? -1 : t > 1 ? 1 : t,\n            phi = acos(cosphi),\n            crtr = crt(r),\n            t1 = 2 * crtr;\n        x1 = t1 * cos(phi / 3) - a / 3;\n        x2 = t1 * cos((phi + tau) / 3) - a / 3;\n        x3 = t1 * cos((phi + 2 * tau) / 3) - a / 3;\n        return [x1, x2, x3].filter(reduce);\n      } else if (discriminant === 0) {\n        u1 = q2 < 0 ? crt(-q2) : -crt(q2);\n        x1 = 2 * u1 - a / 3;\n        x2 = -u1 - a / 3;\n        return [x1, x2].filter(reduce);\n      } else {\n        var sd = sqrt(discriminant);\n        u1 = crt(-q2 + sd);\n        v1 = crt(q2 + sd);\n        return [u1 - v1 - a / 3].filter(reduce);\n      }\n    },\n    droots: function droots(p) {\n      // quadratic roots are easy\n      if (p.length === 3) {\n        var a = p[0],\n            b = p[1],\n            c = p[2],\n            d = a - 2 * b + c;\n\n        if (d !== 0) {\n          var m1 = -sqrt(b * b - a * c),\n              m2 = -a + b,\n              v1 = -(m1 + m2) / d,\n              v2 = -(-m1 + m2) / d;\n          return [v1, v2];\n        } else if (b !== c && d === 0) {\n          return [(2 * b - c) / (2 * (b - c))];\n        }\n\n        return [];\n      } // linear roots are even easier\n\n\n      if (p.length === 2) {\n        var a = p[0],\n            b = p[1];\n\n        if (a !== b) {\n          return [a / (a - b)];\n        }\n\n        return [];\n      }\n    },\n    curvature: function curvature(t, points, _3d, kOnly) {\n      var dpoints = utils.derive(points);\n      var d1 = dpoints[0];\n      var d2 = dpoints[1];\n      var num,\n          dnm,\n          adk,\n          dk,\n          k = 0,\n          r = 0; //\n      // We're using the following formula for curvature:\n      //\n      //              x'y\" - y'x\"\n      //   k(t) = ------------------\n      //           (x' + y')^(3/2)\n      //\n      // from https://en.wikipedia.org/wiki/Radius_of_curvature#Definition\n      //\n      // With it corresponding 3D counterpart:\n      //\n      //          sqrt( (y'z\" - y\"z') + (z'x\" - z\"x') + (x'y\" - x\"y'))\n      //   k(t) = -------------------------------------------------------\n      //                     (x' + y' + z')^(3/2)\n      //\n\n      var d = utils.compute(t, d1);\n      var dd = utils.compute(t, d2);\n      var qdsum = d.x * d.x + d.y * d.y;\n\n      if (_3d) {\n        num = sqrt(pow(d.y * dd.z - dd.y * d.z, 2) + pow(d.z * dd.x - dd.z * d.x, 2) + pow(d.x * dd.y - dd.x * d.y, 2));\n        dnm = pow(qdsum + d.z * d.z, 3 / 2);\n      } else {\n        num = d.x * dd.y - d.y * dd.x;\n        dnm = pow(qdsum, 3 / 2);\n      }\n\n      if (num === 0 || dnm === 0) {\n        return {\n          k: 0,\n          r: 0\n        };\n      }\n\n      k = num / dnm;\n      r = dnm / num; // We're also computing the derivative of kappa, because\n      // there is value in knowing the rate of change for the\n      // curvature along the curve. And we're just going to\n      // ballpark it based on an epsilon.\n\n      if (!kOnly) {\n        // compute k'(t) based on the interval before, and after it,\n        // to at least try to not introduce forward/backward pass bias.\n        var pk = utils.curvature(t - 0.001, points, _3d, true).k;\n        var nk = utils.curvature(t + 0.001, points, _3d, true).k;\n        dk = (nk - k + (k - pk)) / 2;\n        adk = (abs(nk - k) + abs(k - pk)) / 2;\n      }\n\n      return {\n        k: k,\n        r: r,\n        dk: dk,\n        adk: adk\n      };\n    },\n    inflections: function inflections(points) {\n      if (points.length < 4) return []; // FIXME: TODO: add in inflection abstraction for quartic+ curves?\n\n      var p = utils.align(points, {\n        p1: points[0],\n        p2: points.slice(-1)[0]\n      }),\n          a = p[2].x * p[1].y,\n          b = p[3].x * p[1].y,\n          c = p[1].x * p[2].y,\n          d = p[3].x * p[2].y,\n          v1 = 18 * (-3 * a + 2 * b + 3 * c - d),\n          v2 = 18 * (3 * a - b - 3 * c),\n          v3 = 18 * (c - a);\n\n      if (utils.approximately(v1, 0)) {\n        if (!utils.approximately(v2, 0)) {\n          var t = -v3 / v2;\n          if (0 <= t && t <= 1) return [t];\n        }\n\n        return [];\n      }\n\n      var trm = v2 * v2 - 4 * v1 * v3,\n          sq = Math.sqrt(trm),\n          d = 2 * v1;\n      if (utils.approximately(d, 0)) return [];\n      return [(sq - v2) / d, -(v2 + sq) / d].filter(function (r) {\n        return 0 <= r && r <= 1;\n      });\n    },\n    bboxoverlap: function bboxoverlap(b1, b2) {\n      var dims = [\"x\", \"y\"],\n          len = dims.length,\n          i,\n          dim,\n          l,\n          t,\n          d;\n\n      for (i = 0; i < len; i++) {\n        dim = dims[i];\n        l = b1[dim].mid;\n        t = b2[dim].mid;\n        d = (b1[dim].size + b2[dim].size) / 2;\n        if (abs(l - t) >= d) return false;\n      }\n\n      return true;\n    },\n    expandbox: function expandbox(bbox, _bbox) {\n      if (_bbox.x.min < bbox.x.min) {\n        bbox.x.min = _bbox.x.min;\n      }\n\n      if (_bbox.y.min < bbox.y.min) {\n        bbox.y.min = _bbox.y.min;\n      }\n\n      if (_bbox.z && _bbox.z.min < bbox.z.min) {\n        bbox.z.min = _bbox.z.min;\n      }\n\n      if (_bbox.x.max > bbox.x.max) {\n        bbox.x.max = _bbox.x.max;\n      }\n\n      if (_bbox.y.max > bbox.y.max) {\n        bbox.y.max = _bbox.y.max;\n      }\n\n      if (_bbox.z && _bbox.z.max > bbox.z.max) {\n        bbox.z.max = _bbox.z.max;\n      }\n\n      bbox.x.mid = (bbox.x.min + bbox.x.max) / 2;\n      bbox.y.mid = (bbox.y.min + bbox.y.max) / 2;\n\n      if (bbox.z) {\n        bbox.z.mid = (bbox.z.min + bbox.z.max) / 2;\n      }\n\n      bbox.x.size = bbox.x.max - bbox.x.min;\n      bbox.y.size = bbox.y.max - bbox.y.min;\n\n      if (bbox.z) {\n        bbox.z.size = bbox.z.max - bbox.z.min;\n      }\n    },\n    pairiteration: function pairiteration(c1, c2, curveIntersectionThreshold) {\n      var c1b = c1.bbox(),\n          c2b = c2.bbox(),\n          r = 100000,\n          threshold = curveIntersectionThreshold || 0.5;\n\n      if (c1b.x.size + c1b.y.size < threshold && c2b.x.size + c2b.y.size < threshold) {\n        return [(r * (c1._t1 + c1._t2) / 2 | 0) / r + \"/\" + (r * (c2._t1 + c2._t2) / 2 | 0) / r];\n      }\n\n      var cc1 = c1.split(0.5),\n          cc2 = c2.split(0.5),\n          pairs = [{\n        left: cc1.left,\n        right: cc2.left\n      }, {\n        left: cc1.left,\n        right: cc2.right\n      }, {\n        left: cc1.right,\n        right: cc2.right\n      }, {\n        left: cc1.right,\n        right: cc2.left\n      }];\n      pairs = pairs.filter(function (pair) {\n        return utils.bboxoverlap(pair.left.bbox(), pair.right.bbox());\n      });\n      var results = [];\n      if (pairs.length === 0) return results;\n      pairs.forEach(function (pair) {\n        results = results.concat(utils.pairiteration(pair.left, pair.right, threshold));\n      });\n      results = results.filter(function (v, i) {\n        return results.indexOf(v) === i;\n      });\n      return results;\n    },\n    getccenter: function getccenter(p1, p2, p3) {\n      var dx1 = p2.x - p1.x,\n          dy1 = p2.y - p1.y,\n          dx2 = p3.x - p2.x,\n          dy2 = p3.y - p2.y;\n      var dx1p = dx1 * cos(quart) - dy1 * sin(quart),\n          dy1p = dx1 * sin(quart) + dy1 * cos(quart),\n          dx2p = dx2 * cos(quart) - dy2 * sin(quart),\n          dy2p = dx2 * sin(quart) + dy2 * cos(quart); // chord midpoints\n\n      var mx1 = (p1.x + p2.x) / 2,\n          my1 = (p1.y + p2.y) / 2,\n          mx2 = (p2.x + p3.x) / 2,\n          my2 = (p2.y + p3.y) / 2; // midpoint offsets\n\n      var mx1n = mx1 + dx1p,\n          my1n = my1 + dy1p,\n          mx2n = mx2 + dx2p,\n          my2n = my2 + dy2p; // intersection of these lines:\n\n      var arc = utils.lli8(mx1, my1, mx1n, my1n, mx2, my2, mx2n, my2n),\n          r = utils.dist(arc, p1),\n          // arc start/end values, over mid point:\n      s = atan2(p1.y - arc.y, p1.x - arc.x),\n          m = atan2(p2.y - arc.y, p2.x - arc.x),\n          e = atan2(p3.y - arc.y, p3.x - arc.x),\n          _; // determine arc direction (cw/ccw correction)\n\n\n      if (s < e) {\n        // if s<m<e, arc(s, e)\n        // if m<s<e, arc(e, s + tau)\n        // if s<e<m, arc(e, s + tau)\n        if (s > m || m > e) {\n          s += tau;\n        }\n\n        if (s > e) {\n          _ = e;\n          e = s;\n          s = _;\n        }\n      } else {\n        // if e<m<s, arc(e, s)\n        // if m<e<s, arc(s, e + tau)\n        // if e<s<m, arc(s, e + tau)\n        if (e < m && m < s) {\n          _ = e;\n          e = s;\n          s = _;\n        } else {\n          e += tau;\n        }\n      } // assign and done.\n\n\n      arc.s = s;\n      arc.e = e;\n      arc.r = r;\n      return arc;\n    },\n    numberSort: function numberSort(a, b) {\n      return a - b;\n    }\n  };\n  module.exports = utils;\n})();","module.exports = random; // TODO: Deprecate?\n\nmodule.exports.random = random, module.exports.randomIterator = randomIterator;\n/**\n * Creates seeded PRNG with two methods:\n *   next() and nextDouble()\n */\n\nfunction random(inputSeed) {\n  var seed = typeof inputSeed === 'number' ? inputSeed : +new Date();\n  return new Generator(seed);\n}\n\nfunction Generator(seed) {\n  this.seed = seed;\n}\n/**\n  * Generates random integer number in the range from 0 (inclusive) to maxValue (exclusive)\n  *\n  * @param maxValue Number REQUIRED. Omitting this number will result in NaN values from PRNG.\n  */\n\n\nGenerator.prototype.next = next;\n/**\n  * Generates random double number in the range from 0 (inclusive) to 1 (exclusive)\n  * This function is the same as Math.random() (except that it could be seeded)\n  */\n\nGenerator.prototype.nextDouble = nextDouble;\n/**\n * Returns a random real number uniformly in [0, 1)\n */\n\nGenerator.prototype.uniform = nextDouble;\nGenerator.prototype.gaussian = gaussian;\n\nfunction gaussian() {\n  // use the polar form of the Box-Muller transform\n  // based on https://introcs.cs.princeton.edu/java/23recursion/StdRandom.java\n  var r, x, y;\n\n  do {\n    x = this.nextDouble() * 2 - 1;\n    y = this.nextDouble() * 2 - 1;\n    r = x * x + y * y;\n  } while (r >= 1 || r === 0);\n\n  return x * Math.sqrt(-2 * Math.log(r) / r);\n}\n\nfunction nextDouble() {\n  var seed = this.seed; // Robert Jenkins' 32 bit integer hash function.\n\n  seed = seed + 0x7ed55d16 + (seed << 12) & 0xffffffff;\n  seed = (seed ^ 0xc761c23c ^ seed >>> 19) & 0xffffffff;\n  seed = seed + 0x165667b1 + (seed << 5) & 0xffffffff;\n  seed = (seed + 0xd3a2646c ^ seed << 9) & 0xffffffff;\n  seed = seed + 0xfd7046c5 + (seed << 3) & 0xffffffff;\n  seed = (seed ^ 0xb55a4f09 ^ seed >>> 16) & 0xffffffff;\n  this.seed = seed;\n  return (seed & 0xfffffff) / 0x10000000;\n}\n\nfunction next(maxValue) {\n  return Math.floor(this.nextDouble() * maxValue);\n}\n/*\n * Creates iterator over array, which returns items of array in random order\n * Time complexity is guaranteed to be O(n);\n */\n\n\nfunction randomIterator(array, customRandom) {\n  var localRandom = customRandom || random();\n\n  if (typeof localRandom.next !== 'function') {\n    throw new Error('customRandom does not match expected API: next() function is missing');\n  }\n\n  return {\n    forEach: forEach,\n\n    /**\n     * Shuffles array randomly, in place.\n     */\n    shuffle: shuffle\n  };\n\n  function shuffle() {\n    var i, j, t;\n\n    for (i = array.length - 1; i > 0; --i) {\n      j = localRandom.next(i + 1); // i inclusive\n\n      t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n    }\n\n    return array;\n  }\n\n  function forEach(callback) {\n    var i, j, t;\n\n    for (i = array.length - 1; i > 0; --i) {\n      j = localRandom.next(i + 1); // i inclusive\n\n      t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n      callback(t);\n    }\n\n    if (array.length) {\n      callback(array[0]);\n    }\n  }\n}","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","THREE.FBXLoader = require('../../lib/FBXLoader');\n/**\n * fbx-model\n *\n * Loader for FBX format. Supports ASCII, but *not* binary, models.\n */\n\nmodule.exports = AFRAME.registerComponent('fbx-model', {\n  schema: {\n    src: {\n      type: 'asset'\n    },\n    crossorigin: {\n      default: ''\n    }\n  },\n  init: function init() {\n    this.model = null;\n  },\n  update: function update() {\n    var data = this.data;\n    if (!data.src) return;\n    this.remove();\n    var loader = new THREE.FBXLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, this.load.bind(this));\n  },\n  load: function load(model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {\n      format: 'fbx',\n      model: model\n    });\n  },\n  remove: function remove() {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});","/**\n * object-model\n *\n * Loader for THREE.js JSON format. Somewhat confusingly, there are two different THREE.js formats,\n * both having the .json extension. This loader supports only THREE.ObjectLoader, which typically\n * includes multiple meshes or an entire scene.\n *\n * Check the console for errors, if in doubt. You may need to use `json-model` or\n * `blend-character-model` for some .js and .json files.\n *\n * See: https://clara.io/learn/user-guide/data_exchange/threejs_export\n */\nmodule.exports = AFRAME.registerComponent('object-model', {\n  schema: {\n    src: {\n      type: 'asset'\n    },\n    crossorigin: {\n      default: ''\n    }\n  },\n  init: function init() {\n    this.model = null;\n  },\n  update: function update() {\n    var _this = this;\n\n    var loader;\n    var data = this.data;\n    if (!data.src) return;\n    this.remove();\n    loader = new THREE.ObjectLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, function (object) {\n      // Enable skinning, if applicable.\n      object.traverse(function (o) {\n        if (o instanceof THREE.SkinnedMesh && o.material) {\n          o.material.skinning = !!(o.geometry && o.geometry.bones || []).length;\n        }\n      });\n\n      _this.load(object);\n    });\n  },\n  load: function load(model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {\n      format: 'json',\n      model: model\n    });\n  },\n  remove: function remove() {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});","var EPS = 0.1;\nmodule.exports = AFRAME.registerComponent('checkpoint-controls', {\n  schema: {\n    enabled: {\n      default: true\n    },\n    mode: {\n      default: 'teleport',\n      oneOf: ['teleport', 'animate']\n    },\n    animateSpeed: {\n      default: 3.0\n    }\n  },\n  init: function init() {\n    this.active = true;\n    this.checkpoint = null;\n    this.isNavMeshConstrained = false;\n    this.offset = new THREE.Vector3();\n    this.position = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n  },\n  play: function play() {\n    this.active = true;\n  },\n  pause: function pause() {\n    this.active = false;\n  },\n  setCheckpoint: function setCheckpoint(checkpoint) {\n    var el = this.el;\n    if (!this.active) return;\n    if (this.checkpoint === checkpoint) return;\n\n    if (this.checkpoint) {\n      el.emit('navigation-end', {\n        checkpoint: this.checkpoint\n      });\n    }\n\n    this.checkpoint = checkpoint;\n    this.sync(); // Ignore new checkpoint if we're already there.\n\n    if (this.position.distanceTo(this.targetPosition) < EPS) {\n      this.checkpoint = null;\n      return;\n    }\n\n    el.emit('navigation-start', {\n      checkpoint: checkpoint\n    });\n\n    if (this.data.mode === 'teleport') {\n      this.el.setAttribute('position', this.targetPosition);\n      this.checkpoint = null;\n      el.emit('navigation-end', {\n        checkpoint: checkpoint\n      });\n      el.components['movement-controls'].updateNavLocation();\n    }\n  },\n  isVelocityActive: function isVelocityActive() {\n    return !!(this.active && this.checkpoint);\n  },\n  getVelocity: function getVelocity() {\n    if (!this.active) return;\n    var data = this.data;\n    var offset = this.offset;\n    var position = this.position;\n    var targetPosition = this.targetPosition;\n    var checkpoint = this.checkpoint;\n    this.sync();\n\n    if (position.distanceTo(targetPosition) < EPS) {\n      this.checkpoint = null;\n      this.el.emit('navigation-end', {\n        checkpoint: checkpoint\n      });\n      return offset.set(0, 0, 0);\n    }\n\n    offset.setLength(data.animateSpeed);\n    return offset;\n  },\n  sync: function sync() {\n    var offset = this.offset;\n    var position = this.position;\n    var targetPosition = this.targetPosition;\n    position.copy(this.el.getAttribute('position'));\n    this.checkpoint.object3D.getWorldPosition(targetPosition);\n    targetPosition.add(this.checkpoint.components.checkpoint.getOffset());\n    offset.copy(targetPosition).sub(position);\n  }\n});","/**\n * Flat grid.\n *\n * Defaults to 75x75.\n */\nmodule.exports = AFRAME.registerPrimitive('a-grid', {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane',\n      width: 75,\n      height: 75\n    },\n    rotation: {\n      x: -90,\n      y: 0,\n      z: 0\n    },\n    material: {\n      src: 'url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)',\n      repeat: '75 75'\n    }\n  },\n  mappings: {\n    width: 'geometry.width',\n    height: 'geometry.height',\n    src: 'material.src'\n  }\n});","module.exports = exposeProperties;\n/**\n * Augments `target` object with getter/setter functions, which modify settings\n *\n * @example\n *  var target = {};\n *  exposeProperties({ age: 42}, target);\n *  target.age(); // returns 42\n *  target.age(24); // make age 24;\n *\n *  var filteredTarget = {};\n *  exposeProperties({ age: 42, name: 'John'}, filteredTarget, ['name']);\n *  filteredTarget.name(); // returns 'John'\n *  filteredTarget.age === undefined; // true\n */\n\nfunction exposeProperties(settings, target, filter) {\n  var needsFilter = Object.prototype.toString.call(filter) === '[object Array]';\n\n  if (needsFilter) {\n    for (var i = 0; i < filter.length; ++i) {\n      augment(settings, target, filter[i]);\n    }\n  } else {\n    for (var key in settings) {\n      augment(settings, target, key);\n    }\n  }\n}\n\nfunction augment(source, target, key) {\n  if (source.hasOwnProperty(key)) {\n    if (typeof target[key] === 'function') {\n      // this accessor is already defined. Ignore it\n      return;\n    }\n\n    target[key] = function (value) {\n      if (value !== undefined) {\n        source[key] = value;\n        return target;\n      }\n\n      return source[key];\n    };\n  }\n}","/**\n * Recursively applies a MeshNormalMaterial to the entity, such that\n * face colors are determined by their orientation. Helpful for\n * debugging geometry\n */\nmodule.exports = AFRAME.registerComponent('normal-material', {\n  init: function init() {\n    this.material = new THREE.MeshNormalMaterial({\n      flatShading: true\n    });\n    this.applyMaterial = this.applyMaterial.bind(this);\n    this.el.addEventListener('object3dset', this.applyMaterial);\n  },\n  remove: function remove() {\n    this.el.removeEventListener('object3dset', this.applyMaterial);\n  },\n  applyMaterial: function applyMaterial() {\n    var _this = this;\n\n    this.el.object3D.traverse(function (node) {\n      if (node.isMesh) node.material = _this.material;\n    });\n  }\n});","var vg = require('../../lib/hex-grid.min.js');\n\nvar defaultHexGrid = require('../../lib/default-hex-grid');\n/**\n * Hex grid.\n */\n\n\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-hexgrid', {\n  defaultComponents: {\n    'hexgrid': {}\n  },\n  mappings: {\n    src: 'hexgrid.src'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('hexgrid', {\n  dependencies: ['material'],\n  schema: {\n    src: {\n      type: 'asset'\n    }\n  },\n  init: function init() {\n    var _this = this;\n\n    var data = this.data;\n\n    if (data.src) {\n      fetch(data.src).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        return _this.addMesh(json);\n      });\n    } else {\n      this.addMesh(defaultHexGrid);\n    }\n  },\n  addMesh: function addMesh(json) {\n    var grid = new vg.HexGrid();\n    grid.fromJSON(json);\n    var board = new vg.Board(grid);\n    board.generateTilemap();\n    this.el.setObject3D('mesh', board.group);\n    this.addMaterial();\n  },\n  addMaterial: function addMaterial() {\n    var materialComponent = this.el.components.material;\n    var material = (materialComponent || {}).material;\n    if (!material) return;\n    this.el.object3D.traverse(function (node) {\n      if (node.isMesh) {\n        node.material = material;\n      }\n    });\n  },\n  remove: function remove() {\n    this.el.removeObject3D('mesh');\n  }\n});","module.exports = {\n  \"size\": 5,\n  \"cellSize\": 10,\n  \"extrudeSettings\": {\n    \"amount\": 1,\n    \"bevelEnabled\": true,\n    \"bevelSegments\": 1,\n    \"steps\": 1,\n    \"bevelSize\": 0.5,\n    \"bevelThickness\": 0.5\n  },\n  \"autogenerated\": true,\n  \"cells\": [{\n    \"q\": -1,\n    \"r\": 0,\n    \"s\": 1,\n    \"h\": 1,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 0,\n    \"r\": -1,\n    \"s\": 1,\n    \"h\": 1,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 0,\n    \"r\": 0,\n    \"s\": 0,\n    \"h\": 1,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 1,\n    \"r\": -1,\n    \"s\": 0,\n    \"h\": 1,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": -1,\n    \"r\": 1,\n    \"s\": 0,\n    \"h\": 0,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 0,\n    \"r\": 1,\n    \"s\": -1,\n    \"h\": 0,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 1,\n    \"r\": 0,\n    \"s\": -1,\n    \"h\": 0,\n    \"walkable\": true,\n    \"userData\": {}\n  }]\n};","'use strict';\nvar $ = require('../internals/export');\nvar $trimStart = require('../internals/string-trim').start;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimStart');\n\nvar trimStart = FORCED ? function trimStart() {\n  return $trimStart(this);\n} : ''.trimStart;\n\n// `String.prototype.{ trimStart, trimLeft }` methods\n// https://github.com/tc39/ecmascript-string-left-right-trim\n$({ target: 'String', proto: true, forced: FORCED }, {\n  trimStart: trimStart,\n  trimLeft: trimStart\n});\n","module.exports = integrate;\n\nfunction integrate(bodies, timeStep) {\n  var tx = 0,\n      ty = 0,\n      tz = 0,\n      i,\n      max = bodies.length;\n\n  for (i = 0; i < max; ++i) {\n    var body = bodies[i],\n        coeff = timeStep * timeStep / body.mass;\n    body.pos.x = 2 * body.pos.x - body.prevPos.x + body.force.x * coeff;\n    body.pos.y = 2 * body.pos.y - body.prevPos.y + body.force.y * coeff;\n    body.pos.z = 2 * body.pos.z - body.prevPos.z + body.force.z * coeff;\n    tx += Math.abs(body.pos.x - body.prevPos.x);\n    ty += Math.abs(body.pos.y - body.prevPos.y);\n    tz += Math.abs(body.pos.z - body.prevPos.z);\n  }\n\n  return (tx * tx + ty * ty + tz * tz) / bodies.length;\n}","'use strict';\nvar aFunction = require('../internals/a-function');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\n\n// 25.4.1.5 NewPromiseCapability(C)\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","/**\n * Source: https://github.com/Adobe-Marketing-Cloud/fetch-script\n */\nfunction getScriptId() {\n  return 'script_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n}\n\nfunction createScript(url, id) {\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.id = id;\n  script.src = url;\n  return script;\n}\n\nfunction removeScript(id) {\n  var script = document.getElementById(id);\n  var parent = script.parentNode;\n\n  try {\n    parent && parent.removeChild(script);\n  } catch (e) {// ignore\n  }\n}\n\nfunction appendScript(script) {\n  var firstScript = document.getElementsByTagName('script')[0];\n  firstScript.parentNode.insertBefore(script, firstScript);\n}\n\nfunction fetchScriptInternal(url, options, Promise) {\n  return new Promise(function (resolve, reject) {\n    var timeout = options.timeout || 5000;\n    var scriptId = getScriptId();\n    var script = createScript(url, scriptId);\n    var timeoutId = setTimeout(function () {\n      reject(new Error('Script request to ' + url + ' timed out'));\n      removeScript(scriptId);\n    }, timeout);\n\n    var disableTimeout = function disableTimeout(timeoutId) {\n      clearTimeout(timeoutId);\n    };\n\n    script.addEventListener('load', function (e) {\n      resolve({\n        ok: true\n      });\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n    script.addEventListener('error', function (e) {\n      reject(new Error('Script request to ' + url + ' failed ' + e));\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n    appendScript(script);\n  });\n}\n\nfunction fetchScript(settings) {\n  settings = settings || {};\n  return function (url, options) {\n    options = options || {};\n    return fetchScriptInternal(url, options, settings.Promise || Promise);\n  };\n}\n\nmodule.exports = fetchScript;","var ACCEL_G = -9.8,\n    // m/s^2\nEASING = -15; // m/s^2\n\n/**\n * Jump ability.\n */\n\nmodule.exports = AFRAME.registerComponent('jump-ability', {\n  dependencies: ['velocity'],\n\n  /* Schema\n  */\n  schema: {\n    on: {\n      default: 'keydown:Space gamepadbuttondown:0'\n    },\n    playerHeight: {\n      default: 1.764\n    },\n    maxJumps: {\n      default: 1\n    },\n    distance: {\n      default: 5\n    },\n    debug: {\n      default: false\n    }\n  },\n  init: function init() {\n    this.velocity = 0;\n    this.numJumps = 0;\n    var beginJump = this.beginJump.bind(this),\n        events = this.data.on.split(' ');\n    this.bindings = {};\n\n    for (var i = 0; i < events.length; i++) {\n      this.bindings[events[i]] = beginJump;\n      this.el.addEventListener(events[i], beginJump);\n    }\n\n    this.bindings.collide = this.onCollide.bind(this);\n    this.el.addEventListener('collide', this.bindings.collide);\n  },\n  remove: function remove() {\n    for (var event in this.bindings) {\n      if (this.bindings.hasOwnProperty(event)) {\n        this.el.removeEventListener(event, this.bindings[event]);\n        delete this.bindings[event];\n      }\n    }\n\n    this.el.removeEventListener('collide', this.bindings.collide);\n    delete this.bindings.collide;\n  },\n  beginJump: function beginJump() {\n    if (this.numJumps < this.data.maxJumps) {\n      var data = this.data,\n          initialVelocity = Math.sqrt(-2 * data.distance * (ACCEL_G + EASING)),\n          v = this.el.getAttribute('velocity');\n      this.el.setAttribute('velocity', {\n        x: v.x,\n        y: initialVelocity,\n        z: v.z\n      });\n      this.numJumps++;\n      this.el.emit('jumpstart');\n    }\n  },\n  onCollide: function onCollide() {\n    if (this.numJumps > 0) this.el.emit('jumpend');\n    this.numJumps = 0;\n  }\n});","module.exports = function eventify(subject) {\n  validateSubject(subject);\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n  return {\n    on: function on(eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n\n      var handlers = registeredEvents[eventName];\n\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n\n      handlers.push({\n        callback: callback,\n        ctx: ctx\n      });\n      return subject;\n    },\n    off: function off(eventName, callback) {\n      var wantToRemoveAll = typeof eventName === 'undefined';\n\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = typeof callback !== 'function';\n\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n    fire: function fire(eventName) {\n      var callbacks = registeredEvents[eventName];\n\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n\n      for (var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n\n  var reservedWords = ['on', 'fire', 'off'];\n\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}","module.exports = Object.assign(function GamepadButton() {}, {\n  FACE_1: 0,\n  FACE_2: 1,\n  FACE_3: 2,\n  FACE_4: 3,\n  L_SHOULDER_1: 4,\n  R_SHOULDER_1: 5,\n  L_SHOULDER_2: 6,\n  R_SHOULDER_2: 7,\n  SELECT: 8,\n  START: 9,\n  DPAD_UP: 12,\n  DPAD_DOWN: 13,\n  DPAD_LEFT: 14,\n  DPAD_RIGHT: 15,\n  VENDOR: 16\n});","var physics = require('ngraph.physics.primitives');\n\nmodule.exports = function (pos) {\n  return new physics.Body3d(pos);\n};","module.exports = Spring;\n/**\n * Represents a physical spring. Spring connects two bodies, has rest length\n * stiffness coefficient and optional weight\n */\n\nfunction Spring(fromBody, toBody, length, coeff) {\n  this.from = fromBody;\n  this.to = toBody;\n  this.length = length;\n  this.coeff = coeff;\n}\n\n;","/**\n * Represents spring force, which updates forces acting on two bodies, connected\n * by a spring.\n *\n * @param {Object} options for the spring force\n * @param {Number=} options.springCoeff spring force coefficient.\n * @param {Number=} options.springLength desired length of a spring at rest.\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge');\n\n  var random = require('ngraph.random').random(42);\n\n  var expose = require('ngraph.expose');\n\n  options = merge(options, {\n    springCoeff: 0.0002,\n    springLength: 80\n  });\n  var api = {\n    /**\n     * Upsates forces acting on a spring\n     */\n    update: function update(spring) {\n      var body1 = spring.from,\n          body2 = spring.to,\n          length = spring.length < 0 ? options.springLength : spring.length,\n          dx = body2.pos.x - body1.pos.x,\n          dy = body2.pos.y - body1.pos.y,\n          r = Math.sqrt(dx * dx + dy * dy);\n\n      if (r === 0) {\n        dx = (random.nextDouble() - 0.5) / 50;\n        dy = (random.nextDouble() - 0.5) / 50;\n        r = Math.sqrt(dx * dx + dy * dy);\n      }\n\n      var d = r - length;\n      var coeff = (!spring.coeff || spring.coeff < 0 ? options.springCoeff : spring.coeff) * d / r;\n      body1.force.x += coeff * dx;\n      body1.force.y += coeff * dy;\n      body2.force.x -= coeff * dx;\n      body2.force.y -= coeff * dy;\n    }\n  };\n  expose(options, api, ['springCoeff', 'springLength']);\n  return api;\n};","(function () {\n  \"use strict\";\n\n  var utils = require(\"./utils.js\");\n  /**\n   * Poly Bezier\n   * @param {[type]} curves [description]\n   */\n\n\n  var PolyBezier = function PolyBezier(curves) {\n    this.curves = [];\n    this._3d = false;\n\n    if (!!curves) {\n      this.curves = curves;\n      this._3d = this.curves[0]._3d;\n    }\n  };\n\n  PolyBezier.prototype = {\n    valueOf: function valueOf() {\n      return this.toString();\n    },\n    toString: function toString() {\n      return \"[\" + this.curves.map(function (curve) {\n        return utils.pointsToString(curve.points);\n      }).join(\", \") + \"]\";\n    },\n    addCurve: function addCurve(curve) {\n      this.curves.push(curve);\n      this._3d = this._3d || curve._3d;\n    },\n    length: function length() {\n      return this.curves.map(function (v) {\n        return v.length();\n      }).reduce(function (a, b) {\n        return a + b;\n      });\n    },\n    curve: function curve(idx) {\n      return this.curves[idx];\n    },\n    bbox: function bbox() {\n      var c = this.curves;\n      var bbox = c[0].bbox();\n\n      for (var i = 1; i < c.length; i++) {\n        utils.expandbox(bbox, c[i].bbox());\n      }\n\n      return bbox;\n    },\n    offset: function offset(d) {\n      var offset = [];\n      this.curves.forEach(function (v) {\n        offset = offset.concat(v.offset(d));\n      });\n      return new PolyBezier(offset);\n    }\n  };\n  module.exports = PolyBezier;\n})();","/**\n * Gamepad controls for A-Frame.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\n *\n * For more information about the Gamepad API, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n */\nvar GamepadButton = require('../../lib/GamepadButton'),\n    GamepadButtonEvent = require('../../lib/GamepadButtonEvent');\n\nvar JOYSTICK_EPS = 0.2;\nvar Joystick = {\n  MOVEMENT: 1,\n  ROTATION: 2\n};\nmodule.exports = AFRAME.registerComponent('gamepad-controls', {\n  /*******************************************************************\n   * Statics\n   */\n  GamepadButton: GamepadButton,\n\n  /*******************************************************************\n   * Schema\n   */\n  schema: {\n    // Controller 0-3\n    controller: {\n      default: 0,\n      oneOf: [0, 1, 2, 3]\n    },\n    // Enable/disable features\n    enabled: {\n      default: true\n    },\n    // Debugging\n    debug: {\n      default: false\n    },\n    // Heading element for rotation\n    camera: {\n      default: '[camera]',\n      type: 'selector'\n    },\n    // Rotation sensitivity\n    rotationSensitivity: {\n      default: 2.0\n    }\n  },\n\n  /*******************************************************************\n   * Core\n   */\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function init() {\n    var sceneEl = this.el.sceneEl;\n    this.system = sceneEl.systems['tracked-controls-webxr'] || {\n      controllers: []\n    };\n    this.prevTime = window.performance.now(); // Button state\n\n    this.buttons = {}; // Rotation\n\n    var rotation = this.el.object3D.rotation;\n    this.pitch = new THREE.Object3D();\n    this.pitch.rotation.x = THREE.Math.degToRad(rotation.x);\n    this.yaw = new THREE.Object3D();\n    this.yaw.position.y = 10;\n    this.yaw.rotation.y = THREE.Math.degToRad(rotation.y);\n    this.yaw.add(this.pitch);\n    this._lookVector = new THREE.Vector2();\n    this._moveVector = new THREE.Vector2();\n    this._dpadVector = new THREE.Vector2();\n    sceneEl.addBehavior(this);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function update() {\n    this.tick();\n  },\n\n  /**\n   * Called on each iteration of main render loop.\n   */\n  tick: function tick(t, dt) {\n    this.updateButtonState();\n    this.updateRotation(dt);\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function remove() {},\n\n  /*******************************************************************\n   * Movement\n   */\n  isVelocityActive: function isVelocityActive() {\n    if (!this.data.enabled || !this.isConnected()) return false;\n    var dpad = this._dpadVector;\n    var joystick = this._moveVector;\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n    var inputX = dpad.x || joystick.x;\n    var inputY = dpad.y || joystick.y;\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    var dpad = this._dpadVector;\n    var joystick = this._moveVector;\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n    var inputX = dpad.x || joystick.x;\n    var inputY = dpad.y || joystick.y;\n    var dVelocity = new THREE.Vector3();\n\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\n      dVelocity.x += inputX;\n    }\n\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\n      dVelocity.z += inputY;\n    }\n\n    return dVelocity;\n  },\n\n  /*******************************************************************\n   * Rotation\n   */\n  isRotationActive: function isRotationActive() {\n    if (!this.data.enabled || !this.isConnected()) return false;\n    var joystick = this._lookVector;\n    this.getJoystick(Joystick.ROTATION, joystick);\n    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;\n  },\n  updateRotation: function updateRotation(dt) {\n    if (!this.isRotationActive()) return;\n    var data = this.data;\n    var yaw = this.yaw;\n    var pitch = this.pitch;\n    var lookControls = data.camera.components['look-controls'];\n    var hasLookControls = lookControls && lookControls.pitchObject && lookControls.yawObject; // Sync with look-controls pitch/yaw if available.\n\n    if (hasLookControls) {\n      pitch.rotation.copy(lookControls.pitchObject.rotation);\n      yaw.rotation.copy(lookControls.yawObject.rotation);\n    }\n\n    var lookVector = this._lookVector;\n    this.getJoystick(Joystick.ROTATION, lookVector);\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\n    yaw.rotation.y -= lookVector.x;\n    pitch.rotation.x -= lookVector.y;\n    pitch.rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\n    data.camera.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0); // Sync with look-controls pitch/yaw if available.\n\n    if (hasLookControls) {\n      lookControls.pitchObject.rotation.copy(pitch.rotation);\n      lookControls.yawObject.rotation.copy(yaw.rotation);\n    }\n  },\n\n  /*******************************************************************\n   * Button events\n   */\n  updateButtonState: function updateButtonState() {\n    var gamepad = this.getGamepad();\n\n    if (this.data.enabled && gamepad) {\n      // Fire DOM events for button state changes.\n      for (var i = 0; i < gamepad.buttons.length; i++) {\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\n        }\n\n        this.buttons[i] = gamepad.buttons[i].pressed;\n      }\n    } else if (Object.keys(this.buttons)) {\n      // Reset state if controls are disabled or controller is lost.\n      this.buttons = {};\n    }\n  },\n  emit: function emit(event) {\n    // Emit original event.\n    this.el.emit(event.type, event); // Emit convenience event, identifying button index.\n\n    this.el.emit(event.type + ':' + event.index, new GamepadButtonEvent(event.type, event.index, event));\n  },\n\n  /*******************************************************************\n   * Gamepad state\n   */\n\n  /**\n   * Returns the Gamepad instance attached to the component. If connected,\n   * a proxy-controls component may provide access to Gamepad input from a\n   * remote device.\n   *\n   * @return {Gamepad}\n   */\n  getGamepad: function getGamepad() {\n    var stdGamepad = navigator.getGamepads && navigator.getGamepads()[this.data.controller],\n        xrController = this.system.controllers[this.data.controller],\n        xrGamepad = xrController && xrController.gamepad,\n        proxyControls = this.el.sceneEl.components['proxy-controls'],\n        proxyGamepad = proxyControls && proxyControls.isConnected() && proxyControls.getGamepad(this.data.controller);\n    return proxyGamepad || xrGamepad || stdGamepad;\n  },\n\n  /**\n   * Returns the state of the given button.\n   * @param  {number} index The button (0-N) for which to find state.\n   * @return {GamepadButton}\n   */\n  getButton: function getButton(index) {\n    return this.getGamepad().buttons[index];\n  },\n\n  /**\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\n   * @param  {number} index The axis (0-N) for which to find state.\n   * @return {number} On the interval [-1,1].\n   */\n  getAxis: function getAxis(index) {\n    return this.getGamepad().axes[index];\n  },\n\n  /**\n   * Returns the state of the specified joystick as a THREE.Vector2.\n   * @param  {Joystick} role\n   * @param  {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getJoystick: function getJoystick(index, target) {\n    var gamepad = this.getGamepad();\n\n    if (gamepad.mapping === 'xr-standard') {\n      // See: https://github.com/donmccurdy/aframe-extras/issues/307\n      switch (index) {\n        case Joystick.MOVEMENT:\n          return target.set(gamepad.axes[2], gamepad.axes[3]);\n\n        case Joystick.ROTATION:\n          return target.set(gamepad.axes[0], gamepad.axes[1]);\n      }\n    } else {\n      switch (index) {\n        case Joystick.MOVEMENT:\n          return target.set(gamepad.axes[0], gamepad.axes[1]);\n\n        case Joystick.ROTATION:\n          return target.set(gamepad.axes[2], gamepad.axes[3]);\n      }\n    }\n\n    throw new Error('Unexpected joystick index \"%d\".', index);\n  },\n\n  /**\n   * Returns the state of the dpad as a THREE.Vector2.\n   * @param {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getDpad: function getDpad(target) {\n    var gamepad = this.getGamepad();\n\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\n      return target.set(0, 0);\n    }\n\n    return target.set((gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0) + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0), (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0) + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0));\n  },\n\n  /**\n   * Returns true if the gamepad is currently connected to the system.\n   * @return {boolean}\n   */\n  isConnected: function isConnected() {\n    var gamepad = this.getGamepad();\n    return !!(gamepad && gamepad.connected);\n  },\n\n  /**\n   * Returns a string containing some information about the controller. Result\n   * may vary across browsers, for a given controller.\n   * @return {string}\n   */\n  getID: function getID() {\n    return this.getGamepad().id;\n  }\n});","/**\n * Apply this component to models that looks \"blocky\", to have Three.js compute\n * vertex normals on the fly for a \"smoother\" look.\n */\nmodule.exports = AFRAME.registerComponent('mesh-smooth', {\n  init: function init() {\n    this.el.addEventListener('model-loaded', function (e) {\n      e.detail.model.traverse(function (node) {\n        if (node.isMesh) node.geometry.computeVertexNormals();\n      });\n    });\n  }\n});","/**\n * Tube following a custom path.\n *\n * Usage:\n *\n * ```html\n * <a-tube path=\"5 0 5, 5 0 -5, -5 0 -5\" radius=\"0.5\"></a-tube>\n * ```\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-tube', {\n  defaultComponents: {\n    tube: {}\n  },\n  mappings: {\n    path: 'tube.path',\n    segments: 'tube.segments',\n    radius: 'tube.radius',\n    'radial-segments': 'tube.radialSegments',\n    closed: 'tube.closed'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('tube', {\n  schema: {\n    path: {\n      default: []\n    },\n    segments: {\n      default: 64\n    },\n    radius: {\n      default: 1\n    },\n    radialSegments: {\n      default: 8\n    },\n    closed: {\n      default: false\n    }\n  },\n  init: function init() {\n    var el = this.el,\n        data = this.data;\n    var material = el.components.material;\n\n    if (!data.path.length) {\n      console.error('[a-tube] `path` property expected but not found.');\n      return;\n    }\n\n    var curve = new THREE.CatmullRomCurve3(data.path.map(function (point) {\n      point = point.split(' ');\n      return new THREE.Vector3(Number(point[0]), Number(point[1]), Number(point[2]));\n    }));\n    var geometry = new THREE.TubeGeometry(curve, data.segments, data.radius, data.radialSegments, data.closed);\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial();\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    this.el.setObject3D('mesh', this.mesh);\n  },\n  update: function update(prevData) {\n    if (!Object.keys(prevData).length) return;\n    this.remove();\n    this.init();\n  },\n  remove: function remove() {\n    if (this.mesh) this.el.removeObject3D('mesh');\n  }\n});","/**\n * nav-mesh\n *\n * Waits for a mesh to be loaded on the current entity, then sets it as the\n * nav mesh in the pathfinding system.\n */\nmodule.exports = AFRAME.registerComponent('nav-mesh', {\n  init: function init() {\n    this.system = this.el.sceneEl.systems.nav;\n    this.hasLoadedNavMesh = false;\n    this.el.addEventListener('object3dset', this.loadNavMesh.bind(this));\n  },\n  play: function play() {\n    if (!this.hasLoadedNavMesh) this.loadNavMesh();\n  },\n  loadNavMesh: function loadNavMesh() {\n    var object = this.el.getObject3D('mesh');\n    var scene = this.el.sceneEl.object3D;\n    if (!object) return;\n    var navMesh;\n    object.traverse(function (node) {\n      if (node.isMesh) navMesh = node;\n    });\n    if (!navMesh) return;\n    var navMeshGeometry = navMesh.geometry.isBufferGeometry ? new THREE.Geometry().fromBufferGeometry(navMesh.geometry) : navMesh.geometry.clone();\n    scene.updateMatrixWorld();\n    navMeshGeometry.applyMatrix(navMesh.matrixWorld);\n    this.system.setNavMeshGeometry(navMeshGeometry);\n    this.hasLoadedNavMesh = true;\n  }\n});","require('./checkpoint-controls');\n\nrequire('./gamepad-controls');\n\nrequire('./keyboard-controls');\n\nrequire('./touch-controls');\n\nrequire('./movement-controls');\n\nrequire('./trackpad-controls');","var _require = require('three-pathfinding'),\n    Pathfinding = _require.Pathfinding;\n\nvar pathfinder = new Pathfinding();\nvar ZONE = 'level';\n/**\n * nav\n *\n * Pathfinding system, using PatrolJS.\n */\n\nmodule.exports = AFRAME.registerSystem('nav', {\n  init: function init() {\n    this.navMesh = null;\n    this.agents = new Set();\n  },\n\n  /**\n   * @param {THREE.Geometry} geometry\n   */\n  setNavMeshGeometry: function setNavMeshGeometry(geometry) {\n    this.navMesh = new THREE.Mesh(geometry);\n    pathfinder.setZoneData(ZONE, Pathfinding.createZone(geometry));\n    Array.from(this.agents).forEach(function (agent) {\n      return agent.updateNavLocation();\n    });\n  },\n\n  /**\n   * @return {THREE.Mesh}\n   */\n  getNavMesh: function getNavMesh() {\n    return this.navMesh;\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  addAgent: function addAgent(ctrl) {\n    this.agents.add(ctrl);\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  removeAgent: function removeAgent(ctrl) {\n    this.agents.delete(ctrl);\n  },\n\n  /**\n   * @param  {THREE.Vector3} start\n   * @param  {THREE.Vector3} end\n   * @param  {number} groupID\n   * @return {Array<THREE.Vector3>}\n   */\n  getPath: function getPath(start, end, groupID) {\n    return this.navMesh ? pathfinder.findPath(start, end, ZONE, groupID) : null;\n  },\n\n  /**\n   * @param {THREE.Vector3} position\n   * @return {number}\n   */\n  getGroup: function getGroup(position) {\n    return this.navMesh ? pathfinder.getGroup(ZONE, position) : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} position\n   * @param  {number} groupID\n   * @return {Node}\n   */\n  getNode: function getNode(position, groupID) {\n    return this.navMesh ? pathfinder.getClosestNode(position, ZONE, groupID, true) : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} start Starting position.\n   * @param  {THREE.Vector3} end Desired ending position.\n   * @param  {number} groupID\n   * @param  {Node} node\n   * @param  {THREE.Vector3} endTarget (Output) Adjusted step end position.\n   * @return {Node} Current node, after step is taken.\n   */\n  clampStep: function clampStep(start, end, groupID, node, endTarget) {\n    if (!this.navMesh) {\n      endTarget.copy(end);\n      return null;\n    } else if (!node) {\n      endTarget.copy(end);\n      return this.getNode(end, groupID);\n    }\n\n    return pathfinder.clampStep(start, end, node, ZONE, groupID, endTarget);\n  }\n});","/**\n * This is Barnes Hut simulation algorithm for 3d case. Implementation\n * is highly optimized (avoids recusion and gc pressure)\n *\n * http://www.cs.princeton.edu/courses/archive/fall03/cs126/assignments/barnes-hut.html\n *\n * NOTE: This module duplicates a lot of code from 2d case. Primary reason for\n * this is performance. Every time I tried to abstract away vector operations\n * I had negative impact on performance. So in this case I'm scarifying code\n * reuse in favor of speed\n */\nmodule.exports = function (options) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8; // we require deterministic randomness here\n\n  var random = require('ngraph.random').random(1984),\n      Node = require('./node'),\n      InsertStack = require('./insertStack'),\n      isSamePosition = require('./isSamePosition');\n\n  var gravity = options.gravity,\n      updateQueue = [],\n      insertStack = new InsertStack(),\n      theta = options.theta,\n      nodesCache = [],\n      currentInCache = 0,\n      newNode = function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n\n    if (node) {\n      node.quad0 = null;\n      node.quad4 = null;\n      node.quad1 = null;\n      node.quad5 = null;\n      node.quad2 = null;\n      node.quad6 = null;\n      node.quad3 = null;\n      node.quad7 = null;\n      node.body = null;\n      node.mass = node.massX = node.massY = node.massZ = 0;\n      node.left = node.right = node.top = node.bottom = node.front = node.back = 0;\n    } else {\n      node = new Node();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  },\n      root = newNode(),\n      // Inserts body to the tree\n  insert = function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop(),\n          node = stackItem.node,\n          body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        var x = body.pos.x;\n        var y = body.pos.y;\n        var z = body.pos.z;\n        node.mass += body.mass;\n        node.massX += body.mass * x;\n        node.massY += body.mass * y;\n        node.massZ += body.mass * z; // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n\n        var quadIdx = 0,\n            // Assume we are in the 0's quad.\n        left = node.left,\n            right = (node.right + left) / 2,\n            top = node.top,\n            bottom = (node.bottom + top) / 2,\n            back = node.back,\n            front = (node.front + back) / 2;\n\n        if (x > right) {\n          // somewhere in the eastern part.\n          quadIdx += 1;\n          var oldLeft = left;\n          left = right;\n          right = right + (right - oldLeft);\n        }\n\n        if (y > bottom) {\n          // and in south.\n          quadIdx += 2;\n          var oldTop = top;\n          top = bottom;\n          bottom = bottom + (bottom - oldTop);\n        }\n\n        if (z > front) {\n          // and in frontal part\n          quadIdx += 4;\n          var oldBack = back;\n          back = front;\n          front = back + (back - oldBack);\n        }\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add subnode to it.\n          child = newNode();\n          child.left = left;\n          child.top = top;\n          child.right = right;\n          child.bottom = bottom;\n          child.back = back;\n          child.front = front;\n          child.body = body;\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not carry bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n\n          do {\n            var offset = random.nextDouble();\n            var dx = (node.right - node.left) * offset;\n            var dy = (node.bottom - node.top) * offset;\n            var dz = (node.front - node.back) * offset;\n            oldBody.pos.x = node.left + dx;\n            oldBody.pos.y = node.top + dy;\n            oldBody.pos.z = node.back + dz;\n            retriesCount -= 1; // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        } // Next iteration should subdivide node further.\n\n\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  },\n      update = function update(sourceBody) {\n    var queue = updateQueue,\n        v,\n        dx,\n        dy,\n        dz,\n        r,\n        fx = 0,\n        fy = 0,\n        fz = 0,\n        queueLength = 1,\n        shiftIdx = 0,\n        pushIdx = 1;\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx],\n          body = node.body;\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = body !== sourceBody;\n\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        dx = body.pos.x - sourceBody.pos.x;\n        dy = body.pos.y - sourceBody.pos.y;\n        dz = body.pos.z - sourceBody.pos.z;\n        r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          dz = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n        } // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n\n\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        fx += v * dx;\n        fy += v * dy;\n        fz += v * dz;\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        dx = node.massX / node.mass - sourceBody.pos.x;\n        dy = node.massY / node.mass - sourceBody.pos.y;\n        dz = node.massZ / node.mass - sourceBody.pos.z;\n        r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          dz = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n        } // If s / r < , treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n\n\n        if ((node.right - node.left) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was squarified during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          fx += v * dx;\n          fy += v * dy;\n          fz += v * dz;\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n          // I intentionally unfolded this loop, to save several CPU cycles.\n          if (node.quad0) {\n            queue[pushIdx] = node.quad0;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad1) {\n            queue[pushIdx] = node.quad1;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad2) {\n            queue[pushIdx] = node.quad2;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad3) {\n            queue[pushIdx] = node.quad3;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad4) {\n            queue[pushIdx] = node.quad4;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad5) {\n            queue[pushIdx] = node.quad5;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad6) {\n            queue[pushIdx] = node.quad6;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad7) {\n            queue[pushIdx] = node.quad7;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n        }\n      }\n    }\n\n    sourceBody.force.x += fx;\n    sourceBody.force.y += fy;\n    sourceBody.force.z += fz;\n  },\n      insertBodies = function insertBodies(bodies) {\n    var x1 = Number.MAX_VALUE,\n        y1 = Number.MAX_VALUE,\n        z1 = Number.MAX_VALUE,\n        x2 = Number.MIN_VALUE,\n        y2 = Number.MIN_VALUE,\n        z2 = Number.MIN_VALUE,\n        i,\n        max = bodies.length; // To reduce quad tree depth we are looking for exact bounding box of all particles.\n\n    i = max;\n\n    while (i--) {\n      var pos = bodies[i].pos;\n      var x = pos.x;\n      var y = pos.y;\n      var z = pos.z;\n\n      if (x < x1) {\n        x1 = x;\n      }\n\n      if (x > x2) {\n        x2 = x;\n      }\n\n      if (y < y1) {\n        y1 = y;\n      }\n\n      if (y > y2) {\n        y2 = y;\n      }\n\n      if (z < z1) {\n        z1 = z;\n      }\n\n      if (z > z2) {\n        z2 = z;\n      }\n    } // Squarify the bounds.\n\n\n    var maxSide = Math.max(x2 - x1, Math.max(y2 - y1, z2 - z1));\n    x2 = x1 + maxSide;\n    y2 = y1 + maxSide;\n    z2 = z1 + maxSide;\n    currentInCache = 0;\n    root = newNode();\n    root.left = x1;\n    root.right = x2;\n    root.top = y1;\n    root.bottom = y2;\n    root.back = z1;\n    root.front = z2;\n    i = max - 1;\n\n    if (i > 0) {\n      root.body = bodies[i];\n    }\n\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  };\n\n  return {\n    insertBodies: insertBodies,\n    updateBodyForce: update,\n    options: function options(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n};\n\nfunction getChild(node, idx) {\n  if (idx === 0) return node.quad0;\n  if (idx === 1) return node.quad1;\n  if (idx === 2) return node.quad2;\n  if (idx === 3) return node.quad3;\n  if (idx === 4) return node.quad4;\n  if (idx === 5) return node.quad5;\n  if (idx === 6) return node.quad6;\n  if (idx === 7) return node.quad7;\n  return null;\n}\n\nfunction setChild(node, idx, child) {\n  if (idx === 0) node.quad0 = child;else if (idx === 1) node.quad1 = child;else if (idx === 2) node.quad2 = child;else if (idx === 3) node.quad3 = child;else if (idx === 4) node.quad4 = child;else if (idx === 5) node.quad5 = child;else if (idx === 6) node.quad6 = child;else if (idx === 7) node.quad7 = child;\n}","/**\n * @fileOverview Contains definition of the core graph object.\n */\n// TODO: need to change storage layer:\n// 1. Be able to get all nodes O(1)\n// 2. Be able to get number of links O(1)\n\n/**\n * @example\n *  var graph = require('ngraph.graph')();\n *  graph.addNode(1);     // graph has one node.\n *  graph.addLink(2, 3);  // now graph contains three nodes and one link.\n *\n */\nmodule.exports = createGraph;\n\nvar eventify = require('ngraph.events');\n/**\n * Creates a new graph\n */\n\n\nfunction createGraph(options) {\n  // Graph structure is maintained as dictionary of nodes\n  // and array of links. Each node has 'links' property which\n  // hold all links related to that node. And general links\n  // array is used to speed up all links enumeration. This is inefficient\n  // in terms of memory, but simplifies coding.\n  options = options || {};\n\n  if ('uniqueLinkId' in options) {\n    console.warn('ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\\n' + 'Use `multigraph` option instead\\n', '\\n', 'Note: there is also change in default behavior: From now on each graph\\n' + 'is considered to be not a multigraph by default (each edge is unique).');\n    options.multigraph = options.uniqueLinkId;\n  } // Dear reader, the non-multigraphs do not guarantee that there is only\n  // one link for a given pair of node. When this option is set to false\n  // we can save some memory and CPU (18% faster for non-multigraph);\n\n\n  if (options.multigraph === undefined) options.multigraph = false;\n\n  if (typeof Map !== 'function') {\n    // TODO: Should we polyfill it ourselves? We don't use much operations there..\n    throw new Error('ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph');\n  }\n\n  var nodes = new Map();\n  var links = [],\n      // Hash of multi-edges. Used to track ids of edges between same nodes\n  multiEdges = {},\n      suspendEvents = 0,\n      createLink = options.multigraph ? createUniqueLink : createSingleLink,\n      // Our graph API provides means to listen to graph changes. Users can subscribe\n  // to be notified about changes in the graph by using `on` method. However\n  // in some cases they don't use it. To avoid unnecessary memory consumption\n  // we will not record graph changes until we have at least one subscriber.\n  // Code below supports this optimization.\n  //\n  // Accumulates all changes made during graph updates.\n  // Each change element contains:\n  //  changeType - one of the strings: 'add', 'remove' or 'update';\n  //  node - if change is related to node this property is set to changed graph's node;\n  //  link - if change is related to link this property is set to changed graph's link;\n  changes = [],\n      recordLinkChange = noop,\n      recordNodeChange = noop,\n      enterModification = noop,\n      exitModification = noop; // this is our public API:\n\n  var graphPart = {\n    /**\n     * Adds node to the graph. If node with given id already exists in the graph\n     * its data is extended with whatever comes in 'data' argument.\n     *\n     * @param nodeId the node's identifier. A string or number is preferred.\n     * @param [data] additional data for the node being added. If node already\n     *   exists its data object is augmented with the new one.\n     *\n     * @return {node} The newly added node or node with given id if it already exists.\n     */\n    addNode: addNode,\n\n    /**\n     * Adds a link to the graph. The function always create a new\n     * link between two nodes. If one of the nodes does not exists\n     * a new node is created.\n     *\n     * @param fromId link start node id;\n     * @param toId link end node id;\n     * @param [data] additional data to be set on the new link;\n     *\n     * @return {link} The newly created link\n     */\n    addLink: addLink,\n\n    /**\n     * Removes link from the graph. If link does not exist does nothing.\n     *\n     * @param link - object returned by addLink() or getLinks() methods.\n     *\n     * @returns true if link was removed; false otherwise.\n     */\n    removeLink: removeLink,\n\n    /**\n     * Removes node with given id from the graph. If node does not exist in the graph\n     * does nothing.\n     *\n     * @param nodeId node's identifier passed to addNode() function.\n     *\n     * @returns true if node was removed; false otherwise.\n     */\n    removeNode: removeNode,\n\n    /**\n     * Gets node with given identifier. If node does not exist undefined value is returned.\n     *\n     * @param nodeId requested node identifier;\n     *\n     * @return {node} in with requested identifier or undefined if no such node exists.\n     */\n    getNode: getNode,\n\n    /**\n     * Gets number of nodes in this graph.\n     *\n     * @return number of nodes in the graph.\n     */\n    getNodeCount: getNodeCount,\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getLinkCount: getLinkCount,\n\n    /**\n     * Synonym for `getLinkCount()`\n     */\n    getLinksCount: getLinkCount,\n\n    /**\n     * Synonym for `getNodeCount()`\n     */\n    getNodesCount: getNodeCount,\n\n    /**\n     * Gets all links (inbound and outbound) from the node with given id.\n     * If node with given id is not found null is returned.\n     *\n     * @param nodeId requested node identifier.\n     *\n     * @return Array of links from and to requested node if such node exists;\n     *   otherwise null is returned.\n     */\n    getLinks: getLinks,\n\n    /**\n     * Invokes callback on each node of the graph.\n     *\n     * @param {Function(node)} callback Function to be invoked. The function\n     *   is passed one argument: visited node.\n     */\n    forEachNode: forEachNode,\n\n    /**\n     * Invokes callback on every linked (adjacent) node to the given one.\n     *\n     * @param nodeId Identifier of the requested node.\n     * @param {Function(node, link)} callback Function to be called on all linked nodes.\n     *   The function is passed two parameters: adjacent node and link object itself.\n     * @param oriented if true graph treated as oriented.\n     */\n    forEachLinkedNode: forEachLinkedNode,\n\n    /**\n     * Enumerates all links in the graph\n     *\n     * @param {Function(link)} callback Function to be called on all links in the graph.\n     *   The function is passed one parameter: graph's link object.\n     *\n     * Link object contains at least the following fields:\n     *  fromId - node id where link starts;\n     *  toId - node id where link ends,\n     *  data - additional data passed to graph.addLink() method.\n     */\n    forEachLink: forEachLink,\n\n    /**\n     * Suspend all notifications about graph changes until\n     * endUpdate is called.\n     */\n    beginUpdate: enterModification,\n\n    /**\n     * Resumes all notifications about graph changes and fires\n     * graph 'changed' event in case there are any pending changes.\n     */\n    endUpdate: exitModification,\n\n    /**\n     * Removes all nodes and links from the graph.\n     */\n    clear: clear,\n\n    /**\n     * Detects whether there is a link between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     * NOTE: this function is synonim for getLink()\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    hasLink: getLink,\n\n    /**\n     * Detects whether there is a node with given id\n     * \n     * Operation complexity is O(1)\n     * NOTE: this function is synonim for getNode()\n     *\n     * @returns node if there is one; Falsy value otherwise.\n     */\n    hasNode: getNode,\n\n    /**\n     * Gets an edge between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     *\n     * @param {string} fromId link start identifier\n     * @param {string} toId link end identifier\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    getLink: getLink\n  }; // this will add `on()` and `fire()` methods.\n\n  eventify(graphPart);\n  monitorSubscribers();\n  return graphPart;\n\n  function monitorSubscribers() {\n    var realOn = graphPart.on; // replace real `on` with our temporary on, which will trigger change\n    // modification monitoring:\n\n    graphPart.on = on;\n\n    function on() {\n      // now it's time to start tracking stuff:\n      graphPart.beginUpdate = enterModification = enterModificationReal;\n      graphPart.endUpdate = exitModification = exitModificationReal;\n      recordLinkChange = recordLinkChangeReal;\n      recordNodeChange = recordNodeChangeReal; // this will replace current `on` method with real pub/sub from `eventify`.\n\n      graphPart.on = realOn; // delegate to real `on` handler:\n\n      return realOn.apply(graphPart, arguments);\n    }\n  }\n\n  function recordLinkChangeReal(link, changeType) {\n    changes.push({\n      link: link,\n      changeType: changeType\n    });\n  }\n\n  function recordNodeChangeReal(node, changeType) {\n    changes.push({\n      node: node,\n      changeType: changeType\n    });\n  }\n\n  function addNode(nodeId, data) {\n    if (nodeId === undefined) {\n      throw new Error('Invalid node identifier');\n    }\n\n    enterModification();\n    var node = getNode(nodeId);\n\n    if (!node) {\n      node = new Node(nodeId, data);\n      recordNodeChange(node, 'add');\n    } else {\n      node.data = data;\n      recordNodeChange(node, 'update');\n    }\n\n    nodes.set(nodeId, node);\n    exitModification();\n    return node;\n  }\n\n  function getNode(nodeId) {\n    return nodes.get(nodeId);\n  }\n\n  function removeNode(nodeId) {\n    var node = getNode(nodeId);\n\n    if (!node) {\n      return false;\n    }\n\n    enterModification();\n    var prevLinks = node.links;\n\n    if (prevLinks) {\n      node.links = null;\n\n      for (var i = 0; i < prevLinks.length; ++i) {\n        removeLink(prevLinks[i]);\n      }\n    }\n\n    nodes.delete(nodeId);\n    recordNodeChange(node, 'remove');\n    exitModification();\n    return true;\n  }\n\n  function addLink(fromId, toId, data) {\n    enterModification();\n    var fromNode = getNode(fromId) || addNode(fromId);\n    var toNode = getNode(toId) || addNode(toId);\n    var link = createLink(fromId, toId, data);\n    links.push(link); // TODO: this is not cool. On large graphs potentially would consume more memory.\n\n    addLinkToNode(fromNode, link);\n\n    if (fromId !== toId) {\n      // make sure we are not duplicating links for self-loops\n      addLinkToNode(toNode, link);\n    }\n\n    recordLinkChange(link, 'add');\n    exitModification();\n    return link;\n  }\n\n  function createSingleLink(fromId, toId, data) {\n    var linkId = makeLinkId(fromId, toId);\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function createUniqueLink(fromId, toId, data) {\n    // TODO: Get rid of this method.\n    var linkId = makeLinkId(fromId, toId);\n    var isMultiEdge = multiEdges.hasOwnProperty(linkId);\n\n    if (isMultiEdge || getLink(fromId, toId)) {\n      if (!isMultiEdge) {\n        multiEdges[linkId] = 0;\n      }\n\n      var suffix = '@' + ++multiEdges[linkId];\n      linkId = makeLinkId(fromId + suffix, toId + suffix);\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function getNodeCount() {\n    return nodes.size;\n  }\n\n  function getLinkCount() {\n    return links.length;\n  }\n\n  function getLinks(nodeId) {\n    var node = getNode(nodeId);\n    return node ? node.links : null;\n  }\n\n  function removeLink(link) {\n    if (!link) {\n      return false;\n    }\n\n    var idx = indexOfElementInArray(link, links);\n\n    if (idx < 0) {\n      return false;\n    }\n\n    enterModification();\n    links.splice(idx, 1);\n    var fromNode = getNode(link.fromId);\n    var toNode = getNode(link.toId);\n\n    if (fromNode) {\n      idx = indexOfElementInArray(link, fromNode.links);\n\n      if (idx >= 0) {\n        fromNode.links.splice(idx, 1);\n      }\n    }\n\n    if (toNode) {\n      idx = indexOfElementInArray(link, toNode.links);\n\n      if (idx >= 0) {\n        toNode.links.splice(idx, 1);\n      }\n    }\n\n    recordLinkChange(link, 'remove');\n    exitModification();\n    return true;\n  }\n\n  function getLink(fromNodeId, toNodeId) {\n    // TODO: Use sorted links to speed this up\n    var node = getNode(fromNodeId),\n        i;\n\n    if (!node || !node.links) {\n      return null;\n    }\n\n    for (i = 0; i < node.links.length; ++i) {\n      var link = node.links[i];\n\n      if (link.fromId === fromNodeId && link.toId === toNodeId) {\n        return link;\n      }\n    }\n\n    return null; // no link.\n  }\n\n  function clear() {\n    enterModification();\n    forEachNode(function (node) {\n      removeNode(node.id);\n    });\n    exitModification();\n  }\n\n  function forEachLink(callback) {\n    var i, length;\n\n    if (typeof callback === 'function') {\n      for (i = 0, length = links.length; i < length; ++i) {\n        callback(links[i]);\n      }\n    }\n  }\n\n  function forEachLinkedNode(nodeId, callback, oriented) {\n    var node = getNode(nodeId);\n\n    if (node && node.links && typeof callback === 'function') {\n      if (oriented) {\n        return forEachOrientedLink(node.links, nodeId, callback);\n      } else {\n        return forEachNonOrientedLink(node.links, nodeId, callback);\n      }\n    }\n  }\n\n  function forEachNonOrientedLink(links, nodeId, callback) {\n    var quitFast;\n\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      var linkedNodeId = link.fromId === nodeId ? link.toId : link.fromId;\n      quitFast = callback(nodes.get(linkedNodeId), link);\n\n      if (quitFast) {\n        return true; // Client does not need more iterations. Break now.\n      }\n    }\n  }\n\n  function forEachOrientedLink(links, nodeId, callback) {\n    var quitFast;\n\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n\n      if (link.fromId === nodeId) {\n        quitFast = callback(nodes.get(link.toId), link);\n\n        if (quitFast) {\n          return true; // Client does not need more iterations. Break now.\n        }\n      }\n    }\n  } // we will not fire anything until users of this library explicitly call `on()`\n  // method.\n\n\n  function noop() {} // Enter, Exit modification allows bulk graph updates without firing events.\n\n\n  function enterModificationReal() {\n    suspendEvents += 1;\n  }\n\n  function exitModificationReal() {\n    suspendEvents -= 1;\n\n    if (suspendEvents === 0 && changes.length > 0) {\n      graphPart.fire('changed', changes);\n      changes.length = 0;\n    }\n  }\n\n  function forEachNode(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Function is expected to iterate over graph nodes. You passed ' + callback);\n    }\n\n    var valuesIterator = nodes.values();\n    var nextValue = valuesIterator.next();\n\n    while (!nextValue.done) {\n      if (callback(nextValue.value)) {\n        return true; // client doesn't want to proceed. Return.\n      }\n\n      nextValue = valuesIterator.next();\n    }\n  }\n} // need this for old browsers. Should this be a separate module?\n\n\nfunction indexOfElementInArray(element, array) {\n  if (!array) return -1;\n\n  if (array.indexOf) {\n    return array.indexOf(element);\n  }\n\n  var len = array.length,\n      i;\n\n  for (i = 0; i < len; i += 1) {\n    if (array[i] === element) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n/**\n * Internal structure to represent node;\n */\n\n\nfunction Node(id, data) {\n  this.id = id;\n  this.links = null;\n  this.data = data;\n}\n\nfunction addLinkToNode(node, link) {\n  if (node.links) {\n    node.links.push(link);\n  } else {\n    node.links = [link];\n  }\n}\n/**\n * Internal structure to represent links;\n */\n\n\nfunction Link(fromId, toId, data, id) {\n  this.fromId = fromId;\n  this.toId = toId;\n  this.data = data;\n  this.id = id;\n}\n\nfunction makeLinkId(fromId, toId) {\n  return fromId.toString() + ' ' + toId.toString();\n}","module.exports = AFRAME.registerComponent('nav-agent', {\n  schema: {\n    destination: {\n      type: 'vec3'\n    },\n    active: {\n      default: false\n    },\n    speed: {\n      default: 2\n    }\n  },\n  init: function init() {\n    this.system = this.el.sceneEl.systems.nav;\n    this.system.addAgent(this);\n    this.group = null;\n    this.path = [];\n    this.raycaster = new THREE.Raycaster();\n  },\n  remove: function remove() {\n    this.system.removeAgent(this);\n  },\n  update: function update() {\n    this.path.length = 0;\n  },\n  updateNavLocation: function updateNavLocation() {\n    this.group = null;\n    this.path = [];\n  },\n  tick: function () {\n    var vDest = new THREE.Vector3();\n    var vDelta = new THREE.Vector3();\n    var vNext = new THREE.Vector3();\n    return function (t, dt) {\n      var el = this.el;\n      var data = this.data;\n      var raycaster = this.raycaster;\n      var speed = data.speed * dt / 1000;\n      if (!data.active) return; // Use PatrolJS pathfinding system to get shortest path to target.\n\n      if (!this.path.length) {\n        var position = this.el.object3D.position;\n        this.group = this.group || this.system.getGroup(position);\n        this.path = this.system.getPath(position, vDest.copy(data.destination), this.group) || [];\n        el.emit('navigation-start');\n      } // If no path is found, exit.\n\n\n      if (!this.path.length) {\n        console.warn('[nav] Unable to find path to %o.', data.destination);\n        this.el.setAttribute('nav-agent', {\n          active: false\n        });\n        el.emit('navigation-end');\n        return;\n      } // Current segment is a vector from current position to next waypoint.\n\n\n      var vCurrent = el.object3D.position;\n      var vWaypoint = this.path[0];\n      vDelta.subVectors(vWaypoint, vCurrent);\n      var distance = vDelta.length();\n      var gazeTarget;\n\n      if (distance < speed) {\n        // If <1 step from current waypoint, discard it and move toward next.\n        this.path.shift(); // After discarding the last waypoint, exit pathfinding.\n\n        if (!this.path.length) {\n          this.el.setAttribute('nav-agent', {\n            active: false\n          });\n          el.emit('navigation-end');\n          return;\n        }\n\n        vNext.copy(vCurrent);\n        gazeTarget = this.path[0];\n      } else {\n        // If still far away from next waypoint, find next position for\n        // the current frame.\n        vNext.copy(vDelta.setLength(speed)).add(vCurrent);\n        gazeTarget = vWaypoint;\n      } // Look at the next waypoint.\n\n\n      gazeTarget.y = vCurrent.y;\n      el.object3D.lookAt(gazeTarget); // Raycast against the nav mesh, to keep the agent moving along the\n      // ground, not traveling in a straight line from higher to lower waypoints.\n\n      raycaster.ray.origin.copy(vNext);\n      raycaster.ray.origin.y += 1.5;\n      raycaster.ray.direction.y = -1;\n      var intersections = raycaster.intersectObject(this.system.getNavMesh());\n\n      if (!intersections.length) {\n        // Raycasting failed. Step toward the waypoint and hope for the best.\n        vCurrent.copy(vNext);\n      } else {\n        // Re-project next position onto nav mesh.\n        vDelta.subVectors(intersections[0].point, vCurrent);\n        vCurrent.add(vDelta.setLength(speed));\n      }\n    };\n  }()\n});","/* global CANNON */\n\n/**\n * Kinematic body.\n *\n * Managed dynamic body, which moves but is not affected (directly) by the\n * physics engine. This is not a true kinematic body, in the sense that we are\n * letting the physics engine _compute_ collisions against it and selectively\n * applying those collisions to the object. The physics engine does not decide\n * the position/velocity/rotation of the element.\n *\n * Used for the camera object, because full physics simulation would create\n * movement that feels unnatural to the player. Bipedal movement does not\n * translate nicely to rigid body physics.\n *\n * See: http://www.learn-cocos2d.com/2013/08/physics-engine-platformer-terrible-idea/\n * And: http://oxleygamedev.blogspot.com/2011/04/player-physics-part-2.html\n */\nvar EPS = 0.000001;\nmodule.exports = AFRAME.registerComponent('kinematic-body', {\n  dependencies: ['velocity'],\n\n  /*******************************************************************\n   * Schema\n   */\n  schema: {\n    mass: {\n      default: 5\n    },\n    radius: {\n      default: 1.3\n    },\n    linearDamping: {\n      default: 0.05\n    },\n    enableSlopes: {\n      default: true\n    },\n    enableJumps: {\n      default: false\n    }\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n  init: function init() {\n    this.system = this.el.sceneEl.systems.physics;\n    this.system.addComponent(this);\n    var el = this.el,\n        data = this.data,\n        position = new CANNON.Vec3().copy(el.object3D.getWorldPosition(new THREE.Vector3()));\n    this.body = new CANNON.Body({\n      material: this.system.getMaterial('staticMaterial'),\n      position: position,\n      mass: data.mass,\n      linearDamping: data.linearDamping,\n      fixedRotation: true\n    });\n    this.body.addShape(new CANNON.Sphere(data.radius), new CANNON.Vec3(0, data.radius, 0));\n    this.body.el = this.el;\n    this.el.body = this.body;\n    this.system.addBody(this.body);\n\n    if (el.hasAttribute('wasd-controls')) {\n      console.warn('[kinematic-body] Not compatible with wasd-controls, use movement-controls.');\n    }\n  },\n  remove: function remove() {\n    this.system.removeBody(this.body);\n    this.system.removeComponent(this);\n    delete this.el.body;\n  },\n\n  /*******************************************************************\n   * Update\n   */\n\n  /**\n   * Checks CANNON.World for collisions and attempts to apply them to the\n   * element automatically, in a player-friendly way.\n   *\n   * There's extra logic for horizontal surfaces here. The basic requirements:\n   * (1) Only apply gravity when not in contact with _any_ horizontal surface.\n   * (2) When moving, project the velocity against exactly one ground surface.\n   *     If in contact with two ground surfaces (e.g. ground + ramp), choose\n   *     the one that collides with current velocity, if any.\n   */\n  beforeStep: function beforeStep(t, dt) {\n    if (!dt) return;\n    var el = this.el;\n    var data = this.data;\n    var body = this.body;\n    if (!data.enableJumps) body.velocity.set(0, 0, 0);\n    body.position.copy(el.getAttribute('position'));\n  },\n  step: function () {\n    var velocity = new THREE.Vector3(),\n        normalizedVelocity = new THREE.Vector3(),\n        currentSurfaceNormal = new THREE.Vector3(),\n        groundNormal = new THREE.Vector3();\n    return function (t, dt) {\n      if (!dt) return;\n      var body = this.body,\n          data = this.data,\n          didCollide = false,\n          height,\n          groundHeight = -Infinity,\n          groundBody,\n          contacts = this.system.getContacts();\n      dt = Math.min(dt, this.system.data.maxInterval * 1000);\n      groundNormal.set(0, 0, 0);\n      velocity.copy(this.el.getAttribute('velocity'));\n      body.velocity.copy(velocity);\n\n      for (var i = 0, contact; contact = contacts[i]; i++) {\n        // 1. Find any collisions involving this element. Get the contact\n        // normal, and make sure it's oriented _out_ of the other object and\n        // enabled (body.collisionReponse is true for both bodies)\n        if (!contact.enabled) {\n          continue;\n        }\n\n        if (body.id === contact.bi.id) {\n          contact.ni.negate(currentSurfaceNormal);\n        } else if (body.id === contact.bj.id) {\n          currentSurfaceNormal.copy(contact.ni);\n        } else {\n          continue;\n        }\n\n        didCollide = body.velocity.dot(currentSurfaceNormal) < -EPS;\n\n        if (didCollide && currentSurfaceNormal.y <= 0.5) {\n          // 2. If current trajectory attempts to move _through_ another\n          // object, project the velocity against the collision plane to\n          // prevent passing through.\n          velocity.projectOnPlane(currentSurfaceNormal);\n        } else if (currentSurfaceNormal.y > 0.5) {\n          // 3. If in contact with something roughly horizontal (+/- 45) then\n          // consider that the current ground. Only the highest qualifying\n          // ground is retained.\n          height = body.id === contact.bi.id ? Math.abs(contact.rj.y + contact.bj.position.y) : Math.abs(contact.ri.y + contact.bi.position.y);\n\n          if (height > groundHeight) {\n            groundHeight = height;\n            groundNormal.copy(currentSurfaceNormal);\n            groundBody = body.id === contact.bi.id ? contact.bj : contact.bi;\n          }\n        }\n      }\n\n      normalizedVelocity.copy(velocity).normalize();\n\n      if (groundBody && (!data.enableJumps || normalizedVelocity.y < 0.5)) {\n        if (!data.enableSlopes) {\n          groundNormal.set(0, 1, 0);\n        } else if (groundNormal.y < 1 - EPS) {\n          groundNormal.copy(this.raycastToGround(groundBody, groundNormal));\n        } // 4. Project trajectory onto the top-most ground object, unless\n        // trajectory is > 45.\n\n\n        velocity.projectOnPlane(groundNormal);\n      } else if (this.system.driver.world) {\n        // 5. If not in contact with anything horizontal, apply world gravity.\n        // TODO - Why is the 4x scalar necessary.\n        // NOTE: Does not work if physics runs on a worker.\n        velocity.add(this.system.driver.world.gravity.scale(dt * 4.0 / 1000));\n      }\n\n      body.velocity.copy(velocity);\n      this.el.setAttribute('velocity', body.velocity);\n      this.el.setAttribute('position', body.position);\n    };\n  }(),\n\n  /**\n   * When walking on complex surfaces (trimeshes, borders between two shapes),\n   * the collision normals returned for the player sphere can be very\n   * inconsistent. To address this, raycast straight down, find the collision\n   * normal, and return whichever normal is more vertical.\n   * @param  {CANNON.Body} groundBody\n   * @param  {CANNON.Vec3} groundNormal\n   * @return {CANNON.Vec3}\n   */\n  raycastToGround: function raycastToGround(groundBody, groundNormal) {\n    var ray,\n        hitNormal,\n        vFrom = this.body.position,\n        vTo = this.body.position.clone();\n    ray = new CANNON.Ray(vFrom, vTo);\n\n    ray._updateDirection(); // TODO - Report bug.\n\n\n    ray.intersectBody(groundBody);\n    if (!ray.hasHit) return groundNormal; // Compare ABS, in case we're projecting against the inside of the face.\n\n    hitNormal = ray.result.hitNormalWorld;\n    return Math.abs(hitNormal.y) > Math.abs(groundNormal.y) ? hitNormal : groundNormal;\n  }\n});","/**\n * @author Kyle-Larson https://github.com/Kyle-Larson\n * @author Takahiro https://github.com/takahirox\n * @author Lewy Blue https://github.com/looeee\n *\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\nmodule.exports = THREE.FBXLoader = function () {\n  var fbxTree;\n  var connections;\n  var sceneGraph;\n\n  function FBXLoader(manager) {\n    this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n  }\n\n  FBXLoader.prototype = {\n    constructor: FBXLoader,\n    crossOrigin: 'anonymous',\n    load: function load(url, onLoad, onProgress, onError) {\n      var self = this;\n      var resourceDirectory = THREE.LoaderUtils.extractUrlBase(url);\n      var loader = new THREE.FileLoader(this.manager);\n      loader.setResponseType('arraybuffer');\n      loader.load(url, function (buffer) {\n        try {\n          var scene = self.parse(buffer, resourceDirectory);\n          onLoad(scene);\n        } catch (error) {\n          setTimeout(function () {\n            if (onError) onError(error);\n            self.manager.itemError(url);\n          }, 0);\n        }\n      }, onProgress, onError);\n    },\n    setCrossOrigin: function setCrossOrigin(value) {\n      this.crossOrigin = value;\n      return this;\n    },\n    parse: function parse(FBXBuffer, resourceDirectory) {\n      if (isFbxFormatBinary(FBXBuffer)) {\n        fbxTree = new BinaryParser().parse(FBXBuffer);\n      } else {\n        var FBXText = convertArrayBufferToString(FBXBuffer);\n\n        if (!isFbxFormatASCII(FBXText)) {\n          throw new Error('THREE.FBXLoader: Unknown format.');\n        }\n\n        if (getFbxVersion(FBXText) < 7000) {\n          throw new Error('THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion(FBXText));\n        }\n\n        fbxTree = new TextParser().parse(FBXText);\n      } //console.log( FBXTree );\n\n\n      var textureLoader = new THREE.TextureLoader(this.manager).setPath(resourceDirectory).setCrossOrigin(this.crossOrigin);\n      return new FBXTreeParser(textureLoader).parse(fbxTree);\n    }\n  }; // Parse the FBXTree object returned by the BinaryParser or TextParser and return a THREE.Group\n\n  function FBXTreeParser(textureLoader) {\n    this.textureLoader = textureLoader;\n  }\n\n  FBXTreeParser.prototype = {\n    constructor: FBXTreeParser,\n    parse: function parse() {\n      connections = this.parseConnections();\n      var images = this.parseImages();\n      var textures = this.parseTextures(images);\n      var materials = this.parseMaterials(textures);\n      var deformers = this.parseDeformers();\n      var geometryMap = new GeometryParser().parse(deformers);\n      this.parseScene(deformers, geometryMap, materials);\n      return sceneGraph;\n    },\n    // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n    // and details the connection type\n    parseConnections: function parseConnections() {\n      var connectionMap = new Map();\n\n      if ('Connections' in fbxTree) {\n        var rawConnections = fbxTree.Connections.connections;\n        rawConnections.forEach(function (rawConnection) {\n          var fromID = rawConnection[0];\n          var toID = rawConnection[1];\n          var relationship = rawConnection[2];\n\n          if (!connectionMap.has(fromID)) {\n            connectionMap.set(fromID, {\n              parents: [],\n              children: []\n            });\n          }\n\n          var parentRelationship = {\n            ID: toID,\n            relationship: relationship\n          };\n          connectionMap.get(fromID).parents.push(parentRelationship);\n\n          if (!connectionMap.has(toID)) {\n            connectionMap.set(toID, {\n              parents: [],\n              children: []\n            });\n          }\n\n          var childRelationship = {\n            ID: fromID,\n            relationship: relationship\n          };\n          connectionMap.get(toID).children.push(childRelationship);\n        });\n      }\n\n      return connectionMap;\n    },\n    // Parse FBXTree.Objects.Video for embedded image data\n    // These images are connected to textures in FBXTree.Objects.Textures\n    // via FBXTree.Connections.\n    parseImages: function parseImages() {\n      var images = {};\n      var blobs = {};\n\n      if ('Video' in fbxTree.Objects) {\n        var videoNodes = fbxTree.Objects.Video;\n\n        for (var nodeID in videoNodes) {\n          var videoNode = videoNodes[nodeID];\n          var id = parseInt(nodeID);\n          images[id] = videoNode.RelativeFilename || videoNode.Filename; // raw image data is in videoNode.Content\n\n          if ('Content' in videoNode) {\n            var arrayBufferContent = videoNode.Content instanceof ArrayBuffer && videoNode.Content.byteLength > 0;\n            var base64Content = typeof videoNode.Content === 'string' && videoNode.Content !== '';\n\n            if (arrayBufferContent || base64Content) {\n              var image = this.parseImage(videoNodes[nodeID]);\n              blobs[videoNode.RelativeFilename || videoNode.Filename] = image;\n            }\n          }\n        }\n      }\n\n      for (var id in images) {\n        var filename = images[id];\n        if (blobs[filename] !== undefined) images[id] = blobs[filename];else images[id] = images[id].split('\\\\').pop();\n      }\n\n      return images;\n    },\n    // Parse embedded image data in FBXTree.Video.Content\n    parseImage: function parseImage(videoNode) {\n      var content = videoNode.Content;\n      var fileName = videoNode.RelativeFilename || videoNode.Filename;\n      var extension = fileName.slice(fileName.lastIndexOf('.') + 1).toLowerCase();\n      var type;\n\n      switch (extension) {\n        case 'bmp':\n          type = 'image/bmp';\n          break;\n\n        case 'jpg':\n        case 'jpeg':\n          type = 'image/jpeg';\n          break;\n\n        case 'png':\n          type = 'image/png';\n          break;\n\n        case 'tif':\n          type = 'image/tiff';\n          break;\n\n        case 'tga':\n          if (typeof THREE.TGALoader !== 'function') {\n            console.warn('FBXLoader: THREE.TGALoader is required to load TGA textures');\n            return;\n          } else {\n            if (THREE.Loader.Handlers.get('.tga') === null) {\n              THREE.Loader.Handlers.add(/\\.tga$/i, new THREE.TGALoader());\n            }\n\n            type = 'image/tga';\n            break;\n          }\n\n        default:\n          console.warn('FBXLoader: Image type \"' + extension + '\" is not supported.');\n          return;\n      }\n\n      if (typeof content === 'string') {\n        // ASCII format\n        return 'data:' + type + ';base64,' + content;\n      } else {\n        // Binary Format\n        var array = new Uint8Array(content);\n        return window.URL.createObjectURL(new Blob([array], {\n          type: type\n        }));\n      }\n    },\n    // Parse nodes in FBXTree.Objects.Texture\n    // These contain details such as UV scaling, cropping, rotation etc and are connected\n    // to images in FBXTree.Objects.Video\n    parseTextures: function parseTextures(images) {\n      var textureMap = new Map();\n\n      if ('Texture' in fbxTree.Objects) {\n        var textureNodes = fbxTree.Objects.Texture;\n\n        for (var nodeID in textureNodes) {\n          var texture = this.parseTexture(textureNodes[nodeID], images);\n          textureMap.set(parseInt(nodeID), texture);\n        }\n      }\n\n      return textureMap;\n    },\n    // Parse individual node in FBXTree.Objects.Texture\n    parseTexture: function parseTexture(textureNode, images) {\n      var texture = this.loadTexture(textureNode, images);\n      texture.ID = textureNode.id;\n      texture.name = textureNode.attrName;\n      var wrapModeU = textureNode.WrapModeU;\n      var wrapModeV = textureNode.WrapModeV;\n      var valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n      var valueV = wrapModeV !== undefined ? wrapModeV.value : 0; // http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n      // 0: repeat(default), 1: clamp\n\n      texture.wrapS = valueU === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n      texture.wrapT = valueV === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n      if ('Scaling' in textureNode) {\n        var values = textureNode.Scaling.value;\n        texture.repeat.x = values[0];\n        texture.repeat.y = values[1];\n      }\n\n      return texture;\n    },\n    // load a texture specified as a blob or data URI, or via an external URL using THREE.TextureLoader\n    loadTexture: function loadTexture(textureNode, images) {\n      var fileName;\n      var currentPath = this.textureLoader.path;\n      var children = connections.get(textureNode.id).children;\n\n      if (children !== undefined && children.length > 0 && images[children[0].ID] !== undefined) {\n        fileName = images[children[0].ID];\n\n        if (fileName.indexOf('blob:') === 0 || fileName.indexOf('data:') === 0) {\n          this.textureLoader.setPath(undefined);\n        }\n      }\n\n      var texture;\n      var extension = textureNode.FileName.slice(-3).toLowerCase();\n\n      if (extension === 'tga') {\n        var loader = THREE.Loader.Handlers.get('.tga');\n\n        if (loader === null) {\n          console.warn('FBXLoader: TGALoader not found, creating empty placeholder texture for', fileName);\n          texture = new THREE.Texture();\n        } else {\n          texture = loader.load(fileName);\n        }\n      } else if (extension === 'psd') {\n        console.warn('FBXLoader: PSD textures are not supported, creating empty placeholder texture for', fileName);\n        texture = new THREE.Texture();\n      } else {\n        texture = this.textureLoader.load(fileName);\n      }\n\n      this.textureLoader.setPath(currentPath);\n      return texture;\n    },\n    // Parse nodes in FBXTree.Objects.Material\n    parseMaterials: function parseMaterials(textureMap) {\n      var materialMap = new Map();\n\n      if ('Material' in fbxTree.Objects) {\n        var materialNodes = fbxTree.Objects.Material;\n\n        for (var nodeID in materialNodes) {\n          var material = this.parseMaterial(materialNodes[nodeID], textureMap);\n          if (material !== null) materialMap.set(parseInt(nodeID), material);\n        }\n      }\n\n      return materialMap;\n    },\n    // Parse single node in FBXTree.Objects.Material\n    // Materials are connected to texture maps in FBXTree.Objects.Textures\n    // FBX format currently only supports Lambert and Phong shading models\n    parseMaterial: function parseMaterial(materialNode, textureMap) {\n      var ID = materialNode.id;\n      var name = materialNode.attrName;\n      var type = materialNode.ShadingModel; // Case where FBX wraps shading model in property object.\n\n      if (typeof type === 'object') {\n        type = type.value;\n      } // Ignore unused materials which don't have any connections.\n\n\n      if (!connections.has(ID)) return null;\n      var parameters = this.parseParameters(materialNode, textureMap, ID);\n      var material;\n\n      switch (type.toLowerCase()) {\n        case 'phong':\n          material = new THREE.MeshPhongMaterial();\n          break;\n\n        case 'lambert':\n          material = new THREE.MeshLambertMaterial();\n          break;\n\n        default:\n          console.warn('THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type);\n          material = new THREE.MeshPhongMaterial({\n            color: 0x3300ff\n          });\n          break;\n      }\n\n      material.setValues(parameters);\n      material.name = name;\n      return material;\n    },\n    // Parse FBX material and return parameters suitable for a three.js material\n    // Also parse the texture map and return any textures associated with the material\n    parseParameters: function parseParameters(materialNode, textureMap, ID) {\n      var parameters = {};\n\n      if (materialNode.BumpFactor) {\n        parameters.bumpScale = materialNode.BumpFactor.value;\n      }\n\n      if (materialNode.Diffuse) {\n        parameters.color = new THREE.Color().fromArray(materialNode.Diffuse.value);\n      } else if (materialNode.DiffuseColor && materialNode.DiffuseColor.type === 'Color') {\n        // The blender exporter exports diffuse here instead of in materialNode.Diffuse\n        parameters.color = new THREE.Color().fromArray(materialNode.DiffuseColor.value);\n      }\n\n      if (materialNode.DisplacementFactor) {\n        parameters.displacementScale = materialNode.DisplacementFactor.value;\n      }\n\n      if (materialNode.Emissive) {\n        parameters.emissive = new THREE.Color().fromArray(materialNode.Emissive.value);\n      } else if (materialNode.EmissiveColor && materialNode.EmissiveColor.type === 'Color') {\n        // The blender exporter exports emissive color here instead of in materialNode.Emissive\n        parameters.emissive = new THREE.Color().fromArray(materialNode.EmissiveColor.value);\n      }\n\n      if (materialNode.EmissiveFactor) {\n        parameters.emissiveIntensity = parseFloat(materialNode.EmissiveFactor.value);\n      }\n\n      if (materialNode.Opacity) {\n        parameters.opacity = parseFloat(materialNode.Opacity.value);\n      }\n\n      if (parameters.opacity < 1.0) {\n        parameters.transparent = true;\n      }\n\n      if (materialNode.ReflectionFactor) {\n        parameters.reflectivity = materialNode.ReflectionFactor.value;\n      }\n\n      if (materialNode.Shininess) {\n        parameters.shininess = materialNode.Shininess.value;\n      }\n\n      if (materialNode.Specular) {\n        parameters.specular = new THREE.Color().fromArray(materialNode.Specular.value);\n      } else if (materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color') {\n        // The blender exporter exports specular color here instead of in materialNode.Specular\n        parameters.specular = new THREE.Color().fromArray(materialNode.SpecularColor.value);\n      }\n\n      var self = this;\n      connections.get(ID).children.forEach(function (child) {\n        var type = child.relationship;\n\n        switch (type) {\n          case 'Bump':\n            parameters.bumpMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'DiffuseColor':\n            parameters.map = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'DisplacementColor':\n            parameters.displacementMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'EmissiveColor':\n            parameters.emissiveMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'NormalMap':\n            parameters.normalMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'ReflectionColor':\n            parameters.envMap = self.getTexture(textureMap, child.ID);\n            parameters.envMap.mapping = THREE.EquirectangularReflectionMapping;\n            break;\n\n          case 'SpecularColor':\n            parameters.specularMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'TransparentColor':\n            parameters.alphaMap = self.getTexture(textureMap, child.ID);\n            parameters.transparent = true;\n            break;\n\n          case 'AmbientColor':\n          case 'ShininessExponent': // AKA glossiness map\n\n          case 'SpecularFactor': // AKA specularLevel\n\n          case 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\n          default:\n            console.warn('THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type);\n            break;\n        }\n      });\n      return parameters;\n    },\n    // get a texture from the textureMap for use by a material.\n    getTexture: function getTexture(textureMap, id) {\n      // if the texture is a layered texture, just use the first layer and issue a warning\n      if ('LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture) {\n        console.warn('THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.');\n        id = connections.get(id).children[0].ID;\n      }\n\n      return textureMap.get(id);\n    },\n    // Parse nodes in FBXTree.Objects.Deformer\n    // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n    // Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n    parseDeformers: function parseDeformers() {\n      var skeletons = {};\n      var morphTargets = {};\n\n      if ('Deformer' in fbxTree.Objects) {\n        var DeformerNodes = fbxTree.Objects.Deformer;\n\n        for (var nodeID in DeformerNodes) {\n          var deformerNode = DeformerNodes[nodeID];\n          var relationships = connections.get(parseInt(nodeID));\n\n          if (deformerNode.attrType === 'Skin') {\n            var skeleton = this.parseSkeleton(relationships, DeformerNodes);\n            skeleton.ID = nodeID;\n            if (relationships.parents.length > 1) console.warn('THREE.FBXLoader: skeleton attached to more than one geometry is not supported.');\n            skeleton.geometryID = relationships.parents[0].ID;\n            skeletons[nodeID] = skeleton;\n          } else if (deformerNode.attrType === 'BlendShape') {\n            var morphTarget = {\n              id: nodeID\n            };\n            morphTarget.rawTargets = this.parseMorphTargets(relationships, DeformerNodes);\n            morphTarget.id = nodeID;\n            if (relationships.parents.length > 1) console.warn('THREE.FBXLoader: morph target attached to more than one geometry is not supported.');\n            morphTargets[nodeID] = morphTarget;\n          }\n        }\n      }\n\n      return {\n        skeletons: skeletons,\n        morphTargets: morphTargets\n      };\n    },\n    // Parse single nodes in FBXTree.Objects.Deformer\n    // The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n    // Each skin node represents a skeleton and each cluster node represents a bone\n    parseSkeleton: function parseSkeleton(relationships, deformerNodes) {\n      var rawBones = [];\n      relationships.children.forEach(function (child) {\n        var boneNode = deformerNodes[child.ID];\n        if (boneNode.attrType !== 'Cluster') return;\n        var rawBone = {\n          ID: child.ID,\n          indices: [],\n          weights: [],\n          transform: new THREE.Matrix4().fromArray(boneNode.Transform.a),\n          transformLink: new THREE.Matrix4().fromArray(boneNode.TransformLink.a),\n          linkMode: boneNode.Mode\n        };\n\n        if ('Indexes' in boneNode) {\n          rawBone.indices = boneNode.Indexes.a;\n          rawBone.weights = boneNode.Weights.a;\n        }\n\n        rawBones.push(rawBone);\n      });\n      return {\n        rawBones: rawBones,\n        bones: []\n      };\n    },\n    // The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n    parseMorphTargets: function parseMorphTargets(relationships, deformerNodes) {\n      var rawMorphTargets = [];\n\n      for (var i = 0; i < relationships.children.length; i++) {\n        if (i === 8) {\n          console.warn('FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.');\n          break;\n        }\n\n        var child = relationships.children[i];\n        var morphTargetNode = deformerNodes[child.ID];\n        var rawMorphTarget = {\n          name: morphTargetNode.attrName,\n          initialWeight: morphTargetNode.DeformPercent,\n          id: morphTargetNode.id,\n          fullWeights: morphTargetNode.FullWeights.a\n        };\n        if (morphTargetNode.attrType !== 'BlendShapeChannel') return;\n        var targetRelationships = connections.get(parseInt(child.ID));\n        targetRelationships.children.forEach(function (child) {\n          if (child.relationship === undefined) rawMorphTarget.geoID = child.ID;\n        });\n        rawMorphTargets.push(rawMorphTarget);\n      }\n\n      return rawMorphTargets;\n    },\n    // create the main THREE.Group() to be returned by the loader\n    parseScene: function parseScene(deformers, geometryMap, materialMap) {\n      sceneGraph = new THREE.Group();\n      var modelMap = this.parseModels(deformers.skeletons, geometryMap, materialMap);\n      var modelNodes = fbxTree.Objects.Model;\n      var self = this;\n      modelMap.forEach(function (model) {\n        var modelNode = modelNodes[model.ID];\n        self.setLookAtProperties(model, modelNode);\n        var parentConnections = connections.get(model.ID).parents;\n        parentConnections.forEach(function (connection) {\n          var parent = modelMap.get(connection.ID);\n          if (parent !== undefined) parent.add(model);\n        });\n\n        if (model.parent === null) {\n          sceneGraph.add(model);\n        }\n      });\n      this.bindSkeleton(deformers.skeletons, geometryMap, modelMap);\n      this.createAmbientLight();\n      this.setupMorphMaterials();\n      var animations = new AnimationParser().parse(); // if all the models where already combined in a single group, just return that\n\n      if (sceneGraph.children.length === 1 && sceneGraph.children[0].isGroup) {\n        sceneGraph.children[0].animations = animations;\n        sceneGraph = sceneGraph.children[0];\n      }\n\n      sceneGraph.animations = animations;\n    },\n    // parse nodes in FBXTree.Objects.Model\n    parseModels: function parseModels(skeletons, geometryMap, materialMap) {\n      var modelMap = new Map();\n      var modelNodes = fbxTree.Objects.Model;\n\n      for (var nodeID in modelNodes) {\n        var id = parseInt(nodeID);\n        var node = modelNodes[nodeID];\n        var relationships = connections.get(id);\n        var model = this.buildSkeleton(relationships, skeletons, id, node.attrName);\n\n        if (!model) {\n          switch (node.attrType) {\n            case 'Camera':\n              model = this.createCamera(relationships);\n              break;\n\n            case 'Light':\n              model = this.createLight(relationships);\n              break;\n\n            case 'Mesh':\n              model = this.createMesh(relationships, geometryMap, materialMap);\n              break;\n\n            case 'NurbsCurve':\n              model = this.createCurve(relationships, geometryMap);\n              break;\n\n            case 'LimbNode': // usually associated with a Bone, however if a Bone was not created we'll make a Group instead\n\n            case 'Null':\n            default:\n              model = new THREE.Group();\n              break;\n          }\n\n          model.name = THREE.PropertyBinding.sanitizeNodeName(node.attrName);\n          model.ID = id;\n        }\n\n        this.setModelTransforms(model, node);\n        modelMap.set(id, model);\n      }\n\n      return modelMap;\n    },\n    buildSkeleton: function buildSkeleton(relationships, skeletons, id, name) {\n      var bone = null;\n      relationships.parents.forEach(function (parent) {\n        for (var ID in skeletons) {\n          var skeleton = skeletons[ID];\n          skeleton.rawBones.forEach(function (rawBone, i) {\n            if (rawBone.ID === parent.ID) {\n              var subBone = bone;\n              bone = new THREE.Bone();\n              bone.matrixWorld.copy(rawBone.transformLink); // set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n              bone.name = THREE.PropertyBinding.sanitizeNodeName(name);\n              bone.ID = id;\n              skeleton.bones[i] = bone; // In cases where a bone is shared between multiple meshes\n              // duplicate the bone here and and it as a child of the first bone\n\n              if (subBone !== null) {\n                bone.add(subBone);\n              }\n            }\n          });\n        }\n      });\n      return bone;\n    },\n    // create a THREE.PerspectiveCamera or THREE.OrthographicCamera\n    createCamera: function createCamera(relationships) {\n      var model;\n      var cameraAttribute;\n      relationships.children.forEach(function (child) {\n        var attr = fbxTree.Objects.NodeAttribute[child.ID];\n\n        if (attr !== undefined) {\n          cameraAttribute = attr;\n        }\n      });\n\n      if (cameraAttribute === undefined) {\n        model = new THREE.Object3D();\n      } else {\n        var type = 0;\n\n        if (cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1) {\n          type = 1;\n        }\n\n        var nearClippingPlane = 1;\n\n        if (cameraAttribute.NearPlane !== undefined) {\n          nearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n        }\n\n        var farClippingPlane = 1000;\n\n        if (cameraAttribute.FarPlane !== undefined) {\n          farClippingPlane = cameraAttribute.FarPlane.value / 1000;\n        }\n\n        var width = window.innerWidth;\n        var height = window.innerHeight;\n\n        if (cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined) {\n          width = cameraAttribute.AspectWidth.value;\n          height = cameraAttribute.AspectHeight.value;\n        }\n\n        var aspect = width / height;\n        var fov = 45;\n\n        if (cameraAttribute.FieldOfView !== undefined) {\n          fov = cameraAttribute.FieldOfView.value;\n        }\n\n        var focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n        switch (type) {\n          case 0:\n            // Perspective\n            model = new THREE.PerspectiveCamera(fov, aspect, nearClippingPlane, farClippingPlane);\n            if (focalLength !== null) model.setFocalLength(focalLength);\n            break;\n\n          case 1:\n            // Orthographic\n            model = new THREE.OrthographicCamera(-width / 2, width / 2, height / 2, -height / 2, nearClippingPlane, farClippingPlane);\n            break;\n\n          default:\n            console.warn('THREE.FBXLoader: Unknown camera type ' + type + '.');\n            model = new THREE.Object3D();\n            break;\n        }\n      }\n\n      return model;\n    },\n    // Create a THREE.DirectionalLight, THREE.PointLight or THREE.SpotLight\n    createLight: function createLight(relationships) {\n      var model;\n      var lightAttribute;\n      relationships.children.forEach(function (child) {\n        var attr = fbxTree.Objects.NodeAttribute[child.ID];\n\n        if (attr !== undefined) {\n          lightAttribute = attr;\n        }\n      });\n\n      if (lightAttribute === undefined) {\n        model = new THREE.Object3D();\n      } else {\n        var type; // LightType can be undefined for Point lights\n\n        if (lightAttribute.LightType === undefined) {\n          type = 0;\n        } else {\n          type = lightAttribute.LightType.value;\n        }\n\n        var color = 0xffffff;\n\n        if (lightAttribute.Color !== undefined) {\n          color = new THREE.Color().fromArray(lightAttribute.Color.value);\n        }\n\n        var intensity = lightAttribute.Intensity === undefined ? 1 : lightAttribute.Intensity.value / 100; // light disabled\n\n        if (lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0) {\n          intensity = 0;\n        }\n\n        var distance = 0;\n\n        if (lightAttribute.FarAttenuationEnd !== undefined) {\n          if (lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0) {\n            distance = 0;\n          } else {\n            distance = lightAttribute.FarAttenuationEnd.value;\n          }\n        } // TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\n\n        var decay = 1;\n\n        switch (type) {\n          case 0:\n            // Point\n            model = new THREE.PointLight(color, intensity, distance, decay);\n            break;\n\n          case 1:\n            // Directional\n            model = new THREE.DirectionalLight(color, intensity);\n            break;\n\n          case 2:\n            // Spot\n            var angle = Math.PI / 3;\n\n            if (lightAttribute.InnerAngle !== undefined) {\n              angle = THREE.Math.degToRad(lightAttribute.InnerAngle.value);\n            }\n\n            var penumbra = 0;\n\n            if (lightAttribute.OuterAngle !== undefined) {\n              // TODO: this is not correct - FBX calculates outer and inner angle in degrees\n              // with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n              // while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n              penumbra = THREE.Math.degToRad(lightAttribute.OuterAngle.value);\n              penumbra = Math.max(penumbra, 1);\n            }\n\n            model = new THREE.SpotLight(color, intensity, distance, angle, penumbra, decay);\n            break;\n\n          default:\n            console.warn('THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a THREE.PointLight.');\n            model = new THREE.PointLight(color, intensity);\n            break;\n        }\n\n        if (lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1) {\n          model.castShadow = true;\n        }\n      }\n\n      return model;\n    },\n    createMesh: function createMesh(relationships, geometryMap, materialMap) {\n      var model;\n      var geometry = null;\n      var material = null;\n      var materials = []; // get geometry and materials(s) from connections\n\n      relationships.children.forEach(function (child) {\n        if (geometryMap.has(child.ID)) {\n          geometry = geometryMap.get(child.ID);\n        }\n\n        if (materialMap.has(child.ID)) {\n          materials.push(materialMap.get(child.ID));\n        }\n      });\n\n      if (materials.length > 1) {\n        material = materials;\n      } else if (materials.length > 0) {\n        material = materials[0];\n      } else {\n        material = new THREE.MeshPhongMaterial({\n          color: 0xcccccc\n        });\n        materials.push(material);\n      }\n\n      if ('color' in geometry.attributes) {\n        materials.forEach(function (material) {\n          material.vertexColors = THREE.VertexColors;\n        });\n      }\n\n      if (geometry.FBX_Deformer) {\n        materials.forEach(function (material) {\n          material.skinning = true;\n        });\n        model = new THREE.SkinnedMesh(geometry, material);\n      } else {\n        model = new THREE.Mesh(geometry, material);\n      }\n\n      return model;\n    },\n    createCurve: function createCurve(relationships, geometryMap) {\n      var geometry = relationships.children.reduce(function (geo, child) {\n        if (geometryMap.has(child.ID)) geo = geometryMap.get(child.ID);\n        return geo;\n      }, null); // FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\n      var material = new THREE.LineBasicMaterial({\n        color: 0x3300ff,\n        linewidth: 1\n      });\n      return new THREE.Line(geometry, material);\n    },\n    // parse the model node for transform details and apply them to the model\n    setModelTransforms: function setModelTransforms(model, modelNode) {\n      var transformData = {};\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = parseInt(modelNode.RotationOrder.value);\n      if ('Lcl_Translation' in modelNode) transformData.translation = modelNode.Lcl_Translation.value;\n      if ('RotationOffset' in modelNode) transformData.rotationOffset = modelNode.RotationOffset.value;\n      if ('Lcl_Rotation' in modelNode) transformData.rotation = modelNode.Lcl_Rotation.value;\n      if ('PreRotation' in modelNode) transformData.preRotation = modelNode.PreRotation.value;\n      if ('PostRotation' in modelNode) transformData.postRotation = modelNode.PostRotation.value;\n      if ('Lcl_Scaling' in modelNode) transformData.scale = modelNode.Lcl_Scaling.value;\n      var transform = generateTransform(transformData);\n      model.applyMatrix(transform);\n    },\n    setLookAtProperties: function setLookAtProperties(model, modelNode) {\n      if ('LookAtProperty' in modelNode) {\n        var children = connections.get(model.ID).children;\n        children.forEach(function (child) {\n          if (child.relationship === 'LookAtProperty') {\n            var lookAtTarget = fbxTree.Objects.Model[child.ID];\n\n            if ('Lcl_Translation' in lookAtTarget) {\n              var pos = lookAtTarget.Lcl_Translation.value; // DirectionalLight, SpotLight\n\n              if (model.target !== undefined) {\n                model.target.position.fromArray(pos);\n                sceneGraph.add(model.target);\n              } else {\n                // Cameras and other Object3Ds\n                model.lookAt(new THREE.Vector3().fromArray(pos));\n              }\n            }\n          }\n        });\n      }\n    },\n    bindSkeleton: function bindSkeleton(skeletons, geometryMap, modelMap) {\n      var bindMatrices = this.parsePoseNodes();\n\n      for (var ID in skeletons) {\n        var skeleton = skeletons[ID];\n        var parents = connections.get(parseInt(skeleton.ID)).parents;\n        parents.forEach(function (parent) {\n          if (geometryMap.has(parent.ID)) {\n            var geoID = parent.ID;\n            var geoRelationships = connections.get(geoID);\n            geoRelationships.parents.forEach(function (geoConnParent) {\n              if (modelMap.has(geoConnParent.ID)) {\n                var model = modelMap.get(geoConnParent.ID);\n                model.bind(new THREE.Skeleton(skeleton.bones), bindMatrices[geoConnParent.ID]);\n              }\n            });\n          }\n        });\n      }\n    },\n    parsePoseNodes: function parsePoseNodes() {\n      var bindMatrices = {};\n\n      if ('Pose' in fbxTree.Objects) {\n        var BindPoseNode = fbxTree.Objects.Pose;\n\n        for (var nodeID in BindPoseNode) {\n          if (BindPoseNode[nodeID].attrType === 'BindPose') {\n            var poseNodes = BindPoseNode[nodeID].PoseNode;\n\n            if (Array.isArray(poseNodes)) {\n              poseNodes.forEach(function (poseNode) {\n                bindMatrices[poseNode.Node] = new THREE.Matrix4().fromArray(poseNode.Matrix.a);\n              });\n            } else {\n              bindMatrices[poseNodes.Node] = new THREE.Matrix4().fromArray(poseNodes.Matrix.a);\n            }\n          }\n        }\n      }\n\n      return bindMatrices;\n    },\n    // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n    createAmbientLight: function createAmbientLight() {\n      if ('GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings) {\n        var ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n        var r = ambientColor[0];\n        var g = ambientColor[1];\n        var b = ambientColor[2];\n\n        if (r !== 0 || g !== 0 || b !== 0) {\n          var color = new THREE.Color(r, g, b);\n          sceneGraph.add(new THREE.AmbientLight(color, 1));\n        }\n      }\n    },\n    setupMorphMaterials: function setupMorphMaterials() {\n      sceneGraph.traverse(function (child) {\n        if (child.isMesh) {\n          if (child.geometry.morphAttributes.position || child.geometry.morphAttributes.normal) {\n            var uuid = child.uuid;\n            var matUuid = child.material.uuid; // if a geometry has morph targets, it cannot share the material with other geometries\n\n            var sharedMat = false;\n            sceneGraph.traverse(function (child) {\n              if (child.isMesh) {\n                if (child.material.uuid === matUuid && child.uuid !== uuid) sharedMat = true;\n              }\n            });\n            if (sharedMat === true) child.material = child.material.clone();\n            child.material.morphTargets = true;\n          }\n        }\n      });\n    }\n  }; // parse Geometry data from FBXTree and return map of BufferGeometries\n\n  function GeometryParser() {}\n\n  GeometryParser.prototype = {\n    constructor: GeometryParser,\n    // Parse nodes in FBXTree.Objects.Geometry\n    parse: function parse(deformers) {\n      var geometryMap = new Map();\n\n      if ('Geometry' in fbxTree.Objects) {\n        var geoNodes = fbxTree.Objects.Geometry;\n\n        for (var nodeID in geoNodes) {\n          var relationships = connections.get(parseInt(nodeID));\n          var geo = this.parseGeometry(relationships, geoNodes[nodeID], deformers);\n          geometryMap.set(parseInt(nodeID), geo);\n        }\n      }\n\n      return geometryMap;\n    },\n    // Parse single node in FBXTree.Objects.Geometry\n    parseGeometry: function parseGeometry(relationships, geoNode, deformers) {\n      switch (geoNode.attrType) {\n        case 'Mesh':\n          return this.parseMeshGeometry(relationships, geoNode, deformers);\n          break;\n\n        case 'NurbsCurve':\n          return this.parseNurbsGeometry(geoNode);\n          break;\n      }\n    },\n    // Parse single node mesh geometry in FBXTree.Objects.Geometry\n    parseMeshGeometry: function parseMeshGeometry(relationships, geoNode, deformers) {\n      var skeletons = deformers.skeletons;\n      var morphTargets = deformers.morphTargets;\n      var modelNodes = relationships.parents.map(function (parent) {\n        return fbxTree.Objects.Model[parent.ID];\n      }); // don't create geometry if it is not associated with any models\n\n      if (modelNodes.length === 0) return;\n      var skeleton = relationships.children.reduce(function (skeleton, child) {\n        if (skeletons[child.ID] !== undefined) skeleton = skeletons[child.ID];\n        return skeleton;\n      }, null);\n      var morphTarget = relationships.children.reduce(function (morphTarget, child) {\n        if (morphTargets[child.ID] !== undefined) morphTarget = morphTargets[child.ID];\n        return morphTarget;\n      }, null); // TODO: if there is more than one model associated with the geometry, AND the models have\n      // different geometric transforms, then this will cause problems\n      // if ( modelNodes.length > 1 ) { }\n      // For now just assume one model and get the preRotations from that\n\n      var modelNode = modelNodes[0];\n      var transformData = {};\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = modelNode.RotationOrder.value;\n      if ('GeometricTranslation' in modelNode) transformData.translation = modelNode.GeometricTranslation.value;\n      if ('GeometricRotation' in modelNode) transformData.rotation = modelNode.GeometricRotation.value;\n      if ('GeometricScaling' in modelNode) transformData.scale = modelNode.GeometricScaling.value;\n      var transform = generateTransform(transformData);\n      return this.genGeometry(geoNode, skeleton, morphTarget, transform);\n    },\n    // Generate a THREE.BufferGeometry from a node in FBXTree.Objects.Geometry\n    genGeometry: function genGeometry(geoNode, skeleton, morphTarget, preTransform) {\n      var geo = new THREE.BufferGeometry();\n      if (geoNode.attrName) geo.name = geoNode.attrName;\n      var geoInfo = this.parseGeoNode(geoNode, skeleton);\n      var buffers = this.genBuffers(geoInfo);\n      var positionAttribute = new THREE.Float32BufferAttribute(buffers.vertex, 3);\n      preTransform.applyToBufferAttribute(positionAttribute);\n      geo.addAttribute('position', positionAttribute);\n\n      if (buffers.colors.length > 0) {\n        geo.addAttribute('color', new THREE.Float32BufferAttribute(buffers.colors, 3));\n      }\n\n      if (skeleton) {\n        geo.addAttribute('skinIndex', new THREE.Uint16BufferAttribute(buffers.weightsIndices, 4));\n        geo.addAttribute('skinWeight', new THREE.Float32BufferAttribute(buffers.vertexWeights, 4)); // used later to bind the skeleton to the model\n\n        geo.FBX_Deformer = skeleton;\n      }\n\n      if (buffers.normal.length > 0) {\n        var normalAttribute = new THREE.Float32BufferAttribute(buffers.normal, 3);\n        var normalMatrix = new THREE.Matrix3().getNormalMatrix(preTransform);\n        normalMatrix.applyToBufferAttribute(normalAttribute);\n        geo.addAttribute('normal', normalAttribute);\n      }\n\n      buffers.uvs.forEach(function (uvBuffer, i) {\n        // subsequent uv buffers are called 'uv1', 'uv2', ...\n        var name = 'uv' + (i + 1).toString(); // the first uv buffer is just called 'uv'\n\n        if (i === 0) {\n          name = 'uv';\n        }\n\n        geo.addAttribute(name, new THREE.Float32BufferAttribute(buffers.uvs[i], 2));\n      });\n\n      if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n        // Convert the material indices of each vertex into rendering groups on the geometry.\n        var prevMaterialIndex = buffers.materialIndex[0];\n        var startIndex = 0;\n        buffers.materialIndex.forEach(function (currentIndex, i) {\n          if (currentIndex !== prevMaterialIndex) {\n            geo.addGroup(startIndex, i - startIndex, prevMaterialIndex);\n            prevMaterialIndex = currentIndex;\n            startIndex = i;\n          }\n        }); // the loop above doesn't add the last group, do that here.\n\n        if (geo.groups.length > 0) {\n          var lastGroup = geo.groups[geo.groups.length - 1];\n          var lastIndex = lastGroup.start + lastGroup.count;\n\n          if (lastIndex !== buffers.materialIndex.length) {\n            geo.addGroup(lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex);\n          }\n        } // case where there are multiple materials but the whole geometry is only\n        // using one of them\n\n\n        if (geo.groups.length === 0) {\n          geo.addGroup(0, buffers.materialIndex.length, buffers.materialIndex[0]);\n        }\n      }\n\n      this.addMorphTargets(geo, geoNode, morphTarget, preTransform);\n      return geo;\n    },\n    parseGeoNode: function parseGeoNode(geoNode, skeleton) {\n      var geoInfo = {};\n      geoInfo.vertexPositions = geoNode.Vertices !== undefined ? geoNode.Vertices.a : [];\n      geoInfo.vertexIndices = geoNode.PolygonVertexIndex !== undefined ? geoNode.PolygonVertexIndex.a : [];\n\n      if (geoNode.LayerElementColor) {\n        geoInfo.color = this.parseVertexColors(geoNode.LayerElementColor[0]);\n      }\n\n      if (geoNode.LayerElementMaterial) {\n        geoInfo.material = this.parseMaterialIndices(geoNode.LayerElementMaterial[0]);\n      }\n\n      if (geoNode.LayerElementNormal) {\n        geoInfo.normal = this.parseNormals(geoNode.LayerElementNormal[0]);\n      }\n\n      if (geoNode.LayerElementUV) {\n        geoInfo.uv = [];\n        var i = 0;\n\n        while (geoNode.LayerElementUV[i]) {\n          geoInfo.uv.push(this.parseUVs(geoNode.LayerElementUV[i]));\n          i++;\n        }\n      }\n\n      geoInfo.weightTable = {};\n\n      if (skeleton !== null) {\n        geoInfo.skeleton = skeleton;\n        skeleton.rawBones.forEach(function (rawBone, i) {\n          // loop over the bone's vertex indices and weights\n          rawBone.indices.forEach(function (index, j) {\n            if (geoInfo.weightTable[index] === undefined) geoInfo.weightTable[index] = [];\n            geoInfo.weightTable[index].push({\n              id: i,\n              weight: rawBone.weights[j]\n            });\n          });\n        });\n      }\n\n      return geoInfo;\n    },\n    genBuffers: function genBuffers(geoInfo) {\n      var buffers = {\n        vertex: [],\n        normal: [],\n        colors: [],\n        uvs: [],\n        materialIndex: [],\n        vertexWeights: [],\n        weightsIndices: []\n      };\n      var polygonIndex = 0;\n      var faceLength = 0;\n      var displayedWeightsWarning = false; // these will hold data for a single face\n\n      var facePositionIndexes = [];\n      var faceNormals = [];\n      var faceColors = [];\n      var faceUVs = [];\n      var faceWeights = [];\n      var faceWeightIndices = [];\n      var self = this;\n      geoInfo.vertexIndices.forEach(function (vertexIndex, polygonVertexIndex) {\n        var endOfFace = false; // Face index and vertex index arrays are combined in a single array\n        // A cube with quad faces looks like this:\n        // PolygonVertexIndex: *24 {\n        //  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n        //  }\n        // Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n        // to find index of last vertex bit shift the index: ^ - 1\n\n        if (vertexIndex < 0) {\n          vertexIndex = vertexIndex ^ -1; // equivalent to ( x * -1 ) - 1\n\n          endOfFace = true;\n        }\n\n        var weightIndices = [];\n        var weights = [];\n        facePositionIndexes.push(vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2);\n\n        if (geoInfo.color) {\n          var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color);\n          faceColors.push(data[0], data[1], data[2]);\n        }\n\n        if (geoInfo.skeleton) {\n          if (geoInfo.weightTable[vertexIndex] !== undefined) {\n            geoInfo.weightTable[vertexIndex].forEach(function (wt) {\n              weights.push(wt.weight);\n              weightIndices.push(wt.id);\n            });\n          }\n\n          if (weights.length > 4) {\n            if (!displayedWeightsWarning) {\n              console.warn('THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.');\n              displayedWeightsWarning = true;\n            }\n\n            var wIndex = [0, 0, 0, 0];\n            var Weight = [0, 0, 0, 0];\n            weights.forEach(function (weight, weightIndex) {\n              var currentWeight = weight;\n              var currentIndex = weightIndices[weightIndex];\n              Weight.forEach(function (comparedWeight, comparedWeightIndex, comparedWeightArray) {\n                if (currentWeight > comparedWeight) {\n                  comparedWeightArray[comparedWeightIndex] = currentWeight;\n                  currentWeight = comparedWeight;\n                  var tmp = wIndex[comparedWeightIndex];\n                  wIndex[comparedWeightIndex] = currentIndex;\n                  currentIndex = tmp;\n                }\n              });\n            });\n            weightIndices = wIndex;\n            weights = Weight;\n          } // if the weight array is shorter than 4 pad with 0s\n\n\n          while (weights.length < 4) {\n            weights.push(0);\n            weightIndices.push(0);\n          }\n\n          for (var i = 0; i < 4; ++i) {\n            faceWeights.push(weights[i]);\n            faceWeightIndices.push(weightIndices[i]);\n          }\n        }\n\n        if (geoInfo.normal) {\n          var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal);\n          faceNormals.push(data[0], data[1], data[2]);\n        }\n\n        if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n          var materialIndex = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material)[0];\n        }\n\n        if (geoInfo.uv) {\n          geoInfo.uv.forEach(function (uv, i) {\n            var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, uv);\n\n            if (faceUVs[i] === undefined) {\n              faceUVs[i] = [];\n            }\n\n            faceUVs[i].push(data[0]);\n            faceUVs[i].push(data[1]);\n          });\n        }\n\n        faceLength++;\n\n        if (endOfFace) {\n          self.genFace(buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength);\n          polygonIndex++;\n          faceLength = 0; // reset arrays for the next face\n\n          facePositionIndexes = [];\n          faceNormals = [];\n          faceColors = [];\n          faceUVs = [];\n          faceWeights = [];\n          faceWeightIndices = [];\n        }\n      });\n      return buffers;\n    },\n    // Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n    genFace: function genFace(buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength) {\n      for (var i = 2; i < faceLength; i++) {\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[0]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[2]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 2]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 2]]);\n\n        if (geoInfo.skeleton) {\n          buffers.vertexWeights.push(faceWeights[0]);\n          buffers.vertexWeights.push(faceWeights[1]);\n          buffers.vertexWeights.push(faceWeights[2]);\n          buffers.vertexWeights.push(faceWeights[3]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 1]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 2]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 3]);\n          buffers.vertexWeights.push(faceWeights[i * 4]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 1]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 2]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 3]);\n          buffers.weightsIndices.push(faceWeightIndices[0]);\n          buffers.weightsIndices.push(faceWeightIndices[1]);\n          buffers.weightsIndices.push(faceWeightIndices[2]);\n          buffers.weightsIndices.push(faceWeightIndices[3]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 1]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 2]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 3]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 1]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 2]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 3]);\n        }\n\n        if (geoInfo.color) {\n          buffers.colors.push(faceColors[0]);\n          buffers.colors.push(faceColors[1]);\n          buffers.colors.push(faceColors[2]);\n          buffers.colors.push(faceColors[(i - 1) * 3]);\n          buffers.colors.push(faceColors[(i - 1) * 3 + 1]);\n          buffers.colors.push(faceColors[(i - 1) * 3 + 2]);\n          buffers.colors.push(faceColors[i * 3]);\n          buffers.colors.push(faceColors[i * 3 + 1]);\n          buffers.colors.push(faceColors[i * 3 + 2]);\n        }\n\n        if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n          buffers.materialIndex.push(materialIndex);\n          buffers.materialIndex.push(materialIndex);\n          buffers.materialIndex.push(materialIndex);\n        }\n\n        if (geoInfo.normal) {\n          buffers.normal.push(faceNormals[0]);\n          buffers.normal.push(faceNormals[1]);\n          buffers.normal.push(faceNormals[2]);\n          buffers.normal.push(faceNormals[(i - 1) * 3]);\n          buffers.normal.push(faceNormals[(i - 1) * 3 + 1]);\n          buffers.normal.push(faceNormals[(i - 1) * 3 + 2]);\n          buffers.normal.push(faceNormals[i * 3]);\n          buffers.normal.push(faceNormals[i * 3 + 1]);\n          buffers.normal.push(faceNormals[i * 3 + 2]);\n        }\n\n        if (geoInfo.uv) {\n          geoInfo.uv.forEach(function (uv, j) {\n            if (buffers.uvs[j] === undefined) buffers.uvs[j] = [];\n            buffers.uvs[j].push(faceUVs[j][0]);\n            buffers.uvs[j].push(faceUVs[j][1]);\n            buffers.uvs[j].push(faceUVs[j][(i - 1) * 2]);\n            buffers.uvs[j].push(faceUVs[j][(i - 1) * 2 + 1]);\n            buffers.uvs[j].push(faceUVs[j][i * 2]);\n            buffers.uvs[j].push(faceUVs[j][i * 2 + 1]);\n          });\n        }\n      }\n    },\n    addMorphTargets: function addMorphTargets(parentGeo, parentGeoNode, morphTarget, preTransform) {\n      if (morphTarget === null) return;\n      parentGeo.morphAttributes.position = [];\n      parentGeo.morphAttributes.normal = [];\n      var self = this;\n      morphTarget.rawTargets.forEach(function (rawTarget) {\n        var morphGeoNode = fbxTree.Objects.Geometry[rawTarget.geoID];\n\n        if (morphGeoNode !== undefined) {\n          self.genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform);\n        }\n      });\n    },\n    // a morph geometry node is similar to a standard  node, and the node is also contained\n    // in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n    // and a special attribute Index defining which vertices of the original geometry are affected\n    // Normal and position attributes only have data for the vertices that are affected by the morph\n    genMorphGeometry: function genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform) {\n      var morphGeo = new THREE.BufferGeometry();\n      if (morphGeoNode.attrName) morphGeo.name = morphGeoNode.attrName;\n      var vertexIndices = parentGeoNode.PolygonVertexIndex !== undefined ? parentGeoNode.PolygonVertexIndex.a : []; // make a copy of the parent's vertex positions\n\n      var vertexPositions = parentGeoNode.Vertices !== undefined ? parentGeoNode.Vertices.a.slice() : [];\n      var morphPositions = morphGeoNode.Vertices !== undefined ? morphGeoNode.Vertices.a : [];\n      var indices = morphGeoNode.Indexes !== undefined ? morphGeoNode.Indexes.a : [];\n\n      for (var i = 0; i < indices.length; i++) {\n        var morphIndex = indices[i] * 3; // FBX format uses blend shapes rather than morph targets. This can be converted\n        // by additively combining the blend shape positions with the original geometry's positions\n\n        vertexPositions[morphIndex] += morphPositions[i * 3];\n        vertexPositions[morphIndex + 1] += morphPositions[i * 3 + 1];\n        vertexPositions[morphIndex + 2] += morphPositions[i * 3 + 2];\n      } // TODO: add morph normal support\n\n\n      var morphGeoInfo = {\n        vertexIndices: vertexIndices,\n        vertexPositions: vertexPositions\n      };\n      var morphBuffers = this.genBuffers(morphGeoInfo);\n      var positionAttribute = new THREE.Float32BufferAttribute(morphBuffers.vertex, 3);\n      positionAttribute.name = morphGeoNode.attrName;\n      preTransform.applyToBufferAttribute(positionAttribute);\n      parentGeo.morphAttributes.position.push(positionAttribute);\n    },\n    // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n    parseNormals: function parseNormals(NormalNode) {\n      var mappingType = NormalNode.MappingInformationType;\n      var referenceType = NormalNode.ReferenceInformationType;\n      var buffer = NormalNode.Normals.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        if ('NormalIndex' in NormalNode) {\n          indexBuffer = NormalNode.NormalIndex.a;\n        } else if ('NormalsIndex' in NormalNode) {\n          indexBuffer = NormalNode.NormalsIndex.a;\n        }\n      }\n\n      return {\n        dataSize: 3,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    },\n    // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n    parseUVs: function parseUVs(UVNode) {\n      var mappingType = UVNode.MappingInformationType;\n      var referenceType = UVNode.ReferenceInformationType;\n      var buffer = UVNode.UV.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        indexBuffer = UVNode.UVIndex.a;\n      }\n\n      return {\n        dataSize: 2,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    },\n    // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n    parseVertexColors: function parseVertexColors(ColorNode) {\n      var mappingType = ColorNode.MappingInformationType;\n      var referenceType = ColorNode.ReferenceInformationType;\n      var buffer = ColorNode.Colors.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        indexBuffer = ColorNode.ColorIndex.a;\n      }\n\n      return {\n        dataSize: 4,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    },\n    // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n    parseMaterialIndices: function parseMaterialIndices(MaterialNode) {\n      var mappingType = MaterialNode.MappingInformationType;\n      var referenceType = MaterialNode.ReferenceInformationType;\n\n      if (mappingType === 'NoMappingInformation') {\n        return {\n          dataSize: 1,\n          buffer: [0],\n          indices: [0],\n          mappingType: 'AllSame',\n          referenceType: referenceType\n        };\n      }\n\n      var materialIndexBuffer = MaterialNode.Materials.a; // Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n      // we expect.So we create an intermediate buffer that points to the index in the buffer,\n      // for conforming with the other functions we've written for other data.\n\n      var materialIndices = [];\n\n      for (var i = 0; i < materialIndexBuffer.length; ++i) {\n        materialIndices.push(i);\n      }\n\n      return {\n        dataSize: 1,\n        buffer: materialIndexBuffer,\n        indices: materialIndices,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    },\n    // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n    parseNurbsGeometry: function parseNurbsGeometry(geoNode) {\n      if (THREE.NURBSCurve === undefined) {\n        console.error('THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.');\n        return new THREE.BufferGeometry();\n      }\n\n      var order = parseInt(geoNode.Order);\n\n      if (isNaN(order)) {\n        console.error('THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id);\n        return new THREE.BufferGeometry();\n      }\n\n      var degree = order - 1;\n      var knots = geoNode.KnotVector.a;\n      var controlPoints = [];\n      var pointsValues = geoNode.Points.a;\n\n      for (var i = 0, l = pointsValues.length; i < l; i += 4) {\n        controlPoints.push(new THREE.Vector4().fromArray(pointsValues, i));\n      }\n\n      var startKnot, endKnot;\n\n      if (geoNode.Form === 'Closed') {\n        controlPoints.push(controlPoints[0]);\n      } else if (geoNode.Form === 'Periodic') {\n        startKnot = degree;\n        endKnot = knots.length - 1 - startKnot;\n\n        for (var i = 0; i < degree; ++i) {\n          controlPoints.push(controlPoints[i]);\n        }\n      }\n\n      var curve = new THREE.NURBSCurve(degree, knots, controlPoints, startKnot, endKnot);\n      var vertices = curve.getPoints(controlPoints.length * 7);\n      var positions = new Float32Array(vertices.length * 3);\n      vertices.forEach(function (vertex, i) {\n        vertex.toArray(positions, i * 3);\n      });\n      var geometry = new THREE.BufferGeometry();\n      geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n      return geometry;\n    }\n  }; // parse animation data from FBXTree\n\n  function AnimationParser() {}\n\n  AnimationParser.prototype = {\n    constructor: AnimationParser,\n    // take raw animation clips and turn them into three.js animation clips\n    parse: function parse() {\n      var animationClips = [];\n      var rawClips = this.parseClips();\n      if (rawClips === undefined) return animationClips;\n\n      for (var key in rawClips) {\n        var rawClip = rawClips[key];\n        var clip = this.addClip(rawClip);\n        animationClips.push(clip);\n      }\n\n      return animationClips;\n    },\n    parseClips: function parseClips() {\n      // since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n      // if this is undefined we can safely assume there are no animations\n      if (fbxTree.Objects.AnimationCurve === undefined) return undefined;\n      var curveNodesMap = this.parseAnimationCurveNodes();\n      this.parseAnimationCurves(curveNodesMap);\n      var layersMap = this.parseAnimationLayers(curveNodesMap);\n      var rawClips = this.parseAnimStacks(layersMap);\n      return rawClips;\n    },\n    // parse nodes in FBXTree.Objects.AnimationCurveNode\n    // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n    // and is referenced by an AnimationLayer\n    parseAnimationCurveNodes: function parseAnimationCurveNodes() {\n      var rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n      var curveNodesMap = new Map();\n\n      for (var nodeID in rawCurveNodes) {\n        var rawCurveNode = rawCurveNodes[nodeID];\n\n        if (rawCurveNode.attrName.match(/S|R|T|DeformPercent/) !== null) {\n          var curveNode = {\n            id: rawCurveNode.id,\n            attr: rawCurveNode.attrName,\n            curves: {}\n          };\n          curveNodesMap.set(curveNode.id, curveNode);\n        }\n      }\n\n      return curveNodesMap;\n    },\n    // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n    // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n    // axis ( e.g. times and values of x rotation)\n    parseAnimationCurves: function parseAnimationCurves(curveNodesMap) {\n      var rawCurves = fbxTree.Objects.AnimationCurve; // TODO: Many values are identical up to roundoff error, but won't be optimised\n      // e.g. position times: [0, 0.4, 0. 8]\n      // position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n      // clearly, this should be optimised to\n      // times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n      // this shows up in nearly every FBX file, and generally time array is length > 100\n\n      for (var nodeID in rawCurves) {\n        var animationCurve = {\n          id: rawCurves[nodeID].id,\n          times: rawCurves[nodeID].KeyTime.a.map(convertFBXTimeToSeconds),\n          values: rawCurves[nodeID].KeyValueFloat.a\n        };\n        var relationships = connections.get(animationCurve.id);\n\n        if (relationships !== undefined) {\n          var animationCurveID = relationships.parents[0].ID;\n          var animationCurveRelationship = relationships.parents[0].relationship;\n\n          if (animationCurveRelationship.match(/X/)) {\n            curveNodesMap.get(animationCurveID).curves['x'] = animationCurve;\n          } else if (animationCurveRelationship.match(/Y/)) {\n            curveNodesMap.get(animationCurveID).curves['y'] = animationCurve;\n          } else if (animationCurveRelationship.match(/Z/)) {\n            curveNodesMap.get(animationCurveID).curves['z'] = animationCurve;\n          } else if (animationCurveRelationship.match(/d|DeformPercent/) && curveNodesMap.has(animationCurveID)) {\n            curveNodesMap.get(animationCurveID).curves['morph'] = animationCurve;\n          }\n        }\n      }\n    },\n    // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n    // to various AnimationCurveNodes and is referenced by an AnimationStack node\n    // note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n    parseAnimationLayers: function parseAnimationLayers(curveNodesMap) {\n      var rawLayers = fbxTree.Objects.AnimationLayer;\n      var layersMap = new Map();\n\n      for (var nodeID in rawLayers) {\n        var layerCurveNodes = [];\n        var connection = connections.get(parseInt(nodeID));\n\n        if (connection !== undefined) {\n          // all the animationCurveNodes used in the layer\n          var children = connection.children;\n          var self = this;\n          children.forEach(function (child, i) {\n            if (curveNodesMap.has(child.ID)) {\n              var curveNode = curveNodesMap.get(child.ID); // check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\n              if (curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined) {\n                if (layerCurveNodes[i] === undefined) {\n                  var modelID;\n                  connections.get(child.ID).parents.forEach(function (parent) {\n                    if (parent.relationship !== undefined) modelID = parent.ID;\n                  });\n                  var rawModel = fbxTree.Objects.Model[modelID.toString()];\n                  var node = {\n                    modelName: THREE.PropertyBinding.sanitizeNodeName(rawModel.attrName),\n                    initialPosition: [0, 0, 0],\n                    initialRotation: [0, 0, 0],\n                    initialScale: [1, 1, 1],\n                    transform: self.getModelAnimTransform(rawModel)\n                  }; // if the animated model is pre rotated, we'll have to apply the pre rotations to every\n                  // animation value as well\n\n                  if ('PreRotation' in rawModel) node.preRotations = rawModel.PreRotation.value;\n                  if ('PostRotation' in rawModel) node.postRotations = rawModel.PostRotation.value;\n                  layerCurveNodes[i] = node;\n                }\n\n                layerCurveNodes[i][curveNode.attr] = curveNode;\n              } else if (curveNode.curves.morph !== undefined) {\n                if (layerCurveNodes[i] === undefined) {\n                  var deformerID;\n                  connections.get(child.ID).parents.forEach(function (parent) {\n                    if (parent.relationship !== undefined) deformerID = parent.ID;\n                  });\n                  var morpherID = connections.get(deformerID).parents[0].ID;\n                  var geoID = connections.get(morpherID).parents[0].ID; // assuming geometry is not used in more than one model\n\n                  var modelID = connections.get(geoID).parents[0].ID;\n                  var rawModel = fbxTree.Objects.Model[modelID];\n                  var node = {\n                    modelName: THREE.PropertyBinding.sanitizeNodeName(rawModel.attrName),\n                    morphName: fbxTree.Objects.Deformer[deformerID].attrName\n                  };\n                  layerCurveNodes[i] = node;\n                }\n\n                layerCurveNodes[i][curveNode.attr] = curveNode;\n              }\n            }\n          });\n          layersMap.set(parseInt(nodeID), layerCurveNodes);\n        }\n      }\n\n      return layersMap;\n    },\n    getModelAnimTransform: function getModelAnimTransform(modelNode) {\n      var transformData = {};\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = parseInt(modelNode.RotationOrder.value);\n      if ('Lcl_Translation' in modelNode) transformData.translation = modelNode.Lcl_Translation.value;\n      if ('RotationOffset' in modelNode) transformData.rotationOffset = modelNode.RotationOffset.value;\n      if ('Lcl_Rotation' in modelNode) transformData.rotation = modelNode.Lcl_Rotation.value;\n      if ('PreRotation' in modelNode) transformData.preRotation = modelNode.PreRotation.value;\n      if ('PostRotation' in modelNode) transformData.postRotation = modelNode.PostRotation.value;\n      if ('Lcl_Scaling' in modelNode) transformData.scale = modelNode.Lcl_Scaling.value;\n      return generateTransform(transformData);\n    },\n    // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n    // hierarchy. Each Stack node will be used to create a THREE.AnimationClip\n    parseAnimStacks: function parseAnimStacks(layersMap) {\n      var rawStacks = fbxTree.Objects.AnimationStack; // connect the stacks (clips) up to the layers\n\n      var rawClips = {};\n\n      for (var nodeID in rawStacks) {\n        var children = connections.get(parseInt(nodeID)).children;\n\n        if (children.length > 1) {\n          // it seems like stacks will always be associated with a single layer. But just in case there are files\n          // where there are multiple layers per stack, we'll display a warning\n          console.warn('THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.');\n        }\n\n        var layer = layersMap.get(children[0].ID);\n        rawClips[nodeID] = {\n          name: rawStacks[nodeID].attrName,\n          layer: layer\n        };\n      }\n\n      return rawClips;\n    },\n    addClip: function addClip(rawClip) {\n      var tracks = [];\n      var self = this;\n      rawClip.layer.forEach(function (rawTracks) {\n        tracks = tracks.concat(self.generateTracks(rawTracks));\n      });\n      return new THREE.AnimationClip(rawClip.name, -1, tracks);\n    },\n    generateTracks: function generateTracks(rawTracks) {\n      var tracks = [];\n      var initialPosition = new THREE.Vector3();\n      var initialRotation = new THREE.Quaternion();\n      var initialScale = new THREE.Vector3();\n      if (rawTracks.transform) rawTracks.transform.decompose(initialPosition, initialRotation, initialScale);\n      initialPosition = initialPosition.toArray();\n      initialRotation = new THREE.Euler().setFromQuaternion(initialRotation).toArray(); // todo: euler order\n\n      initialScale = initialScale.toArray();\n\n      if (rawTracks.T !== undefined && Object.keys(rawTracks.T.curves).length > 0) {\n        var positionTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position');\n        if (positionTrack !== undefined) tracks.push(positionTrack);\n      }\n\n      if (rawTracks.R !== undefined && Object.keys(rawTracks.R.curves).length > 0) {\n        var rotationTrack = this.generateRotationTrack(rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotations, rawTracks.postRotations);\n        if (rotationTrack !== undefined) tracks.push(rotationTrack);\n      }\n\n      if (rawTracks.S !== undefined && Object.keys(rawTracks.S.curves).length > 0) {\n        var scaleTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale');\n        if (scaleTrack !== undefined) tracks.push(scaleTrack);\n      }\n\n      if (rawTracks.DeformPercent !== undefined) {\n        var morphTrack = this.generateMorphTrack(rawTracks);\n        if (morphTrack !== undefined) tracks.push(morphTrack);\n      }\n\n      return tracks;\n    },\n    generateVectorTrack: function generateVectorTrack(modelName, curves, initialValue, type) {\n      var times = this.getTimesForAllAxes(curves);\n      var values = this.getKeyframeTrackValues(times, curves, initialValue);\n      return new THREE.VectorKeyframeTrack(modelName + '.' + type, times, values);\n    },\n    generateRotationTrack: function generateRotationTrack(modelName, curves, initialValue, preRotations, postRotations) {\n      if (curves.x !== undefined) {\n        this.interpolateRotations(curves.x);\n        curves.x.values = curves.x.values.map(THREE.Math.degToRad);\n      }\n\n      if (curves.y !== undefined) {\n        this.interpolateRotations(curves.y);\n        curves.y.values = curves.y.values.map(THREE.Math.degToRad);\n      }\n\n      if (curves.z !== undefined) {\n        this.interpolateRotations(curves.z);\n        curves.z.values = curves.z.values.map(THREE.Math.degToRad);\n      }\n\n      var times = this.getTimesForAllAxes(curves);\n      var values = this.getKeyframeTrackValues(times, curves, initialValue);\n\n      if (preRotations !== undefined) {\n        preRotations = preRotations.map(THREE.Math.degToRad);\n        preRotations.push('ZYX');\n        preRotations = new THREE.Euler().fromArray(preRotations);\n        preRotations = new THREE.Quaternion().setFromEuler(preRotations);\n      }\n\n      if (postRotations !== undefined) {\n        postRotations = postRotations.map(THREE.Math.degToRad);\n        postRotations.push('ZYX');\n        postRotations = new THREE.Euler().fromArray(postRotations);\n        postRotations = new THREE.Quaternion().setFromEuler(postRotations).inverse();\n      }\n\n      var quaternion = new THREE.Quaternion();\n      var euler = new THREE.Euler();\n      var quaternionValues = [];\n\n      for (var i = 0; i < values.length; i += 3) {\n        euler.set(values[i], values[i + 1], values[i + 2], 'ZYX');\n        quaternion.setFromEuler(euler);\n        if (preRotations !== undefined) quaternion.premultiply(preRotations);\n        if (postRotations !== undefined) quaternion.multiply(postRotations);\n        quaternion.toArray(quaternionValues, i / 3 * 4);\n      }\n\n      return new THREE.QuaternionKeyframeTrack(modelName + '.quaternion', times, quaternionValues);\n    },\n    generateMorphTrack: function generateMorphTrack(rawTracks) {\n      var curves = rawTracks.DeformPercent.curves.morph;\n      var values = curves.values.map(function (val) {\n        return val / 100;\n      });\n      var morphNum = sceneGraph.getObjectByName(rawTracks.modelName).morphTargetDictionary[rawTracks.morphName];\n      return new THREE.NumberKeyframeTrack(rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values);\n    },\n    // For all animated objects, times are defined separately for each axis\n    // Here we'll combine the times into one sorted array without duplicates\n    getTimesForAllAxes: function getTimesForAllAxes(curves) {\n      var times = []; // first join together the times for each axis, if defined\n\n      if (curves.x !== undefined) times = times.concat(curves.x.times);\n      if (curves.y !== undefined) times = times.concat(curves.y.times);\n      if (curves.z !== undefined) times = times.concat(curves.z.times); // then sort them and remove duplicates\n\n      times = times.sort(function (a, b) {\n        return a - b;\n      }).filter(function (elem, index, array) {\n        return array.indexOf(elem) == index;\n      });\n      return times;\n    },\n    getKeyframeTrackValues: function getKeyframeTrackValues(times, curves, initialValue) {\n      var prevValue = initialValue;\n      var values = [];\n      var xIndex = -1;\n      var yIndex = -1;\n      var zIndex = -1;\n      times.forEach(function (time) {\n        if (curves.x) xIndex = curves.x.times.indexOf(time);\n        if (curves.y) yIndex = curves.y.times.indexOf(time);\n        if (curves.z) zIndex = curves.z.times.indexOf(time); // if there is an x value defined for this frame, use that\n\n        if (xIndex !== -1) {\n          var xValue = curves.x.values[xIndex];\n          values.push(xValue);\n          prevValue[0] = xValue;\n        } else {\n          // otherwise use the x value from the previous frame\n          values.push(prevValue[0]);\n        }\n\n        if (yIndex !== -1) {\n          var yValue = curves.y.values[yIndex];\n          values.push(yValue);\n          prevValue[1] = yValue;\n        } else {\n          values.push(prevValue[1]);\n        }\n\n        if (zIndex !== -1) {\n          var zValue = curves.z.values[zIndex];\n          values.push(zValue);\n          prevValue[2] = zValue;\n        } else {\n          values.push(prevValue[2]);\n        }\n      });\n      return values;\n    },\n    // Rotations are defined as Euler angles which can have values  of any size\n    // These will be converted to quaternions which don't support values greater than\n    // PI, so we'll interpolate large rotations\n    interpolateRotations: function interpolateRotations(curve) {\n      for (var i = 1; i < curve.values.length; i++) {\n        var initialValue = curve.values[i - 1];\n        var valuesSpan = curve.values[i] - initialValue;\n        var absoluteSpan = Math.abs(valuesSpan);\n\n        if (absoluteSpan >= 180) {\n          var numSubIntervals = absoluteSpan / 180;\n          var step = valuesSpan / numSubIntervals;\n          var nextValue = initialValue + step;\n          var initialTime = curve.times[i - 1];\n          var timeSpan = curve.times[i] - initialTime;\n          var interval = timeSpan / numSubIntervals;\n          var nextTime = initialTime + interval;\n          var interpolatedTimes = [];\n          var interpolatedValues = [];\n\n          while (nextTime < curve.times[i]) {\n            interpolatedTimes.push(nextTime);\n            nextTime += interval;\n            interpolatedValues.push(nextValue);\n            nextValue += step;\n          }\n\n          curve.times = inject(curve.times, i, interpolatedTimes);\n          curve.values = inject(curve.values, i, interpolatedValues);\n        }\n      }\n    }\n  }; // parse an FBX file in ASCII format\n\n  function TextParser() {}\n\n  TextParser.prototype = {\n    constructor: TextParser,\n    getPrevNode: function getPrevNode() {\n      return this.nodeStack[this.currentIndent - 2];\n    },\n    getCurrentNode: function getCurrentNode() {\n      return this.nodeStack[this.currentIndent - 1];\n    },\n    getCurrentProp: function getCurrentProp() {\n      return this.currentProp;\n    },\n    pushStack: function pushStack(node) {\n      this.nodeStack.push(node);\n      this.currentIndent += 1;\n    },\n    popStack: function popStack() {\n      this.nodeStack.pop();\n      this.currentIndent -= 1;\n    },\n    setCurrentProp: function setCurrentProp(val, name) {\n      this.currentProp = val;\n      this.currentPropName = name;\n    },\n    parse: function parse(text) {\n      this.currentIndent = 0;\n      console.log(\"FBXTree: \", FBXTree);\n      this.allNodes = new FBXTree();\n      this.nodeStack = [];\n      this.currentProp = [];\n      this.currentPropName = '';\n      var self = this;\n      var split = text.split(/[\\r\\n]+/);\n      split.forEach(function (line, i) {\n        var matchComment = line.match(/^[\\s\\t]*;/);\n        var matchEmpty = line.match(/^[\\s\\t]*$/);\n        if (matchComment || matchEmpty) return;\n        var matchBeginning = line.match('^\\\\t{' + self.currentIndent + '}(\\\\w+):(.*){', '');\n        var matchProperty = line.match('^\\\\t{' + self.currentIndent + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)');\n        var matchEnd = line.match('^\\\\t{' + (self.currentIndent - 1) + '}}');\n\n        if (matchBeginning) {\n          self.parseNodeBegin(line, matchBeginning);\n        } else if (matchProperty) {\n          self.parseNodeProperty(line, matchProperty, split[++i]);\n        } else if (matchEnd) {\n          self.popStack();\n        } else if (line.match(/^[^\\s\\t}]/)) {\n          // large arrays are split over multiple lines terminated with a ',' character\n          // if this is encountered the line needs to be joined to the previous line\n          self.parseNodePropertyContinued(line);\n        }\n      });\n      return this.allNodes;\n    },\n    parseNodeBegin: function parseNodeBegin(line, property) {\n      var nodeName = property[1].trim().replace(/^\"/, '').replace(/\"$/, '');\n      var nodeAttrs = property[2].split(',').map(function (attr) {\n        return attr.trim().replace(/^\"/, '').replace(/\"$/, '');\n      });\n      var node = {\n        name: nodeName\n      };\n      var attrs = this.parseNodeAttr(nodeAttrs);\n      var currentNode = this.getCurrentNode(); // a top node\n\n      if (this.currentIndent === 0) {\n        this.allNodes.add(nodeName, node);\n      } else {\n        // a subnode\n        // if the subnode already exists, append it\n        if (nodeName in currentNode) {\n          // special case Pose needs PoseNodes as an array\n          if (nodeName === 'PoseNode') {\n            currentNode.PoseNode.push(node);\n          } else if (currentNode[nodeName].id !== undefined) {\n            currentNode[nodeName] = {};\n            currentNode[nodeName][currentNode[nodeName].id] = currentNode[nodeName];\n          }\n\n          if (attrs.id !== '') currentNode[nodeName][attrs.id] = node;\n        } else if (typeof attrs.id === 'number') {\n          currentNode[nodeName] = {};\n          currentNode[nodeName][attrs.id] = node;\n        } else if (nodeName !== 'Properties70') {\n          if (nodeName === 'PoseNode') currentNode[nodeName] = [node];else currentNode[nodeName] = node;\n        }\n      }\n\n      if (typeof attrs.id === 'number') node.id = attrs.id;\n      if (attrs.name !== '') node.attrName = attrs.name;\n      if (attrs.type !== '') node.attrType = attrs.type;\n      this.pushStack(node);\n    },\n    parseNodeAttr: function parseNodeAttr(attrs) {\n      var id = attrs[0];\n\n      if (attrs[0] !== '') {\n        id = parseInt(attrs[0]);\n\n        if (isNaN(id)) {\n          id = attrs[0];\n        }\n      }\n\n      var name = '',\n          type = '';\n\n      if (attrs.length > 1) {\n        name = attrs[1].replace(/^(\\w+)::/, '');\n        type = attrs[2];\n      }\n\n      return {\n        id: id,\n        name: name,\n        type: type\n      };\n    },\n    parseNodeProperty: function parseNodeProperty(line, property, contentLine) {\n      var propName = property[1].replace(/^\"/, '').replace(/\"$/, '').trim();\n      var propValue = property[2].replace(/^\"/, '').replace(/\"$/, '').trim(); // for special case: base64 image data follows \"Content: ,\" line\n      //\tContent: ,\n      //\t \"/9j/4RDaRXhpZgAATU0A...\"\n\n      if (propName === 'Content' && propValue === ',') {\n        propValue = contentLine.replace(/\"/g, '').replace(/,$/, '').trim();\n      }\n\n      var currentNode = this.getCurrentNode();\n      var parentName = currentNode.name;\n\n      if (parentName === 'Properties70') {\n        this.parseNodeSpecialProperty(line, propName, propValue);\n        return;\n      } // Connections\n\n\n      if (propName === 'C') {\n        var connProps = propValue.split(',').slice(1);\n        var from = parseInt(connProps[0]);\n        var to = parseInt(connProps[1]);\n        var rest = propValue.split(',').slice(3);\n        rest = rest.map(function (elem) {\n          return elem.trim().replace(/^\"/, '');\n        });\n        propName = 'connections';\n        propValue = [from, to];\n        append(propValue, rest);\n\n        if (currentNode[propName] === undefined) {\n          currentNode[propName] = [];\n        }\n      } // Node\n\n\n      if (propName === 'Node') currentNode.id = propValue; // connections\n\n      if (propName in currentNode && Array.isArray(currentNode[propName])) {\n        currentNode[propName].push(propValue);\n      } else {\n        if (propName !== 'a') currentNode[propName] = propValue;else currentNode.a = propValue;\n      }\n\n      this.setCurrentProp(currentNode, propName); // convert string to array, unless it ends in ',' in which case more will be added to it\n\n      if (propName === 'a' && propValue.slice(-1) !== ',') {\n        currentNode.a = parseNumberArray(propValue);\n      }\n    },\n    parseNodePropertyContinued: function parseNodePropertyContinued(line) {\n      var currentNode = this.getCurrentNode();\n      currentNode.a += line; // if the line doesn't end in ',' we have reached the end of the property value\n      // so convert the string to an array\n\n      if (line.slice(-1) !== ',') {\n        currentNode.a = parseNumberArray(currentNode.a);\n      }\n    },\n    // parse \"Property70\"\n    parseNodeSpecialProperty: function parseNodeSpecialProperty(line, propName, propValue) {\n      // split this\n      // P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n      // into array like below\n      // [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n      var props = propValue.split('\",').map(function (prop) {\n        return prop.trim().replace(/^\\\"/, '').replace(/\\s/, '_');\n      });\n      var innerPropName = props[0];\n      var innerPropType1 = props[1];\n      var innerPropType2 = props[2];\n      var innerPropFlag = props[3];\n      var innerPropValue = props[4]; // cast values where needed, otherwise leave as strings\n\n      switch (innerPropType1) {\n        case 'int':\n        case 'enum':\n        case 'bool':\n        case 'ULongLong':\n        case 'double':\n        case 'Number':\n        case 'FieldOfView':\n          innerPropValue = parseFloat(innerPropValue);\n          break;\n\n        case 'Color':\n        case 'ColorRGB':\n        case 'Vector3D':\n        case 'Lcl_Translation':\n        case 'Lcl_Rotation':\n        case 'Lcl_Scaling':\n          innerPropValue = parseNumberArray(innerPropValue);\n          break;\n      } // CAUTION: these props must append to parent's parent\n\n\n      this.getPrevNode()[innerPropName] = {\n        'type': innerPropType1,\n        'type2': innerPropType2,\n        'flag': innerPropFlag,\n        'value': innerPropValue\n      };\n      this.setCurrentProp(this.getPrevNode(), innerPropName);\n    }\n  }; // Parse an FBX file in Binary format\n\n  function BinaryParser() {}\n\n  BinaryParser.prototype = {\n    constructor: BinaryParser,\n    parse: function parse(buffer) {\n      var reader = new BinaryReader(buffer);\n      reader.skip(23); // skip magic 23 bytes\n\n      var version = reader.getUint32();\n      console.log('THREE.FBXLoader: FBX binary version: ' + version);\n      var allNodes = new FBXTree();\n\n      while (!this.endOfContent(reader)) {\n        var node = this.parseNode(reader, version);\n        if (node !== null) allNodes.add(node.name, node);\n      }\n\n      return allNodes;\n    },\n    // Check if reader has reached the end of content.\n    endOfContent: function endOfContent(reader) {\n      // footer size: 160bytes + 16-byte alignment padding\n      // - 16bytes: magic\n      // - padding til 16-byte alignment (at least 1byte?)\n      //\t(seems like some exporters embed fixed 15 or 16bytes?)\n      // - 4bytes: magic\n      // - 4bytes: version\n      // - 120bytes: zero\n      // - 16bytes: magic\n      if (reader.size() % 16 === 0) {\n        return (reader.getOffset() + 160 + 16 & ~0xf) >= reader.size();\n      } else {\n        return reader.getOffset() + 160 + 16 >= reader.size();\n      }\n    },\n    // recursively parse nodes until the end of the file is reached\n    parseNode: function parseNode(reader, version) {\n      var node = {}; // The first three data sizes depends on version.\n\n      var endOffset = version >= 7500 ? reader.getUint64() : reader.getUint32();\n      var numProperties = version >= 7500 ? reader.getUint64() : reader.getUint32(); // note: do not remove this even if you get a linter warning as it moves the buffer forward\n\n      var propertyListLen = version >= 7500 ? reader.getUint64() : reader.getUint32();\n      var nameLen = reader.getUint8();\n      var name = reader.getString(nameLen); // Regards this node as NULL-record if endOffset is zero\n\n      if (endOffset === 0) return null;\n      var propertyList = [];\n\n      for (var i = 0; i < numProperties; i++) {\n        propertyList.push(this.parseProperty(reader));\n      } // Regards the first three elements in propertyList as id, attrName, and attrType\n\n\n      var id = propertyList.length > 0 ? propertyList[0] : '';\n      var attrName = propertyList.length > 1 ? propertyList[1] : '';\n      var attrType = propertyList.length > 2 ? propertyList[2] : ''; // check if this node represents just a single property\n      // like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\n      node.singleProperty = numProperties === 1 && reader.getOffset() === endOffset ? true : false;\n\n      while (endOffset > reader.getOffset()) {\n        var subNode = this.parseNode(reader, version);\n        if (subNode !== null) this.parseSubNode(name, node, subNode);\n      }\n\n      node.propertyList = propertyList; // raw property list used by parent\n\n      if (typeof id === 'number') node.id = id;\n      if (attrName !== '') node.attrName = attrName;\n      if (attrType !== '') node.attrType = attrType;\n      if (name !== '') node.name = name;\n      return node;\n    },\n    parseSubNode: function parseSubNode(name, node, subNode) {\n      // special case: child node is single property\n      if (subNode.singleProperty === true) {\n        var value = subNode.propertyList[0];\n\n        if (Array.isArray(value)) {\n          node[subNode.name] = subNode;\n          subNode.a = value;\n        } else {\n          node[subNode.name] = value;\n        }\n      } else if (name === 'Connections' && subNode.name === 'C') {\n        var array = [];\n        subNode.propertyList.forEach(function (property, i) {\n          // first Connection is FBX type (OO, OP, etc.). We'll discard these\n          if (i !== 0) array.push(property);\n        });\n\n        if (node.connections === undefined) {\n          node.connections = [];\n        }\n\n        node.connections.push(array);\n      } else if (subNode.name === 'Properties70') {\n        var keys = Object.keys(subNode);\n        keys.forEach(function (key) {\n          node[key] = subNode[key];\n        });\n      } else if (name === 'Properties70' && subNode.name === 'P') {\n        var innerPropName = subNode.propertyList[0];\n        var innerPropType1 = subNode.propertyList[1];\n        var innerPropType2 = subNode.propertyList[2];\n        var innerPropFlag = subNode.propertyList[3];\n        var innerPropValue;\n        if (innerPropName.indexOf('Lcl ') === 0) innerPropName = innerPropName.replace('Lcl ', 'Lcl_');\n        if (innerPropType1.indexOf('Lcl ') === 0) innerPropType1 = innerPropType1.replace('Lcl ', 'Lcl_');\n\n        if (innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf('Lcl_') === 0) {\n          innerPropValue = [subNode.propertyList[4], subNode.propertyList[5], subNode.propertyList[6]];\n        } else {\n          innerPropValue = subNode.propertyList[4];\n        } // this will be copied to parent, see above\n\n\n        node[innerPropName] = {\n          'type': innerPropType1,\n          'type2': innerPropType2,\n          'flag': innerPropFlag,\n          'value': innerPropValue\n        };\n      } else if (node[subNode.name] === undefined) {\n        if (typeof subNode.id === 'number') {\n          node[subNode.name] = {};\n          node[subNode.name][subNode.id] = subNode;\n        } else {\n          node[subNode.name] = subNode;\n        }\n      } else {\n        if (subNode.name === 'PoseNode') {\n          if (!Array.isArray(node[subNode.name])) {\n            node[subNode.name] = [node[subNode.name]];\n          }\n\n          node[subNode.name].push(subNode);\n        } else if (node[subNode.name][subNode.id] === undefined) {\n          node[subNode.name][subNode.id] = subNode;\n        }\n      }\n    },\n    parseProperty: function parseProperty(reader) {\n      var type = reader.getString(1);\n\n      switch (type) {\n        case 'C':\n          return reader.getBoolean();\n\n        case 'D':\n          return reader.getFloat64();\n\n        case 'F':\n          return reader.getFloat32();\n\n        case 'I':\n          return reader.getInt32();\n\n        case 'L':\n          return reader.getInt64();\n\n        case 'R':\n          var length = reader.getUint32();\n          return reader.getArrayBuffer(length);\n\n        case 'S':\n          var length = reader.getUint32();\n          return reader.getString(length);\n\n        case 'Y':\n          return reader.getInt16();\n\n        case 'b':\n        case 'c':\n        case 'd':\n        case 'f':\n        case 'i':\n        case 'l':\n          var arrayLength = reader.getUint32();\n          var encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\n          var compressedLength = reader.getUint32();\n\n          if (encoding === 0) {\n            switch (type) {\n              case 'b':\n              case 'c':\n                return reader.getBooleanArray(arrayLength);\n\n              case 'd':\n                return reader.getFloat64Array(arrayLength);\n\n              case 'f':\n                return reader.getFloat32Array(arrayLength);\n\n              case 'i':\n                return reader.getInt32Array(arrayLength);\n\n              case 'l':\n                return reader.getInt64Array(arrayLength);\n            }\n          }\n\n          if (typeof Zlib === 'undefined') {\n            console.error('THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js');\n          }\n\n          var inflate = new Zlib.Inflate(new Uint8Array(reader.getArrayBuffer(compressedLength))); // eslint-disable-line no-undef\n\n          var reader2 = new BinaryReader(inflate.decompress().buffer);\n\n          switch (type) {\n            case 'b':\n            case 'c':\n              return reader2.getBooleanArray(arrayLength);\n\n            case 'd':\n              return reader2.getFloat64Array(arrayLength);\n\n            case 'f':\n              return reader2.getFloat32Array(arrayLength);\n\n            case 'i':\n              return reader2.getInt32Array(arrayLength);\n\n            case 'l':\n              return reader2.getInt64Array(arrayLength);\n          }\n\n        default:\n          throw new Error('THREE.FBXLoader: Unknown property type ' + type);\n      }\n    }\n  };\n\n  function BinaryReader(buffer, littleEndian) {\n    this.dv = new DataView(buffer);\n    this.offset = 0;\n    this.littleEndian = littleEndian !== undefined ? littleEndian : true;\n  }\n\n  BinaryReader.prototype = {\n    constructor: BinaryReader,\n    getOffset: function getOffset() {\n      return this.offset;\n    },\n    size: function size() {\n      return this.dv.buffer.byteLength;\n    },\n    skip: function skip(length) {\n      this.offset += length;\n    },\n    // seems like true/false representation depends on exporter.\n    // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n    // then sees LSB.\n    getBoolean: function getBoolean() {\n      return (this.getUint8() & 1) === 1;\n    },\n    getBooleanArray: function getBooleanArray(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getBoolean());\n      }\n\n      return a;\n    },\n    getUint8: function getUint8() {\n      var value = this.dv.getUint8(this.offset);\n      this.offset += 1;\n      return value;\n    },\n    getInt16: function getInt16() {\n      var value = this.dv.getInt16(this.offset, this.littleEndian);\n      this.offset += 2;\n      return value;\n    },\n    getInt32: function getInt32() {\n      var value = this.dv.getInt32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    },\n    getInt32Array: function getInt32Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getInt32());\n      }\n\n      return a;\n    },\n    getUint32: function getUint32() {\n      var value = this.dv.getUint32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    },\n    // JavaScript doesn't support 64-bit integer so calculate this here\n    // 1 << 32 will return 1 so using multiply operation instead here.\n    // There's a possibility that this method returns wrong value if the value\n    // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n    // TODO: safely handle 64-bit integer\n    getInt64: function getInt64() {\n      var low, high;\n\n      if (this.littleEndian) {\n        low = this.getUint32();\n        high = this.getUint32();\n      } else {\n        high = this.getUint32();\n        low = this.getUint32();\n      } // calculate negative value\n\n\n      if (high & 0x80000000) {\n        high = ~high & 0xFFFFFFFF;\n        low = ~low & 0xFFFFFFFF;\n        if (low === 0xFFFFFFFF) high = high + 1 & 0xFFFFFFFF;\n        low = low + 1 & 0xFFFFFFFF;\n        return -(high * 0x100000000 + low);\n      }\n\n      return high * 0x100000000 + low;\n    },\n    getInt64Array: function getInt64Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getInt64());\n      }\n\n      return a;\n    },\n    // Note: see getInt64() comment\n    getUint64: function getUint64() {\n      var low, high;\n\n      if (this.littleEndian) {\n        low = this.getUint32();\n        high = this.getUint32();\n      } else {\n        high = this.getUint32();\n        low = this.getUint32();\n      }\n\n      return high * 0x100000000 + low;\n    },\n    getFloat32: function getFloat32() {\n      var value = this.dv.getFloat32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    },\n    getFloat32Array: function getFloat32Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getFloat32());\n      }\n\n      return a;\n    },\n    getFloat64: function getFloat64() {\n      var value = this.dv.getFloat64(this.offset, this.littleEndian);\n      this.offset += 8;\n      return value;\n    },\n    getFloat64Array: function getFloat64Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getFloat64());\n      }\n\n      return a;\n    },\n    getArrayBuffer: function getArrayBuffer(size) {\n      var value = this.dv.buffer.slice(this.offset, this.offset + size);\n      this.offset += size;\n      return value;\n    },\n    getString: function getString(size) {\n      // note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a[i] = this.getUint8();\n      }\n\n      var nullByte = a.indexOf(0);\n      if (nullByte >= 0) a = a.slice(0, nullByte);\n      return THREE.LoaderUtils.decodeText(new Uint8Array(a));\n    }\n  }; // FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n  // and BinaryParser( FBX Binary format)\n\n  function FBXTree() {}\n\n  FBXTree.prototype = {\n    constructor: FBXTree,\n    add: function add(key, val) {\n      this[key] = val;\n    }\n  }; // ************** UTILITY FUNCTIONS **************\n\n  function isFbxFormatBinary(buffer) {\n    var CORRECT = 'Kaydara FBX Binary  \\0';\n    return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString(buffer, 0, CORRECT.length);\n  }\n\n  function isFbxFormatASCII(text) {\n    var CORRECT = ['K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\'];\n    var cursor = 0;\n\n    function read(offset) {\n      var result = text[offset - 1];\n      text = text.slice(cursor + offset);\n      cursor++;\n      return result;\n    }\n\n    for (var i = 0; i < CORRECT.length; ++i) {\n      var num = read(1);\n\n      if (num === CORRECT[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function getFbxVersion(text) {\n    var versionRegExp = /FBXVersion: (\\d+)/;\n    var match = text.match(versionRegExp);\n\n    if (match) {\n      var version = parseInt(match[1]);\n      return version;\n    }\n\n    throw new Error('THREE.FBXLoader: Cannot find the version number for the file given.');\n  } // Converts FBX ticks into real time seconds.\n\n\n  function convertFBXTimeToSeconds(time) {\n    return time / 46186158000;\n  }\n\n  var dataArray = []; // extracts the data from the correct position in the FBX array based on indexing type\n\n  function getData(polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {\n    var index;\n\n    switch (infoObject.mappingType) {\n      case 'ByPolygonVertex':\n        index = polygonVertexIndex;\n        break;\n\n      case 'ByPolygon':\n        index = polygonIndex;\n        break;\n\n      case 'ByVertice':\n        index = vertexIndex;\n        break;\n\n      case 'AllSame':\n        index = infoObject.indices[0];\n        break;\n\n      default:\n        console.warn('THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType);\n    }\n\n    if (infoObject.referenceType === 'IndexToDirect') index = infoObject.indices[index];\n    var from = index * infoObject.dataSize;\n    var to = from + infoObject.dataSize;\n    return slice(dataArray, infoObject.buffer, from, to);\n  }\n\n  var tempMat = new THREE.Matrix4();\n  var tempEuler = new THREE.Euler();\n  var tempVec = new THREE.Vector3();\n  var translation = new THREE.Vector3();\n  var rotation = new THREE.Matrix4(); // generate transformation from FBX transform data\n  // ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n  // transformData = {\n  //\t eulerOrder: int,\n  //\t translation: [],\n  //   rotationOffset: [],\n  //\t preRotation\n  //\t rotation\n  //\t postRotation\n  //   scale\n  // }\n  // all entries are optional\n\n  function generateTransform(transformData) {\n    var transform = new THREE.Matrix4();\n    translation.set(0, 0, 0);\n    rotation.identity();\n    var order = transformData.eulerOrder ? getEulerOrder(transformData.eulerOrder) : getEulerOrder(0);\n    if (transformData.translation) translation.fromArray(transformData.translation);\n    if (transformData.rotationOffset) translation.add(tempVec.fromArray(transformData.rotationOffset));\n\n    if (transformData.rotation) {\n      var array = transformData.rotation.map(THREE.Math.degToRad);\n      array.push(order);\n      rotation.makeRotationFromEuler(tempEuler.fromArray(array));\n    }\n\n    if (transformData.preRotation) {\n      var array = transformData.preRotation.map(THREE.Math.degToRad);\n      array.push(order);\n      tempMat.makeRotationFromEuler(tempEuler.fromArray(array));\n      rotation.premultiply(tempMat);\n    }\n\n    if (transformData.postRotation) {\n      var array = transformData.postRotation.map(THREE.Math.degToRad);\n      array.push(order);\n      tempMat.makeRotationFromEuler(tempEuler.fromArray(array));\n      tempMat.getInverse(tempMat);\n      rotation.multiply(tempMat);\n    }\n\n    if (transformData.scale) transform.scale(tempVec.fromArray(transformData.scale));\n    transform.setPosition(translation);\n    transform.multiply(rotation);\n    return transform;\n  } // Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n  // ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n\n\n  function getEulerOrder(order) {\n    var enums = ['ZYX', // -> XYZ extrinsic\n    'YZX', // -> XZY extrinsic\n    'XZY', // -> YZX extrinsic\n    'ZXY', // -> YXZ extrinsic\n    'YXZ', // -> ZXY extrinsic\n    'XYZ' // -> ZYX extrinsic\n    //'SphericXYZ', // not possible to support\n    ];\n\n    if (order === 6) {\n      console.warn('THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.');\n      return enums[0];\n    }\n\n    return enums[order];\n  } // Parses comma separated list of numbers and returns them an array.\n  // Used internally by the TextParser\n\n\n  function parseNumberArray(value) {\n    var array = value.split(',').map(function (val) {\n      return parseFloat(val);\n    });\n    return array;\n  }\n\n  function convertArrayBufferToString(buffer, from, to) {\n    if (from === undefined) from = 0;\n    if (to === undefined) to = buffer.byteLength;\n    return THREE.LoaderUtils.decodeText(new Uint8Array(buffer, from, to));\n  }\n\n  function append(a, b) {\n    for (var i = 0, j = a.length, l = b.length; i < l; i++, j++) {\n      a[j] = b[i];\n    }\n  }\n\n  function slice(a, b, from, to) {\n    for (var i = from, j = 0; i < to; i++, j++) {\n      a[j] = b[i];\n    }\n\n    return a;\n  } // inject array a2 into array a1 at index\n\n\n  function inject(a1, index, a2) {\n    return a1.slice(0, index).concat(a2).concat(a1.slice(index));\n  }\n\n  return FBXLoader;\n}();","/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Implement bounding sphere collision detection for entities with a mesh.\n * Sets the specified state on the intersected entities.\n *\n * @property {string} objects - Selector of the entities to test for collision.\n * @property {string} state - State to set on collided entities.\n *\n */\nmodule.exports = AFRAME.registerComponent('sphere-collider', {\n  schema: {\n    objects: {\n      default: ''\n    },\n    state: {\n      default: 'collided'\n    },\n    radius: {\n      default: 0.05\n    },\n    watch: {\n      default: true\n    }\n  },\n  init: function init() {\n    /** @type {MutationObserver} */\n    this.observer = null;\n    /** @type {Array<Element>} Elements to watch for collisions. */\n\n    this.els = [];\n    /** @type {Array<Element>} Elements currently in collision state. */\n\n    this.collisions = [];\n    this.handleHit = this.handleHit.bind(this);\n    this.handleHitEnd = this.handleHitEnd.bind(this);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  play: function play() {\n    var sceneEl = this.el.sceneEl;\n\n    if (this.data.watch) {\n      this.observer = new MutationObserver(this.update.bind(this, null));\n      this.observer.observe(sceneEl, {\n        childList: true,\n        subtree: true\n      });\n    }\n  },\n  pause: function pause() {\n    if (this.observer) {\n      this.observer.disconnect();\n      this.observer = null;\n    }\n  },\n\n  /**\n   * Update list of entities to test for collision.\n   */\n  update: function update() {\n    var data = this.data;\n    var objectEls; // Push entities into list of els to intersect.\n\n    if (data.objects) {\n      objectEls = this.el.sceneEl.querySelectorAll(data.objects);\n    } else {\n      // If objects not defined, intersect with everything.\n      objectEls = this.el.sceneEl.children;\n    } // Convert from NodeList to Array\n\n\n    this.els = Array.prototype.slice.call(objectEls);\n  },\n  tick: function () {\n    var position = new THREE.Vector3(),\n        meshPosition = new THREE.Vector3(),\n        colliderScale = new THREE.Vector3(),\n        size = new THREE.Vector3(),\n        box = new THREE.Box3(),\n        distanceMap = new Map();\n    return function () {\n      var el = this.el,\n          data = this.data,\n          mesh = el.getObject3D('mesh'),\n          collisions = [];\n      var colliderRadius;\n\n      if (!mesh) {\n        return;\n      }\n\n      distanceMap.clear();\n      el.object3D.getWorldPosition(position);\n      el.object3D.getWorldScale(colliderScale);\n      colliderRadius = data.radius * scaleFactor(colliderScale); // Update collision list.\n\n      this.els.forEach(intersect); // Emit events and add collision states, in order of distance.\n\n      collisions.sort(function (a, b) {\n        return distanceMap.get(a) > distanceMap.get(b) ? 1 : -1;\n      }).forEach(this.handleHit); // Remove collision state from current element.\n\n      if (collisions.length === 0) {\n        el.emit('hit', {\n          el: null\n        });\n      } // Remove collision state from other elements.\n\n\n      this.collisions.filter(function (el) {\n        return !distanceMap.has(el);\n      }).forEach(this.handleHitEnd); // Store new collisions\n\n      this.collisions = collisions; // Bounding sphere collision detection\n\n      function intersect(el) {\n        var radius, mesh, distance, extent;\n\n        if (!el.isEntity) {\n          return;\n        }\n\n        mesh = el.getObject3D('mesh');\n\n        if (!mesh) {\n          return;\n        }\n\n        box.setFromObject(mesh).getSize(size);\n        extent = Math.max(size.x, size.y, size.z) / 2;\n        radius = Math.sqrt(2 * extent * extent);\n        box.getCenter(meshPosition);\n\n        if (!radius) {\n          return;\n        }\n\n        distance = position.distanceTo(meshPosition);\n\n        if (distance < radius + colliderRadius) {\n          collisions.push(el);\n          distanceMap.set(el, distance);\n        }\n      } // use max of scale factors to maintain bounding sphere collision\n\n\n      function scaleFactor(scaleVec) {\n        return Math.max.apply(null, scaleVec.toArray());\n      }\n    };\n  }(),\n  handleHit: function handleHit(targetEl) {\n    targetEl.emit('hit');\n    targetEl.addState(this.data.state);\n    this.el.emit('hit', {\n      el: targetEl\n    });\n  },\n  handleHitEnd: function handleHitEnd(targetEl) {\n    targetEl.emit('hitend');\n    targetEl.removeState(this.data.state);\n    this.el.emit('hitend', {\n      el: targetEl\n    });\n  }\n});","var NOW; // Include a performance.now polyfill.\n// In node.js, use process.hrtime.\n// eslint-disable-next-line\n// @ts-ignore\n\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\n  NOW = function NOW() {\n    // eslint-disable-next-line\n    // @ts-ignore\n    var time = process.hrtime(); // Convert [seconds, nanoseconds] to milliseconds.\n\n    return time[0] * 1000 + time[1] / 1000000;\n  };\n} // In a browser, use self.performance.now if it is available.\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    NOW = self.performance.now.bind(self.performance);\n  } // Use Date.now if it is available.\n  else if (Date.now !== undefined) {\n      NOW = Date.now;\n    } // Otherwise, use 'new Date().getTime()'.\n    else {\n        NOW = function NOW() {\n          return new Date().getTime();\n        };\n      }\n\nvar NOW$1 = NOW;\n/**\r\n * Controlling groups of tweens\r\n *\r\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\r\n * In these cases, you may want to create your own smaller groups of tween\r\n */\n\nvar Group =\n/** @class */\nfunction () {\n  function Group() {\n    this._tweens = {};\n    this._tweensAddedDuringUpdate = {};\n  }\n\n  Group.prototype.getAll = function () {\n    var _this = this;\n\n    return Object.keys(this._tweens).map(function (tweenId) {\n      return _this._tweens[tweenId];\n    });\n  };\n\n  Group.prototype.removeAll = function () {\n    this._tweens = {};\n  };\n\n  Group.prototype.add = function (tween) {\n    this._tweens[tween.getId()] = tween;\n    this._tweensAddedDuringUpdate[tween.getId()] = tween;\n  };\n\n  Group.prototype.remove = function (tween) {\n    delete this._tweens[tween.getId()];\n    delete this._tweensAddedDuringUpdate[tween.getId()];\n  };\n\n  Group.prototype.update = function (time, preserve) {\n    var tweenIds = Object.keys(this._tweens);\n\n    if (tweenIds.length === 0) {\n      return false;\n    }\n\n    time = time !== undefined ? time : NOW$1(); // Tweens are updated in \"batches\". If you add a new tween during an\n    // update, then the new tween will be updated in the next batch.\n    // If you remove a tween during an update, it may or may not be updated.\n    // However, if the removed tween was added during the current batch,\n    // then it will not be updated.\n\n    while (tweenIds.length > 0) {\n      this._tweensAddedDuringUpdate = {};\n\n      for (var i = 0; i < tweenIds.length; i++) {\n        var tween = this._tweens[tweenIds[i]];\n\n        if (tween && tween.update(time) === false && !preserve) {\n          delete this._tweens[tweenIds[i]];\n        }\n      }\n\n      tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n    }\n\n    return true;\n  };\n\n  return Group;\n}();\n/**\r\n * The Ease class provides a collection of easing functions for use with tween.js.\r\n */\n\n\nvar Easing = {\n  Linear: {\n    None: function None(amount) {\n      return amount;\n    }\n  },\n  Quadratic: {\n    In: function In(amount) {\n      return amount * amount;\n    },\n    Out: function Out(amount) {\n      return amount * (2 - amount);\n    },\n    InOut: function InOut(amount) {\n      if ((amount *= 2) < 1) {\n        return 0.5 * amount * amount;\n      }\n\n      return -0.5 * (--amount * (amount - 2) - 1);\n    }\n  },\n  Cubic: {\n    In: function In(amount) {\n      return amount * amount * amount;\n    },\n    Out: function Out(amount) {\n      return --amount * amount * amount + 1;\n    },\n    InOut: function InOut(amount) {\n      if ((amount *= 2) < 1) {\n        return 0.5 * amount * amount * amount;\n      }\n\n      return 0.5 * ((amount -= 2) * amount * amount + 2);\n    }\n  },\n  Quartic: {\n    In: function In(amount) {\n      return amount * amount * amount * amount;\n    },\n    Out: function Out(amount) {\n      return 1 - --amount * amount * amount * amount;\n    },\n    InOut: function InOut(amount) {\n      if ((amount *= 2) < 1) {\n        return 0.5 * amount * amount * amount * amount;\n      }\n\n      return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n    }\n  },\n  Quintic: {\n    In: function In(amount) {\n      return amount * amount * amount * amount * amount;\n    },\n    Out: function Out(amount) {\n      return --amount * amount * amount * amount * amount + 1;\n    },\n    InOut: function InOut(amount) {\n      if ((amount *= 2) < 1) {\n        return 0.5 * amount * amount * amount * amount * amount;\n      }\n\n      return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n    }\n  },\n  Sinusoidal: {\n    In: function In(amount) {\n      return 1 - Math.cos(amount * Math.PI / 2);\n    },\n    Out: function Out(amount) {\n      return Math.sin(amount * Math.PI / 2);\n    },\n    InOut: function InOut(amount) {\n      return 0.5 * (1 - Math.cos(Math.PI * amount));\n    }\n  },\n  Exponential: {\n    In: function In(amount) {\n      return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n    },\n    Out: function Out(amount) {\n      return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n    },\n    InOut: function InOut(amount) {\n      if (amount === 0) {\n        return 0;\n      }\n\n      if (amount === 1) {\n        return 1;\n      }\n\n      if ((amount *= 2) < 1) {\n        return 0.5 * Math.pow(1024, amount - 1);\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n    }\n  },\n  Circular: {\n    In: function In(amount) {\n      return 1 - Math.sqrt(1 - amount * amount);\n    },\n    Out: function Out(amount) {\n      return Math.sqrt(1 - --amount * amount);\n    },\n    InOut: function InOut(amount) {\n      if ((amount *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n      }\n\n      return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n    }\n  },\n  Elastic: {\n    In: function In(amount) {\n      if (amount === 0) {\n        return 0;\n      }\n\n      if (amount === 1) {\n        return 1;\n      }\n\n      return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n    },\n    Out: function Out(amount) {\n      if (amount === 0) {\n        return 0;\n      }\n\n      if (amount === 1) {\n        return 1;\n      }\n\n      return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n    },\n    InOut: function InOut(amount) {\n      if (amount === 0) {\n        return 0;\n      }\n\n      if (amount === 1) {\n        return 1;\n      }\n\n      amount *= 2;\n\n      if (amount < 1) {\n        return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n      }\n\n      return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n    }\n  },\n  Back: {\n    In: function In(amount) {\n      var s = 1.70158;\n      return amount * amount * ((s + 1) * amount - s);\n    },\n    Out: function Out(amount) {\n      var s = 1.70158;\n      return --amount * amount * ((s + 1) * amount + s) + 1;\n    },\n    InOut: function InOut(amount) {\n      var s = 1.70158 * 1.525;\n\n      if ((amount *= 2) < 1) {\n        return 0.5 * (amount * amount * ((s + 1) * amount - s));\n      }\n\n      return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n    }\n  },\n  Bounce: {\n    In: function In(amount) {\n      return 1 - Easing.Bounce.Out(1 - amount);\n    },\n    Out: function Out(amount) {\n      if (amount < 1 / 2.75) {\n        return 7.5625 * amount * amount;\n      } else if (amount < 2 / 2.75) {\n        return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n      } else if (amount < 2.5 / 2.75) {\n        return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n      } else {\n        return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n      }\n    },\n    InOut: function InOut(amount) {\n      if (amount < 0.5) {\n        return Easing.Bounce.In(amount * 2) * 0.5;\n      }\n\n      return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n    }\n  }\n};\n/**\r\n *\r\n */\n\nvar Interpolation = {\n  Linear: function Linear(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = Interpolation.Utils.Linear;\n\n    if (k < 0) {\n      return fn(v[0], v[1], f);\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f);\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n  },\n  Bezier: function Bezier(v, k) {\n    var b = 0;\n    var n = v.length - 1;\n    var pw = Math.pow;\n    var bn = Interpolation.Utils.Bernstein;\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n    }\n\n    return b;\n  },\n  CatmullRom: function CatmullRom(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = Interpolation.Utils.CatmullRom;\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k));\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n    }\n  },\n  Utils: {\n    Linear: function Linear(p0, p1, t) {\n      return (p1 - p0) * t + p0;\n    },\n    Bernstein: function Bernstein(n, i) {\n      var fc = Interpolation.Utils.Factorial;\n      return fc(n) / fc(i) / fc(n - i);\n    },\n    Factorial: function () {\n      var a = [1];\n      return function (n) {\n        var s = 1;\n\n        if (a[n]) {\n          return a[n];\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i;\n        }\n\n        a[n] = s;\n        return s;\n      };\n    }(),\n    CatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5;\n      var v1 = (p3 - p1) * 0.5;\n      var t2 = t * t;\n      var t3 = t * t2;\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n    }\n  }\n};\n/**\r\n * Utils\r\n */\n\nvar Sequence =\n/** @class */\nfunction () {\n  function Sequence() {}\n\n  Sequence.nextId = function () {\n    return Sequence._nextId++;\n  };\n\n  Sequence._nextId = 0;\n  return Sequence;\n}();\n/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\n\n\nvar Tween =\n/** @class */\nfunction () {\n  function Tween(_object, _group) {\n    if (_group === void 0) {\n      _group = TWEEN;\n    }\n\n    this._object = _object;\n    this._group = _group;\n    this._isPaused = false;\n    this._pauseStart = 0;\n    this._valuesStart = {};\n    this._valuesEnd = {};\n    this._valuesStartRepeat = {};\n    this._duration = 1000;\n    this._initialRepeat = 0;\n    this._repeat = 0;\n    this._yoyo = false;\n    this._isPlaying = false;\n    this._reversed = false;\n    this._delayTime = 0;\n    this._startTime = 0;\n    this._easingFunction = TWEEN.Easing.Linear.None;\n    this._interpolationFunction = TWEEN.Interpolation.Linear;\n    this._chainedTweens = [];\n    this._onStartCallbackFired = false;\n    this._id = TWEEN.nextId();\n    this._isChainStopped = false;\n  }\n\n  Tween.prototype.getId = function () {\n    return this._id;\n  };\n\n  Tween.prototype.isPlaying = function () {\n    return this._isPlaying;\n  };\n\n  Tween.prototype.isPaused = function () {\n    return this._isPaused;\n  };\n\n  Tween.prototype.to = function (properties, duration) {\n    for (var prop in properties) {\n      this._valuesEnd[prop] = properties[prop];\n    }\n\n    if (duration !== undefined) {\n      this._duration = duration;\n    }\n\n    return this;\n  };\n\n  Tween.prototype.duration = function (d) {\n    this._duration = d;\n    return this;\n  };\n\n  Tween.prototype.start = function (time) {\n    if (this._isPlaying) {\n      return this;\n    } // eslint-disable-next-line\n    // @ts-ignore FIXME?\n\n\n    this._group.add(this);\n\n    this._repeat = this._initialRepeat;\n\n    if (this._reversed) {\n      // If we were reversed (f.e. using the yoyo feature) then we need to\n      // flip the tween direction back to forward.\n      this._reversed = false;\n\n      for (var property in this._valuesStartRepeat) {\n        this._swapEndStartRepeatValues(property);\n\n        this._valuesStart[property] = this._valuesStartRepeat[property];\n      }\n    }\n\n    this._isPlaying = true;\n    this._isPaused = false;\n    this._onStartCallbackFired = false;\n    this._isChainStopped = false;\n    this._startTime = time !== undefined ? typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time : TWEEN.now();\n    this._startTime += this._delayTime;\n\n    this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\n\n    return this;\n  };\n\n  Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\n    for (var property in _valuesEnd) {\n      var startValue = _object[property];\n      var startValueIsArray = Array.isArray(startValue);\n      var propType = startValueIsArray ? 'array' : typeof startValue;\n      var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]); // If `to()` specifies a property that doesn't exist in the source object,\n      // we should not set that property in the object\n\n      if (propType === 'undefined' || propType === 'function') {\n        continue;\n      } // Check if an Array was provided as property value\n\n\n      if (isInterpolationList) {\n        var endValues = _valuesEnd[property];\n\n        if (endValues.length === 0) {\n          continue;\n        } // handle an array of relative values\n\n\n        endValues = endValues.map(this._handleRelativeValue.bind(this, startValue)); // Create a local copy of the Array with the start value at the front\n\n        _valuesEnd[property] = [startValue].concat(endValues);\n      } // handle the deepness of the values\n\n\n      if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n        _valuesStart[property] = startValueIsArray ? [] : {}; // eslint-disable-next-line\n\n        for (var prop in startValue) {\n          // eslint-disable-next-line\n          // @ts-ignore FIXME?\n          _valuesStart[property][prop] = startValue[prop];\n        }\n\n        _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\n        // eslint-disable-next-line\n        // @ts-ignore FIXME?\n\n        this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\n      } else {\n        // Save the starting value, but only once.\n        if (typeof _valuesStart[property] === 'undefined') {\n          _valuesStart[property] = startValue;\n        }\n\n        if (!startValueIsArray) {\n          // eslint-disable-next-line\n          // @ts-ignore FIXME?\n          _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n        }\n\n        if (isInterpolationList) {\n          // eslint-disable-next-line\n          // @ts-ignore FIXME?\n          _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n        } else {\n          _valuesStartRepeat[property] = _valuesStart[property] || 0;\n        }\n      }\n    }\n  };\n\n  Tween.prototype.stop = function () {\n    if (!this._isChainStopped) {\n      this._isChainStopped = true;\n      this.stopChainedTweens();\n    }\n\n    if (!this._isPlaying) {\n      return this;\n    } // eslint-disable-next-line\n    // @ts-ignore FIXME?\n\n\n    this._group.remove(this);\n\n    this._isPlaying = false;\n    this._isPaused = false;\n\n    if (this._onStopCallback) {\n      this._onStopCallback(this._object);\n    }\n\n    return this;\n  };\n\n  Tween.prototype.end = function () {\n    this.update(Infinity);\n    return this;\n  };\n\n  Tween.prototype.pause = function (time) {\n    if (this._isPaused || !this._isPlaying) {\n      return this;\n    }\n\n    this._isPaused = true;\n    this._pauseStart = time === undefined ? TWEEN.now() : time; // eslint-disable-next-line\n    // @ts-ignore FIXME?\n\n    this._group.remove(this);\n\n    return this;\n  };\n\n  Tween.prototype.resume = function (time) {\n    if (!this._isPaused || !this._isPlaying) {\n      return this;\n    }\n\n    this._isPaused = false;\n    this._startTime += (time === undefined ? TWEEN.now() : time) - this._pauseStart;\n    this._pauseStart = 0; // eslint-disable-next-line\n    // @ts-ignore FIXME?\n\n    this._group.add(this);\n\n    return this;\n  };\n\n  Tween.prototype.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n      this._chainedTweens[i].stop();\n    }\n\n    return this;\n  };\n\n  Tween.prototype.group = function (group) {\n    this._group = group;\n    return this;\n  };\n\n  Tween.prototype.delay = function (amount) {\n    this._delayTime = amount;\n    return this;\n  };\n\n  Tween.prototype.repeat = function (times) {\n    this._initialRepeat = times;\n    this._repeat = times;\n    return this;\n  };\n\n  Tween.prototype.repeatDelay = function (amount) {\n    this._repeatDelayTime = amount;\n    return this;\n  };\n\n  Tween.prototype.yoyo = function (yoyo) {\n    this._yoyo = yoyo;\n    return this;\n  };\n\n  Tween.prototype.easing = function (easingFunction) {\n    this._easingFunction = easingFunction;\n    return this;\n  };\n\n  Tween.prototype.interpolation = function (interpolationFunction) {\n    this._interpolationFunction = interpolationFunction;\n    return this;\n  };\n\n  Tween.prototype.chain = function () {\n    var tweens = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      tweens[_i] = arguments[_i];\n    }\n\n    this._chainedTweens = tweens;\n    return this;\n  };\n\n  Tween.prototype.onStart = function (callback) {\n    this._onStartCallback = callback;\n    return this;\n  };\n\n  Tween.prototype.onUpdate = function (callback) {\n    this._onUpdateCallback = callback;\n    return this;\n  };\n\n  Tween.prototype.onRepeat = function (callback) {\n    this._onRepeatCallback = callback;\n    return this;\n  };\n\n  Tween.prototype.onComplete = function (callback) {\n    this._onCompleteCallback = callback;\n    return this;\n  };\n\n  Tween.prototype.onStop = function (callback) {\n    this._onStopCallback = callback;\n    return this;\n  };\n\n  Tween.prototype.update = function (time) {\n    var property;\n    var elapsed;\n    var endTime = this._startTime + this._duration;\n\n    if (time > endTime && !this._isPlaying) {\n      return false;\n    } // If the tween was already finished,\n\n\n    if (!this.isPlaying) {\n      this.start(time);\n    }\n\n    if (time < this._startTime) {\n      return true;\n    }\n\n    if (this._onStartCallbackFired === false) {\n      if (this._onStartCallback) {\n        this._onStartCallback(this._object);\n      }\n\n      this._onStartCallbackFired = true;\n    }\n\n    elapsed = (time - this._startTime) / this._duration;\n    elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n\n    var value = this._easingFunction(elapsed); // properties transformations\n\n\n    this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n\n    if (this._onUpdateCallback) {\n      this._onUpdateCallback(this._object, elapsed);\n    }\n\n    if (elapsed === 1) {\n      if (this._repeat > 0) {\n        if (isFinite(this._repeat)) {\n          this._repeat--;\n        } // Reassign starting values, restart by making startTime = now\n\n\n        for (property in this._valuesStartRepeat) {\n          if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n            this._valuesStartRepeat[property] = // eslint-disable-next-line\n            // @ts-ignore FIXME?\n            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n          }\n\n          if (this._yoyo) {\n            this._swapEndStartRepeatValues(property);\n          }\n\n          this._valuesStart[property] = this._valuesStartRepeat[property];\n        }\n\n        if (this._yoyo) {\n          this._reversed = !this._reversed;\n        }\n\n        if (this._repeatDelayTime !== undefined) {\n          this._startTime = time + this._repeatDelayTime;\n        } else {\n          this._startTime = time + this._delayTime;\n        }\n\n        if (this._onRepeatCallback) {\n          this._onRepeatCallback(this._object);\n        }\n\n        return true;\n      } else {\n        if (this._onCompleteCallback) {\n          this._onCompleteCallback(this._object);\n        }\n\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n          // Make the chained tweens start exactly at the time they should,\n          // even if the `update()` method was called way past the duration of the tween\n          this._chainedTweens[i].start(this._startTime + this._duration);\n        }\n\n        this._isPlaying = false;\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n    for (var property in _valuesEnd) {\n      // Don't update properties that do not exist in the source object\n      if (_valuesStart[property] === undefined) {\n        continue;\n      }\n\n      var start = _valuesStart[property] || 0;\n      var end = _valuesEnd[property];\n      var startIsArray = Array.isArray(_object[property]);\n      var endIsArray = Array.isArray(end);\n      var isInterpolationList = !startIsArray && endIsArray;\n\n      if (isInterpolationList) {\n        _object[property] = this._interpolationFunction(end, value);\n      } else if (typeof end === 'object' && end) {\n        // eslint-disable-next-line\n        // @ts-ignore FIXME?\n        this._updateProperties(_object[property], start, end, value);\n      } else {\n        // Parses relative end values with start as base (e.g.: +10, -3)\n        end = this._handleRelativeValue(start, end); // Protect against non numeric properties.\n\n        if (typeof end === 'number') {\n          // eslint-disable-next-line\n          // @ts-ignore FIXME?\n          _object[property] = start + (end - start) * value;\n        }\n      }\n    }\n  };\n\n  Tween.prototype._handleRelativeValue = function (start, end) {\n    if (typeof end !== 'string') {\n      return end;\n    }\n\n    if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n      return start + parseFloat(end);\n    } else {\n      return parseFloat(end);\n    }\n  };\n\n  Tween.prototype._swapEndStartRepeatValues = function (property) {\n    var tmp = this._valuesStartRepeat[property];\n\n    if (typeof this._valuesEnd[property] === 'string') {\n      // eslint-disable-next-line\n      // @ts-ignore FIXME?\n      this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n    } else {\n      this._valuesStartRepeat[property] = this._valuesEnd[property];\n    }\n\n    this._valuesEnd[property] = tmp;\n  };\n\n  return Tween;\n}();\n\nvar VERSION = '18.6.0';\n/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\r\n * Controlling groups of tweens\r\n *\r\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\r\n * In these cases, you may want to create your own smaller groups of tween\r\n */\n\n\nvar Main =\n/** @class */\nfunction (_super) {\n  __extends(Main, _super);\n\n  function Main() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.version = VERSION;\n    _this.now = NOW$1;\n    _this.Group = Group;\n    _this.Easing = Easing;\n    _this.Interpolation = Interpolation;\n    _this.nextId = Sequence.nextId;\n    _this.Tween = Tween;\n    return _this;\n  }\n\n  return Main;\n}(Group);\n\nvar TWEEN = new Main();\nexport default TWEEN;","/**\n * This module provides all required forces to regular ngraph.physics.simulator\n * to make it 3D simulator. Ideally ngraph.physics.simulator should operate\n * with vectors, but on practices that showed performance decrease... Maybe\n * I was doing it wrong, will see if I can refactor/throw away this module.\n */\nmodule.exports = createLayout;\ncreateLayout.get2dLayout = require('ngraph.forcelayout');\n\nfunction createLayout(graph, physicsSettings) {\n  var merge = require('ngraph.merge');\n\n  physicsSettings = merge(physicsSettings, {\n    createQuadTree: require('ngraph.quadtreebh3d'),\n    createBounds: require('./lib/bounds'),\n    createDragForce: require('./lib/dragForce'),\n    createSpringForce: require('./lib/springForce'),\n    integrator: getIntegrator(physicsSettings),\n    createBody: require('./lib/createBody')\n  });\n  return createLayout.get2dLayout(graph, physicsSettings);\n}\n\nfunction getIntegrator(physicsSettings) {\n  if (physicsSettings && physicsSettings.integrator === 'verlet') {\n    return require('./lib/verletIntegrator.js');\n  }\n\n  return require('./lib/eulerIntegrator');\n}","/**\n * Polyfill for the additional KeyboardEvent properties defined in the D3E and\n * D4E draft specifications, by @inexorabletash.\n *\n * See: https://github.com/inexorabletash/polyfill\n */\n(function (global) {\n  var nativeKeyboardEvent = ('KeyboardEvent' in global);\n  if (!nativeKeyboardEvent) global.KeyboardEvent = function KeyboardEvent() {\n    throw TypeError('Illegal constructor');\n  };\n  if (!('DOM_KEY_LOCATION_STANDARD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_STANDARD = 0x00; // Default or unknown location\n\n  if (!('DOM_KEY_LOCATION_LEFT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_LEFT = 0x01; // e.g. Left Alt key\n\n  if (!('DOM_KEY_LOCATION_RIGHT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_RIGHT = 0x02; // e.g. Right Alt key\n\n  if (!('DOM_KEY_LOCATION_NUMPAD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD = 0x03; // e.g. Numpad 0 or +\n\n  var STANDARD = window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,\n      LEFT = window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,\n      RIGHT = window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,\n      NUMPAD = window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD; //--------------------------------------------------------------------\n  //\n  // Utilities\n  //\n  //--------------------------------------------------------------------\n\n  function contains(s, ss) {\n    return String(s).indexOf(ss) !== -1;\n  }\n\n  var os = function () {\n    if (contains(navigator.platform, 'Win')) {\n      return 'win';\n    }\n\n    if (contains(navigator.platform, 'Mac')) {\n      return 'mac';\n    }\n\n    if (contains(navigator.platform, 'CrOS')) {\n      return 'cros';\n    }\n\n    if (contains(navigator.platform, 'Linux')) {\n      return 'linux';\n    }\n\n    if (contains(navigator.userAgent, 'iPad') || contains(navigator.platform, 'iPod') || contains(navigator.platform, 'iPhone')) {\n      return 'ios';\n    }\n\n    return '';\n  }();\n\n  var browser = function () {\n    if (contains(navigator.userAgent, 'Chrome/')) {\n      return 'chrome';\n    }\n\n    if (contains(navigator.vendor, 'Apple')) {\n      return 'safari';\n    }\n\n    if (contains(navigator.userAgent, 'MSIE')) {\n      return 'ie';\n    }\n\n    if (contains(navigator.userAgent, 'Gecko/')) {\n      return 'moz';\n    }\n\n    if (contains(navigator.userAgent, 'Opera/')) {\n      return 'opera';\n    }\n\n    return '';\n  }();\n\n  var browser_os = browser + '-' + os;\n\n  function mergeIf(baseTable, select, table) {\n    if (browser_os === select || browser === select || os === select) {\n      Object.keys(table).forEach(function (keyCode) {\n        baseTable[keyCode] = table[keyCode];\n      });\n    }\n  }\n\n  function remap(o, key) {\n    var r = {};\n    Object.keys(o).forEach(function (k) {\n      var item = o[k];\n\n      if (key in item) {\n        r[item[key]] = item;\n      }\n    });\n    return r;\n  }\n\n  function invert(o) {\n    var r = {};\n    Object.keys(o).forEach(function (k) {\n      r[o[k]] = k;\n    });\n    return r;\n  } //--------------------------------------------------------------------\n  //\n  // Generic Mappings\n  //\n  //--------------------------------------------------------------------\n  // \"keyInfo\" is a dictionary:\n  //   code: string - name from DOM Level 3 KeyboardEvent code Values\n  //     https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-code.html\n  //   location (optional): number - one of the DOM_KEY_LOCATION values\n  //   keyCap (optional): string - keyboard label in en-US locale\n  // USB code Usage ID from page 0x07 unless otherwise noted (Informative)\n  // Map of keyCode to keyInfo\n\n\n  var keyCodeToInfoTable = {\n    // 0x01 - VK_LBUTTON\n    // 0x02 - VK_RBUTTON\n    0x03: {\n      code: 'Cancel'\n    },\n    // [USB: 0x9b] char \\x0018 ??? (Not in D3E)\n    // 0x04 - VK_MBUTTON\n    // 0x05 - VK_XBUTTON1\n    // 0x06 - VK_XBUTTON2\n    0x06: {\n      code: 'Help'\n    },\n    // [USB: 0x75] ???\n    // 0x07 - undefined\n    0x08: {\n      code: 'Backspace'\n    },\n    // [USB: 0x2a] Labelled Delete on Macintosh keyboards.\n    0x09: {\n      code: 'Tab'\n    },\n    // [USB: 0x2b]\n    // 0x0A-0x0B - reserved\n    0X0C: {\n      code: 'Clear'\n    },\n    // [USB: 0x9c] NumPad Center (Not in D3E)\n    0X0D: {\n      code: 'Enter'\n    },\n    // [USB: 0x28]\n    // 0x0E-0x0F - undefined\n    0x10: {\n      code: 'Shift'\n    },\n    0x11: {\n      code: 'Control'\n    },\n    0x12: {\n      code: 'Alt'\n    },\n    0x13: {\n      code: 'Pause'\n    },\n    // [USB: 0x48]\n    0x14: {\n      code: 'CapsLock'\n    },\n    // [USB: 0x39]\n    0x15: {\n      code: 'KanaMode'\n    },\n    // [USB: 0x88] - \"HangulMode\" for Korean layout\n    0x16: {\n      code: 'HangulMode'\n    },\n    // [USB: 0x90] 0x15 as well in MSDN VK table ???\n    0x17: {\n      code: 'JunjaMode'\n    },\n    // (Not in D3E)\n    0x18: {\n      code: 'FinalMode'\n    },\n    // (Not in D3E)\n    0x19: {\n      code: 'KanjiMode'\n    },\n    // [USB: 0x91] - \"HanjaMode\" for Korean layout\n    // 0x1A - undefined\n    0x1B: {\n      code: 'Escape'\n    },\n    // [USB: 0x29]\n    0x1C: {\n      code: 'Convert'\n    },\n    // [USB: 0x8a]\n    0x1D: {\n      code: 'NonConvert'\n    },\n    // [USB: 0x8b]\n    0x1E: {\n      code: 'Accept'\n    },\n    // (Not in D3E)\n    0x1F: {\n      code: 'ModeChange'\n    },\n    // (Not in D3E)\n    0x20: {\n      code: 'Space'\n    },\n    // [USB: 0x2c]\n    0x21: {\n      code: 'PageUp'\n    },\n    // [USB: 0x4b]\n    0x22: {\n      code: 'PageDown'\n    },\n    // [USB: 0x4e]\n    0x23: {\n      code: 'End'\n    },\n    // [USB: 0x4d]\n    0x24: {\n      code: 'Home'\n    },\n    // [USB: 0x4a]\n    0x25: {\n      code: 'ArrowLeft'\n    },\n    // [USB: 0x50]\n    0x26: {\n      code: 'ArrowUp'\n    },\n    // [USB: 0x52]\n    0x27: {\n      code: 'ArrowRight'\n    },\n    // [USB: 0x4f]\n    0x28: {\n      code: 'ArrowDown'\n    },\n    // [USB: 0x51]\n    0x29: {\n      code: 'Select'\n    },\n    // (Not in D3E)\n    0x2A: {\n      code: 'Print'\n    },\n    // (Not in D3E)\n    0x2B: {\n      code: 'Execute'\n    },\n    // [USB: 0x74] (Not in D3E)\n    0x2C: {\n      code: 'PrintScreen'\n    },\n    // [USB: 0x46]\n    0x2D: {\n      code: 'Insert'\n    },\n    // [USB: 0x49]\n    0x2E: {\n      code: 'Delete'\n    },\n    // [USB: 0x4c]\n    0x2F: {\n      code: 'Help'\n    },\n    // [USB: 0x75] ???\n    0x30: {\n      code: 'Digit0',\n      keyCap: '0'\n    },\n    // [USB: 0x27] 0)\n    0x31: {\n      code: 'Digit1',\n      keyCap: '1'\n    },\n    // [USB: 0x1e] 1!\n    0x32: {\n      code: 'Digit2',\n      keyCap: '2'\n    },\n    // [USB: 0x1f] 2@\n    0x33: {\n      code: 'Digit3',\n      keyCap: '3'\n    },\n    // [USB: 0x20] 3#\n    0x34: {\n      code: 'Digit4',\n      keyCap: '4'\n    },\n    // [USB: 0x21] 4$\n    0x35: {\n      code: 'Digit5',\n      keyCap: '5'\n    },\n    // [USB: 0x22] 5%\n    0x36: {\n      code: 'Digit6',\n      keyCap: '6'\n    },\n    // [USB: 0x23] 6^\n    0x37: {\n      code: 'Digit7',\n      keyCap: '7'\n    },\n    // [USB: 0x24] 7&\n    0x38: {\n      code: 'Digit8',\n      keyCap: '8'\n    },\n    // [USB: 0x25] 8*\n    0x39: {\n      code: 'Digit9',\n      keyCap: '9'\n    },\n    // [USB: 0x26] 9(\n    // 0x3A-0x40 - undefined\n    0x41: {\n      code: 'KeyA',\n      keyCap: 'a'\n    },\n    // [USB: 0x04]\n    0x42: {\n      code: 'KeyB',\n      keyCap: 'b'\n    },\n    // [USB: 0x05]\n    0x43: {\n      code: 'KeyC',\n      keyCap: 'c'\n    },\n    // [USB: 0x06]\n    0x44: {\n      code: 'KeyD',\n      keyCap: 'd'\n    },\n    // [USB: 0x07]\n    0x45: {\n      code: 'KeyE',\n      keyCap: 'e'\n    },\n    // [USB: 0x08]\n    0x46: {\n      code: 'KeyF',\n      keyCap: 'f'\n    },\n    // [USB: 0x09]\n    0x47: {\n      code: 'KeyG',\n      keyCap: 'g'\n    },\n    // [USB: 0x0a]\n    0x48: {\n      code: 'KeyH',\n      keyCap: 'h'\n    },\n    // [USB: 0x0b]\n    0x49: {\n      code: 'KeyI',\n      keyCap: 'i'\n    },\n    // [USB: 0x0c]\n    0x4A: {\n      code: 'KeyJ',\n      keyCap: 'j'\n    },\n    // [USB: 0x0d]\n    0x4B: {\n      code: 'KeyK',\n      keyCap: 'k'\n    },\n    // [USB: 0x0e]\n    0x4C: {\n      code: 'KeyL',\n      keyCap: 'l'\n    },\n    // [USB: 0x0f]\n    0x4D: {\n      code: 'KeyM',\n      keyCap: 'm'\n    },\n    // [USB: 0x10]\n    0x4E: {\n      code: 'KeyN',\n      keyCap: 'n'\n    },\n    // [USB: 0x11]\n    0x4F: {\n      code: 'KeyO',\n      keyCap: 'o'\n    },\n    // [USB: 0x12]\n    0x50: {\n      code: 'KeyP',\n      keyCap: 'p'\n    },\n    // [USB: 0x13]\n    0x51: {\n      code: 'KeyQ',\n      keyCap: 'q'\n    },\n    // [USB: 0x14]\n    0x52: {\n      code: 'KeyR',\n      keyCap: 'r'\n    },\n    // [USB: 0x15]\n    0x53: {\n      code: 'KeyS',\n      keyCap: 's'\n    },\n    // [USB: 0x16]\n    0x54: {\n      code: 'KeyT',\n      keyCap: 't'\n    },\n    // [USB: 0x17]\n    0x55: {\n      code: 'KeyU',\n      keyCap: 'u'\n    },\n    // [USB: 0x18]\n    0x56: {\n      code: 'KeyV',\n      keyCap: 'v'\n    },\n    // [USB: 0x19]\n    0x57: {\n      code: 'KeyW',\n      keyCap: 'w'\n    },\n    // [USB: 0x1a]\n    0x58: {\n      code: 'KeyX',\n      keyCap: 'x'\n    },\n    // [USB: 0x1b]\n    0x59: {\n      code: 'KeyY',\n      keyCap: 'y'\n    },\n    // [USB: 0x1c]\n    0x5A: {\n      code: 'KeyZ',\n      keyCap: 'z'\n    },\n    // [USB: 0x1d]\n    0x5B: {\n      code: 'OSLeft',\n      location: LEFT\n    },\n    // [USB: 0xe3]\n    0x5C: {\n      code: 'OSRight',\n      location: RIGHT\n    },\n    // [USB: 0xe7]\n    0x5D: {\n      code: 'ContextMenu'\n    },\n    // [USB: 0x65] Context Menu\n    // 0x5E - reserved\n    0x5F: {\n      code: 'Standby'\n    },\n    // [USB: 0x82] Sleep\n    0x60: {\n      code: 'Numpad0',\n      keyCap: '0',\n      location: NUMPAD\n    },\n    // [USB: 0x62]\n    0x61: {\n      code: 'Numpad1',\n      keyCap: '1',\n      location: NUMPAD\n    },\n    // [USB: 0x59]\n    0x62: {\n      code: 'Numpad2',\n      keyCap: '2',\n      location: NUMPAD\n    },\n    // [USB: 0x5a]\n    0x63: {\n      code: 'Numpad3',\n      keyCap: '3',\n      location: NUMPAD\n    },\n    // [USB: 0x5b]\n    0x64: {\n      code: 'Numpad4',\n      keyCap: '4',\n      location: NUMPAD\n    },\n    // [USB: 0x5c]\n    0x65: {\n      code: 'Numpad5',\n      keyCap: '5',\n      location: NUMPAD\n    },\n    // [USB: 0x5d]\n    0x66: {\n      code: 'Numpad6',\n      keyCap: '6',\n      location: NUMPAD\n    },\n    // [USB: 0x5e]\n    0x67: {\n      code: 'Numpad7',\n      keyCap: '7',\n      location: NUMPAD\n    },\n    // [USB: 0x5f]\n    0x68: {\n      code: 'Numpad8',\n      keyCap: '8',\n      location: NUMPAD\n    },\n    // [USB: 0x60]\n    0x69: {\n      code: 'Numpad9',\n      keyCap: '9',\n      location: NUMPAD\n    },\n    // [USB: 0x61]\n    0x6A: {\n      code: 'NumpadMultiply',\n      keyCap: '*',\n      location: NUMPAD\n    },\n    // [USB: 0x55]\n    0x6B: {\n      code: 'NumpadAdd',\n      keyCap: '+',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0x6C: {\n      code: 'NumpadComma',\n      keyCap: ',',\n      location: NUMPAD\n    },\n    // [USB: 0x85]\n    0x6D: {\n      code: 'NumpadSubtract',\n      keyCap: '-',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0x6E: {\n      code: 'NumpadDecimal',\n      keyCap: '.',\n      location: NUMPAD\n    },\n    // [USB: 0x63]\n    0x6F: {\n      code: 'NumpadDivide',\n      keyCap: '/',\n      location: NUMPAD\n    },\n    // [USB: 0x54]\n    0x70: {\n      code: 'F1'\n    },\n    // [USB: 0x3a]\n    0x71: {\n      code: 'F2'\n    },\n    // [USB: 0x3b]\n    0x72: {\n      code: 'F3'\n    },\n    // [USB: 0x3c]\n    0x73: {\n      code: 'F4'\n    },\n    // [USB: 0x3d]\n    0x74: {\n      code: 'F5'\n    },\n    // [USB: 0x3e]\n    0x75: {\n      code: 'F6'\n    },\n    // [USB: 0x3f]\n    0x76: {\n      code: 'F7'\n    },\n    // [USB: 0x40]\n    0x77: {\n      code: 'F8'\n    },\n    // [USB: 0x41]\n    0x78: {\n      code: 'F9'\n    },\n    // [USB: 0x42]\n    0x79: {\n      code: 'F10'\n    },\n    // [USB: 0x43]\n    0x7A: {\n      code: 'F11'\n    },\n    // [USB: 0x44]\n    0x7B: {\n      code: 'F12'\n    },\n    // [USB: 0x45]\n    0x7C: {\n      code: 'F13'\n    },\n    // [USB: 0x68]\n    0x7D: {\n      code: 'F14'\n    },\n    // [USB: 0x69]\n    0x7E: {\n      code: 'F15'\n    },\n    // [USB: 0x6a]\n    0x7F: {\n      code: 'F16'\n    },\n    // [USB: 0x6b]\n    0x80: {\n      code: 'F17'\n    },\n    // [USB: 0x6c]\n    0x81: {\n      code: 'F18'\n    },\n    // [USB: 0x6d]\n    0x82: {\n      code: 'F19'\n    },\n    // [USB: 0x6e]\n    0x83: {\n      code: 'F20'\n    },\n    // [USB: 0x6f]\n    0x84: {\n      code: 'F21'\n    },\n    // [USB: 0x70]\n    0x85: {\n      code: 'F22'\n    },\n    // [USB: 0x71]\n    0x86: {\n      code: 'F23'\n    },\n    // [USB: 0x72]\n    0x87: {\n      code: 'F24'\n    },\n    // [USB: 0x73]\n    // 0x88-0x8F - unassigned\n    0x90: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0x91: {\n      code: 'ScrollLock'\n    },\n    // [USB: 0x47]\n    // 0x92-0x96 - OEM specific\n    // 0x97-0x9F - unassigned\n    // NOTE: 0xA0-0xA5 usually mapped to 0x10-0x12 in browsers\n    0xA0: {\n      code: 'ShiftLeft',\n      location: LEFT\n    },\n    // [USB: 0xe1]\n    0xA1: {\n      code: 'ShiftRight',\n      location: RIGHT\n    },\n    // [USB: 0xe5]\n    0xA2: {\n      code: 'ControlLeft',\n      location: LEFT\n    },\n    // [USB: 0xe0]\n    0xA3: {\n      code: 'ControlRight',\n      location: RIGHT\n    },\n    // [USB: 0xe4]\n    0xA4: {\n      code: 'AltLeft',\n      location: LEFT\n    },\n    // [USB: 0xe2]\n    0xA5: {\n      code: 'AltRight',\n      location: RIGHT\n    },\n    // [USB: 0xe6]\n    0xA6: {\n      code: 'BrowserBack'\n    },\n    // [USB: 0x0c/0x0224]\n    0xA7: {\n      code: 'BrowserForward'\n    },\n    // [USB: 0x0c/0x0225]\n    0xA8: {\n      code: 'BrowserRefresh'\n    },\n    // [USB: 0x0c/0x0227]\n    0xA9: {\n      code: 'BrowserStop'\n    },\n    // [USB: 0x0c/0x0226]\n    0xAA: {\n      code: 'BrowserSearch'\n    },\n    // [USB: 0x0c/0x0221]\n    0xAB: {\n      code: 'BrowserFavorites'\n    },\n    // [USB: 0x0c/0x0228]\n    0xAC: {\n      code: 'BrowserHome'\n    },\n    // [USB: 0x0c/0x0222]\n    0xAD: {\n      code: 'VolumeMute'\n    },\n    // [USB: 0x7f]\n    0xAE: {\n      code: 'VolumeDown'\n    },\n    // [USB: 0x81]\n    0xAF: {\n      code: 'VolumeUp'\n    },\n    // [USB: 0x80]\n    0xB0: {\n      code: 'MediaTrackNext'\n    },\n    // [USB: 0x0c/0x00b5]\n    0xB1: {\n      code: 'MediaTrackPrevious'\n    },\n    // [USB: 0x0c/0x00b6]\n    0xB2: {\n      code: 'MediaStop'\n    },\n    // [USB: 0x0c/0x00b7]\n    0xB3: {\n      code: 'MediaPlayPause'\n    },\n    // [USB: 0x0c/0x00cd]\n    0xB4: {\n      code: 'LaunchMail'\n    },\n    // [USB: 0x0c/0x018a]\n    0xB5: {\n      code: 'MediaSelect'\n    },\n    0xB6: {\n      code: 'LaunchApp1'\n    },\n    0xB7: {\n      code: 'LaunchApp2'\n    },\n    // 0xB8-0xB9 - reserved\n    0xBA: {\n      code: 'Semicolon',\n      keyCap: ';'\n    },\n    // [USB: 0x33] ;: (US Standard 101)\n    0xBB: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0xBC: {\n      code: 'Comma',\n      keyCap: ','\n    },\n    // [USB: 0x36] ,<\n    0xBD: {\n      code: 'Minus',\n      keyCap: '-'\n    },\n    // [USB: 0x2d] -_\n    0xBE: {\n      code: 'Period',\n      keyCap: '.'\n    },\n    // [USB: 0x37] .>\n    0xBF: {\n      code: 'Slash',\n      keyCap: '/'\n    },\n    // [USB: 0x38] /? (US Standard 101)\n    0xC0: {\n      code: 'Backquote',\n      keyCap: '`'\n    },\n    // [USB: 0x35] `~ (US Standard 101)\n    // 0xC1-0xCF - reserved\n    // 0xD0-0xD7 - reserved\n    // 0xD8-0xDA - unassigned\n    0xDB: {\n      code: 'BracketLeft',\n      keyCap: '['\n    },\n    // [USB: 0x2f] [{ (US Standard 101)\n    0xDC: {\n      code: 'Backslash',\n      keyCap: '\\\\'\n    },\n    // [USB: 0x31] \\| (US Standard 101)\n    0xDD: {\n      code: 'BracketRight',\n      keyCap: ']'\n    },\n    // [USB: 0x30] ]} (US Standard 101)\n    0xDE: {\n      code: 'Quote',\n      keyCap: '\\''\n    },\n    // [USB: 0x34] '\" (US Standard 101)\n    // 0xDF - miscellaneous/varies\n    // 0xE0 - reserved\n    // 0xE1 - OEM specific\n    0xE2: {\n      code: 'IntlBackslash',\n      keyCap: '\\\\'\n    },\n    // [USB: 0x64] \\| (UK Standard 102)\n    // 0xE3-0xE4 - OEM specific\n    0xE5: {\n      code: 'Process'\n    },\n    // (Not in D3E)\n    // 0xE6 - OEM specific\n    // 0xE7 - VK_PACKET\n    // 0xE8 - unassigned\n    // 0xE9-0xEF - OEM specific\n    // 0xF0-0xF5 - OEM specific\n    0xF6: {\n      code: 'Attn'\n    },\n    // [USB: 0x9a] (Not in D3E)\n    0xF7: {\n      code: 'CrSel'\n    },\n    // [USB: 0xa3] (Not in D3E)\n    0xF8: {\n      code: 'ExSel'\n    },\n    // [USB: 0xa4] (Not in D3E)\n    0xF9: {\n      code: 'EraseEof'\n    },\n    // (Not in D3E)\n    0xFA: {\n      code: 'Play'\n    },\n    // (Not in D3E)\n    0xFB: {\n      code: 'ZoomToggle'\n    },\n    // (Not in D3E)\n    // 0xFC - VK_NONAME - reserved\n    // 0xFD - VK_PA1\n    0xFE: {\n      code: 'Clear'\n    } // [USB: 0x9c] (Not in D3E)\n\n  }; // No legacy keyCode, but listed in D3E:\n  // code: usb\n  // 'IntlHash': 0x070032,\n  // 'IntlRo': 0x070087,\n  // 'IntlYen': 0x070089,\n  // 'NumpadBackspace': 0x0700bb,\n  // 'NumpadClear': 0x0700d8,\n  // 'NumpadClearEntry': 0x0700d9,\n  // 'NumpadMemoryAdd': 0x0700d3,\n  // 'NumpadMemoryClear': 0x0700d2,\n  // 'NumpadMemoryRecall': 0x0700d1,\n  // 'NumpadMemoryStore': 0x0700d0,\n  // 'NumpadMemorySubtract': 0x0700d4,\n  // 'NumpadParenLeft': 0x0700b6,\n  // 'NumpadParenRight': 0x0700b7,\n  //--------------------------------------------------------------------\n  //\n  // Browser/OS Specific Mappings\n  //\n  //--------------------------------------------------------------------\n\n  mergeIf(keyCodeToInfoTable, 'moz', {\n    0x3B: {\n      code: 'Semicolon',\n      keyCap: ';'\n    },\n    // [USB: 0x33] ;: (US Standard 101)\n    0x3D: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0x6B: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0x6D: {\n      code: 'Minus',\n      keyCap: '-'\n    },\n    // [USB: 0x2d] -_\n    0xBB: {\n      code: 'NumpadAdd',\n      keyCap: '+',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0xBD: {\n      code: 'NumpadSubtract',\n      keyCap: '-',\n      location: NUMPAD\n    } // [USB: 0x56]\n\n  });\n  mergeIf(keyCodeToInfoTable, 'moz-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0xAD: {\n      code: 'Minus',\n      keyCap: '-'\n    } // [USB: 0x2d] -_\n\n  });\n  mergeIf(keyCodeToInfoTable, 'moz-win', {\n    0xAD: {\n      code: 'Minus',\n      keyCap: '-'\n    } // [USB: 0x2d] -_\n\n  });\n  mergeIf(keyCodeToInfoTable, 'chrome-mac', {\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  }); // Windows via Bootcamp (!)\n\n  if (0) {\n    mergeIf(keyCodeToInfoTable, 'chrome-win', {\n      0xC0: {\n        code: 'Quote',\n        keyCap: '\\''\n      },\n      // [USB: 0x34] '\" (US Standard 101)\n      0xDE: {\n        code: 'Backslash',\n        keyCap: '\\\\'\n      },\n      // [USB: 0x31] \\| (US Standard 101)\n      0xDF: {\n        code: 'Backquote',\n        keyCap: '`'\n      } // [USB: 0x35] `~ (US Standard 101)\n\n    });\n    mergeIf(keyCodeToInfoTable, 'ie', {\n      0xC0: {\n        code: 'Quote',\n        keyCap: '\\''\n      },\n      // [USB: 0x34] '\" (US Standard 101)\n      0xDE: {\n        code: 'Backslash',\n        keyCap: '\\\\'\n      },\n      // [USB: 0x31] \\| (US Standard 101)\n      0xDF: {\n        code: 'Backquote',\n        keyCap: '`'\n      } // [USB: 0x35] `~ (US Standard 101)\n\n    });\n  }\n\n  mergeIf(keyCodeToInfoTable, 'safari', {\n    0x03: {\n      code: 'Enter'\n    },\n    // [USB: 0x28] old Safari\n    0x19: {\n      code: 'Tab'\n    } // [USB: 0x2b] old Safari for Shift+Tab\n\n  });\n  mergeIf(keyCodeToInfoTable, 'ios', {\n    0x0A: {\n      code: 'Enter',\n      location: STANDARD\n    } // [USB: 0x28]\n\n  });\n  mergeIf(keyCodeToInfoTable, 'safari-mac', {\n    0x5B: {\n      code: 'OSLeft',\n      location: LEFT\n    },\n    // [USB: 0xe3]\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    },\n    // [USB: 0xe7]\n    0xE5: {\n      code: 'KeyQ',\n      keyCap: 'Q'\n    } // [USB: 0x14] On alternate presses, Ctrl+Q sends this\n\n  }); //--------------------------------------------------------------------\n  //\n  // Identifier Mappings\n  //\n  //--------------------------------------------------------------------\n  // Cases where newer-ish browsers send keyIdentifier which can be\n  // used to disambiguate keys.\n  // keyIdentifierTable[keyIdentifier] -> keyInfo\n\n  var keyIdentifierTable = {};\n\n  if ('cros' === os) {\n    keyIdentifierTable['U+00A0'] = {\n      code: 'ShiftLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A1'] = {\n      code: 'ShiftRight',\n      location: RIGHT\n    };\n    keyIdentifierTable['U+00A2'] = {\n      code: 'ControlLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A3'] = {\n      code: 'ControlRight',\n      location: RIGHT\n    };\n    keyIdentifierTable['U+00A4'] = {\n      code: 'AltLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A5'] = {\n      code: 'AltRight',\n      location: RIGHT\n    };\n  }\n\n  if ('chrome-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = {\n      code: 'ContextMenu'\n    };\n  }\n\n  if ('safari-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = {\n      code: 'ContextMenu'\n    };\n  }\n\n  if ('ios' === os) {\n    // These only generate keyup events\n    keyIdentifierTable['U+0010'] = {\n      code: 'Function'\n    };\n    keyIdentifierTable['U+001C'] = {\n      code: 'ArrowLeft'\n    };\n    keyIdentifierTable['U+001D'] = {\n      code: 'ArrowRight'\n    };\n    keyIdentifierTable['U+001E'] = {\n      code: 'ArrowUp'\n    };\n    keyIdentifierTable['U+001F'] = {\n      code: 'ArrowDown'\n    };\n    keyIdentifierTable['U+0001'] = {\n      code: 'Home'\n    }; // [USB: 0x4a] Fn + ArrowLeft\n\n    keyIdentifierTable['U+0004'] = {\n      code: 'End'\n    }; // [USB: 0x4d] Fn + ArrowRight\n\n    keyIdentifierTable['U+000B'] = {\n      code: 'PageUp'\n    }; // [USB: 0x4b] Fn + ArrowUp\n\n    keyIdentifierTable['U+000C'] = {\n      code: 'PageDown'\n    }; // [USB: 0x4e] Fn + ArrowDown\n  } //--------------------------------------------------------------------\n  //\n  // Location Mappings\n  //\n  //--------------------------------------------------------------------\n  // Cases where newer-ish browsers send location/keyLocation which\n  // can be used to disambiguate keys.\n  // locationTable[location][keyCode] -> keyInfo\n\n\n  var locationTable = [];\n  locationTable[LEFT] = {\n    0x10: {\n      code: 'ShiftLeft',\n      location: LEFT\n    },\n    // [USB: 0xe1]\n    0x11: {\n      code: 'ControlLeft',\n      location: LEFT\n    },\n    // [USB: 0xe0]\n    0x12: {\n      code: 'AltLeft',\n      location: LEFT\n    } // [USB: 0xe2]\n\n  };\n  locationTable[RIGHT] = {\n    0x10: {\n      code: 'ShiftRight',\n      location: RIGHT\n    },\n    // [USB: 0xe5]\n    0x11: {\n      code: 'ControlRight',\n      location: RIGHT\n    },\n    // [USB: 0xe4]\n    0x12: {\n      code: 'AltRight',\n      location: RIGHT\n    } // [USB: 0xe6]\n\n  };\n  locationTable[NUMPAD] = {\n    0x0D: {\n      code: 'NumpadEnter',\n      location: NUMPAD\n    } // [USB: 0x58]\n\n  };\n  mergeIf(locationTable[NUMPAD], 'moz', {\n    0x6D: {\n      code: 'NumpadSubtract',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0x6B: {\n      code: 'NumpadAdd',\n      location: NUMPAD\n    } // [USB: 0x57]\n\n  });\n  mergeIf(locationTable[LEFT], 'moz-mac', {\n    0xE0: {\n      code: 'OSLeft',\n      location: LEFT\n    } // [USB: 0xe3]\n\n  });\n  mergeIf(locationTable[RIGHT], 'moz-mac', {\n    0xE0: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[RIGHT], 'moz-win', {\n    0x5B: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[RIGHT], 'mac', {\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[NUMPAD], 'chrome-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    } // [USB: 0x53]\n\n  });\n  mergeIf(locationTable[NUMPAD], 'safari-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0xBB: {\n      code: 'NumpadAdd',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0xBD: {\n      code: 'NumpadSubtract',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0xBE: {\n      code: 'NumpadDecimal',\n      location: NUMPAD\n    },\n    // [USB: 0x63]\n    0xBF: {\n      code: 'NumpadDivide',\n      location: NUMPAD\n    } // [USB: 0x54]\n\n  }); //--------------------------------------------------------------------\n  //\n  // Key Values\n  //\n  //--------------------------------------------------------------------\n  // Mapping from `code` values to `key` values. Values defined at:\n  // https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-key.html\n  // Entries are only provided when `key` differs from `code`. If\n  // printable, `shiftKey` has the shifted printable character. This\n  // assumes US Standard 101 layout\n\n  var codeToKeyTable = {\n    // Modifier Keys\n    ShiftLeft: {\n      key: 'Shift'\n    },\n    ShiftRight: {\n      key: 'Shift'\n    },\n    ControlLeft: {\n      key: 'Control'\n    },\n    ControlRight: {\n      key: 'Control'\n    },\n    AltLeft: {\n      key: 'Alt'\n    },\n    AltRight: {\n      key: 'Alt'\n    },\n    OSLeft: {\n      key: 'OS'\n    },\n    OSRight: {\n      key: 'OS'\n    },\n    // Whitespace Keys\n    NumpadEnter: {\n      key: 'Enter'\n    },\n    Space: {\n      key: ' '\n    },\n    // Printable Keys\n    Digit0: {\n      key: '0',\n      shiftKey: ')'\n    },\n    Digit1: {\n      key: '1',\n      shiftKey: '!'\n    },\n    Digit2: {\n      key: '2',\n      shiftKey: '@'\n    },\n    Digit3: {\n      key: '3',\n      shiftKey: '#'\n    },\n    Digit4: {\n      key: '4',\n      shiftKey: '$'\n    },\n    Digit5: {\n      key: '5',\n      shiftKey: '%'\n    },\n    Digit6: {\n      key: '6',\n      shiftKey: '^'\n    },\n    Digit7: {\n      key: '7',\n      shiftKey: '&'\n    },\n    Digit8: {\n      key: '8',\n      shiftKey: '*'\n    },\n    Digit9: {\n      key: '9',\n      shiftKey: '('\n    },\n    KeyA: {\n      key: 'a',\n      shiftKey: 'A'\n    },\n    KeyB: {\n      key: 'b',\n      shiftKey: 'B'\n    },\n    KeyC: {\n      key: 'c',\n      shiftKey: 'C'\n    },\n    KeyD: {\n      key: 'd',\n      shiftKey: 'D'\n    },\n    KeyE: {\n      key: 'e',\n      shiftKey: 'E'\n    },\n    KeyF: {\n      key: 'f',\n      shiftKey: 'F'\n    },\n    KeyG: {\n      key: 'g',\n      shiftKey: 'G'\n    },\n    KeyH: {\n      key: 'h',\n      shiftKey: 'H'\n    },\n    KeyI: {\n      key: 'i',\n      shiftKey: 'I'\n    },\n    KeyJ: {\n      key: 'j',\n      shiftKey: 'J'\n    },\n    KeyK: {\n      key: 'k',\n      shiftKey: 'K'\n    },\n    KeyL: {\n      key: 'l',\n      shiftKey: 'L'\n    },\n    KeyM: {\n      key: 'm',\n      shiftKey: 'M'\n    },\n    KeyN: {\n      key: 'n',\n      shiftKey: 'N'\n    },\n    KeyO: {\n      key: 'o',\n      shiftKey: 'O'\n    },\n    KeyP: {\n      key: 'p',\n      shiftKey: 'P'\n    },\n    KeyQ: {\n      key: 'q',\n      shiftKey: 'Q'\n    },\n    KeyR: {\n      key: 'r',\n      shiftKey: 'R'\n    },\n    KeyS: {\n      key: 's',\n      shiftKey: 'S'\n    },\n    KeyT: {\n      key: 't',\n      shiftKey: 'T'\n    },\n    KeyU: {\n      key: 'u',\n      shiftKey: 'U'\n    },\n    KeyV: {\n      key: 'v',\n      shiftKey: 'V'\n    },\n    KeyW: {\n      key: 'w',\n      shiftKey: 'W'\n    },\n    KeyX: {\n      key: 'x',\n      shiftKey: 'X'\n    },\n    KeyY: {\n      key: 'y',\n      shiftKey: 'Y'\n    },\n    KeyZ: {\n      key: 'z',\n      shiftKey: 'Z'\n    },\n    Numpad0: {\n      key: '0'\n    },\n    Numpad1: {\n      key: '1'\n    },\n    Numpad2: {\n      key: '2'\n    },\n    Numpad3: {\n      key: '3'\n    },\n    Numpad4: {\n      key: '4'\n    },\n    Numpad5: {\n      key: '5'\n    },\n    Numpad6: {\n      key: '6'\n    },\n    Numpad7: {\n      key: '7'\n    },\n    Numpad8: {\n      key: '8'\n    },\n    Numpad9: {\n      key: '9'\n    },\n    NumpadMultiply: {\n      key: '*'\n    },\n    NumpadAdd: {\n      key: '+'\n    },\n    NumpadComma: {\n      key: ','\n    },\n    NumpadSubtract: {\n      key: '-'\n    },\n    NumpadDecimal: {\n      key: '.'\n    },\n    NumpadDivide: {\n      key: '/'\n    },\n    Semicolon: {\n      key: ';',\n      shiftKey: ':'\n    },\n    Equal: {\n      key: '=',\n      shiftKey: '+'\n    },\n    Comma: {\n      key: ',',\n      shiftKey: '<'\n    },\n    Minus: {\n      key: '-',\n      shiftKey: '_'\n    },\n    Period: {\n      key: '.',\n      shiftKey: '>'\n    },\n    Slash: {\n      key: '/',\n      shiftKey: '?'\n    },\n    Backquote: {\n      key: '`',\n      shiftKey: '~'\n    },\n    BracketLeft: {\n      key: '[',\n      shiftKey: '{'\n    },\n    Backslash: {\n      key: '\\\\',\n      shiftKey: '|'\n    },\n    BracketRight: {\n      key: ']',\n      shiftKey: '}'\n    },\n    Quote: {\n      key: '\\'',\n      shiftKey: '\"'\n    },\n    IntlBackslash: {\n      key: '\\\\',\n      shiftKey: '|'\n    }\n  };\n  mergeIf(codeToKeyTable, 'mac', {\n    OSLeft: {\n      key: 'Meta'\n    },\n    OSRight: {\n      key: 'Meta'\n    }\n  }); // Corrections for 'key' names in older browsers (e.g. FF36-)\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key#Key_values\n\n  var keyFixTable = {\n    Esc: 'Escape',\n    Nonconvert: 'NonConvert',\n    Left: 'ArrowLeft',\n    Up: 'ArrowUp',\n    Right: 'ArrowRight',\n    Down: 'ArrowDown',\n    Del: 'Delete',\n    Menu: 'ContextMenu',\n    MediaNextTrack: 'MediaTrackNext',\n    MediaPreviousTrack: 'MediaTrackPrevious',\n    SelectMedia: 'MediaSelect',\n    HalfWidth: 'Hankaku',\n    FullWidth: 'Zenkaku',\n    RomanCharacters: 'Romaji',\n    Crsel: 'CrSel',\n    Exsel: 'ExSel',\n    Zoom: 'ZoomToggle'\n  }; //--------------------------------------------------------------------\n  //\n  // Exported Functions\n  //\n  //--------------------------------------------------------------------\n\n  var codeTable = remap(keyCodeToInfoTable, 'code');\n\n  try {\n    var nativeLocation = nativeKeyboardEvent && 'location' in new KeyboardEvent('');\n  } catch (_) {}\n\n  function keyInfoForEvent(event) {\n    var keyCode = 'keyCode' in event ? event.keyCode : 'which' in event ? event.which : 0;\n\n    var keyInfo = function () {\n      if (nativeLocation || 'keyLocation' in event) {\n        var location = nativeLocation ? event.location : event.keyLocation;\n\n        if (location && keyCode in locationTable[location]) {\n          return locationTable[location][keyCode];\n        }\n      }\n\n      if ('keyIdentifier' in event && event.keyIdentifier in keyIdentifierTable) {\n        return keyIdentifierTable[event.keyIdentifier];\n      }\n\n      if (keyCode in keyCodeToInfoTable) {\n        return keyCodeToInfoTable[keyCode];\n      }\n\n      return null;\n    }(); // TODO: Track these down and move to general tables\n\n\n    if (0) {\n      // TODO: Map these for newerish browsers?\n      // TODO: iOS only?\n      // TODO: Override with more common keyIdentifier name?\n      switch (event.keyIdentifier) {\n        case 'U+0010':\n          keyInfo = {\n            code: 'Function'\n          };\n          break;\n\n        case 'U+001C':\n          keyInfo = {\n            code: 'ArrowLeft'\n          };\n          break;\n\n        case 'U+001D':\n          keyInfo = {\n            code: 'ArrowRight'\n          };\n          break;\n\n        case 'U+001E':\n          keyInfo = {\n            code: 'ArrowUp'\n          };\n          break;\n\n        case 'U+001F':\n          keyInfo = {\n            code: 'ArrowDown'\n          };\n          break;\n      }\n    }\n\n    if (!keyInfo) return null;\n\n    var key = function () {\n      var entry = codeToKeyTable[keyInfo.code];\n      if (!entry) return keyInfo.code;\n      return event.shiftKey && 'shiftKey' in entry ? entry.shiftKey : entry.key;\n    }();\n\n    return {\n      code: keyInfo.code,\n      key: key,\n      location: keyInfo.location,\n      keyCap: keyInfo.keyCap\n    };\n  }\n\n  function queryKeyCap(code, locale) {\n    code = String(code);\n    if (!codeTable.hasOwnProperty(code)) return 'Undefined';\n    if (locale && String(locale).toLowerCase() !== 'en-us') throw Error('Unsupported locale');\n    var keyInfo = codeTable[code];\n    return keyInfo.keyCap || keyInfo.code || 'Undefined';\n  }\n\n  if ('KeyboardEvent' in global && 'defineProperty' in Object) {\n    (function () {\n      function define(o, p, v) {\n        if (p in o) return;\n        Object.defineProperty(o, p, v);\n      }\n\n      define(KeyboardEvent.prototype, 'code', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo ? keyInfo.code : '';\n        }\n      }); // Fix for nonstandard `key` values (FF36-)\n\n      if ('key' in KeyboardEvent.prototype) {\n        var desc = Object.getOwnPropertyDescriptor(KeyboardEvent.prototype, 'key');\n        Object.defineProperty(KeyboardEvent.prototype, 'key', {\n          get: function get() {\n            var key = desc.get.call(this);\n            return keyFixTable.hasOwnProperty(key) ? keyFixTable[key] : key;\n          }\n        });\n      }\n\n      define(KeyboardEvent.prototype, 'key', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo && 'key' in keyInfo ? keyInfo.key : 'Unidentified';\n        }\n      });\n      define(KeyboardEvent.prototype, 'location', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo && 'location' in keyInfo ? keyInfo.location : STANDARD;\n        }\n      });\n      define(KeyboardEvent.prototype, 'locale', {\n        get: function get() {\n          return '';\n        }\n      });\n    })();\n  }\n\n  if (!('queryKeyCap' in global.KeyboardEvent)) global.KeyboardEvent.queryKeyCap = queryKeyCap; // Helper for IE8-\n\n  global.identifyKey = function (event) {\n    if ('code' in event) return;\n    var keyInfo = keyInfoForEvent(event);\n    event.code = keyInfo ? keyInfo.code : '';\n    event.key = keyInfo && 'key' in keyInfo ? keyInfo.key : 'Unidentified';\n    event.location = 'location' in event ? event.location : 'keyLocation' in event ? event.keyLocation : keyInfo && 'location' in keyInfo ? keyInfo.location : STANDARD;\n    event.locale = '';\n  };\n})(window);","var ResizeObserverBoxOptions;\n\n(function (ResizeObserverBoxOptions) {\n  ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n  ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n  ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\n\nexport { ResizeObserverBoxOptions };","var resizeObservers = [];\nexport { resizeObservers };","var msg = 'ResizeObserver loop completed with undelivered notifications.';\n\nvar deliverResizeLoopError = function deliverResizeLoopError() {\n  var event;\n\n  if (typeof ErrorEvent === 'function') {\n    event = new ErrorEvent('error', {\n      message: msg\n    });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent('error', false, false);\n    event.message = msg;\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport { deliverResizeLoopError };","var DOMRectReadOnly = function () {\n  function DOMRectReadOnly(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.top = this.y;\n    this.left = this.x;\n    this.bottom = this.top + this.height;\n    this.right = this.left + this.width;\n    return Object.freeze(this);\n  }\n\n  DOMRectReadOnly.prototype.toJSON = function () {\n    var _a = this,\n        x = _a.x,\n        y = _a.y,\n        top = _a.top,\n        right = _a.right,\n        bottom = _a.bottom,\n        left = _a.left,\n        width = _a.width,\n        height = _a.height;\n\n    return {\n      x: x,\n      y: y,\n      top: top,\n      right: right,\n      bottom: bottom,\n      left: left,\n      width: width,\n      height: height\n    };\n  };\n\n  DOMRectReadOnly.fromRect = function (rectangle) {\n    return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n  };\n\n  return DOMRectReadOnly;\n}();\n\nexport { DOMRectReadOnly };","var trigger;\nvar callbacks = [];\n\nvar notify = function notify() {\n  return callbacks.splice(0).forEach(function (cb) {\n    return cb();\n  });\n};\n\nvar queueMicroTask = function queueMicroTask(callback) {\n  if (!trigger) {\n    var toggle_1 = 0;\n    var el_1 = document.createTextNode('');\n    var config = {\n      characterData: true\n    };\n    new MutationObserver(function () {\n      return notify();\n    }).observe(el_1, config);\n\n    trigger = function trigger() {\n      el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++);\n    };\n  }\n\n  callbacks.push(callback);\n  trigger();\n};\n\nexport { queueMicroTask };","var isSVG = function isSVG(target) {\n  return target instanceof SVGElement && 'getBBox' in target;\n};\n\nvar isHidden = function isHidden(target) {\n  if (isSVG(target)) {\n    var _a = target.getBBox(),\n        width = _a.width,\n        height = _a.height;\n\n    return !width && !height;\n  }\n\n  var _b = target,\n      offsetWidth = _b.offsetWidth,\n      offsetHeight = _b.offsetHeight;\n  return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\n\nvar isElement = function isElement(obj) {\n  var _a, _b;\n\n  var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n  return !!(scope && obj instanceof scope.Element);\n};\n\nvar isReplacedElement = function isReplacedElement(target) {\n  switch (target.tagName) {\n    case 'INPUT':\n      if (target.type !== 'image') {\n        break;\n      }\n\n    case 'VIDEO':\n    case 'AUDIO':\n    case 'EMBED':\n    case 'OBJECT':\n    case 'CANVAS':\n    case 'IFRAME':\n    case 'IMG':\n      return true;\n  }\n\n  return false;\n};\n\nexport { isSVG, isHidden, isElement, isReplacedElement };","export var global = typeof window !== 'undefined' ? window : {};","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = /msie|trident/i.test(global.navigator && global.navigator.userAgent);\n\nvar parseDimension = function parseDimension(pixel) {\n  return parseFloat(pixel || '0');\n};\n\nvar size = function size(inlineSize, blockSize, switchSizes) {\n  if (inlineSize === void 0) {\n    inlineSize = 0;\n  }\n\n  if (blockSize === void 0) {\n    blockSize = 0;\n  }\n\n  if (switchSizes === void 0) {\n    switchSizes = false;\n  }\n\n  return Object.freeze({\n    inlineSize: (switchSizes ? blockSize : inlineSize) || 0,\n    blockSize: (switchSizes ? inlineSize : blockSize) || 0\n  });\n};\n\nvar zeroBoxes = Object.freeze({\n  devicePixelContentBoxSize: size(),\n  borderBoxSize: size(),\n  contentBoxSize: size(),\n  contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\n\nvar calculateBoxSizes = function calculateBoxSizes(target, forceRecalculation) {\n  if (forceRecalculation === void 0) {\n    forceRecalculation = false;\n  }\n\n  if (cache.has(target) && !forceRecalculation) {\n    return cache.get(target);\n  }\n\n  if (isHidden(target)) {\n    cache.set(target, zeroBoxes);\n    return zeroBoxes;\n  }\n\n  var cs = getComputedStyle(target);\n  var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n  var removePadding = !IE && cs.boxSizing === 'border-box';\n  var switchSizes = verticalRegexp.test(cs.writingMode || '');\n  var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n  var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n  var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n  var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n  var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n  var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n  var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n  var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n  var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n  var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n  var horizontalPadding = paddingLeft + paddingRight;\n  var verticalPadding = paddingTop + paddingBottom;\n  var horizontalBorderArea = borderLeft + borderRight;\n  var verticalBorderArea = borderTop + borderBottom;\n  var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n  var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n  var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n  var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n  var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n  var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n  var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n  var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n  var boxes = Object.freeze({\n    devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n    borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n    contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n    contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n  });\n  cache.set(target, boxes);\n  return boxes;\n};\n\nvar calculateBoxSize = function calculateBoxSize(target, observedBox, forceRecalculation) {\n  var _a = calculateBoxSizes(target, forceRecalculation),\n      borderBoxSize = _a.borderBoxSize,\n      contentBoxSize = _a.contentBoxSize,\n      devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n\n  switch (observedBox) {\n    case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n      return devicePixelContentBoxSize;\n\n    case ResizeObserverBoxOptions.BORDER_BOX:\n      return borderBoxSize;\n\n    default:\n      return contentBoxSize;\n  }\n};\n\nexport { calculateBoxSize, calculateBoxSizes };","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\n\nvar ResizeObserverEntry = function () {\n  function ResizeObserverEntry(target) {\n    var boxes = calculateBoxSizes(target);\n    this.target = target;\n    this.contentRect = boxes.contentRect;\n    this.borderBoxSize = [boxes.borderBoxSize];\n    this.contentBoxSize = [boxes.contentBoxSize];\n    this.devicePixelContentBoxSize = [boxes.devicePixelContentBoxSize];\n  }\n\n  return ResizeObserverEntry;\n}();\n\nexport { ResizeObserverEntry };","import { isHidden } from '../utils/element';\n\nvar calculateDepthForNode = function calculateDepthForNode(node) {\n  if (isHidden(node)) {\n    return Infinity;\n  }\n\n  var depth = 0;\n  var parent = node.parentNode;\n\n  while (parent) {\n    depth += 1;\n    parent = parent.parentNode;\n  }\n\n  return depth;\n};\n\nexport { calculateDepthForNode };","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\n\nvar broadcastActiveObservations = function broadcastActiveObservations() {\n  var shallowestDepth = Infinity;\n  var callbacks = [];\n  resizeObservers.forEach(function processObserver(ro) {\n    if (ro.activeTargets.length === 0) {\n      return;\n    }\n\n    var entries = [];\n    ro.activeTargets.forEach(function processTarget(ot) {\n      var entry = new ResizeObserverEntry(ot.target);\n      var targetDepth = calculateDepthForNode(ot.target);\n      entries.push(entry);\n      ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n\n      if (targetDepth < shallowestDepth) {\n        shallowestDepth = targetDepth;\n      }\n    });\n    callbacks.push(function resizeObserverCallback() {\n      ro.callback.call(ro.observer, entries, ro.observer);\n    });\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n  });\n\n  for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n    var callback = callbacks_1[_i];\n    callback();\n  }\n\n  return shallowestDepth;\n};\n\nexport { broadcastActiveObservations };","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\n\nvar gatherActiveObservationsAtDepth = function gatherActiveObservationsAtDepth(depth) {\n  resizeObservers.forEach(function processObserver(ro) {\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n    ro.skippedTargets.splice(0, ro.skippedTargets.length);\n    ro.observationTargets.forEach(function processTarget(ot) {\n      if (ot.isActive()) {\n        if (calculateDepthForNode(ot.target) > depth) {\n          ro.activeTargets.push(ot);\n        } else {\n          ro.skippedTargets.push(ot);\n        }\n      }\n    });\n  });\n};\n\nexport { gatherActiveObservationsAtDepth };","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\n\nvar process = function process() {\n  var depth = 0;\n  gatherActiveObservationsAtDepth(depth);\n\n  while (hasActiveObservations()) {\n    depth = broadcastActiveObservations();\n    gatherActiveObservationsAtDepth(depth);\n  }\n\n  if (hasSkippedObservations()) {\n    deliverResizeLoopError();\n  }\n\n  return depth > 0;\n};\n\nexport { process };","import { resizeObservers } from '../utils/resizeObservers';\n\nvar hasActiveObservations = function hasActiveObservations() {\n  return resizeObservers.some(function (ro) {\n    return ro.activeTargets.length > 0;\n  });\n};\n\nexport { hasActiveObservations };","import { resizeObservers } from '../utils/resizeObservers';\n\nvar hasSkippedObservations = function hasSkippedObservations() {\n  return resizeObservers.some(function (ro) {\n    return ro.skippedTargets.length > 0;\n  });\n};\n\nexport { hasSkippedObservations };","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\n\nvar isWatching = function isWatching() {\n  return !!watching;\n};\n\nvar CATCH_PERIOD = 250;\nvar observerConfig = {\n  attributes: true,\n  characterData: true,\n  childList: true,\n  subtree: true\n};\nvar events = ['resize', 'load', 'transitionend', 'animationend', 'animationstart', 'animationiteration', 'keyup', 'keydown', 'mouseup', 'mousedown', 'mouseover', 'mouseout', 'blur', 'focus'];\n\nvar time = function time(timeout) {\n  if (timeout === void 0) {\n    timeout = 0;\n  }\n\n  return Date.now() + timeout;\n};\n\nvar scheduled = false;\n\nvar Scheduler = function () {\n  function Scheduler() {\n    var _this = this;\n\n    this.stopped = true;\n\n    this.listener = function () {\n      return _this.schedule();\n    };\n  }\n\n  Scheduler.prototype.run = function (timeout) {\n    var _this = this;\n\n    if (timeout === void 0) {\n      timeout = CATCH_PERIOD;\n    }\n\n    if (scheduled) {\n      return;\n    }\n\n    scheduled = true;\n    var until = time(timeout);\n    queueResizeObserver(function () {\n      var elementsHaveResized = false;\n\n      try {\n        elementsHaveResized = process();\n      } finally {\n        scheduled = false;\n        timeout = until - time();\n\n        if (!isWatching()) {\n          return;\n        }\n\n        if (elementsHaveResized) {\n          _this.run(1000);\n        } else if (timeout > 0) {\n          _this.run(timeout);\n        } else {\n          _this.start();\n        }\n      }\n    });\n  };\n\n  Scheduler.prototype.schedule = function () {\n    this.stop();\n    this.run();\n  };\n\n  Scheduler.prototype.observe = function () {\n    var _this = this;\n\n    var cb = function cb() {\n      return _this.observer && _this.observer.observe(document.body, observerConfig);\n    };\n\n    document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n  };\n\n  Scheduler.prototype.start = function () {\n    var _this = this;\n\n    if (this.stopped) {\n      this.stopped = false;\n      this.observer = new MutationObserver(this.listener);\n      this.observe();\n      events.forEach(function (name) {\n        return global.addEventListener(name, _this.listener, true);\n      });\n    }\n  };\n\n  Scheduler.prototype.stop = function () {\n    var _this = this;\n\n    if (!this.stopped) {\n      this.observer && this.observer.disconnect();\n      events.forEach(function (name) {\n        return global.removeEventListener(name, _this.listener, true);\n      });\n      this.stopped = true;\n    }\n  };\n\n  return Scheduler;\n}();\n\nvar scheduler = new Scheduler();\n\nvar updateCount = function updateCount(n) {\n  !watching && n > 0 && scheduler.start();\n  watching += n;\n  !watching && scheduler.stop();\n};\n\nexport { scheduler, updateCount };","import { queueMicroTask } from './queueMicroTask';\n\nvar queueResizeObserver = function queueResizeObserver(cb) {\n  queueMicroTask(function ResizeObserver() {\n    requestAnimationFrame(cb);\n  });\n};\n\nexport { queueResizeObserver };","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\n\nvar skipNotifyOnElement = function skipNotifyOnElement(target) {\n  return !isSVG(target) && !isReplacedElement(target) && getComputedStyle(target).display === 'inline';\n};\n\nvar ResizeObservation = function () {\n  function ResizeObservation(target, observedBox) {\n    this.target = target;\n    this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n    this.lastReportedSize = {\n      inlineSize: 0,\n      blockSize: 0\n    };\n  }\n\n  ResizeObservation.prototype.isActive = function () {\n    var size = calculateBoxSize(this.target, this.observedBox, true);\n\n    if (skipNotifyOnElement(this.target)) {\n      this.lastReportedSize = size;\n    }\n\n    if (this.lastReportedSize.inlineSize !== size.inlineSize || this.lastReportedSize.blockSize !== size.blockSize) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return ResizeObservation;\n}();\n\nexport { ResizeObservation };","var ResizeObserverDetail = function () {\n  function ResizeObserverDetail(resizeObserver, callback) {\n    this.activeTargets = [];\n    this.skippedTargets = [];\n    this.observationTargets = [];\n    this.observer = resizeObserver;\n    this.callback = callback;\n  }\n\n  return ResizeObserverDetail;\n}();\n\nexport { ResizeObserverDetail };","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\n\nvar getObservationIndex = function getObservationIndex(observationTargets, target) {\n  for (var i = 0; i < observationTargets.length; i += 1) {\n    if (observationTargets[i].target === target) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar ResizeObserverController = function () {\n  function ResizeObserverController() {}\n\n  ResizeObserverController.connect = function (resizeObserver, callback) {\n    var detail = new ResizeObserverDetail(resizeObserver, callback);\n    observerMap.set(resizeObserver, detail);\n  };\n\n  ResizeObserverController.observe = function (resizeObserver, target, options) {\n    var detail = observerMap.get(resizeObserver);\n    var firstObservation = detail.observationTargets.length === 0;\n\n    if (getObservationIndex(detail.observationTargets, target) < 0) {\n      firstObservation && resizeObservers.push(detail);\n      detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n      updateCount(1);\n      scheduler.schedule();\n    }\n  };\n\n  ResizeObserverController.unobserve = function (resizeObserver, target) {\n    var detail = observerMap.get(resizeObserver);\n    var index = getObservationIndex(detail.observationTargets, target);\n    var lastObservation = detail.observationTargets.length === 1;\n\n    if (index >= 0) {\n      lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n      detail.observationTargets.splice(index, 1);\n      updateCount(-1);\n    }\n  };\n\n  ResizeObserverController.disconnect = function (resizeObserver) {\n    var _this = this;\n\n    var detail = observerMap.get(resizeObserver);\n    detail.observationTargets.slice().forEach(function (ot) {\n      return _this.unobserve(resizeObserver, ot.target);\n    });\n    detail.activeTargets.splice(0, detail.activeTargets.length);\n  };\n\n  return ResizeObserverController;\n}();\n\nexport { ResizeObserverController };","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\n\nvar ResizeObserver = function () {\n  function ResizeObserver(callback) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (typeof callback !== 'function') {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n    }\n\n    ResizeObserverController.connect(this, callback);\n  }\n\n  ResizeObserver.prototype.observe = function (target, options) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.observe(this, target, options);\n  };\n\n  ResizeObserver.prototype.unobserve = function (target) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.unobserve(this, target);\n  };\n\n  ResizeObserver.prototype.disconnect = function () {\n    ResizeObserverController.disconnect(this);\n  };\n\n  ResizeObserver.toString = function () {\n    return 'function ResizeObserver () { [polyfill code] }';\n  };\n\n  return ResizeObserver;\n}();\n\nexport { ResizeObserver };","import React, {\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n  useRef,\n} from 'react';\nimport { graphql, useStaticQuery, Link } from 'gatsby';\nimport { navigate } from '@reach/router';\nimport { Index } from 'elasticlunr';\nimport { max, forceCollide } from 'd3';\nimport kebabCase from 'lodash/kebabCase';\nimport { useDimensions } from '../utils/useDimensions';\n// import { ForceGraph2D } from 'react-force-graph';\n\n// gatsby-check\nconst ForceGraph2D = typeof window !== `undefined` ? require('react-force-graph').ForceGraph2D : null;\n\nconst getTextWithMeasures = (\n  text,\n  ctx,\n  maxWidth,\n  fontSize = 12,\n  padding = 0,\n  linePadding = 0,\n  wrap = true\n) => {\n  const words = text.split(' ');\n  const widths = words.map((d) => ctx.measureText(d).width);\n  let lines = [];\n  let width = 0;\n  let line = '';\n  widths.forEach((w, i) => {\n    const word = words[i];\n    width += w;\n    if (width > maxWidth) {\n      lines.push(line);\n      line = word;\n      width = w;\n    } else {\n      line += (line.length === 0 ? '' : ' ') + word;\n    }\n  });\n  lines.push(line);\n  lines = lines.filter((d) => d.length > 0);\n\n  const finalWidth = wrap\n    ? max(lines.map((d) => ctx.measureText(d).width))\n    : maxWidth;\n\n  let height = lines.length * fontSize;\n  if (lines.length > 1) height += linePadding * (lines.length - 1);\n\n  const measures = [finalWidth, height].map((d) => d + 2 * padding);\n  return { lines, measures };\n};\n\nexport const SearchGraph = () => {\n  const indexQuery = useStaticQuery(\n    graphql`\n      query SearchGraphIndexQuery {\n        siteSearchIndex {\n          index\n        }\n      }\n    `\n  ).siteSearchIndex.index;\n  const { ref: viewRef, width: viewWidth } = useDimensions();\n  const ref = useRef();\n  const [graphData, setGraphData] = useState({ nodes: [], links: [] });\n  const [results, setResults] = useState([]);\n  const [highlightLinks, setHighlightLinks] = useState([]);\n  const index = useMemo(() => Index.load(indexQuery), [indexQuery]);\n\n  useEffect(() => {\n    ref.current.d3Force('collide', forceCollide(35));\n  }, []);\n\n  const search = useCallback(\n    (event) => {\n      const query = event.target.value;\n      setResults(\n        index\n          .search(query, { expand: true })\n          .map(({ ref }) => index.documentStore.getDoc(ref))\n      );\n    },\n    [index]\n  );\n\n  useEffect(() => {\n    const { nodes: tmpNodes } = graphData;\n    const newNodes = results.map((d) => d.id);\n    const newTags = [...new Set(results.map((d) => d.tags).flat())];\n    const nodes = tmpNodes.filter(\n      (d) => newNodes.includes(d.id) || newTags.includes(d.id)\n    );\n    const currentNodes = nodes.map((d) => d.id);\n\n    results\n      .filter((d) => !currentNodes.includes(d.id))\n      .forEach((d) => {\n        nodes.push({\n          id: d.id,\n          name: d.title.replace('-', ' '),\n          type: d.slug ? 'blog' : 'repo',\n          description: d.description ?? 'Github repository.',\n          link: d.slug ?? `https://github.com/renato145/${d.name}`,\n        });\n      });\n\n    newTags\n      .filter((d) => !currentNodes.includes(d))\n      .forEach((d) => {\n        nodes.push({\n          id: d,\n          name: d.replace('-', ' '),\n          type: 'tag',\n          description: 'Tag',\n          link: `/tags/${kebabCase(d)}`,\n        });\n      });\n\n    const links = [];\n    results.forEach((d) => {\n      d.tags.forEach((tag) => {\n        links.push({\n          source: tag,\n          target: d.id,\n        });\n      });\n    });\n\n    setGraphData({ nodes, links });\n  }, [results]);\n\n  const handleNodeHover = (node) => {\n    if (node) {\n      const links = graphData.links\n        .filter((d) => d.source.id === node.id || d.target.id === node.id)\n        .map((d) => d.index);\n      setHighlightLinks(links);\n    } else {\n      setHighlightLinks([]);\n    }\n  };\n\n  if (ForceGraph2D === null) return <p>gatsby server dummy</p>;\n\n  return (\n    <div ref={viewRef} className=\"h-full\">\n      <Link to=\"/search\" className=\"text-xs\">\n        Go back to normal search\n      </Link>\n      <input\n        class=\"mt-1 mb-2 bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none leading-normal\"\n        type=\"text\"\n        placeholder=\"Search something\"\n        onChange={search}\n      />\n      <ForceGraph2D\n        ref={ref}\n        width={viewWidth}\n        height={viewWidth/2}\n        backgroundColor=\"#eee\"\n        graphData={graphData}\n        d3VelocityDecay={0.9}\n        linkCurvature={0.25}\n        nodeLabel={node => node.description}\n        onNodeClick={(node) => {\n          if (node.type === 'repo') window.open(node.link);\n          else navigate(node.link);\n        }}\n        onNodeHover={handleNodeHover}\n        linkHoverPrecision={15}\n        linkWidth={(d) => (highlightLinks.includes(d.index) ? 3 : 2)}\n        linkColor={(d) => (highlightLinks.includes(d.index) ? '#888' : '#ccc')}\n        nodeCanvasObject={(node, ctx, globalScale) => {\n          const { x, y, name, type } = node;\n          const maxWidth = 60;\n          const fontSize = (type === 'tag' ? 14 : 16) / globalScale;\n          const padding = (type === 'tag' ? 0.6 : 0.5) * fontSize;\n          const linePadding = 0.1 * fontSize;\n          ctx.font =\n            (type === 'tag' ? 'bold ' : '') + `${fontSize}px Sans-Serif`; // This needs to be set before calculating measures\n          const { lines, measures } = getTextWithMeasures(\n            name,\n            ctx,\n            maxWidth,\n            fontSize,\n            padding,\n            linePadding\n          );\n\n          ctx.fillStyle =\n            type === 'tag' ? 'rgba(147, 0, 58, 0.7)' : 'rgba(0, 66, 157, 0.7)';\n          ctx.fillRect(x - measures[0] / 2, y - measures[1] / 2, ...measures);\n\n          ctx.textAlign = 'center';\n          ctx.textBaseline = 'middle';\n          ctx.fillStyle = '#fff';\n          lines.forEach((line, i) =>\n            ctx.fillText(\n              line,\n              x,\n              y + padding * 2 + i * (linePadding + fontSize) - measures[1] / 2\n            )\n          );\n        }}\n        enableZoomPanInteraction={true}\n      />\n    </div>\n  );\n};\n","import { useRef, useEffect, useState, useMemo } from 'react';\nimport { ResizeObserver } from '@juggle/resize-observer';\n\nexport const useDimensions = () => {\n  const ref = useRef();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n\n  const ro = useMemo(\n    () =>\n      new ResizeObserver((entries) => {\n        const entry = entries[0];\n        setWidth(entry.contentRect.width);\n        setHeight(entry.contentRect.height);\n      }),\n    []\n  );\n\n  useEffect(() => {\n    const element = ref.current;\n    if (element) ro.observe(element);\n    return () => ro.unobserve(element);\n  }, [ro]);\n\n  return { ref, width, height };\n};\n","import React from 'react';\nimport { Layout } from '../components/Layout';\nimport { SearchGraph } from '../components/SearchGraph';\n\nconst SearchGraphPage = ({ location }) => {\n  const title = 'Search Graph';\n\n  return (\n    <Layout\n      location={location}\n      title=\"\"\n      // description=\"some description\"\n      headerConfig={{ title }}\n    >\n      <SearchGraph />\n    </Layout>\n  );\n};\n\nexport default SearchGraphPage;\n","/**\n * Internal data structure to represent 2D QuadTree node\n */\nmodule.exports = function Node() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain boides:\n  this.body = null; // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n\n  this.quad0 = null;\n  this.quad1 = null;\n  this.quad2 = null;\n  this.quad3 = null; // Total mass of current node\n\n  this.mass = 0; // Center of mass coordinates\n\n  this.massX = 0;\n  this.massY = 0; // bounding box coordinates\n\n  this.left = 0;\n  this.top = 0;\n  this.bottom = 0;\n  this.right = 0;\n};","module.exports = createLayout;\nmodule.exports.simulator = require('ngraph.physics.simulator');\n\nvar eventify = require('ngraph.events');\n/**\n * Creates force based layout for a given graph.\n *\n * @param {ngraph.graph} graph which needs to be laid out\n * @param {object} physicsSettings if you need custom settings\n * for physics simulator you can pass your own settings here. If it's not passed\n * a default one will be created.\n */\n\n\nfunction createLayout(graph, physicsSettings) {\n  if (!graph) {\n    throw new Error('Graph structure cannot be undefined');\n  }\n\n  var createSimulator = require('ngraph.physics.simulator');\n\n  var physicsSimulator = createSimulator(physicsSettings);\n  var nodeMass = defaultNodeMass;\n\n  if (physicsSettings && typeof physicsSettings.nodeMass === 'function') {\n    nodeMass = physicsSettings.nodeMass;\n  }\n\n  var nodeBodies = new Map();\n  var springs = {};\n  var bodiesCount = 0;\n  var springTransform = physicsSimulator.settings.springTransform || noop; // Initialize physics with what we have in the graph:\n\n  initPhysics();\n  listenToEvents();\n  var wasStable = false;\n  var api = {\n    /**\n     * Performs one step of iterative layout algorithm\n     *\n     * @returns {boolean} true if the system should be considered stable; False otherwise.\n     * The system is stable if no further call to `step()` can improve the layout.\n     */\n    step: function step() {\n      if (bodiesCount === 0) return true; // TODO: This will never fire 'stable'\n\n      var lastMove = physicsSimulator.step(); // Save the movement in case if someone wants to query it in the step\n      // callback.\n\n      api.lastMove = lastMove; // Allow listeners to perform low-level actions after nodes are updated.\n\n      api.fire('step');\n      var ratio = lastMove / bodiesCount;\n      var isStableNow = ratio <= 0.01; // TODO: The number is somewhat arbitrary...\n\n      if (wasStable !== isStableNow) {\n        wasStable = isStableNow;\n        onStableChanged(isStableNow);\n      }\n\n      return isStableNow;\n    },\n\n    /**\n     * For a given `nodeId` returns position\n     */\n    getNodePosition: function getNodePosition(nodeId) {\n      return getInitializedBody(nodeId).pos;\n    },\n\n    /**\n     * Sets position of a node to a given coordinates\n     * @param {string} nodeId node identifier\n     * @param {number} x position of a node\n     * @param {number} y position of a node\n     * @param {number=} z position of node (only if applicable to body)\n     */\n    setNodePosition: function setNodePosition(nodeId) {\n      var body = getInitializedBody(nodeId);\n      body.setPosition.apply(body, Array.prototype.slice.call(arguments, 1));\n      physicsSimulator.invalidateBBox();\n    },\n\n    /**\n     * @returns {Object} Link position by link id\n     * @returns {Object.from} {x, y} coordinates of link start\n     * @returns {Object.to} {x, y} coordinates of link end\n     */\n    getLinkPosition: function getLinkPosition(linkId) {\n      var spring = springs[linkId];\n\n      if (spring) {\n        return {\n          from: spring.from.pos,\n          to: spring.to.pos\n        };\n      }\n    },\n\n    /**\n     * @returns {Object} area required to fit in the graph. Object contains\n     * `x1`, `y1` - top left coordinates\n     * `x2`, `y2` - bottom right coordinates\n     */\n    getGraphRect: function getGraphRect() {\n      return physicsSimulator.getBBox();\n    },\n\n    /**\n     * Iterates over each body in the layout simulator and performs a callback(body, nodeId)\n     */\n    forEachBody: forEachBody,\n\n    /*\n     * Requests layout algorithm to pin/unpin node to its current position\n     * Pinned nodes should not be affected by layout algorithm and always\n     * remain at their position\n     */\n    pinNode: function pinNode(node, isPinned) {\n      var body = getInitializedBody(node.id);\n      body.isPinned = !!isPinned;\n    },\n\n    /**\n     * Checks whether given graph's node is currently pinned\n     */\n    isNodePinned: function isNodePinned(node) {\n      return getInitializedBody(node.id).isPinned;\n    },\n\n    /**\n     * Request to release all resources\n     */\n    dispose: function dispose() {\n      graph.off('changed', onGraphChanged);\n      api.fire('disposed');\n    },\n\n    /**\n     * Gets physical body for a given node id. If node is not found undefined\n     * value is returned.\n     */\n    getBody: getBody,\n\n    /**\n     * Gets spring for a given edge.\n     *\n     * @param {string} linkId link identifer. If two arguments are passed then\n     * this argument is treated as formNodeId\n     * @param {string=} toId when defined this parameter denotes head of the link\n     * and first argument is treated as tail of the link (fromId)\n     */\n    getSpring: getSpring,\n\n    /**\n     * [Read only] Gets current physics simulator\n     */\n    simulator: physicsSimulator,\n\n    /**\n     * Gets the graph that was used for layout\n     */\n    graph: graph,\n\n    /**\n     * Gets amount of movement performed during last step operation\n     */\n    lastMove: 0\n  };\n  eventify(api);\n  return api;\n\n  function forEachBody(cb) {\n    nodeBodies.forEach(function (body, bodyId) {\n      cb(body, bodyId);\n    });\n  }\n\n  function getSpring(fromId, toId) {\n    var linkId;\n\n    if (toId === undefined) {\n      if (typeof fromId !== 'object') {\n        // assume fromId as a linkId:\n        linkId = fromId;\n      } else {\n        // assume fromId to be a link object:\n        linkId = fromId.id;\n      }\n    } else {\n      // toId is defined, should grab link:\n      var link = graph.hasLink(fromId, toId);\n      if (!link) return;\n      linkId = link.id;\n    }\n\n    return springs[linkId];\n  }\n\n  function getBody(nodeId) {\n    return nodeBodies.get(nodeId);\n  }\n\n  function listenToEvents() {\n    graph.on('changed', onGraphChanged);\n  }\n\n  function onStableChanged(isStable) {\n    api.fire('stable', isStable);\n  }\n\n  function onGraphChanged(changes) {\n    for (var i = 0; i < changes.length; ++i) {\n      var change = changes[i];\n\n      if (change.changeType === 'add') {\n        if (change.node) {\n          initBody(change.node.id);\n        }\n\n        if (change.link) {\n          initLink(change.link);\n        }\n      } else if (change.changeType === 'remove') {\n        if (change.node) {\n          releaseNode(change.node);\n        }\n\n        if (change.link) {\n          releaseLink(change.link);\n        }\n      }\n    }\n\n    bodiesCount = graph.getNodesCount();\n  }\n\n  function initPhysics() {\n    bodiesCount = 0;\n    graph.forEachNode(function (node) {\n      initBody(node.id);\n      bodiesCount += 1;\n    });\n    graph.forEachLink(initLink);\n  }\n\n  function initBody(nodeId) {\n    var body = nodeBodies.get(nodeId);\n\n    if (!body) {\n      var node = graph.getNode(nodeId);\n\n      if (!node) {\n        throw new Error('initBody() was called with unknown node id');\n      }\n\n      var pos = node.position;\n\n      if (!pos) {\n        var neighbors = getNeighborBodies(node);\n        pos = physicsSimulator.getBestNewBodyPosition(neighbors);\n      }\n\n      body = physicsSimulator.addBodyAt(pos);\n      body.id = nodeId;\n      nodeBodies.set(nodeId, body);\n      updateBodyMass(nodeId);\n\n      if (isNodeOriginallyPinned(node)) {\n        body.isPinned = true;\n      }\n    }\n  }\n\n  function releaseNode(node) {\n    var nodeId = node.id;\n    var body = nodeBodies.get(nodeId);\n\n    if (body) {\n      nodeBodies.delete(nodeId);\n      physicsSimulator.removeBody(body);\n    }\n  }\n\n  function initLink(link) {\n    updateBodyMass(link.fromId);\n    updateBodyMass(link.toId);\n    var fromBody = nodeBodies.get(link.fromId),\n        toBody = nodeBodies.get(link.toId),\n        spring = physicsSimulator.addSpring(fromBody, toBody, link.length);\n    springTransform(link, spring);\n    springs[link.id] = spring;\n  }\n\n  function releaseLink(link) {\n    var spring = springs[link.id];\n\n    if (spring) {\n      var from = graph.getNode(link.fromId),\n          to = graph.getNode(link.toId);\n      if (from) updateBodyMass(from.id);\n      if (to) updateBodyMass(to.id);\n      delete springs[link.id];\n      physicsSimulator.removeSpring(spring);\n    }\n  }\n\n  function getNeighborBodies(node) {\n    // TODO: Could probably be done better on memory\n    var neighbors = [];\n\n    if (!node.links) {\n      return neighbors;\n    }\n\n    var maxNeighbors = Math.min(node.links.length, 2);\n\n    for (var i = 0; i < maxNeighbors; ++i) {\n      var link = node.links[i];\n      var otherBody = link.fromId !== node.id ? nodeBodies.get(link.fromId) : nodeBodies.get(link.toId);\n\n      if (otherBody && otherBody.pos) {\n        neighbors.push(otherBody);\n      }\n    }\n\n    return neighbors;\n  }\n\n  function updateBodyMass(nodeId) {\n    var body = nodeBodies.get(nodeId);\n    body.mass = nodeMass(nodeId);\n\n    if (Number.isNaN(body.mass)) {\n      throw new Error('Node mass should be a number');\n    }\n  }\n  /**\n   * Checks whether graph node has in its settings pinned attribute,\n   * which means layout algorithm cannot move it. Node can be marked\n   * as pinned, if it has \"isPinned\" attribute, or when node.data has it.\n   *\n   * @param {Object} node a graph node to check\n   * @return {Boolean} true if node should be treated as pinned; false otherwise.\n   */\n\n\n  function isNodeOriginallyPinned(node) {\n    return node && (node.isPinned || node.data && node.data.isPinned);\n  }\n\n  function getInitializedBody(nodeId) {\n    var body = nodeBodies.get(nodeId);\n\n    if (!body) {\n      initBody(nodeId);\n      body = nodeBodies.get(nodeId);\n    }\n\n    return body;\n  }\n  /**\n   * Calculates mass of a body, which corresponds to node with given id.\n   *\n   * @param {String|Number} nodeId identifier of a node, for which body mass needs to be calculated\n   * @returns {Number} recommended mass of the body;\n   */\n\n\n  function defaultNodeMass(nodeId) {\n    var links = graph.getLinks(nodeId);\n    if (!links) return 1;\n    return 1 + links.length / 3.0;\n  }\n}\n\nfunction noop() {}","module.exports = {\n  Body: Body,\n  Vector2d: Vector2d,\n  Body3d: Body3d,\n  Vector3d: Vector3d\n};\n\nfunction Body(x, y) {\n  this.pos = new Vector2d(x, y);\n  this.prevPos = new Vector2d(x, y);\n  this.force = new Vector2d();\n  this.velocity = new Vector2d();\n  this.mass = 1;\n}\n\nBody.prototype.setPosition = function (x, y) {\n  this.prevPos.x = this.pos.x = x;\n  this.prevPos.y = this.pos.y = y;\n};\n\nfunction Vector2d(x, y) {\n  if (x && typeof x !== 'number') {\n    // could be another vector\n    this.x = typeof x.x === 'number' ? x.x : 0;\n    this.y = typeof x.y === 'number' ? x.y : 0;\n  } else {\n    this.x = typeof x === 'number' ? x : 0;\n    this.y = typeof y === 'number' ? y : 0;\n  }\n}\n\nVector2d.prototype.reset = function () {\n  this.x = this.y = 0;\n};\n\nfunction Body3d(x, y, z) {\n  this.pos = new Vector3d(x, y, z);\n  this.prevPos = new Vector3d(x, y, z);\n  this.force = new Vector3d();\n  this.velocity = new Vector3d();\n  this.mass = 1;\n}\n\nBody3d.prototype.setPosition = function (x, y, z) {\n  this.prevPos.x = this.pos.x = x;\n  this.prevPos.y = this.pos.y = y;\n  this.prevPos.z = this.pos.z = z;\n};\n\nfunction Vector3d(x, y, z) {\n  if (x && typeof x !== 'number') {\n    // could be another vector\n    this.x = typeof x.x === 'number' ? x.x : 0;\n    this.y = typeof x.y === 'number' ? x.y : 0;\n    this.z = typeof x.z === 'number' ? x.z : 0;\n  } else {\n    this.x = typeof x === 'number' ? x : 0;\n    this.y = typeof y === 'number' ? y : 0;\n    this.z = typeof z === 'number' ? z : 0;\n  }\n}\n\n;\n\nVector3d.prototype.reset = function () {\n  this.x = this.y = this.z = 0;\n};","export default function (x, y, z) {\n  var nodes;\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n  if (z == null) z = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0,\n        sz = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x || 0, sy += node.y || 0, sz += node.z || 0;\n    }\n\n    for (sx = sx / n - x, sy = sy / n - y, sz = sz / n - z, i = 0; i < n; ++i) {\n      node = nodes[i];\n\n      if (sx) {\n        node.x -= sx;\n      }\n\n      if (sy) {\n        node.y -= sy;\n      }\n\n      if (sz) {\n        node.z -= sz;\n      }\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.z = function (_) {\n    return arguments.length ? (z = +_, force) : z;\n  };\n\n  return force;\n}","export default function (d) {\n  var x = +this._x.call(null, d);\n  return add(this.cover(x), x, d);\n}\n\nfunction add(tree, x, d) {\n  if (isNaN(x)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {\n    data: d\n  },\n      x0 = tree._x0,\n      x1 = tree._x1,\n      xm,\n      xp,\n      right,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return tree._root = leaf, tree; // Find the existing leaf for the new point, or add it.\n\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (parent = node, !(node = node[i = +right])) return parent[i] = leaf, tree;\n  } // Is the new point is exactly coincident with the existing point?\n\n\n  xp = +tree._x.call(null, node.data);\n  if (x === xp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree; // Otherwise, split the leaf node until the old and new point are separated.\n\n  do {\n    parent = parent ? parent[i] = new Array(2) : tree._root = new Array(2);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n  } while ((i = +right) === (j = +(xp >= xm)));\n\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var i,\n      n = data.length,\n      x,\n      xz = new Array(n),\n      x0 = Infinity,\n      x1 = -Infinity; // Compute the points and their extent.\n\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, data[i]))) continue;\n    xz[i] = x;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n  } // If there were no (valid) points, inherit the existing extent.\n\n\n  if (x1 < x0) x0 = this._x0, x1 = this._x1; // Expand the tree to cover the new points.\n\n  this.cover(x0).cover(x1); // Add the new points.\n\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], data[i]);\n  }\n\n  return this;\n}","export default function (x) {\n  if (isNaN(x = +x)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      x1 = this._x1; // If the binarytree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing half boundaries dont change due to floating point error!\n\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n  } // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1) {\n      var z = x1 - x0,\n          node = this._root,\n          parent,\n          i;\n\n      switch (i = +(x < (x0 + x1) / 2)) {\n        case 0:\n          {\n            do {\n              parent = new Array(2), parent[i] = node, node = parent;\n            } while ((z *= 2, x1 = x0 + z, x > x1));\n\n            break;\n          }\n\n        case 1:\n          {\n            do {\n              parent = new Array(2), parent[i] = node, node = parent;\n            } while ((z *= 2, x0 = x1 - z, x0 > x));\n\n            break;\n          }\n      }\n\n      if (this._root && this._root.length) this._root = node;\n    } // If the binarytree covers the point already, just return.\n    else return this;\n\n  this._x0 = x0;\n  this._x1 = x1;\n  return this;\n}","export default function (node, x0, x1) {\n  this.node = node;\n  this.x0 = x0;\n  this.x1 = x1;\n}","export function defaultX(d) {\n  return d[0];\n}\nexport default function (_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}","import tree_add, { addAll as tree_addAll } from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, { removeAll as tree_removeAll } from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, { defaultX } from \"./x\";\nexport default function binarytree(nodes, x) {\n  var tree = new Binarytree(x == null ? defaultX : x, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Binarytree(x, x0, x1) {\n  this._x = x;\n  this._x0 = x0;\n  this._x1 = x1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {\n    data: leaf.data\n  },\n      next = copy;\n\n  while (leaf = leaf.next) {\n    next = next.next = {\n      data: leaf.data\n    };\n  }\n\n  return copy;\n}\n\nvar treeProto = binarytree.prototype = Binarytree.prototype;\n\ntreeProto.copy = function () {\n  var copy = new Binarytree(this._x, this._x0, this._x1),\n      node = this._root,\n      nodes,\n      child;\n  if (!node) return copy;\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n  nodes = [{\n    source: node,\n    target: copy._root = new Array(2)\n  }];\n\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 2; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({\n          source: child,\n          target: node.target[i] = new Array(2)\n        });else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;","export default function () {\n  var data = [];\n  this.visit(function (node) {\n    if (!node.length) do {\n      data.push(node.data);\n    } while (node = node.next);\n  });\n  return data;\n}","export default function (_) {\n  return arguments.length ? this.cover(+_[0][0]).cover(+_[1][0]) : isNaN(this._x0) ? undefined : [[this._x0], [this._x1]];\n}","import Half from \"./half\";\nexport default function (x, radius) {\n  var data,\n      x0 = this._x0,\n      x1,\n      x2,\n      x3 = this._x1,\n      halves = [],\n      node = this._root,\n      q,\n      i;\n  if (node) halves.push(new Half(node, x0, x3));\n  if (radius == null) radius = Infinity;else {\n    x0 = x - radius;\n    x3 = x + radius;\n  }\n\n  while (q = halves.pop()) {\n    // Stop searching if this half cant contain a closer node.\n    if (!(node = q.node) || (x1 = q.x0) > x3 || (x2 = q.x1) < x0) continue; // Bisect the current half.\n\n    if (node.length) {\n      var xm = (x1 + x2) / 2;\n      halves.push(new Half(node[1], xm, x2), new Half(node[0], x1, xm)); // Visit the closest half first.\n\n      if (i = +(x >= xm)) {\n        q = halves[halves.length - 1];\n        halves[halves.length - 1] = halves[halves.length - 1 - i];\n        halves[halves.length - 1 - i] = q;\n      }\n    } // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n        var d = Math.abs(x - +this._x.call(null, node.data));\n\n        if (d < radius) {\n          radius = d;\n          x0 = x - d;\n          x3 = x + d;\n          data = node.data;\n        }\n      }\n  }\n\n  return data;\n}","export default function (d) {\n  if (isNaN(x = +this._x.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      x1 = this._x1,\n      x,\n      xm,\n      right,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return this; // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (!(parent = node, node = node[i = +right])) return this;\n    if (!node.length) break;\n    if (parent[i + 1 & 1]) retainer = parent, j = i;\n  } // Find the point to remove.\n\n  while (node.data !== d) {\n    if (!(previous = node, node = node.next)) return this;\n  }\n\n  if (next = node.next) delete node.next; // If there are multiple coincident points, remove just the point.\n\n  if (previous) return next ? previous.next = next : delete previous.next, this; // If this is the root point, remove it.\n\n  if (!parent) return this._root = next, this; // Remove this leaf.\n\n  next ? parent[i] = next : delete parent[i]; // If the parent now contains exactly one leaf, collapse superfluous parents.\n\n  if ((node = parent[0] || parent[1]) && node === (parent[1] || parent[0]) && !node.length) {\n    if (retainer) retainer[j] = node;else this._root = node;\n  }\n\n  return this;\n}\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) {\n    this.remove(data[i]);\n  }\n\n  return this;\n}","export default function () {\n  return this._root;\n}","export default function () {\n  var size = 0;\n  this.visit(function (node) {\n    if (!node.length) do {\n      ++size;\n    } while (node = node.next);\n  });\n  return size;\n}","import Half from \"./half\";\nexport default function (callback) {\n  var halves = [],\n      q,\n      node = this._root,\n      child,\n      x0,\n      x1;\n  if (node) halves.push(new Half(node, this._x0, this._x1));\n\n  while (q = halves.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, x1 = q.x1) && node.length) {\n      var xm = (x0 + x1) / 2;\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n    }\n  }\n\n  return this;\n}","import Half from \"./half\";\nexport default function (callback) {\n  var halves = [],\n      next = [],\n      q;\n  if (this._root) halves.push(new Half(this._root, this._x0, this._x1));\n\n  while (q = halves.pop()) {\n    var node = q.node;\n\n    if (node.length) {\n      var child,\n          x0 = q.x0,\n          x1 = q.x1,\n          xm = (x0 + x1) / 2;\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n    }\n\n    next.push(q);\n  }\n\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.x1);\n  }\n\n  return this;\n}","export default function (d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d),\n      z = +this._z.call(null, d);\n  return add(this.cover(x, y, z), x, y, z, d);\n}\n\nfunction add(tree, x, y, z, d) {\n  if (isNaN(x) || isNaN(y) || isNaN(z)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {\n    data: d\n  },\n      x0 = tree._x0,\n      y0 = tree._y0,\n      z0 = tree._z0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      z1 = tree._z1,\n      xm,\n      ym,\n      zm,\n      xp,\n      yp,\n      zp,\n      right,\n      bottom,\n      deep,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return tree._root = leaf, tree; // Find the existing leaf for the new point, or add it.\n\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm;else z1 = zm;\n    if (parent = node, !(node = node[i = deep << 2 | bottom << 1 | right])) return parent[i] = leaf, tree;\n  } // Is the new point is exactly coincident with the existing point?\n\n\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  zp = +tree._z.call(null, node.data);\n  if (x === xp && y === yp && z === zp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree; // Otherwise, split the leaf node until the old and new point are separated.\n\n  do {\n    parent = parent ? parent[i] = new Array(8) : tree._root = new Array(8);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm;else z1 = zm;\n  } while ((i = deep << 2 | bottom << 1 | right) === (j = (zp >= zm) << 2 | (yp >= ym) << 1 | xp >= xm));\n\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d,\n      i,\n      n = data.length,\n      x,\n      y,\n      z,\n      xz = new Array(n),\n      yz = new Array(n),\n      zz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      z0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity,\n      z1 = -Infinity; // Compute the points and their extent.\n\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    zz[i] = z;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n    if (z < z0) z0 = z;\n    if (z > z1) z1 = z;\n  } // If there were no (valid) points, inherit the existing extent.\n\n\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n  if (z1 < z0) z0 = this._z0, z1 = this._z1; // Expand the tree to cover the new points.\n\n  this.cover(x0, y0, z0).cover(x1, y1, z1); // Add the new points.\n\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], zz[i], data[i]);\n  }\n\n  return this;\n}","export default function (x, y, z) {\n  if (isNaN(x = +x) || isNaN(y = +y) || isNaN(z = +z)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1; // If the octree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing octant boundaries dont change due to floating point error!\n\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n    z1 = (z0 = Math.floor(z)) + 1;\n  } // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1 || z0 > z || z > z1) {\n      var t = x1 - x0,\n          node = this._root,\n          parent,\n          i;\n\n      switch (i = (z < (z0 + z1) / 2) << 2 | (y < (y0 + y1) / 2) << 1 | x < (x0 + x1) / 2) {\n        case 0:\n          {\n            do {\n              parent = new Array(8), parent[i] = node, node = parent;\n            } while ((t *= 2, x1 = x0 + t, y1 = y0 + t, z1 = z0 + t, x > x1 || y > y1 || z > z1));\n\n            break;\n          }\n\n        case 1:\n          {\n            do {\n              parent = new Array(8), parent[i] = node, node = parent;\n            } while ((t *= 2, x0 = x1 - t, y1 = y0 + t, z1 = z0 + t, x0 > x || y > y1 || z > z1));\n\n            break;\n          }\n\n        case 2:\n          {\n            do {\n              parent = new Array(8), parent[i] = node, node = parent;\n            } while ((t *= 2, x1 = x0 + t, y0 = y1 - t, z1 = z0 + t, x > x1 || y0 > y || z > z1));\n\n            break;\n          }\n\n        case 3:\n          {\n            do {\n              parent = new Array(8), parent[i] = node, node = parent;\n            } while ((t *= 2, x0 = x1 - t, y0 = y1 - t, z1 = z0 + t, x0 > x || y0 > y || z > z1));\n\n            break;\n          }\n\n        case 4:\n          {\n            do {\n              parent = new Array(8), parent[i] = node, node = parent;\n            } while ((t *= 2, x1 = x0 + t, y1 = y0 + t, z0 = z1 - t, x > x1 || y > y1 || z0 > z));\n\n            break;\n          }\n\n        case 5:\n          {\n            do {\n              parent = new Array(8), parent[i] = node, node = parent;\n            } while ((t *= 2, x0 = x1 - t, y1 = y0 + t, z0 = z1 - t, x0 > x || y > y1 || z0 > z));\n\n            break;\n          }\n\n        case 6:\n          {\n            do {\n              parent = new Array(8), parent[i] = node, node = parent;\n            } while ((t *= 2, x1 = x0 + t, y0 = y1 - t, z0 = z1 - t, x > x1 || y0 > y || z0 > z));\n\n            break;\n          }\n\n        case 7:\n          {\n            do {\n              parent = new Array(8), parent[i] = node, node = parent;\n            } while ((t *= 2, x0 = x1 - t, y0 = y1 - t, z0 = z1 - t, x0 > x || y0 > y || z0 > z));\n\n            break;\n          }\n      }\n\n      if (this._root && this._root.length) this._root = node;\n    } // If the octree covers the point already, just return.\n    else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  return this;\n}","export default function (node, x0, y0, z0, x1, y1, z1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.z0 = z0;\n  this.x1 = x1;\n  this.y1 = y1;\n  this.z1 = z1;\n}","export function defaultX(d) {\n  return d[0];\n}\nexport default function (_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}","export function defaultY(d) {\n  return d[1];\n}\nexport default function (_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}","export function defaultZ(d) {\n  return d[2];\n}\nexport default function (_) {\n  return arguments.length ? (this._z = _, this) : this._z;\n}","import tree_add, { addAll as tree_addAll } from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, { removeAll as tree_removeAll } from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, { defaultX } from \"./x\";\nimport tree_y, { defaultY } from \"./y\";\nimport tree_z, { defaultZ } from \"./z\";\nexport default function octree(nodes, x, y, z) {\n  var tree = new Octree(x == null ? defaultX : x, y == null ? defaultY : y, z == null ? defaultZ : z, NaN, NaN, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Octree(x, y, z, x0, y0, z0, x1, y1, z1) {\n  this._x = x;\n  this._y = y;\n  this._z = z;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {\n    data: leaf.data\n  },\n      next = copy;\n\n  while (leaf = leaf.next) {\n    next = next.next = {\n      data: leaf.data\n    };\n  }\n\n  return copy;\n}\n\nvar treeProto = octree.prototype = Octree.prototype;\n\ntreeProto.copy = function () {\n  var copy = new Octree(this._x, this._y, this._z, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1),\n      node = this._root,\n      nodes,\n      child;\n  if (!node) return copy;\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n  nodes = [{\n    source: node,\n    target: copy._root = new Array(8)\n  }];\n\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 8; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({\n          source: child,\n          target: node.target[i] = new Array(8)\n        });else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\ntreeProto.z = tree_z;","export default function () {\n  var data = [];\n  this.visit(function (node) {\n    if (!node.length) do {\n      data.push(node.data);\n    } while (node = node.next);\n  });\n  return data;\n}","export default function (_) {\n  return arguments.length ? this.cover(+_[0][0], +_[0][1], +_[0][2]).cover(+_[1][0], +_[1][1], +_[1][2]) : isNaN(this._x0) ? undefined : [[this._x0, this._y0, this._z0], [this._x1, this._y1, this._z1]];\n}","import Octant from \"./octant\";\nexport default function (x, y, z, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1,\n      y1,\n      z1,\n      x2,\n      y2,\n      z2,\n      x3 = this._x1,\n      y3 = this._y1,\n      z3 = this._z1,\n      octs = [],\n      node = this._root,\n      q,\n      i;\n  if (node) octs.push(new Octant(node, x0, y0, z0, x3, y3, z3));\n  if (radius == null) radius = Infinity;else {\n    x0 = x - radius, y0 = y - radius, z0 = z - radius;\n    x3 = x + radius, y3 = y + radius, z3 = z + radius;\n    radius *= radius;\n  }\n\n  while (q = octs.pop()) {\n    // Stop searching if this octant cant contain a closer node.\n    if (!(node = q.node) || (x1 = q.x0) > x3 || (y1 = q.y0) > y3 || (z1 = q.z0) > z3 || (x2 = q.x1) < x0 || (y2 = q.y1) < y0 || (z2 = q.z1) < z0) continue; // Bisect the current octant.\n\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2,\n          zm = (z1 + z2) / 2;\n      octs.push(new Octant(node[7], xm, ym, zm, x2, y2, z2), new Octant(node[6], x1, ym, zm, xm, y2, z2), new Octant(node[5], xm, y1, zm, x2, ym, z2), new Octant(node[4], x1, y1, zm, xm, ym, z2), new Octant(node[3], xm, ym, z1, x2, y2, zm), new Octant(node[2], x1, ym, z1, xm, y2, zm), new Octant(node[1], xm, y1, z1, x2, ym, zm), new Octant(node[0], x1, y1, z1, xm, ym, zm)); // Visit the closest octant first.\n\n      if (i = (z >= zm) << 2 | (y >= ym) << 1 | x >= xm) {\n        q = octs[octs.length - 1];\n        octs[octs.length - 1] = octs[octs.length - 1 - i];\n        octs[octs.length - 1 - i] = q;\n      }\n    } // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n        var dx = x - +this._x.call(null, node.data),\n            dy = y - +this._y.call(null, node.data),\n            dz = z - +this._z.call(null, node.data),\n            d2 = dx * dx + dy * dy + dz * dz;\n\n        if (d2 < radius) {\n          var d = Math.sqrt(radius = d2);\n          x0 = x - d, y0 = y - d, z0 = z - d;\n          x3 = x + d, y3 = y + d, z3 = z + d;\n          data = node.data;\n        }\n      }\n  }\n\n  return data;\n}","export default function (d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1,\n      x,\n      y,\n      z,\n      xm,\n      ym,\n      zm,\n      right,\n      bottom,\n      deep,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return this; // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm;else z1 = zm;\n    if (!(parent = node, node = node[i = deep << 2 | bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[i + 1 & 7] || parent[i + 2 & 7] || parent[i + 3 & 7] || parent[i + 4 & 7] || parent[i + 5 & 7] || parent[i + 6 & 7] || parent[i + 7 & 7]) retainer = parent, j = i;\n  } // Find the point to remove.\n\n  while (node.data !== d) {\n    if (!(previous = node, node = node.next)) return this;\n  }\n\n  if (next = node.next) delete node.next; // If there are multiple coincident points, remove just the point.\n\n  if (previous) return next ? previous.next = next : delete previous.next, this; // If this is the root point, remove it.\n\n  if (!parent) return this._root = next, this; // Remove this leaf.\n\n  next ? parent[i] = next : delete parent[i]; // If the parent now contains exactly one leaf, collapse superfluous parents.\n\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3] || parent[4] || parent[5] || parent[6] || parent[7]) && node === (parent[7] || parent[6] || parent[5] || parent[4] || parent[3] || parent[2] || parent[1] || parent[0]) && !node.length) {\n    if (retainer) retainer[j] = node;else this._root = node;\n  }\n\n  return this;\n}\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) {\n    this.remove(data[i]);\n  }\n\n  return this;\n}","export default function () {\n  return this._root;\n}","export default function () {\n  var size = 0;\n  this.visit(function (node) {\n    if (!node.length) do {\n      ++size;\n    } while (node = node.next);\n  });\n  return size;\n}","import Octant from \"./octant\";\nexport default function (callback) {\n  var octs = [],\n      q,\n      node = this._root,\n      child,\n      x0,\n      y0,\n      z0,\n      x1,\n      y1,\n      z1;\n  if (node) octs.push(new Octant(node, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n\n  while (q = octs.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1) && node.length) {\n      var xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2,\n          zm = (z0 + z1) / 2;\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n    }\n  }\n\n  return this;\n}","import Octant from \"./octant\";\nexport default function (callback) {\n  var octs = [],\n      next = [],\n      q;\n  if (this._root) octs.push(new Octant(this._root, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n\n  while (q = octs.pop()) {\n    var node = q.node;\n\n    if (node.length) {\n      var child,\n          x0 = q.x0,\n          y0 = q.y0,\n          z0 = q.z0,\n          x1 = q.x1,\n          y1 = q.y1,\n          z1 = q.z1,\n          xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2,\n          zm = (z0 + z1) / 2;\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n    }\n\n    next.push(q);\n  }\n\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.z0, q.x1, q.y1, q.z1);\n  }\n\n  return this;\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","export default function () {\n  return (Math.random() - 0.5) * 1e-6;\n}","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function (links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      nDim,\n      count,\n      bias,\n      iterations = 1;\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x = 0, y = 0, z = 0, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle();\n\n        if (nDim > 1) {\n          y = target.y + target.vy - source.y - source.vy || jiggle();\n        }\n\n        if (nDim > 2) {\n          z = target.z + target.vz - source.z - source.vz || jiggle();\n        }\n\n        l = Math.sqrt(x * x + y * y + z * z);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l, z *= l;\n        target.vx -= x * (b = bias[i]);\n\n        if (nDim > 1) {\n          target.vy -= y * b;\n        }\n\n        if (nDim > 2) {\n          target.vz -= z * b;\n        }\n\n        source.vx += x * (b = 1 - b);\n\n        if (nDim > 1) {\n          source.vy += y * b;\n        }\n\n        if (nDim > 2) {\n          source.vz += z * b;\n        }\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map(function (d, i) {\n      return [id(d, i, nodes), d];\n    })),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function (initNodes, numDimensions) {\n    nodes = initNodes;\n    nDim = numDimensions;\n    initialize();\n  };\n\n  force.links = function (_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function (_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function (_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function (_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}","import { dispatch } from \"d3-dispatch\";\nimport { timer } from \"d3-timer\";\nvar MAX_DIMENSIONS = 3;\nexport function x(d) {\n  return d.x;\n}\nexport function y(d) {\n  return d.y;\n}\nexport function z(d) {\n  return d.z;\n}\nvar initialRadius = 10,\n    initialAngleRoll = Math.PI * (3 - Math.sqrt(5)),\n    // Golden ratio angle\ninitialAngleYaw = Math.PI * 20 / (9 + Math.sqrt(221)); // Markov irrational number\n\nexport default function (_nodes, numDimensions) {\n  numDimensions = numDimensions || 2;\n\n  var nDim = Math.min(MAX_DIMENSIONS, Math.max(1, Math.round(numDimensions))),\n      simulation,\n      _alpha = 1,\n      _alphaMin = 0.001,\n      _alphaDecay = 1 - Math.pow(_alphaMin, 1 / 300),\n      _alphaTarget = 0,\n      _velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\");\n\n  if (_nodes == null) _nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n\n    if (_alpha < _alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i,\n        n = _nodes.length,\n        node;\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      _alpha += (_alphaTarget - _alpha) * _alphaDecay;\n      forces.forEach(function (force) {\n        force(_alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        if (node.fx == null) node.x += node.vx *= _velocityDecay;else node.x = node.fx, node.vx = 0;\n\n        if (nDim > 1) {\n          if (node.fy == null) node.y += node.vy *= _velocityDecay;else node.y = node.fy, node.vy = 0;\n        }\n\n        if (nDim > 2) {\n          if (node.fz == null) node.z += node.vz *= _velocityDecay;else node.z = node.fz, node.vz = 0;\n        }\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = _nodes.length, node; i < n; ++i) {\n      node = _nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (node.fz != null) node.z = node.fz;\n\n      if (isNaN(node.x) || nDim > 1 && isNaN(node.y) || nDim > 2 && isNaN(node.z)) {\n        var radius = initialRadius * (nDim > 2 ? Math.cbrt(i) : nDim > 1 ? Math.sqrt(i) : i),\n            rollAngle = i * initialAngleRoll,\n            yawAngle = i * initialAngleYaw;\n\n        if (nDim === 1) {\n          node.x = radius;\n        } else if (nDim === 2) {\n          node.x = radius * Math.cos(rollAngle);\n          node.y = radius * Math.sin(rollAngle);\n        } else {\n          // 3 dimensions: use spherical distribution along 2 irrational number angles\n          node.x = radius * Math.sin(rollAngle) * Math.cos(yawAngle);\n          node.y = radius * Math.cos(rollAngle);\n          node.z = radius * Math.sin(rollAngle) * Math.sin(yawAngle);\n        }\n      }\n\n      if (isNaN(node.vx) || nDim > 1 && isNaN(node.vy) || nDim > 2 && isNaN(node.vz)) {\n        node.vx = 0;\n\n        if (nDim > 1) {\n          node.vy = 0;\n        }\n\n        if (nDim > 2) {\n          node.vz = 0;\n        }\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(_nodes, nDim);\n    return force;\n  }\n\n  initializeNodes();\n  return simulation = {\n    tick: tick,\n    restart: function restart() {\n      return stepper.restart(step), simulation;\n    },\n    stop: function stop() {\n      return stepper.stop(), simulation;\n    },\n    numDimensions: function numDimensions(_) {\n      return arguments.length ? (nDim = Math.min(MAX_DIMENSIONS, Math.max(1, Math.round(_))), forces.forEach(initializeForce), simulation) : nDim;\n    },\n    nodes: function nodes(_) {\n      return arguments.length ? (_nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : _nodes;\n    },\n    alpha: function alpha(_) {\n      return arguments.length ? (_alpha = +_, simulation) : _alpha;\n    },\n    alphaMin: function alphaMin(_) {\n      return arguments.length ? (_alphaMin = +_, simulation) : _alphaMin;\n    },\n    alphaDecay: function alphaDecay(_) {\n      return arguments.length ? (_alphaDecay = +_, simulation) : +_alphaDecay;\n    },\n    alphaTarget: function alphaTarget(_) {\n      return arguments.length ? (_alphaTarget = +_, simulation) : _alphaTarget;\n    },\n    velocityDecay: function velocityDecay(_) {\n      return arguments.length ? (_velocityDecay = 1 - _, simulation) : 1 - _velocityDecay;\n    },\n    force: function force(name, _) {\n      return arguments.length > 1 ? (_ == null ? forces.delete(name) : forces.set(name, initializeForce(_)), simulation) : forces.get(name);\n    },\n    find: function find() {\n      var args = Array.prototype.slice.call(arguments);\n      var x = args.shift() || 0,\n          y = (nDim > 1 ? args.shift() : null) || 0,\n          z = (nDim > 2 ? args.shift() : null) || 0,\n          radius = args.shift() || Infinity;\n      var i = 0,\n          n = _nodes.length,\n          dx,\n          dy,\n          dz,\n          d2,\n          node,\n          closest;\n      radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        dx = x - node.x;\n        dy = y - (node.y || 0);\n        dz = z - (node.z || 0);\n        d2 = dx * dx + dy * dy + dz * dz;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n    on: function on(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}","import { binarytree } from \"d3-binarytree\";\nimport { quadtree } from \"d3-quadtree\";\nimport { octree } from \"d3-octree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport { x, y, z } from \"./simulation.js\";\nexport default function () {\n  var nodes,\n      nDim,\n      node,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i,\n        n = nodes.length,\n        tree = (nDim === 1 ? binarytree(nodes, x) : nDim === 2 ? quadtree(nodes, x, y) : nDim === 3 ? octree(nodes, x, y, z) : null).visitAfter(accumulate);\n\n    for (alpha = _, i = 0; i < n; ++i) {\n      node = nodes[i], tree.visit(apply);\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        node;\n    strengths = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n    }\n  }\n\n  function accumulate(treeNode) {\n    var strength = 0,\n        q,\n        c,\n        weight = 0,\n        x,\n        y,\n        z,\n        i;\n    var numChildren = treeNode.length; // For internal nodes, accumulate forces from children.\n\n    if (numChildren) {\n      for (x = y = z = i = 0; i < numChildren; ++i) {\n        if ((q = treeNode[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * (q.x || 0), y += c * (q.y || 0), z += c * (q.z || 0);\n        }\n      }\n\n      strength *= Math.sqrt(4 / numChildren); // scale accumulated strength according to number of dimensions\n\n      treeNode.x = x / weight;\n\n      if (nDim > 1) {\n        treeNode.y = y / weight;\n      }\n\n      if (nDim > 2) {\n        treeNode.z = z / weight;\n      }\n    } // For leaf nodes, accumulate forces from coincident nodes.\n    else {\n        q = treeNode;\n        q.x = q.data.x;\n\n        if (nDim > 1) {\n          q.y = q.data.y;\n        }\n\n        if (nDim > 2) {\n          q.z = q.data.z;\n        }\n\n        do {\n          strength += strengths[q.data.index];\n        } while (q = q.next);\n      }\n\n    treeNode.value = strength;\n  }\n\n  function apply(treeNode, x1, arg1, arg2, arg3) {\n    if (!treeNode.value) return true;\n    var x2 = [arg1, arg2, arg3][nDim - 1];\n    var x = treeNode.x - node.x,\n        y = nDim > 1 ? treeNode.y - node.y : 0,\n        z = nDim > 2 ? treeNode.z - node.z : 0,\n        w = x2 - x1,\n        l = x * x + y * y + z * z; // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(), l += x * x;\n        if (nDim > 1 && y === 0) y = jiggle(), l += y * y;\n        if (nDim > 2 && z === 0) z = jiggle(), l += z * z;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * treeNode.value * alpha / l;\n\n        if (nDim > 1) {\n          node.vy += y * treeNode.value * alpha / l;\n        }\n\n        if (nDim > 2) {\n          node.vz += z * treeNode.value * alpha / l;\n        }\n      }\n\n      return true;\n    } // Otherwise, process points directly.\n    else if (treeNode.length || l >= distanceMax2) return; // Limit forces for very close nodes; randomize direction if coincident.\n\n\n    if (treeNode.data !== node || treeNode.next) {\n      if (x === 0) x = jiggle(), l += x * x;\n      if (nDim > 1 && y === 0) y = jiggle(), l += y * y;\n      if (nDim > 2 && z === 0) z = jiggle(), l += z * z;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do {\n      if (treeNode.data !== node) {\n        w = strengths[treeNode.data.index] * alpha / l;\n        node.vx += x * w;\n\n        if (nDim > 1) {\n          node.vy += y * w;\n        }\n\n        if (nDim > 2) {\n          node.vz += z * w;\n        }\n      }\n    } while (treeNode = treeNode.next);\n  }\n\n  force.initialize = function (initNodes, numDimensions) {\n    nodes = initNodes;\n    nDim = numDimensions;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function (_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function (_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function (_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}","import constant from \"./constant.js\";\nexport default function (radius, x, y, z) {\n  var nodes,\n      nDim,\n      strength = constant(0.1),\n      strengths,\n      radiuses;\n  if (typeof radius !== \"function\") radius = constant(+radius);\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n  if (z == null) z = 0;\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length; i < n; ++i) {\n      var node = nodes[i],\n          dx = node.x - x || 1e-6,\n          dy = (node.y || 0) - y || 1e-6,\n          dz = (node.z || 0) - z || 1e-6,\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz),\n          k = (radiuses[i] - r) * strengths[i] * alpha / r;\n      node.vx += dx * k;\n\n      if (nDim > 1) {\n        node.vy += dy * k;\n      }\n\n      if (nDim > 2) {\n        node.vz += dz * k;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    radiuses = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      radiuses[i] = +radius(nodes[i], i, nodes);\n      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (initNodes, numDimensions) {\n    nodes = initNodes;\n    nDim = numDimensions;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.z = function (_) {\n    return arguments.length ? (z = +_, force) : z;\n  };\n\n  return force;\n}","/**\n  A javascript Bezier curve library by Pomax.\n\n  Based on http://pomax.github.io/bezierinfo\n\n  This code is MIT licensed.\n**/\n(function () {\n  \"use strict\"; // math-inlining.\n\n  var abs = Math.abs,\n      min = Math.min,\n      max = Math.max,\n      cos = Math.cos,\n      sin = Math.sin,\n      acos = Math.acos,\n      sqrt = Math.sqrt,\n      pi = Math.PI,\n      // a zero coordinate, which is surprisingly useful\n  ZERO = {\n    x: 0,\n    y: 0,\n    z: 0\n  }; // quite needed\n\n  var utils = require(\"./utils.js\"); // only used for outlines atm.\n\n\n  var PolyBezier = require(\"./poly-bezier.js\");\n  /**\n   * Bezier curve constructor. The constructor argument can be one of three things:\n   *\n   * 1. array/4 of {x:..., y:..., z:...}, z optional\n   * 2. numerical array/8 ordered x1,y1,x2,y2,x3,y3,x4,y4\n   * 3. numerical array/12 ordered x1,y1,z1,x2,y2,z2,x3,y3,z3,x4,y4,z4\n   *\n   */\n\n\n  var Bezier = function Bezier(coords) {\n    var args = coords && coords.forEach ? coords : [].slice.call(arguments);\n    var coordlen = false;\n\n    if (typeof args[0] === \"object\") {\n      coordlen = args.length;\n      var newargs = [];\n      args.forEach(function (point) {\n        [\"x\", \"y\", \"z\"].forEach(function (d) {\n          if (typeof point[d] !== \"undefined\") {\n            newargs.push(point[d]);\n          }\n        });\n      });\n      args = newargs;\n    }\n\n    var higher = false;\n    var len = args.length;\n\n    if (coordlen) {\n      if (coordlen > 4) {\n        if (arguments.length !== 1) {\n          throw new Error(\"Only new Bezier(point[]) is accepted for 4th and higher order curves\");\n        }\n\n        higher = true;\n      }\n    } else {\n      if (len !== 6 && len !== 8 && len !== 9 && len !== 12) {\n        if (arguments.length !== 1) {\n          throw new Error(\"Only new Bezier(point[]) is accepted for 4th and higher order curves\");\n        }\n      }\n    }\n\n    var _3d = !higher && (len === 9 || len === 12) || coords && coords[0] && typeof coords[0].z !== \"undefined\";\n\n    this._3d = _3d;\n    var points = [];\n\n    for (var idx = 0, step = _3d ? 3 : 2; idx < len; idx += step) {\n      var point = {\n        x: args[idx],\n        y: args[idx + 1]\n      };\n\n      if (_3d) {\n        point.z = args[idx + 2];\n      }\n\n      points.push(point);\n    }\n\n    this.order = points.length - 1;\n    this.points = points;\n    var dims = [\"x\", \"y\"];\n    if (_3d) dims.push(\"z\");\n    this.dims = dims;\n    this.dimlen = dims.length;\n\n    (function (curve) {\n      var order = curve.order;\n      var points = curve.points;\n      var a = utils.align(points, {\n        p1: points[0],\n        p2: points[order]\n      });\n\n      for (var i = 0; i < a.length; i++) {\n        if (abs(a[i].y) > 0.0001) {\n          curve._linear = false;\n          return;\n        }\n      }\n\n      curve._linear = true;\n    })(this);\n\n    this._t1 = 0;\n    this._t2 = 1;\n    this.update();\n  };\n\n  var svgToBeziers = require(\"./svg-to-beziers\");\n  /**\n   * turn an svg <path> d attribute into a sequence of Bezier segments.\n   */\n\n\n  Bezier.SVGtoBeziers = function (d) {\n    return svgToBeziers(Bezier, d);\n  };\n\n  function getABC(n, S, B, E, t) {\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    }\n\n    var u = utils.projectionratio(t, n),\n        um = 1 - u,\n        C = {\n      x: u * S.x + um * E.x,\n      y: u * S.y + um * E.y\n    },\n        s = utils.abcratio(t, n),\n        A = {\n      x: B.x + (B.x - C.x) / s,\n      y: B.y + (B.y - C.y) / s\n    };\n    return {\n      A: A,\n      B: B,\n      C: C\n    };\n  }\n\n  Bezier.quadraticFromPoints = function (p1, p2, p3, t) {\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    } // shortcuts, although they're really dumb\n\n\n    if (t === 0) {\n      return new Bezier(p2, p2, p3);\n    }\n\n    if (t === 1) {\n      return new Bezier(p1, p2, p2);\n    } // real fitting.\n\n\n    var abc = getABC(2, p1, p2, p3, t);\n    return new Bezier(p1, abc.A, p3);\n  };\n\n  Bezier.cubicFromPoints = function (S, B, E, t, d1) {\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    }\n\n    var abc = getABC(3, S, B, E, t);\n\n    if (typeof d1 === \"undefined\") {\n      d1 = utils.dist(B, abc.C);\n    }\n\n    var d2 = d1 * (1 - t) / t;\n    var selen = utils.dist(S, E),\n        lx = (E.x - S.x) / selen,\n        ly = (E.y - S.y) / selen,\n        bx1 = d1 * lx,\n        by1 = d1 * ly,\n        bx2 = d2 * lx,\n        by2 = d2 * ly; // derivation of new hull coordinates\n\n    var e1 = {\n      x: B.x - bx1,\n      y: B.y - by1\n    },\n        e2 = {\n      x: B.x + bx2,\n      y: B.y + by2\n    },\n        A = abc.A,\n        v1 = {\n      x: A.x + (e1.x - A.x) / (1 - t),\n      y: A.y + (e1.y - A.y) / (1 - t)\n    },\n        v2 = {\n      x: A.x + (e2.x - A.x) / t,\n      y: A.y + (e2.y - A.y) / t\n    },\n        nc1 = {\n      x: S.x + (v1.x - S.x) / t,\n      y: S.y + (v1.y - S.y) / t\n    },\n        nc2 = {\n      x: E.x + (v2.x - E.x) / (1 - t),\n      y: E.y + (v2.y - E.y) / (1 - t)\n    }; // ...done\n\n    return new Bezier(S, nc1, nc2, E);\n  };\n\n  var getUtils = function getUtils() {\n    return utils;\n  };\n\n  Bezier.getUtils = getUtils;\n  Bezier.PolyBezier = PolyBezier;\n  Bezier.prototype = {\n    getUtils: getUtils,\n    valueOf: function valueOf() {\n      return this.toString();\n    },\n    toString: function toString() {\n      return utils.pointsToString(this.points);\n    },\n    toSVG: function toSVG(relative) {\n      if (this._3d) return false;\n      var p = this.points,\n          x = p[0].x,\n          y = p[0].y,\n          s = [\"M\", x, y, this.order === 2 ? \"Q\" : \"C\"];\n\n      for (var i = 1, last = p.length; i < last; i++) {\n        s.push(p[i].x);\n        s.push(p[i].y);\n      }\n\n      return s.join(\" \");\n    },\n    setRatios: function setRatios(ratios) {\n      if (ratios.length !== this.points.length) {\n        throw new Error(\"incorrect number of ratio values\");\n      }\n\n      this.ratios = ratios;\n      this._lut = []; //  invalidate any precomputed LUT\n    },\n    verify: function verify() {\n      var print = this.coordDigest();\n\n      if (print !== this._print) {\n        this._print = print;\n        this.update();\n      }\n    },\n    coordDigest: function coordDigest() {\n      return this.points.map(function (c, pos) {\n        return '' + pos + c.x + c.y + (c.z ? c.z : 0);\n      }).join('');\n    },\n    update: function update(newprint) {\n      // invalidate any precomputed LUT\n      this._lut = [];\n      this.dpoints = utils.derive(this.points, this._3d);\n      this.computedirection();\n    },\n    computedirection: function computedirection() {\n      var points = this.points;\n      var angle = utils.angle(points[0], points[this.order], points[1]);\n      this.clockwise = angle > 0;\n    },\n    length: function length() {\n      return utils.length(this.derivative.bind(this));\n    },\n    _lut: [],\n    getLUT: function getLUT(steps) {\n      this.verify();\n      steps = steps || 100;\n\n      if (this._lut.length === steps) {\n        return this._lut;\n      }\n\n      this._lut = []; // We want a range from 0 to 1 inclusive, so\n      // we decrement and then use <= rather than <:\n\n      steps--;\n\n      for (var t = 0; t <= steps; t++) {\n        this._lut.push(this.compute(t / steps));\n      }\n\n      return this._lut;\n    },\n    on: function on(point, error) {\n      error = error || 5;\n      var lut = this.getLUT(),\n          hits = [],\n          c,\n          t = 0;\n\n      for (var i = 0; i < lut.length; i++) {\n        c = lut[i];\n\n        if (utils.dist(c, point) < error) {\n          hits.push(c);\n          t += i / lut.length;\n        }\n      }\n\n      if (!hits.length) return false;\n      return t /= hits.length;\n    },\n    project: function project(point) {\n      // step 1: coarse check\n      var LUT = this.getLUT(),\n          l = LUT.length - 1,\n          closest = utils.closest(LUT, point),\n          mdist = closest.mdist,\n          mpos = closest.mpos; // step 2: fine check\n\n      var ft,\n          t,\n          p,\n          d,\n          t1 = (mpos - 1) / l,\n          t2 = (mpos + 1) / l,\n          step = 0.1 / l;\n      mdist += 1;\n\n      for (t = t1, ft = t; t < t2 + step; t += step) {\n        p = this.compute(t);\n        d = utils.dist(point, p);\n\n        if (d < mdist) {\n          mdist = d;\n          ft = t;\n        }\n      }\n\n      p = this.compute(ft);\n      p.t = ft;\n      p.d = mdist;\n      return p;\n    },\n    get: function get(t) {\n      return this.compute(t);\n    },\n    point: function point(idx) {\n      return this.points[idx];\n    },\n    compute: function compute(t) {\n      if (this.ratios) return utils.computeWithRatios(t, this.points, this.ratios, this._3d);\n      return utils.compute(t, this.points, this._3d, this.ratios);\n    },\n    raise: function raise() {\n      var p = this.points,\n          np = [p[0]],\n          i,\n          k = p.length,\n          pi,\n          pim;\n\n      for (var i = 1; i < k; i++) {\n        pi = p[i];\n        pim = p[i - 1];\n        np[i] = {\n          x: (k - i) / k * pi.x + i / k * pim.x,\n          y: (k - i) / k * pi.y + i / k * pim.y\n        };\n      }\n\n      np[k] = p[k - 1];\n      return new Bezier(np);\n    },\n    derivative: function derivative(t) {\n      var mt = 1 - t,\n          a,\n          b,\n          c = 0,\n          p = this.dpoints[0];\n\n      if (this.order === 2) {\n        p = [p[0], p[1], ZERO];\n        a = mt;\n        b = t;\n      }\n\n      if (this.order === 3) {\n        a = mt * mt;\n        b = mt * t * 2;\n        c = t * t;\n      }\n\n      var ret = {\n        x: a * p[0].x + b * p[1].x + c * p[2].x,\n        y: a * p[0].y + b * p[1].y + c * p[2].y\n      };\n\n      if (this._3d) {\n        ret.z = a * p[0].z + b * p[1].z + c * p[2].z;\n      }\n\n      return ret;\n    },\n    curvature: function curvature(t) {\n      return utils.curvature(t, this.points, this._3d);\n    },\n    inflections: function inflections() {\n      return utils.inflections(this.points);\n    },\n    normal: function normal(t) {\n      return this._3d ? this.__normal3(t) : this.__normal2(t);\n    },\n    __normal2: function __normal2(t) {\n      var d = this.derivative(t);\n      var q = sqrt(d.x * d.x + d.y * d.y);\n      return {\n        x: -d.y / q,\n        y: d.x / q\n      };\n    },\n    __normal3: function __normal3(t) {\n      // see http://stackoverflow.com/questions/25453159\n      var r1 = this.derivative(t),\n          r2 = this.derivative(t + 0.01),\n          q1 = sqrt(r1.x * r1.x + r1.y * r1.y + r1.z * r1.z),\n          q2 = sqrt(r2.x * r2.x + r2.y * r2.y + r2.z * r2.z);\n      r1.x /= q1;\n      r1.y /= q1;\n      r1.z /= q1;\n      r2.x /= q2;\n      r2.y /= q2;\n      r2.z /= q2; // cross product\n\n      var c = {\n        x: r2.y * r1.z - r2.z * r1.y,\n        y: r2.z * r1.x - r2.x * r1.z,\n        z: r2.x * r1.y - r2.y * r1.x\n      };\n      var m = sqrt(c.x * c.x + c.y * c.y + c.z * c.z);\n      c.x /= m;\n      c.y /= m;\n      c.z /= m; // rotation matrix\n\n      var R = [c.x * c.x, c.x * c.y - c.z, c.x * c.z + c.y, c.x * c.y + c.z, c.y * c.y, c.y * c.z - c.x, c.x * c.z - c.y, c.y * c.z + c.x, c.z * c.z]; // normal vector:\n\n      var n = {\n        x: R[0] * r1.x + R[1] * r1.y + R[2] * r1.z,\n        y: R[3] * r1.x + R[4] * r1.y + R[5] * r1.z,\n        z: R[6] * r1.x + R[7] * r1.y + R[8] * r1.z\n      };\n      return n;\n    },\n    hull: function hull(t) {\n      var p = this.points,\n          _p = [],\n          pt,\n          q = [],\n          idx = 0,\n          i = 0,\n          l = 0;\n      q[idx++] = p[0];\n      q[idx++] = p[1];\n      q[idx++] = p[2];\n\n      if (this.order === 3) {\n        q[idx++] = p[3];\n      } // we lerp between all points at each iteration, until we have 1 point left.\n\n\n      while (p.length > 1) {\n        _p = [];\n\n        for (i = 0, l = p.length - 1; i < l; i++) {\n          pt = utils.lerp(t, p[i], p[i + 1]);\n          q[idx++] = pt;\n\n          _p.push(pt);\n        }\n\n        p = _p;\n      }\n\n      return q;\n    },\n    split: function split(t1, t2) {\n      // shortcuts\n      if (t1 === 0 && !!t2) {\n        return this.split(t2).left;\n      }\n\n      if (t2 === 1) {\n        return this.split(t1).right;\n      } // no shortcut: use \"de Casteljau\" iteration.\n\n\n      var q = this.hull(t1);\n      var result = {\n        left: this.order === 2 ? new Bezier([q[0], q[3], q[5]]) : new Bezier([q[0], q[4], q[7], q[9]]),\n        right: this.order === 2 ? new Bezier([q[5], q[4], q[2]]) : new Bezier([q[9], q[8], q[6], q[3]]),\n        span: q\n      }; // make sure we bind _t1/_t2 information!\n\n      result.left._t1 = utils.map(0, 0, 1, this._t1, this._t2);\n      result.left._t2 = utils.map(t1, 0, 1, this._t1, this._t2);\n      result.right._t1 = utils.map(t1, 0, 1, this._t1, this._t2);\n      result.right._t2 = utils.map(1, 0, 1, this._t1, this._t2); // if we have no t2, we're done\n\n      if (!t2) {\n        return result;\n      } // if we have a t2, split again:\n\n\n      t2 = utils.map(t2, t1, 1, 0, 1);\n      var subsplit = result.right.split(t2);\n      return subsplit.left;\n    },\n    extrema: function extrema() {\n      var dims = this.dims,\n          result = {},\n          roots = [],\n          p,\n          mfn;\n      dims.forEach(function (dim) {\n        mfn = function mfn(v) {\n          return v[dim];\n        };\n\n        p = this.dpoints[0].map(mfn);\n        result[dim] = utils.droots(p);\n\n        if (this.order === 3) {\n          p = this.dpoints[1].map(mfn);\n          result[dim] = result[dim].concat(utils.droots(p));\n        }\n\n        result[dim] = result[dim].filter(function (t) {\n          return t >= 0 && t <= 1;\n        });\n        roots = roots.concat(result[dim].sort(utils.numberSort));\n      }.bind(this));\n      roots = roots.sort(utils.numberSort).filter(function (v, idx) {\n        return roots.indexOf(v) === idx;\n      });\n      result.values = roots;\n      return result;\n    },\n    bbox: function bbox() {\n      var extrema = this.extrema(),\n          result = {};\n      this.dims.forEach(function (d) {\n        result[d] = utils.getminmax(this, d, extrema[d]);\n      }.bind(this));\n      return result;\n    },\n    overlaps: function overlaps(curve) {\n      var lbbox = this.bbox(),\n          tbbox = curve.bbox();\n      return utils.bboxoverlap(lbbox, tbbox);\n    },\n    offset: function offset(t, d) {\n      if (typeof d !== \"undefined\") {\n        var c = this.get(t);\n        var n = this.normal(t);\n        var ret = {\n          c: c,\n          n: n,\n          x: c.x + n.x * d,\n          y: c.y + n.y * d\n        };\n\n        if (this._3d) {\n          ret.z = c.z + n.z * d;\n        }\n\n        return ret;\n      }\n\n      if (this._linear) {\n        var nv = this.normal(0);\n        var coords = this.points.map(function (p) {\n          var ret = {\n            x: p.x + t * nv.x,\n            y: p.y + t * nv.y\n          };\n\n          if (p.z && n.z) {\n            ret.z = p.z + t * nv.z;\n          }\n\n          return ret;\n        });\n        return [new Bezier(coords)];\n      }\n\n      var reduced = this.reduce();\n      return reduced.map(function (s) {\n        if (s._linear) {\n          return s.offset(t)[0];\n        }\n\n        return s.scale(t);\n      });\n    },\n    simple: function simple() {\n      if (this.order === 3) {\n        var a1 = utils.angle(this.points[0], this.points[3], this.points[1]);\n        var a2 = utils.angle(this.points[0], this.points[3], this.points[2]);\n        if (a1 > 0 && a2 < 0 || a1 < 0 && a2 > 0) return false;\n      }\n\n      var n1 = this.normal(0);\n      var n2 = this.normal(1);\n      var s = n1.x * n2.x + n1.y * n2.y;\n\n      if (this._3d) {\n        s += n1.z * n2.z;\n      }\n\n      var angle = abs(acos(s));\n      return angle < pi / 3;\n    },\n    reduce: function reduce() {\n      var i,\n          t1 = 0,\n          t2 = 0,\n          step = 0.01,\n          segment,\n          pass1 = [],\n          pass2 = []; // first pass: split on extrema\n\n      var extrema = this.extrema().values;\n\n      if (extrema.indexOf(0) === -1) {\n        extrema = [0].concat(extrema);\n      }\n\n      if (extrema.indexOf(1) === -1) {\n        extrema.push(1);\n      }\n\n      for (t1 = extrema[0], i = 1; i < extrema.length; i++) {\n        t2 = extrema[i];\n        segment = this.split(t1, t2);\n        segment._t1 = t1;\n        segment._t2 = t2;\n        pass1.push(segment);\n        t1 = t2;\n      } // second pass: further reduce these segments to simple segments\n\n\n      pass1.forEach(function (p1) {\n        t1 = 0;\n        t2 = 0;\n\n        while (t2 <= 1) {\n          for (t2 = t1 + step; t2 <= 1 + step; t2 += step) {\n            segment = p1.split(t1, t2);\n\n            if (!segment.simple()) {\n              t2 -= step;\n\n              if (abs(t1 - t2) < step) {\n                // we can never form a reduction\n                return [];\n              }\n\n              segment = p1.split(t1, t2);\n              segment._t1 = utils.map(t1, 0, 1, p1._t1, p1._t2);\n              segment._t2 = utils.map(t2, 0, 1, p1._t1, p1._t2);\n              pass2.push(segment);\n              t1 = t2;\n              break;\n            }\n          }\n        }\n\n        if (t1 < 1) {\n          segment = p1.split(t1, 1);\n          segment._t1 = utils.map(t1, 0, 1, p1._t1, p1._t2);\n          segment._t2 = p1._t2;\n          pass2.push(segment);\n        }\n      });\n      return pass2;\n    },\n    scale: function scale(d) {\n      var order = this.order;\n      var distanceFn = false;\n\n      if (typeof d === \"function\") {\n        distanceFn = d;\n      }\n\n      if (distanceFn && order === 2) {\n        return this.raise().scale(distanceFn);\n      } // TODO: add special handling for degenerate (=linear) curves.\n\n\n      var clockwise = this.clockwise;\n      var r1 = distanceFn ? distanceFn(0) : d;\n      var r2 = distanceFn ? distanceFn(1) : d;\n      var v = [this.offset(0, 10), this.offset(1, 10)];\n      var o = utils.lli4(v[0], v[0].c, v[1], v[1].c);\n\n      if (!o) {\n        throw new Error(\"cannot scale this curve. Try reducing it first.\");\n      } // move all points by distance 'd' wrt the origin 'o'\n\n\n      var points = this.points,\n          np = []; // move end points by fixed distance along normal.\n\n      [0, 1].forEach(function (t) {\n        var p = np[t * order] = utils.copy(points[t * order]);\n        p.x += (t ? r2 : r1) * v[t].n.x;\n        p.y += (t ? r2 : r1) * v[t].n.y;\n      }.bind(this));\n\n      if (!distanceFn) {\n        // move control points to lie on the intersection of the offset\n        // derivative vector, and the origin-through-control vector\n        [0, 1].forEach(function (t) {\n          if (this.order === 2 && !!t) return;\n          var p = np[t * order];\n          var d = this.derivative(t);\n          var p2 = {\n            x: p.x + d.x,\n            y: p.y + d.y\n          };\n          np[t + 1] = utils.lli4(p, p2, o, points[t + 1]);\n        }.bind(this));\n        return new Bezier(np);\n      } // move control points by \"however much necessary to\n      // ensure the correct tangent to endpoint\".\n\n\n      [0, 1].forEach(function (t) {\n        if (this.order === 2 && !!t) return;\n        var p = points[t + 1];\n        var ov = {\n          x: p.x - o.x,\n          y: p.y - o.y\n        };\n        var rc = distanceFn ? distanceFn((t + 1) / order) : d;\n        if (distanceFn && !clockwise) rc = -rc;\n        var m = sqrt(ov.x * ov.x + ov.y * ov.y);\n        ov.x /= m;\n        ov.y /= m;\n        np[t + 1] = {\n          x: p.x + rc * ov.x,\n          y: p.y + rc * ov.y\n        };\n      }.bind(this));\n      return new Bezier(np);\n    },\n    outline: function outline(d1, d2, d3, d4) {\n      d2 = typeof d2 === \"undefined\" ? d1 : d2;\n      var reduced = this.reduce(),\n          len = reduced.length,\n          fcurves = [],\n          bcurves = [],\n          p,\n          alen = 0,\n          tlen = this.length();\n      var graduated = typeof d3 !== \"undefined\" && typeof d4 !== \"undefined\";\n\n      function linearDistanceFunction(s, e, tlen, alen, slen) {\n        return function (v) {\n          var f1 = alen / tlen,\n              f2 = (alen + slen) / tlen,\n              d = e - s;\n          return utils.map(v, 0, 1, s + f1 * d, s + f2 * d);\n        };\n      } // form curve oulines\n\n\n      reduced.forEach(function (segment) {\n        slen = segment.length();\n\n        if (graduated) {\n          fcurves.push(segment.scale(linearDistanceFunction(d1, d3, tlen, alen, slen)));\n          bcurves.push(segment.scale(linearDistanceFunction(-d2, -d4, tlen, alen, slen)));\n        } else {\n          fcurves.push(segment.scale(d1));\n          bcurves.push(segment.scale(-d2));\n        }\n\n        alen += slen;\n      }); // reverse the \"return\" outline\n\n      bcurves = bcurves.map(function (s) {\n        p = s.points;\n\n        if (p[3]) {\n          s.points = [p[3], p[2], p[1], p[0]];\n        } else {\n          s.points = [p[2], p[1], p[0]];\n        }\n\n        return s;\n      }).reverse(); // form the endcaps as lines\n\n      var fs = fcurves[0].points[0],\n          fe = fcurves[len - 1].points[fcurves[len - 1].points.length - 1],\n          bs = bcurves[len - 1].points[bcurves[len - 1].points.length - 1],\n          be = bcurves[0].points[0],\n          ls = utils.makeline(bs, fs),\n          le = utils.makeline(fe, be),\n          segments = [ls].concat(fcurves).concat([le]).concat(bcurves),\n          slen = segments.length;\n      return new PolyBezier(segments);\n    },\n    outlineshapes: function outlineshapes(d1, d2, curveIntersectionThreshold) {\n      d2 = d2 || d1;\n      var outline = this.outline(d1, d2).curves;\n      var shapes = [];\n\n      for (var i = 1, len = outline.length; i < len / 2; i++) {\n        var shape = utils.makeshape(outline[i], outline[len - i], curveIntersectionThreshold);\n        shape.startcap.virtual = i > 1;\n        shape.endcap.virtual = i < len / 2 - 1;\n        shapes.push(shape);\n      }\n\n      return shapes;\n    },\n    intersects: function intersects(curve, curveIntersectionThreshold) {\n      if (!curve) return this.selfintersects(curveIntersectionThreshold);\n\n      if (curve.p1 && curve.p2) {\n        return this.lineIntersects(curve);\n      }\n\n      if (curve instanceof Bezier) {\n        curve = curve.reduce();\n      }\n\n      return this.curveintersects(this.reduce(), curve, curveIntersectionThreshold);\n    },\n    lineIntersects: function lineIntersects(line) {\n      var mx = min(line.p1.x, line.p2.x),\n          my = min(line.p1.y, line.p2.y),\n          MX = max(line.p1.x, line.p2.x),\n          MY = max(line.p1.y, line.p2.y),\n          self = this;\n      return utils.roots(this.points, line).filter(function (t) {\n        var p = self.get(t);\n        return utils.between(p.x, mx, MX) && utils.between(p.y, my, MY);\n      });\n    },\n    selfintersects: function selfintersects(curveIntersectionThreshold) {\n      var reduced = this.reduce(); // \"simple\" curves cannot intersect with their direct\n      // neighbour, so for each segment X we check whether\n      // it intersects [0:x-2][x+2:last].\n\n      var i,\n          len = reduced.length - 2,\n          results = [],\n          result,\n          left,\n          right;\n\n      for (i = 0; i < len; i++) {\n        left = reduced.slice(i, i + 1);\n        right = reduced.slice(i + 2);\n        result = this.curveintersects(left, right, curveIntersectionThreshold);\n        results = results.concat(result);\n      }\n\n      return results;\n    },\n    curveintersects: function curveintersects(c1, c2, curveIntersectionThreshold) {\n      var pairs = []; // step 1: pair off any overlapping segments\n\n      c1.forEach(function (l) {\n        c2.forEach(function (r) {\n          if (l.overlaps(r)) {\n            pairs.push({\n              left: l,\n              right: r\n            });\n          }\n        });\n      }); // step 2: for each pairing, run through the convergence algorithm.\n\n      var intersections = [];\n      pairs.forEach(function (pair) {\n        var result = utils.pairiteration(pair.left, pair.right, curveIntersectionThreshold);\n\n        if (result.length > 0) {\n          intersections = intersections.concat(result);\n        }\n      });\n      return intersections;\n    },\n    arcs: function arcs(errorThreshold) {\n      errorThreshold = errorThreshold || 0.5;\n      var circles = [];\n      return this._iterate(errorThreshold, circles);\n    },\n    _error: function _error(pc, np1, s, e) {\n      var q = (e - s) / 4,\n          c1 = this.get(s + q),\n          c2 = this.get(e - q),\n          ref = utils.dist(pc, np1),\n          d1 = utils.dist(pc, c1),\n          d2 = utils.dist(pc, c2);\n      return abs(d1 - ref) + abs(d2 - ref);\n    },\n    _iterate: function _iterate(errorThreshold, circles) {\n      var t_s = 0,\n          t_e = 1,\n          safety; // we do a binary search to find the \"good `t` closest to no-longer-good\"\n\n      do {\n        safety = 0; // step 1: start with the maximum possible arc\n\n        t_e = 1; // points:\n\n        var np1 = this.get(t_s),\n            np2,\n            np3,\n            arc,\n            prev_arc; // booleans:\n\n        var curr_good = false,\n            prev_good = false,\n            done; // numbers:\n\n        var t_m = t_e,\n            prev_e = 1,\n            step = 0; // step 2: find the best possible arc\n\n        do {\n          prev_good = curr_good;\n          prev_arc = arc;\n          t_m = (t_s + t_e) / 2;\n          step++;\n          np2 = this.get(t_m);\n          np3 = this.get(t_e);\n          arc = utils.getccenter(np1, np2, np3); //also save the t values\n\n          arc.interval = {\n            start: t_s,\n            end: t_e\n          };\n\n          var error = this._error(arc, np1, t_s, t_e);\n\n          curr_good = error <= errorThreshold;\n          done = prev_good && !curr_good;\n          if (!done) prev_e = t_e; // this arc is fine: we can move 'e' up to see if we can find a wider arc\n\n          if (curr_good) {\n            // if e is already at max, then we're done for this arc.\n            if (t_e >= 1) {\n              // make sure we cap at t=1\n              arc.interval.end = prev_e = 1;\n              prev_arc = arc; // if we capped the arc segment to t=1 we also need to make sure that\n              // the arc's end angle is correct with respect to the bezier end point.\n\n              if (t_e > 1) {\n                var d = {\n                  x: arc.x + arc.r * cos(arc.e),\n                  y: arc.y + arc.r * sin(arc.e)\n                };\n                arc.e += utils.angle({\n                  x: arc.x,\n                  y: arc.y\n                }, d, this.get(1));\n              }\n\n              break;\n            } // if not, move it up by half the iteration distance\n\n\n            t_e = t_e + (t_e - t_s) / 2;\n          } else {\n            // this is a bad arc: we need to move 'e' down to find a good arc\n            t_e = t_m;\n          }\n        } while (!done && safety++ < 100);\n\n        if (safety >= 100) {\n          break;\n        } // console.log(\"L835: [F] arc found\", t_s, prev_e, prev_arc.x, prev_arc.y, prev_arc.s, prev_arc.e);\n\n\n        prev_arc = prev_arc ? prev_arc : arc;\n        circles.push(prev_arc);\n        t_s = prev_e;\n      } while (t_e < 1);\n\n      return circles;\n    }\n  };\n  module.exports = Bezier;\n})();","require('./src/controls');\n\nrequire('./src/loaders');\n\nrequire('./src/misc');\n\nrequire('./src/pathfinding');\n\nrequire('./src/primitives');","import debounce from 'debounce';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar Prop = function Prop(name, _ref) {\n  var _ref$default = _ref[\"default\"],\n      defaultVal = _ref$default === void 0 ? null : _ref$default,\n      _ref$triggerUpdate = _ref.triggerUpdate,\n      triggerUpdate = _ref$triggerUpdate === void 0 ? true : _ref$triggerUpdate,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function (newVal, state) {} : _ref$onChange;\n\n  _classCallCheck(this, Prop);\n\n  this.name = name;\n  this.defaultVal = defaultVal;\n  this.triggerUpdate = triggerUpdate;\n  this.onChange = onChange;\n};\n\nfunction index(_ref2) {\n  var _ref2$stateInit = _ref2.stateInit,\n      stateInit = _ref2$stateInit === void 0 ? function () {\n    return {};\n  } : _ref2$stateInit,\n      _ref2$props = _ref2.props,\n      rawProps = _ref2$props === void 0 ? {} : _ref2$props,\n      _ref2$methods = _ref2.methods,\n      methods = _ref2$methods === void 0 ? {} : _ref2$methods,\n      _ref2$aliases = _ref2.aliases,\n      aliases = _ref2$aliases === void 0 ? {} : _ref2$aliases,\n      _ref2$init = _ref2.init,\n      initFn = _ref2$init === void 0 ? function () {} : _ref2$init,\n      _ref2$update = _ref2.update,\n      updateFn = _ref2$update === void 0 ? function () {} : _ref2$update; // Parse props into Prop instances\n\n  var props = Object.keys(rawProps).map(function (propName) {\n    return new Prop(propName, rawProps[propName]);\n  });\n  return function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; // Holds component state\n\n    var state = Object.assign({}, stateInit instanceof Function ? stateInit(options) : stateInit, // Support plain objects for backwards compatibility\n    {\n      initialised: false\n    }); // keeps track of which props triggered an update\n\n    var changedProps = {}; // Component constructor\n\n    function comp(nodeElement) {\n      initStatic(nodeElement, options);\n      digest();\n      return comp;\n    }\n\n    var initStatic = function initStatic(nodeElement, options) {\n      initFn.call(comp, nodeElement, state, options);\n      state.initialised = true;\n    };\n\n    var digest = debounce(function () {\n      if (!state.initialised) {\n        return;\n      }\n\n      updateFn.call(comp, state, changedProps);\n      changedProps = {};\n    }, 1); // Getter/setter methods\n\n    props.forEach(function (prop) {\n      comp[prop.name] = getSetProp(prop);\n\n      function getSetProp(_ref3) {\n        var prop = _ref3.name,\n            _ref3$triggerUpdate = _ref3.triggerUpdate,\n            redigest = _ref3$triggerUpdate === void 0 ? false : _ref3$triggerUpdate,\n            _ref3$onChange = _ref3.onChange,\n            onChange = _ref3$onChange === void 0 ? function (newVal, state) {} : _ref3$onChange,\n            _ref3$defaultVal = _ref3.defaultVal,\n            defaultVal = _ref3$defaultVal === void 0 ? null : _ref3$defaultVal;\n        return function (_) {\n          var curVal = state[prop];\n\n          if (!arguments.length) {\n            return curVal;\n          } // Getter mode\n\n\n          var val = _ === undefined ? defaultVal : _; // pick default if value passed is undefined\n\n          state[prop] = val;\n          onChange.call(comp, val, state, curVal); // track changed props\n\n          !changedProps.hasOwnProperty(prop) && (changedProps[prop] = curVal);\n\n          if (redigest) {\n            digest();\n          }\n\n          return comp;\n        };\n      }\n    }); // Other methods\n\n    Object.keys(methods).forEach(function (methodName) {\n      comp[methodName] = function () {\n        var _methods$methodName;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return (_methods$methodName = methods[methodName]).call.apply(_methods$methodName, [comp, state].concat(args));\n      };\n    }); // Link aliases\n\n    Object.entries(aliases).forEach(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          alias = _ref5[0],\n          target = _ref5[1];\n\n      return comp[alias] = comp[target];\n    }); // Reset all component props to their default value\n\n    comp.resetProps = function () {\n      props.forEach(function (prop) {\n        comp[prop.name](prop.defaultVal);\n      });\n      return comp;\n    }; //\n\n\n    comp.resetProps(); // Apply all prop defaults\n\n    state._rerender = digest; // Expose digest method\n\n    return comp;\n  };\n}\n\nexport default index;","var physics = require('ngraph.physics.primitives');\n\nmodule.exports = function (pos) {\n  return new physics.Body(pos);\n};","/**\n * Internal data structure to represent 3D QuadTree node\n */\nmodule.exports = function Node() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain boides:\n  this.body = null; // Child nodes are stored in quads. Each quad is presented by number:\n  // Behind Z median:\n  // 0 | 1\n  // -----\n  // 2 | 3\n  // In front of Z median:\n  // 4 | 5\n  // -----\n  // 6 | 7\n\n  this.quad0 = null;\n  this.quad1 = null;\n  this.quad2 = null;\n  this.quad3 = null;\n  this.quad4 = null;\n  this.quad5 = null;\n  this.quad6 = null;\n  this.quad7 = null; // Total mass of current node\n\n  this.mass = 0; // Center of mass coordinates\n\n  this.massX = 0;\n  this.massY = 0;\n  this.massZ = 0; // bounding box coordinates\n\n  this.left = 0;\n  this.top = 0;\n  this.bottom = 0;\n  this.right = 0;\n  this.front = 0;\n  this.back = 0;\n};","module.exports = function (bodies, settings) {\n  var random = require('ngraph.random').random(42);\n\n  var boundingBox = {\n    x1: 0,\n    y1: 0,\n    z1: 0,\n    x2: 0,\n    y2: 0,\n    z2: 0\n  };\n  return {\n    box: boundingBox,\n    update: updateBoundingBox,\n    reset: function reset() {\n      boundingBox.x1 = boundingBox.y1 = 0;\n      boundingBox.x2 = boundingBox.y2 = 0;\n      boundingBox.z1 = boundingBox.z2 = 0;\n    },\n    getBestNewPosition: function getBestNewPosition(neighbors) {\n      var graphRect = boundingBox;\n      var baseX = 0,\n          baseY = 0,\n          baseZ = 0;\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          baseX += neighbors[i].pos.x;\n          baseY += neighbors[i].pos.y;\n          baseZ += neighbors[i].pos.z;\n        }\n\n        baseX /= neighbors.length;\n        baseY /= neighbors.length;\n        baseZ /= neighbors.length;\n      } else {\n        baseX = (graphRect.x1 + graphRect.x2) / 2;\n        baseY = (graphRect.y1 + graphRect.y2) / 2;\n        baseZ = (graphRect.z1 + graphRect.z2) / 2;\n      }\n\n      var springLength = settings.springLength;\n      return {\n        x: baseX + random.next(springLength) - springLength / 2,\n        y: baseY + random.next(springLength) - springLength / 2,\n        z: baseZ + random.next(springLength) - springLength / 2\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n\n    if (i === 0) {\n      return;\n    } // don't have to wory here.\n\n\n    var x1 = Number.MAX_VALUE,\n        y1 = Number.MAX_VALUE,\n        z1 = Number.MAX_VALUE,\n        x2 = Number.MIN_VALUE,\n        y2 = Number.MIN_VALUE,\n        z2 = Number.MIN_VALUE;\n\n    while (i--) {\n      // this is O(n), could it be done faster with quadtree?\n      // how about pinned nodes?\n      var body = bodies[i];\n\n      if (body.isPinned) {\n        body.pos.x = body.prevPos.x;\n        body.pos.y = body.prevPos.y;\n        body.pos.z = body.prevPos.z;\n      } else {\n        body.prevPos.x = body.pos.x;\n        body.prevPos.y = body.pos.y;\n        body.prevPos.z = body.pos.z;\n      }\n\n      if (body.pos.x < x1) {\n        x1 = body.pos.x;\n      }\n\n      if (body.pos.x > x2) {\n        x2 = body.pos.x;\n      }\n\n      if (body.pos.y < y1) {\n        y1 = body.pos.y;\n      }\n\n      if (body.pos.y > y2) {\n        y2 = body.pos.y;\n      }\n\n      if (body.pos.z < z1) {\n        z1 = body.pos.z;\n      }\n\n      if (body.pos.z > z2) {\n        z2 = body.pos.z;\n      }\n    }\n\n    boundingBox.x1 = x1;\n    boundingBox.x2 = x2;\n    boundingBox.y1 = y1;\n    boundingBox.y2 = y2;\n    boundingBox.z1 = z1;\n    boundingBox.z2 = z2;\n  }\n};","var LoopMode = {\n  once: THREE.LoopOnce,\n  repeat: THREE.LoopRepeat,\n  pingpong: THREE.LoopPingPong\n};\n/**\n * animation-mixer\n *\n * Player for animation clips. Intended to be compatible with any model format that supports\n * skeletal or morph animations through THREE.AnimationMixer.\n * See: https://threejs.org/docs/?q=animation#Reference/Animation/AnimationMixer\n */\n\nmodule.exports = AFRAME.registerComponent('animation-mixer', {\n  schema: {\n    clip: {\n      default: '*'\n    },\n    duration: {\n      default: 0\n    },\n    clampWhenFinished: {\n      default: false,\n      type: 'boolean'\n    },\n    crossFadeDuration: {\n      default: 0\n    },\n    loop: {\n      default: 'repeat',\n      oneOf: Object.keys(LoopMode)\n    },\n    repetitions: {\n      default: Infinity,\n      min: 0\n    },\n    timeScale: {\n      default: 1\n    }\n  },\n  init: function init() {\n    var _this = this;\n\n    /** @type {THREE.Mesh} */\n    this.model = null;\n    /** @type {THREE.AnimationMixer} */\n\n    this.mixer = null;\n    /** @type {Array<THREE.AnimationAction>} */\n\n    this.activeActions = [];\n    var model = this.el.getObject3D('mesh');\n\n    if (model) {\n      this.load(model);\n    } else {\n      this.el.addEventListener('model-loaded', function (e) {\n        _this.load(e.detail.model);\n      });\n    }\n  },\n  load: function load(model) {\n    var el = this.el;\n    this.model = model;\n    this.mixer = new THREE.AnimationMixer(model);\n    this.mixer.addEventListener('loop', function (e) {\n      el.emit('animation-loop', {\n        action: e.action,\n        loopDelta: e.loopDelta\n      });\n    });\n    this.mixer.addEventListener('finished', function (e) {\n      el.emit('animation-finished', {\n        action: e.action,\n        direction: e.direction\n      });\n    });\n    if (this.data.clip) this.update({});\n  },\n  remove: function remove() {\n    if (this.mixer) this.mixer.stopAllAction();\n  },\n  update: function update(prevData) {\n    if (!prevData) return;\n    var data = this.data;\n    var changes = AFRAME.utils.diff(data, prevData); // If selected clips have changed, restart animation.\n\n    if ('clip' in changes) {\n      this.stopAction();\n      if (data.clip) this.playAction();\n      return;\n    } // Otherwise, modify running actions.\n\n\n    this.activeActions.forEach(function (action) {\n      if ('duration' in changes && data.duration) {\n        action.setDuration(data.duration);\n      }\n\n      if ('clampWhenFinished' in changes) {\n        action.clampWhenFinished = data.clampWhenFinished;\n      }\n\n      if ('loop' in changes || 'repetitions' in changes) {\n        action.setLoop(LoopMode[data.loop], data.repetitions);\n      }\n\n      if ('timeScale' in changes) {\n        action.setEffectiveTimeScale(data.timeScale);\n      }\n    });\n  },\n  stopAction: function stopAction() {\n    var data = this.data;\n\n    for (var i = 0; i < this.activeActions.length; i++) {\n      data.crossFadeDuration ? this.activeActions[i].fadeOut(data.crossFadeDuration) : this.activeActions[i].stop();\n    }\n\n    this.activeActions.length = 0;\n  },\n  playAction: function playAction() {\n    if (!this.mixer) return;\n    var model = this.model,\n        data = this.data,\n        clips = model.animations || (model.geometry || {}).animations || [];\n    if (!clips.length) return;\n    var re = wildcardToRegExp(data.clip);\n\n    for (var clip, i = 0; clip = clips[i]; i++) {\n      if (clip.name.match(re)) {\n        var action = this.mixer.clipAction(clip, model);\n        action.enabled = true;\n        action.clampWhenFinished = data.clampWhenFinished;\n        if (data.duration) action.setDuration(data.duration);\n        if (data.timeScale !== 1) action.setEffectiveTimeScale(data.timeScale);\n        action.setLoop(LoopMode[data.loop], data.repetitions).fadeIn(data.crossFadeDuration).play();\n        this.activeActions.push(action);\n      }\n    }\n  },\n  tick: function tick(t, dt) {\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n  }\n});\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\n\nfunction wildcardToRegExp(s) {\n  return new RegExp('^' + s.split(/\\*+/).map(regExpEscape).join('.*') + '$');\n}\n/**\n * RegExp-escapes all characters in the given string.\n */\n\n\nfunction regExpEscape(s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n}","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.github.io/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","var normalise = require(\"./normalise-svg.js\");\n\nvar M = {\n  x: false,\n  y: false\n};\n\nfunction makeBezier(Bezier, term, values) {\n  if (term === 'Z') return;\n\n  if (term === 'M') {\n    M = {\n      x: values[0],\n      y: values[1]\n    };\n    return;\n  } // ES7: new Bezier(M.x, M.y, ...values)\n\n\n  var cvalues = [false, M.x, M.y].concat(values);\n  var PreboundConstructor = Bezier.bind.apply(Bezier, cvalues);\n  var curve = new PreboundConstructor();\n  var last = values.slice(-2);\n  M = {\n    x: last[0],\n    y: last[1]\n  };\n  return curve;\n}\n\nfunction convertPath(Bezier, d) {\n  var terms = normalise(d).split(\" \"),\n      term,\n      matcher = new RegExp(\"[MLCQZ]\", \"\"),\n      segment,\n      values,\n      segments = [],\n      ARGS = {\n    \"C\": 6,\n    \"Q\": 4,\n    \"L\": 2,\n    \"M\": 2\n  };\n\n  while (terms.length) {\n    term = terms.splice(0, 1)[0];\n\n    if (matcher.test(term)) {\n      values = terms.splice(0, ARGS[term]).map(parseFloat);\n      segment = makeBezier(Bezier, term, values);\n      if (segment) segments.push(segment);\n    }\n  }\n\n  return new Bezier.PolyBezier(segments);\n}\n\nmodule.exports = convertPath;","/**\n * This is Barnes Hut simulation algorithm for 2d case. Implementation\n * is highly optimized (avoids recusion and gc pressure)\n *\n * http://www.cs.princeton.edu/courses/archive/fall03/cs126/assignments/barnes-hut.html\n */\nmodule.exports = function (options) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8; // we require deterministic randomness here\n\n  var random = require('ngraph.random').random(1984),\n      Node = require('./node'),\n      InsertStack = require('./insertStack'),\n      isSamePosition = require('./isSamePosition');\n\n  var gravity = options.gravity,\n      updateQueue = [],\n      insertStack = new InsertStack(),\n      theta = options.theta,\n      nodesCache = [],\n      currentInCache = 0,\n      root = newNode();\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if its present\n     */\n    getRoot: function getRoot() {\n      return root;\n    },\n    updateBodyForce: update,\n    options: function options(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n\n    if (node) {\n      node.quad0 = null;\n      node.quad1 = null;\n      node.quad2 = null;\n      node.quad3 = null;\n      node.body = null;\n      node.mass = node.massX = node.massY = 0;\n      node.left = node.right = node.top = node.bottom = 0;\n    } else {\n      node = new Node();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue,\n        v,\n        dx,\n        dy,\n        r,\n        fx = 0,\n        fy = 0,\n        queueLength = 1,\n        shiftIdx = 0,\n        pushIdx = 1;\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx],\n          body = node.body;\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = body !== sourceBody;\n\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        dx = body.pos.x - sourceBody.pos.x;\n        dy = body.pos.y - sourceBody.pos.y;\n        r = Math.sqrt(dx * dx + dy * dy);\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n        } // This is standard gravition force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n\n\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        fx += v * dx;\n        fy += v * dy;\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        dx = node.massX / node.mass - sourceBody.pos.x;\n        dy = node.massY / node.mass - sourceBody.pos.y;\n        r = Math.sqrt(dx * dx + dy * dy);\n\n        if (r === 0) {\n          // Sorry about code duplucation. I don't want to create many functions\n          // right away. Just want to see performance first.\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n        } // If s / r < , treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n\n\n        if ((node.right - node.left) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was squarified during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          fx += v * dx;\n          fy += v * dy;\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n          // I intentionally unfolded this loop, to save several CPU cycles.\n          if (node.quad0) {\n            queue[pushIdx] = node.quad0;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad1) {\n            queue[pushIdx] = node.quad1;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad2) {\n            queue[pushIdx] = node.quad2;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n\n          if (node.quad3) {\n            queue[pushIdx] = node.quad3;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n        }\n      }\n    }\n\n    sourceBody.force.x += fx;\n    sourceBody.force.y += fy;\n  }\n\n  function insertBodies(bodies) {\n    var x1 = Number.MAX_VALUE,\n        y1 = Number.MAX_VALUE,\n        x2 = Number.MIN_VALUE,\n        y2 = Number.MIN_VALUE,\n        i,\n        max = bodies.length; // To reduce quad tree depth we are looking for exact bounding box of all particles.\n\n    i = max;\n\n    while (i--) {\n      var x = bodies[i].pos.x;\n      var y = bodies[i].pos.y;\n\n      if (x < x1) {\n        x1 = x;\n      }\n\n      if (x > x2) {\n        x2 = x;\n      }\n\n      if (y < y1) {\n        y1 = y;\n      }\n\n      if (y > y2) {\n        y2 = y;\n      }\n    } // Squarify the bounds.\n\n\n    var dx = x2 - x1,\n        dy = y2 - y1;\n\n    if (dx > dy) {\n      y2 = y1 + dx;\n    } else {\n      x2 = x1 + dy;\n    }\n\n    currentInCache = 0;\n    root = newNode();\n    root.left = x1;\n    root.right = x2;\n    root.top = y1;\n    root.bottom = y2;\n    i = max - 1;\n\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop(),\n          node = stackItem.node,\n          body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        var x = body.pos.x;\n        var y = body.pos.y;\n        node.mass = node.mass + body.mass;\n        node.massX = node.massX + body.mass * x;\n        node.massY = node.massY + body.mass * y; // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n\n        var quadIdx = 0,\n            // Assume we are in the 0's quad.\n        left = node.left,\n            right = (node.right + left) / 2,\n            top = node.top,\n            bottom = (node.bottom + top) / 2;\n\n        if (x > right) {\n          // somewhere in the eastern part.\n          quadIdx = quadIdx + 1;\n          left = right;\n          right = node.right;\n        }\n\n        if (y > bottom) {\n          // and in south.\n          quadIdx = quadIdx + 2;\n          top = bottom;\n          bottom = node.bottom;\n        }\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          child.left = left;\n          child.top = top;\n          child.right = right;\n          child.bottom = bottom;\n          child.body = body;\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n\n          do {\n            var offset = random.nextDouble();\n            var dx = (node.right - node.left) * offset;\n            var dy = (node.bottom - node.top) * offset;\n            oldBody.pos.x = node.left + dx;\n            oldBody.pos.y = node.top + dy;\n            retriesCount -= 1; // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        } // Next iteration should subdivide node further.\n\n\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n};\n\nfunction getChild(node, idx) {\n  if (idx === 0) return node.quad0;\n  if (idx === 1) return node.quad1;\n  if (idx === 2) return node.quad2;\n  if (idx === 3) return node.quad3;\n  return null;\n}\n\nfunction setChild(node, idx, child) {\n  if (idx === 0) node.quad0 = child;else if (idx === 1) node.quad1 = child;else if (idx === 2) node.quad2 = child;else if (idx === 3) node.quad3 = child;\n}","/**\n * Normalise an SVG path to absolute coordinates\n * and full commands, rather than relative coordinates\n * and/or shortcut commands.\n */\nfunction normalizePath(d) {\n  // preprocess \"d\" so that we have spaces between values\n  d = d.replace(/,/g, \" \") // replace commas with spaces\n  .replace(/-/g, \" - \") // add spacing around minus signs\n  .replace(/-\\s+/g, \"-\") // remove spacing to the right of minus signs.\n  .replace(/([a-zA-Z])/g, \" $1 \"); // set up the variables used in this function\n\n  var instructions = d.replace(/([a-zA-Z])\\s?/g, \"|$1\").split(\"|\"),\n      instructionLength = instructions.length,\n      i,\n      instruction,\n      op,\n      lop,\n      args = [],\n      alen,\n      a,\n      sx = 0,\n      sy = 0,\n      x = 0,\n      y = 0,\n      cx = 0,\n      cy = 0,\n      cx2 = 0,\n      cy2 = 0,\n      normalized = \"\"; // we run through the instruction list starting at 1, not 0,\n  // because we split up \"|M x y ....\" so the first element will\n  // always be an empty string. By design.\n\n  for (i = 1; i < instructionLength; i++) {\n    // which instruction is this?\n    instruction = instructions[i];\n    op = instruction.substring(0, 1);\n    lop = op.toLowerCase(); // what are the arguments? note that we need to convert\n    // all strings into numbers, or + will do silly things.\n\n    args = instruction.replace(op, \"\").trim().split(\" \");\n    args = args.filter(function (v) {\n      return v !== \"\";\n    }).map(parseFloat);\n    alen = args.length; // we could use a switch, but elaborate code in a \"case\" with\n    // fallthrough is just horrid to read. So let's use ifthen\n    // statements instead.\n    // moveto command (plus possible lineto)\n\n    if (lop === \"m\") {\n      normalized += \"M \";\n\n      if (op === \"m\") {\n        x += args[0];\n        y += args[1];\n      } else {\n        x = args[0];\n        y = args[1];\n      } // records start position, for dealing\n      // with the shape close operator ('Z')\n\n\n      sx = x;\n      sy = y;\n      normalized += x + \" \" + y + \" \";\n\n      if (alen > 2) {\n        for (a = 0; a < alen; a += 2) {\n          if (op === \"m\") {\n            x += args[a];\n            y += args[a + 1];\n          } else {\n            x = args[a];\n            y = args[a + 1];\n          }\n\n          normalized += [\"L\", x, y, ''].join(\" \");\n        }\n      }\n    } else if (lop === \"l\") {\n      // lineto commands\n      for (a = 0; a < alen; a += 2) {\n        if (op === \"l\") {\n          x += args[a];\n          y += args[a + 1];\n        } else {\n          x = args[a];\n          y = args[a + 1];\n        }\n\n        normalized += [\"L\", x, y, ''].join(\" \");\n      }\n    } else if (lop === \"h\") {\n      for (a = 0; a < alen; a++) {\n        if (op === \"h\") {\n          x += args[a];\n        } else {\n          x = args[a];\n        }\n\n        normalized += [\"L\", x, y, ''].join(\" \");\n      }\n    } else if (lop === \"v\") {\n      for (a = 0; a < alen; a++) {\n        if (op === \"v\") {\n          y += args[a];\n        } else {\n          y = args[a];\n        }\n\n        normalized += [\"L\", x, y, ''].join(\" \");\n      }\n    } else if (lop === \"q\") {\n      // quadratic curveto commands\n      for (a = 0; a < alen; a += 4) {\n        if (op === \"q\") {\n          cx = x + args[a];\n          cy = y + args[a + 1];\n          x += args[a + 2];\n          y += args[a + 3];\n        } else {\n          cx = args[a];\n          cy = args[a + 1];\n          x = args[a + 2];\n          y = args[a + 3];\n        }\n\n        normalized += [\"Q\", cx, cy, x, y, ''].join(\" \");\n      }\n    } else if (lop === \"t\") {\n      for (a = 0; a < alen; a += 2) {\n        // reflect previous cx/cy over x/y\n        cx = x + (x - cx);\n        cy = y + (y - cy); // then get real end point\n\n        if (op === \"t\") {\n          x += args[a];\n          y += args[a + 1];\n        } else {\n          x = args[a];\n          y = args[a + 1];\n        }\n\n        normalized += [\"Q\", cx, cy, x, y, ''].join(\" \");\n      }\n    } else if (lop === \"c\") {\n      // cubic curveto commands\n      for (a = 0; a < alen; a += 6) {\n        if (op === \"c\") {\n          cx = x + args[a];\n          cy = y + args[a + 1];\n          cx2 = x + args[a + 2];\n          cy2 = y + args[a + 3];\n          x += args[a + 4];\n          y += args[a + 5];\n        } else {\n          cx = args[a];\n          cy = args[a + 1];\n          cx2 = args[a + 2];\n          cy2 = args[a + 3];\n          x = args[a + 4];\n          y = args[a + 5];\n        }\n\n        normalized += [\"C\", cx, cy, cx2, cy2, x, y, ''].join(\" \");\n      }\n    } else if (lop === \"s\") {\n      for (a = 0; a < alen; a += 4) {\n        // reflect previous cx2/cy2 over x/y\n        cx = x + (x - cx2);\n        cy = y + (y - cy2); // then get real control and end point\n\n        if (op === \"s\") {\n          cx2 = x + args[a];\n          cy2 = y + args[a + 1];\n          x += args[a + 2];\n          y += args[a + 3];\n        } else {\n          cx2 = args[a];\n          cy2 = args[a + 1];\n          x = args[a + 2];\n          y = args[a + 3];\n        }\n\n        normalized += [\"C\", cx, cy, cx2, cy2, x, y, ''].join(\" \");\n      }\n    } else if (lop === \"z\") {\n      normalized += \"Z \"; // not unimportant: path closing changes the current x/y coordinate\n\n      x = sx;\n      y = sy;\n    }\n  }\n\n  return normalized.trim();\n}\n\nmodule.exports = normalizePath;","/**\n * @param  {Array<THREE.Material>|THREE.Material} material\n * @return {Array<THREE.Material>}\n */\nfunction ensureMaterialArray(material) {\n  if (!material) {\n    return [];\n  } else if (Array.isArray(material)) {\n    return material;\n  } else if (material.materials) {\n    return material.materials;\n  } else {\n    return [material];\n  }\n}\n/**\n * @param  {THREE.Object3D} mesh\n * @param  {Array<string>} materialNames\n * @param  {THREE.Texture} envMap\n * @param  {number} reflectivity  [description]\n */\n\n\nfunction applyEnvMap(mesh, materialNames, envMap, reflectivity) {\n  if (!mesh) return;\n  materialNames = materialNames || [];\n  mesh.traverse(function (node) {\n    if (!node.isMesh) return;\n    var meshMaterials = ensureMaterialArray(node.material);\n    meshMaterials.forEach(function (material) {\n      if (material && !('envMap' in material)) return;\n      if (materialNames.length && materialNames.indexOf(material.name) === -1) return;\n      material.envMap = envMap;\n      material.reflectivity = reflectivity;\n      material.needsUpdate = true;\n    });\n  });\n}\n/**\n * Specifies an envMap on an entity, without replacing any existing material\n * properties.\n */\n\n\nmodule.exports = AFRAME.registerComponent('cube-env-map', {\n  multiple: true,\n  schema: {\n    path: {\n      default: ''\n    },\n    extension: {\n      default: 'jpg',\n      oneOf: ['jpg', 'png']\n    },\n    format: {\n      default: 'RGBFormat',\n      oneOf: ['RGBFormat', 'RGBAFormat']\n    },\n    enableBackground: {\n      default: false\n    },\n    reflectivity: {\n      default: 1,\n      min: 0,\n      max: 1\n    },\n    materials: {\n      default: []\n    }\n  },\n  init: function init() {\n    var _this = this;\n\n    var data = this.data;\n    this.texture = new THREE.CubeTextureLoader().load([data.path + 'posx.' + data.extension, data.path + 'negx.' + data.extension, data.path + 'posy.' + data.extension, data.path + 'negy.' + data.extension, data.path + 'posz.' + data.extension, data.path + 'negz.' + data.extension]);\n    this.texture.format = THREE[data.format];\n\n    this.object3dsetHandler = function () {\n      var mesh = _this.el.getObject3D('mesh');\n\n      var data = _this.data;\n      applyEnvMap(mesh, data.materials, _this.texture, data.reflectivity);\n    };\n\n    this.el.addEventListener('object3dset', this.object3dsetHandler);\n  },\n  update: function update(oldData) {\n    var data = this.data;\n    var mesh = this.el.getObject3D('mesh');\n    var addedMaterialNames = [];\n    var removedMaterialNames = [];\n\n    if (data.materials.length) {\n      if (oldData.materials) {\n        addedMaterialNames = data.materials.filter(function (name) {\n          return !oldData.materials.includes(name);\n        });\n        removedMaterialNames = oldData.materials.filter(function (name) {\n          return !data.materials.includes(name);\n        });\n      } else {\n        addedMaterialNames = data.materials;\n      }\n    }\n\n    if (addedMaterialNames.length) {\n      applyEnvMap(mesh, addedMaterialNames, this.texture, data.reflectivity);\n    }\n\n    if (removedMaterialNames.length) {\n      applyEnvMap(mesh, removedMaterialNames, null, 1);\n    }\n\n    if (oldData.materials && data.reflectivity !== oldData.reflectivity) {\n      var maintainedMaterialNames = data.materials.filter(function (name) {\n        return oldData.materials.includes(name);\n      });\n\n      if (maintainedMaterialNames.length) {\n        applyEnvMap(mesh, maintainedMaterialNames, this.texture, data.reflectivity);\n      }\n    }\n\n    if (this.data.enableBackground && !oldData.enableBackground) {\n      this.setBackground(this.texture);\n    } else if (!this.data.enableBackground && oldData.enableBackground) {\n      this.setBackground(null);\n    }\n  },\n  remove: function remove() {\n    this.el.removeEventListener('object3dset', this.object3dsetHandler);\n    var mesh = this.el.getObject3D('mesh');\n    var data = this.data;\n    applyEnvMap(mesh, data.materials, null, 1);\n    if (data.enableBackground) this.setBackground(null);\n  },\n  setBackground: function setBackground(texture) {\n    this.el.sceneEl.object3D.background = texture;\n  }\n});","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","module.exports = merge;\n/**\n * Augments `target` with properties in `options`. Does not override\n * target's properties if they are defined and matches expected type in \n * options\n *\n * @returns {Object} merged object\n */\n\nfunction merge(target, options) {\n  var key;\n\n  if (!target) {\n    target = {};\n  }\n\n  if (options) {\n    for (key in options) {\n      if (options.hasOwnProperty(key)) {\n        var targetHasIt = target.hasOwnProperty(key),\n            optionsValueType = typeof options[key],\n            shouldReplace = !targetHasIt || typeof target[key] !== optionsValueType;\n\n        if (shouldReplace) {\n          target[key] = options[key];\n        } else if (optionsValueType === 'object') {\n          // go deep, don't care about loops here, we are simple API!:\n          target[key] = merge(target[key], options[key]);\n        }\n      }\n    }\n  }\n\n  return target;\n}","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar pluck = function pluck(obj, keys) {\n  return Object.assign.apply(Object, [{}].concat(_toConsumableArray(keys.map(function (key) {\n    return _defineProperty({}, key, obj[key]);\n  }))));\n};\n\nvar omit = function omit(obj, keys) {\n  var keySet = new Set(keys);\n  return Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(obj).filter(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 1),\n        key = _ref3[0];\n\n    return !keySet.has(key);\n  }).map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        key = _ref5[0],\n        val = _ref5[1];\n\n    return _defineProperty({}, key, val);\n  }))));\n};\n\nexport { omit, pluck };","import React, { forwardRef, useRef, useState, useEffect, useMemo, useLayoutEffect, useCallback, useImperativeHandle } from 'react';\nimport { omit } from 'jerrypick';\nimport fromEntries from 'fromentries';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction index(kapsuleComponent, comboParam) {\n  var _ref = _typeof(comboParam) === 'object' ? comboParam : {\n    // support old schema for backwards compatibility\n    wrapperElementType: comboParam,\n    methodNames: (arguments.length <= 2 ? undefined : arguments[2]) || undefined,\n    initPropNames: (arguments.length <= 3 ? undefined : arguments[3]) || undefined\n  },\n      _ref$wrapperElementTy = _ref.wrapperElementType,\n      wrapperElementType = _ref$wrapperElementTy === void 0 ? 'div' : _ref$wrapperElementTy,\n      _ref$nodeMapper = _ref.nodeMapper,\n      nodeMapper = _ref$nodeMapper === void 0 ? function (node) {\n    return node;\n  } : _ref$nodeMapper,\n      _ref$methodNames = _ref.methodNames,\n      methodNames = _ref$methodNames === void 0 ? [] : _ref$methodNames,\n      _ref$initPropNames = _ref.initPropNames,\n      initPropNames = _ref$initPropNames === void 0 ? [] : _ref$initPropNames;\n\n  return /*#__PURE__*/forwardRef(function (props, ref) {\n    var domEl = useRef();\n\n    var _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        prevProps = _useState2[0],\n        setPrevProps = _useState2[1];\n\n    useEffect(function () {\n      return setPrevProps(props);\n    }); // remember previous props\n    // instantiate the inner kapsule component with the defined initPropNames\n\n    var comp = useMemo(function () {\n      var configOptions = fromEntries(initPropNames.filter(function (p) {\n        return props.hasOwnProperty(p);\n      }).map(function (prop) {\n        return [prop, props[prop]];\n      }));\n      return kapsuleComponent(configOptions);\n    }, []);\n    useLayoutEffect(function () {\n      comp(nodeMapper(domEl.current)); // mount kapsule synchronously on this element ref, optionally mapped into an object that the kapsule understands\n    }, []);\n    useEffect(function () {\n      // invoke destructor on unmount, if it exists\n      return comp._destructor instanceof Function ? comp._destructor : undefined;\n    }, []); // Call a component method\n\n    var _call = useCallback(function (method) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return comp[method] instanceof Function ? comp[method].apply(comp, args) : undefined;\n    } // method not found\n    , [comp]); // propagate component props that have changed\n\n\n    var dynamicProps = omit(props, [].concat(_toConsumableArray(methodNames), _toConsumableArray(initPropNames))); // initPropNames or methodNames should not be called\n\n    Object.keys(dynamicProps).filter(function (p) {\n      return prevProps[p] !== props[p];\n    }).forEach(function (p) {\n      return _call(p, props[p]);\n    }); // bind external methods to parent ref\n\n    useImperativeHandle(ref, function () {\n      return fromEntries(methodNames.map(function (method) {\n        return [method, function () {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _call.apply(void 0, [method].concat(args));\n        }];\n      }));\n    });\n    return /*#__PURE__*/React.createElement(wrapperElementType, {\n      ref: domEl\n    });\n  });\n}\n\nexport default index;","import 'aframe';\nimport 'aframe-extras';\nimport 'aframe-forcegraph-component';\nimport Kapsule from 'kapsule';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".graph-nav-info {\\n  position: absolute;\\n  bottom: 5px;\\n  width: 100%;\\n  text-align: center;\\n  color: slategrey;\\n  opacity: 0.7;\\n  font-size: 10px;\\n  font-family: Sans-serif;\\n  z-index: 1000;\\n}\";\nstyleInject(css_248z);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar _3dForceGraphVr = Kapsule({\n  props: {\n    width: {\n      \"default\": window.innerWidth,\n      triggerUpdate: false,\n      onChange: function onChange(width, state) {\n        if (state.container) state.container.style.width = width;\n      }\n    },\n    height: {\n      \"default\": window.innerHeight,\n      triggerUpdate: false,\n      onChange: function onChange(height, state) {\n        if (state.container) state.container.style.height = height;\n      }\n    },\n    jsonUrl: {},\n    graphData: {\n      \"default\": {\n        nodes: [],\n        links: []\n      }\n    },\n    numDimensions: {\n      \"default\": 3\n    },\n    dagMode: {},\n    dagLevelDistance: {},\n    dagNodeFilter: {\n      \"default\": function _default() {\n        return true;\n      }\n    },\n    onDagError: {\n      \"default\": undefined\n    },\n    backgroundColor: {\n      \"default\": '#002'\n    },\n    showNavInfo: {\n      \"default\": true\n    },\n    nodeRelSize: {\n      \"default\": 4\n    },\n    // volume per val unit\n    nodeId: {\n      \"default\": 'id'\n    },\n    nodeLabel: {\n      \"default\": 'name'\n    },\n    nodeDesc: {\n      \"default\": 'desc'\n    },\n    onNodeCenterHover: {},\n    nodeVal: {\n      \"default\": 'val'\n    },\n    nodeResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the sphere's circumference\n    nodeVisibility: {\n      \"default\": true\n    },\n    nodeColor: {\n      \"default\": 'color'\n    },\n    nodeAutoColorBy: {},\n    nodeOpacity: {\n      \"default\": 0.75\n    },\n    nodeThreeObject: {},\n    nodeThreeObjectExtend: {\n      \"default\": false\n    },\n    linkSource: {\n      \"default\": 'source'\n    },\n    linkTarget: {\n      \"default\": 'target'\n    },\n    linkLabel: {\n      \"default\": 'name'\n    },\n    linkDesc: {\n      \"default\": 'desc'\n    },\n    onLinkCenterHover: {},\n    linkHoverPrecision: {\n      \"default\": 2\n    },\n    linkVisibility: {\n      \"default\": true\n    },\n    linkColor: {\n      \"default\": 'color'\n    },\n    linkAutoColorBy: {},\n    linkOpacity: {\n      \"default\": 0.2\n    },\n    linkWidth: {\n      \"default\": 0\n    },\n    linkResolution: {\n      \"default\": 6\n    },\n    // how many radial segments in each line cylinder's geometry\n    linkCurvature: {\n      \"default\": 0\n    },\n    linkCurveRotation: {\n      \"default\": 0\n    },\n    linkMaterial: {},\n    linkThreeObject: {},\n    linkThreeObjectExtend: {\n      \"default\": false\n    },\n    linkPositionUpdate: {},\n    linkDirectionalArrowLength: {\n      \"default\": 0\n    },\n    linkDirectionalArrowColor: {},\n    linkDirectionalArrowRelPos: {\n      \"default\": 0.5\n    },\n    // value between 0<>1 indicating the relative pos along the (exposed) line\n    linkDirectionalArrowResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the arrow's conic circumference\n    linkDirectionalParticles: {\n      \"default\": 0\n    },\n    // animate photons travelling in the link direction\n    linkDirectionalParticleSpeed: {\n      \"default\": 0.01\n    },\n    // in link length ratio per frame\n    linkDirectionalParticleWidth: {\n      \"default\": 0.5\n    },\n    linkDirectionalParticleColor: {},\n    linkDirectionalParticleResolution: {\n      \"default\": 4\n    },\n    // how many slice segments in the particle sphere's circumference\n    forceEngine: {\n      \"default\": 'd3'\n    },\n    // d3 or ngraph\n    d3AlphaMin: {\n      \"default\": 0\n    },\n    d3AlphaDecay: {\n      \"default\": 0.0228\n    },\n    d3VelocityDecay: {\n      \"default\": 0.4\n    },\n    ngraphPhysics: {},\n    warmupTicks: {\n      \"default\": 0\n    },\n    // how many times to tick the force engine at init before starting to render\n    cooldownTicks: {},\n    cooldownTime: {\n      \"default\": 15000\n    },\n    // ms\n    onEngineTick: {},\n    onEngineStop: {}\n  },\n  methods: _objectSpread2(_objectSpread2({}, Object.assign.apply(Object, [{}].concat(_toConsumableArray(['getGraphBbox', 'emitParticle', 'd3Force', 'd3ReheatSimulation', 'refresh'].map(function (method) {\n    return _defineProperty({}, method, function (state) {\n      var aframeComp = state.forcegraph.components.forcegraph;\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var returnVal = aframeComp[method].apply(aframeComp, args);\n      return returnVal === aframeComp ? this // chain based on this object, not the inner aframe component\n      : returnVal;\n    });\n  }))))), {}, {\n    _destructor: function _destructor() {\n      this.graphData({\n        nodes: [],\n        links: []\n      });\n    }\n  }),\n  init: function init(domNode, state) {\n    // Wipe DOM\n    domNode.innerHTML = '';\n    state.container = document.createElement('div');\n    domNode.appendChild(state.container);\n    state.container.style.position = 'relative';\n    state.container.style.width = state.width;\n    state.container.style.height = state.height; // Add nav info section\n\n    state.container.appendChild(state.navInfo = document.createElement('div'));\n    state.navInfo.className = 'graph-nav-info';\n    state.navInfo.textContent = 'Mouse drag: look, gamepad/arrow/wasd keys: move'; // Create scene\n\n    var scene = document.createElement('a-scene');\n    scene.setAttribute('embedded', ''); //scene.setAttribute('stats', null);\n\n    scene.appendChild(state.sky = document.createElement('a-sky'));\n    state.sky.setAttribute('radius', 5000); // Add camera and cursor\n\n    var cameraG;\n    scene.appendChild(cameraG = document.createElement('a-entity'));\n    cameraG.setAttribute('position', '0 0 300');\n    cameraG.setAttribute('movement-controls', 'fly: true; speed: 7');\n    var camera;\n    cameraG.appendChild(camera = document.createElement('a-entity'));\n    camera.setAttribute('camera', '');\n    camera.setAttribute('position', '0 0.001 0');\n    camera.setAttribute('look-controls', 'reverseMouseDrag: false; pointerLockEnabled: true');\n    var cursor;\n    camera.appendChild(cursor = document.createElement('a-cursor'));\n    cursor.setAttribute('color', 'lavender');\n    cursor.setAttribute('opacity', 0.5);\n    cursor.setAttribute('raycaster', 'objects: ----none----'); // disable cursor raycaster\n    // Add forcegraph entity\n\n    scene.appendChild(state.forcegraph = document.createElement('a-entity'));\n    state.forcegraph.setAttribute('forcegraph', null); // attach scene\n\n    state.container.appendChild(scene);\n  },\n  update: function update(state, changedProps) {\n    changedProps.hasOwnProperty('backgroundColor') && state.sky.setAttribute('color', state.backgroundColor);\n    changedProps.hasOwnProperty('showNavInfo') && (state.navInfo.style.display = state.showNavInfo ? null : 'none');\n    var passThroughProps = ['jsonUrl', 'numDimensions', 'dagMode', 'dagLevelDistance', 'dagNodeFilter', 'onDagError', 'nodeRelSize', 'nodeId', 'nodeLabel', 'nodeDesc', 'onNodeCenterHover', 'nodeVal', 'nodeResolution', 'nodeVisibility', 'nodeColor', 'nodeAutoColorBy', 'nodeOpacity', 'nodeThreeObject', 'nodeThreeObjectExtend', 'linkSource', 'linkTarget', 'linkLabel', 'linkDesc', 'onLinkCenterHover', 'linkHoverPrecision', 'linkVisibility', 'linkColor', 'linkAutoColorBy', 'linkOpacity', 'linkWidth', 'linkResolution', 'linkCurvature', 'linkCurveRotation', 'linkMaterial', 'linkThreeObject', 'linkThreeObjectExtend', 'linkPositionUpdate', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowRelPos', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleSpeed', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution', 'forceEngine', 'd3AlphaMin', 'd3AlphaDecay', 'd3VelocityDecay', 'ngraphPhysics', 'warmupTicks', 'cooldownTicks', 'cooldownTime', 'onEngineTick', 'onEngineStop'];\n    var newProps = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(state).filter(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          prop = _ref3[0],\n          val = _ref3[1];\n\n      return changedProps.hasOwnProperty(prop) && passThroughProps.indexOf(prop) != -1 && val !== undefined && val !== null;\n    }).map(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          key = _ref5[0],\n          val = _ref5[1];\n\n      return _defineProperty({}, key, val);\n    })), _toConsumableArray(Object.entries(state.graphData).map(function (_ref7) {\n      var _ref8 = _slicedToArray(_ref7, 2),\n          key = _ref8[0],\n          val = _ref8[1];\n\n      return _defineProperty({}, key, val);\n    }))));\n    state.forcegraph.setAttribute('forcegraph', newProps);\n  }\n});\n\nexport default _3dForceGraphVr;","import 'aframe-forcegraph-component';\nimport Kapsule from 'kapsule';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar _3dForceGraphAr = Kapsule({\n  props: {\n    width: {},\n    height: {},\n    yOffset: {\n      \"default\": 1.5\n    },\n    // marker size units\n    glScale: {\n      \"default\": 200\n    },\n    // gl units per marker width\n    jsonUrl: {},\n    graphData: {\n      \"default\": {\n        nodes: [],\n        links: []\n      }\n    },\n    numDimensions: {\n      \"default\": 3\n    },\n    dagMode: {},\n    dagLevelDistance: {},\n    dagNodeFilter: {\n      \"default\": function _default() {\n        return true;\n      }\n    },\n    onDagError: {\n      \"default\": undefined\n    },\n    nodeRelSize: {\n      \"default\": 4\n    },\n    // volume per val unit\n    nodeId: {\n      \"default\": 'id'\n    },\n    nodeVal: {\n      \"default\": 'val'\n    },\n    nodeResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the sphere's circumference\n    nodeVisibility: {\n      \"default\": true\n    },\n    nodeColor: {\n      \"default\": 'color'\n    },\n    nodeAutoColorBy: {},\n    nodeOpacity: {\n      \"default\": 0.75\n    },\n    nodeThreeObject: {},\n    nodeThreeObjectExtend: {\n      \"default\": false\n    },\n    linkSource: {\n      \"default\": 'source'\n    },\n    linkTarget: {\n      \"default\": 'target'\n    },\n    linkHoverPrecision: {\n      \"default\": 2\n    },\n    linkVisibility: {\n      \"default\": true\n    },\n    linkColor: {\n      \"default\": 'color'\n    },\n    linkAutoColorBy: {},\n    linkOpacity: {\n      \"default\": 0.2\n    },\n    linkWidth: {\n      \"default\": 0\n    },\n    linkResolution: {\n      \"default\": 6\n    },\n    // how many radial segments in each line cylinder's geometry\n    linkCurvature: {\n      \"default\": 0\n    },\n    linkCurveRotation: {\n      \"default\": 0\n    },\n    linkMaterial: {},\n    linkThreeObject: {},\n    linkThreeObjectExtend: {\n      \"default\": false\n    },\n    linkPositionUpdate: {},\n    linkDirectionalArrowLength: {\n      \"default\": 0\n    },\n    linkDirectionalArrowColor: {},\n    linkDirectionalArrowRelPos: {\n      \"default\": 0.5\n    },\n    // value between 0<>1 indicating the relative pos along the (exposed) line\n    linkDirectionalArrowResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the arrow's conic circumference\n    linkDirectionalParticles: {\n      \"default\": 0\n    },\n    // animate photons travelling in the link direction\n    linkDirectionalParticleSpeed: {\n      \"default\": 0.01\n    },\n    // in link length ratio per frame\n    linkDirectionalParticleWidth: {\n      \"default\": 0.5\n    },\n    linkDirectionalParticleColor: {},\n    linkDirectionalParticleResolution: {\n      \"default\": 4\n    },\n    // how many slice segments in the particle sphere's circumference\n    onNodeCenterHover: {},\n    onLinkCenterHover: {},\n    forceEngine: {\n      \"default\": 'd3'\n    },\n    // d3 or ngraph\n    d3AlphaMin: {\n      \"default\": 0\n    },\n    d3AlphaDecay: {\n      \"default\": 0.0228\n    },\n    d3VelocityDecay: {\n      \"default\": 0.4\n    },\n    ngraphPhysics: {},\n    warmupTicks: {\n      \"default\": 0\n    },\n    // how many times to tick the force engine at init before starting to render\n    cooldownTicks: {},\n    cooldownTime: {\n      \"default\": 15000\n    },\n    // ms\n    onEngineTick: {},\n    onEngineStop: {}\n  },\n  methods: _objectSpread2(_objectSpread2({}, Object.assign.apply(Object, [{}].concat(_toConsumableArray(['getGraphBbox', 'emitParticle', 'd3Force', 'd3ReheatSimulation', 'refresh'].map(function (method) {\n    return _defineProperty({}, method, function (state) {\n      var aframeComp = state.forcegraph.components.forcegraph;\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var returnVal = aframeComp[method].apply(aframeComp, args);\n      return returnVal === aframeComp ? this // chain based on this object, not the inner aframe component\n      : returnVal;\n    });\n  }))))), {}, {\n    _destructor: function _destructor() {\n      this.graphData({\n        nodes: [],\n        links: []\n      });\n    }\n  }),\n  init: function init(domNode, state) {\n    var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref2$markerAttrs = _ref2.markerAttrs,\n        markerAttrs = _ref2$markerAttrs === void 0 ? {\n      preset: 'hiro'\n    } : _ref2$markerAttrs; // Wipe DOM\n\n\n    domNode.innerHTML = '';\n    state.container = document.createElement('div');\n    domNode.appendChild(state.container); // Create scene\n\n    var scene = document.createElement('a-scene');\n    scene.setAttribute('embedded', '');\n    scene.setAttribute('arjs', 'debugUIEnabled: false;');\n    var arMarker = document.createElement('a-marker'); // add marker attributes\n\n    Object.entries(markerAttrs).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          attr = _ref4[0],\n          val = _ref4[1];\n\n      return arMarker.setAttribute(attr, val);\n    });\n    scene.appendChild(arMarker); // Add forcegraph entity\n\n    state.forcegraph = document.createElement('a-entity');\n    state.forcegraph.setAttribute('forcegraph', null);\n    arMarker.appendChild(state.forcegraph);\n    var cameraEntity = document.createElement('a-entity');\n    cameraEntity.setAttribute('camera', '');\n    scene.appendChild(cameraEntity); // attach scene\n\n    state.container.appendChild(scene); //domNode.appendChild(scene);\n  },\n  update: function update(state, changedProps) {\n    changedProps.hasOwnProperty('width') && state.width && (state.container.style.width = state.width);\n    changedProps.hasOwnProperty('height') && state.height && (state.container.style.height = state.height);\n    changedProps.hasOwnProperty('glScale') && state.forcegraph.setAttribute('scale', _toConsumableArray(new Array(3)).map(function () {\n      return 1 / state.glScale;\n    }).join(' '));\n    changedProps.hasOwnProperty('yOffset') && state.forcegraph.setAttribute('position', \"0 \".concat(state.yOffset, \" 0\"));\n    var passThroughProps = ['jsonUrl', 'numDimensions', 'dagMode', 'dagLevelDistance', 'dagNodeFilter', 'onDagError', 'nodeRelSize', 'nodeId', 'nodeVal', 'nodeResolution', 'nodeVisibility', 'nodeColor', 'nodeAutoColorBy', 'nodeOpacity', 'nodeThreeObject', 'nodeThreeObjectExtend', 'linkSource', 'linkTarget', 'linkHoverPrecision', 'linkVisibility', 'linkColor', 'linkAutoColorBy', 'linkOpacity', 'linkWidth', 'linkResolution', 'linkCurvature', 'linkCurveRotation', 'linkMaterial', 'linkThreeObject', 'linkThreeObjectExtend', 'linkPositionUpdate', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowRelPos', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleSpeed', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution', 'onNodeCenterHover', 'onLinkCenterHover', 'forceEngine', 'd3AlphaMin', 'd3AlphaDecay', 'd3VelocityDecay', 'ngraphPhysics', 'warmupTicks', 'cooldownTicks', 'cooldownTime', 'onEngineTick', 'onEngineStop'];\n    var newProps = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(state).filter(function (_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n          prop = _ref6[0],\n          val = _ref6[1];\n\n      return changedProps.hasOwnProperty(prop) && passThroughProps.indexOf(prop) != -1 && val !== undefined && val !== null;\n    }).map(function (_ref7) {\n      var _ref8 = _slicedToArray(_ref7, 2),\n          key = _ref8[0],\n          val = _ref8[1];\n\n      return _defineProperty({}, key, val);\n    })), _toConsumableArray(Object.entries(state.graphData).map(function (_ref10) {\n      var _ref11 = _slicedToArray(_ref10, 2),\n          key = _ref11[0],\n          val = _ref11[1];\n\n      return _defineProperty({}, key, val);\n    }))));\n    state.forcegraph.setAttribute('forcegraph', newProps);\n  }\n});\n\nexport default _3dForceGraphAr;","import { EventDispatcher, Plane, Raycaster, Vector2, Vector3 } from 'three';\n/*\n * @author zz85 / https://github.com/zz85\n * @author mrdoob / http://mrdoob.com\n * Running this will allow you to drag three.js objects around the screen.\n */\n\nfunction DragControls(_objects, _camera, _domElement) {\n  if (_objects.isCamera) {\n    console.warn('THREE.DragControls: Constructor now expects ( objects, camera, domElement )');\n    var temp = _objects;\n    _objects = _camera;\n    _camera = temp;\n  }\n\n  var _plane = new Plane();\n\n  var _raycaster = new Raycaster();\n\n  var _mouse = new Vector2();\n\n  var _offset = new Vector3();\n\n  var _intersection = new Vector3();\n\n  var _selected = null,\n      _hovered = null; //\n\n  var scope = this;\n\n  function activate() {\n    _domElement.addEventListener('mousemove', onDocumentMouseMove, false);\n\n    _domElement.addEventListener('mousedown', onDocumentMouseDown, false);\n\n    _domElement.addEventListener('mouseup', onDocumentMouseCancel, false);\n\n    _domElement.addEventListener('mouseleave', onDocumentMouseCancel, false);\n\n    _domElement.addEventListener('touchmove', onDocumentTouchMove, false);\n\n    _domElement.addEventListener('touchstart', onDocumentTouchStart, false);\n\n    _domElement.addEventListener('touchend', onDocumentTouchEnd, false);\n  }\n\n  function deactivate() {\n    _domElement.removeEventListener('mousemove', onDocumentMouseMove, false);\n\n    _domElement.removeEventListener('mousedown', onDocumentMouseDown, false);\n\n    _domElement.removeEventListener('mouseup', onDocumentMouseCancel, false);\n\n    _domElement.removeEventListener('mouseleave', onDocumentMouseCancel, false);\n\n    _domElement.removeEventListener('touchmove', onDocumentTouchMove, false);\n\n    _domElement.removeEventListener('touchstart', onDocumentTouchStart, false);\n\n    _domElement.removeEventListener('touchend', onDocumentTouchEnd, false);\n  }\n\n  function dispose() {\n    deactivate();\n  }\n\n  function onDocumentMouseMove(event) {\n    event.preventDefault();\n\n    var rect = _domElement.getBoundingClientRect();\n\n    _mouse.x = (event.clientX - rect.left) / rect.width * 2 - 1;\n    _mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    if (_selected && scope.enabled) {\n      if (_raycaster.ray.intersectPlane(_plane, _intersection)) {\n        _selected.position.copy(_intersection.sub(_offset));\n      }\n\n      scope.dispatchEvent({\n        type: 'drag',\n        object: _selected\n      });\n      return;\n    }\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    var intersects = _raycaster.intersectObjects(_objects);\n\n    if (intersects.length > 0) {\n      var object = intersects[0].object;\n\n      _plane.setFromNormalAndCoplanarPoint(_camera.getWorldDirection(_plane.normal), object.position);\n\n      if (_hovered !== object) {\n        scope.dispatchEvent({\n          type: 'hoveron',\n          object: object\n        });\n        _domElement.style.cursor = 'pointer';\n        _hovered = object;\n      }\n    } else {\n      if (_hovered !== null) {\n        scope.dispatchEvent({\n          type: 'hoveroff',\n          object: _hovered\n        });\n        _domElement.style.cursor = 'auto';\n        _hovered = null;\n      }\n    }\n  }\n\n  function onDocumentMouseDown(event) {\n    event.preventDefault();\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    var intersects = _raycaster.intersectObjects(_objects);\n\n    if (intersects.length > 0) {\n      _selected = intersects[0].object;\n\n      if (_raycaster.ray.intersectPlane(_plane, _intersection)) {\n        _offset.copy(_intersection).sub(_selected.position);\n      }\n\n      _domElement.style.cursor = 'move';\n      scope.dispatchEvent({\n        type: 'dragstart',\n        object: _selected\n      });\n    }\n  }\n\n  function onDocumentMouseCancel(event) {\n    event.preventDefault();\n\n    if (_selected) {\n      scope.dispatchEvent({\n        type: 'dragend',\n        object: _selected\n      });\n      _selected = null;\n    }\n\n    _domElement.style.cursor = 'auto';\n  }\n\n  function onDocumentTouchMove(event) {\n    event.preventDefault();\n    event = event.changedTouches[0];\n\n    var rect = _domElement.getBoundingClientRect();\n\n    _mouse.x = (event.clientX - rect.left) / rect.width * 2 - 1;\n    _mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    if (_selected && scope.enabled) {\n      if (_raycaster.ray.intersectPlane(_plane, _intersection)) {\n        _selected.position.copy(_intersection.sub(_offset));\n      }\n\n      scope.dispatchEvent({\n        type: 'drag',\n        object: _selected\n      });\n      return;\n    }\n  }\n\n  function onDocumentTouchStart(event) {\n    event.preventDefault();\n    event = event.changedTouches[0];\n\n    var rect = _domElement.getBoundingClientRect();\n\n    _mouse.x = (event.clientX - rect.left) / rect.width * 2 - 1;\n    _mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n    _raycaster.setFromCamera(_mouse, _camera);\n\n    var intersects = _raycaster.intersectObjects(_objects);\n\n    if (intersects.length > 0) {\n      _selected = intersects[0].object;\n\n      _plane.setFromNormalAndCoplanarPoint(_camera.getWorldDirection(_plane.normal), _selected.position);\n\n      if (_raycaster.ray.intersectPlane(_plane, _intersection)) {\n        _offset.copy(_intersection).sub(_selected.position);\n      }\n\n      _domElement.style.cursor = 'move';\n      scope.dispatchEvent({\n        type: 'dragstart',\n        object: _selected\n      });\n    }\n  }\n\n  function onDocumentTouchEnd(event) {\n    event.preventDefault();\n\n    if (_selected) {\n      scope.dispatchEvent({\n        type: 'dragend',\n        object: _selected\n      });\n      _selected = null;\n    }\n\n    _domElement.style.cursor = 'auto';\n  }\n\n  activate(); // API\n\n  this.enabled = true;\n  this.activate = activate;\n  this.deactivate = deactivate;\n  this.dispose = dispose; // Backward compatibility\n\n  this.setObjects = function () {\n    console.error('THREE.DragControls: setObjects() has been removed.');\n  };\n\n  this.on = function (type, listener) {\n    console.warn('THREE.DragControls: on() has been deprecated. Use addEventListener() instead.');\n    scope.addEventListener(type, listener);\n  };\n\n  this.off = function (type, listener) {\n    console.warn('THREE.DragControls: off() has been deprecated. Use removeEventListener() instead.');\n    scope.removeEventListener(type, listener);\n  };\n\n  this.notify = function (type) {\n    console.error('THREE.DragControls: notify() has been deprecated. Use dispatchEvent() instead.');\n    scope.dispatchEvent({\n      type: type\n    });\n  };\n}\n\nDragControls.prototype = Object.create(EventDispatcher.prototype);\nDragControls.prototype.constructor = DragControls;\nexport default DragControls;","/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga \t/ http://lantiga.github.io\n */\nimport { EventDispatcher, MOUSE, Quaternion, Vector2, Vector3 } from \"../../../build/three.module.js\";\n\nvar TrackballControls = function TrackballControls(object, domElement) {\n  if (domElement === undefined) console.warn('THREE.TrackballControls: The second parameter \"domElement\" is now mandatory.');\n  if (domElement === document) console.error('THREE.TrackballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n  var scope = this;\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    ZOOM: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_ZOOM_PAN: 4\n  };\n  this.object = object;\n  this.domElement = domElement; // API\n\n  this.enabled = true;\n  this.screen = {\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0\n  };\n  this.rotateSpeed = 1.0;\n  this.zoomSpeed = 1.2;\n  this.panSpeed = 0.3;\n  this.noRotate = false;\n  this.noZoom = false;\n  this.noPan = false;\n  this.staticMoving = false;\n  this.dynamicDampingFactor = 0.2;\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n  this.keys = [65\n  /*A*/\n  , 83\n  /*S*/\n  , 68\n  /*D*/\n  ];\n  this.mouseButtons = {\n    LEFT: MOUSE.ROTATE,\n    MIDDLE: MOUSE.ZOOM,\n    RIGHT: MOUSE.PAN\n  }; // internals\n\n  this.target = new Vector3();\n  var EPS = 0.000001;\n  var lastPosition = new Vector3();\n  var lastZoom = 1;\n\n  var _state = STATE.NONE,\n      _keyState = STATE.NONE,\n      _eye = new Vector3(),\n      _movePrev = new Vector2(),\n      _moveCurr = new Vector2(),\n      _lastAxis = new Vector3(),\n      _lastAngle = 0,\n      _zoomStart = new Vector2(),\n      _zoomEnd = new Vector2(),\n      _touchZoomDistanceStart = 0,\n      _touchZoomDistanceEnd = 0,\n      _panStart = new Vector2(),\n      _panEnd = new Vector2(); // for reset\n\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.up0 = this.object.up.clone();\n  this.zoom0 = this.object.zoom; // events\n\n  var changeEvent = {\n    type: 'change'\n  };\n  var startEvent = {\n    type: 'start'\n  };\n  var endEvent = {\n    type: 'end'\n  }; // methods\n\n  this.handleResize = function () {\n    var box = scope.domElement.getBoundingClientRect(); // adjustments come from similar code in the jquery offset() function\n\n    var d = scope.domElement.ownerDocument.documentElement;\n    scope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n    scope.screen.top = box.top + window.pageYOffset - d.clientTop;\n    scope.screen.width = box.width;\n    scope.screen.height = box.height;\n  };\n\n  var getMouseOnScreen = function () {\n    var vector = new Vector2();\n    return function getMouseOnScreen(pageX, pageY) {\n      vector.set((pageX - scope.screen.left) / scope.screen.width, (pageY - scope.screen.top) / scope.screen.height);\n      return vector;\n    };\n  }();\n\n  var getMouseOnCircle = function () {\n    var vector = new Vector2();\n    return function getMouseOnCircle(pageX, pageY) {\n      vector.set((pageX - scope.screen.width * 0.5 - scope.screen.left) / (scope.screen.width * 0.5), (scope.screen.height + 2 * (scope.screen.top - pageY)) / scope.screen.width // screen.width intentional\n      );\n      return vector;\n    };\n  }();\n\n  this.rotateCamera = function () {\n    var axis = new Vector3(),\n        quaternion = new Quaternion(),\n        eyeDirection = new Vector3(),\n        objectUpDirection = new Vector3(),\n        objectSidewaysDirection = new Vector3(),\n        moveDirection = new Vector3(),\n        angle;\n    return function rotateCamera() {\n      moveDirection.set(_moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0);\n      angle = moveDirection.length();\n\n      if (angle) {\n        _eye.copy(scope.object.position).sub(scope.target);\n\n        eyeDirection.copy(_eye).normalize();\n        objectUpDirection.copy(scope.object.up).normalize();\n        objectSidewaysDirection.crossVectors(objectUpDirection, eyeDirection).normalize();\n        objectUpDirection.setLength(_moveCurr.y - _movePrev.y);\n        objectSidewaysDirection.setLength(_moveCurr.x - _movePrev.x);\n        moveDirection.copy(objectUpDirection.add(objectSidewaysDirection));\n        axis.crossVectors(moveDirection, _eye).normalize();\n        angle *= scope.rotateSpeed;\n        quaternion.setFromAxisAngle(axis, angle);\n\n        _eye.applyQuaternion(quaternion);\n\n        scope.object.up.applyQuaternion(quaternion);\n\n        _lastAxis.copy(axis);\n\n        _lastAngle = angle;\n      } else if (!scope.staticMoving && _lastAngle) {\n        _lastAngle *= Math.sqrt(1.0 - scope.dynamicDampingFactor);\n\n        _eye.copy(scope.object.position).sub(scope.target);\n\n        quaternion.setFromAxisAngle(_lastAxis, _lastAngle);\n\n        _eye.applyQuaternion(quaternion);\n\n        scope.object.up.applyQuaternion(quaternion);\n      }\n\n      _movePrev.copy(_moveCurr);\n    };\n  }();\n\n  this.zoomCamera = function () {\n    var factor;\n\n    if (_state === STATE.TOUCH_ZOOM_PAN) {\n      factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n      _touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n      if (scope.object.isPerspectiveCamera) {\n        _eye.multiplyScalar(factor);\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom *= factor;\n        scope.object.updateProjectionMatrix();\n      } else {\n        console.warn('THREE.TrackballControls: Unsupported camera type');\n      }\n    } else {\n      factor = 1.0 + (_zoomEnd.y - _zoomStart.y) * scope.zoomSpeed;\n\n      if (factor !== 1.0 && factor > 0.0) {\n        if (scope.object.isPerspectiveCamera) {\n          _eye.multiplyScalar(factor);\n        } else if (scope.object.isOrthographicCamera) {\n          scope.object.zoom /= factor;\n          scope.object.updateProjectionMatrix();\n        } else {\n          console.warn('THREE.TrackballControls: Unsupported camera type');\n        }\n      }\n\n      if (scope.staticMoving) {\n        _zoomStart.copy(_zoomEnd);\n      } else {\n        _zoomStart.y += (_zoomEnd.y - _zoomStart.y) * this.dynamicDampingFactor;\n      }\n    }\n  };\n\n  this.panCamera = function () {\n    var mouseChange = new Vector2(),\n        objectUp = new Vector3(),\n        pan = new Vector3();\n    return function panCamera() {\n      mouseChange.copy(_panEnd).sub(_panStart);\n\n      if (mouseChange.lengthSq()) {\n        if (scope.object.isOrthographicCamera) {\n          var scale_x = (scope.object.right - scope.object.left) / scope.object.zoom / scope.domElement.clientWidth;\n          var scale_y = (scope.object.top - scope.object.bottom) / scope.object.zoom / scope.domElement.clientWidth;\n          mouseChange.x *= scale_x;\n          mouseChange.y *= scale_y;\n        }\n\n        mouseChange.multiplyScalar(_eye.length() * scope.panSpeed);\n        pan.copy(_eye).cross(scope.object.up).setLength(mouseChange.x);\n        pan.add(objectUp.copy(scope.object.up).setLength(mouseChange.y));\n        scope.object.position.add(pan);\n        scope.target.add(pan);\n\n        if (scope.staticMoving) {\n          _panStart.copy(_panEnd);\n        } else {\n          _panStart.add(mouseChange.subVectors(_panEnd, _panStart).multiplyScalar(scope.dynamicDampingFactor));\n        }\n      }\n    };\n  }();\n\n  this.checkDistances = function () {\n    if (!scope.noZoom || !scope.noPan) {\n      if (_eye.lengthSq() > scope.maxDistance * scope.maxDistance) {\n        scope.object.position.addVectors(scope.target, _eye.setLength(scope.maxDistance));\n\n        _zoomStart.copy(_zoomEnd);\n      }\n\n      if (_eye.lengthSq() < scope.minDistance * scope.minDistance) {\n        scope.object.position.addVectors(scope.target, _eye.setLength(scope.minDistance));\n\n        _zoomStart.copy(_zoomEnd);\n      }\n    }\n  };\n\n  this.update = function () {\n    _eye.subVectors(scope.object.position, scope.target);\n\n    if (!scope.noRotate) {\n      scope.rotateCamera();\n    }\n\n    if (!scope.noZoom) {\n      scope.zoomCamera();\n    }\n\n    if (!scope.noPan) {\n      scope.panCamera();\n    }\n\n    scope.object.position.addVectors(scope.target, _eye);\n\n    if (scope.object.isPerspectiveCamera) {\n      scope.checkDistances();\n      scope.object.lookAt(scope.target);\n\n      if (lastPosition.distanceToSquared(scope.object.position) > EPS) {\n        scope.dispatchEvent(changeEvent);\n        lastPosition.copy(scope.object.position);\n      }\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.lookAt(scope.target);\n\n      if (lastPosition.distanceToSquared(scope.object.position) > EPS || lastZoom !== scope.object.zoom) {\n        scope.dispatchEvent(changeEvent);\n        lastPosition.copy(scope.object.position);\n        lastZoom = scope.object.zoom;\n      }\n    } else {\n      console.warn('THREE.TrackballControls: Unsupported camera type');\n    }\n  };\n\n  this.reset = function () {\n    _state = STATE.NONE;\n    _keyState = STATE.NONE;\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.up.copy(scope.up0);\n    scope.object.zoom = scope.zoom0;\n    scope.object.updateProjectionMatrix();\n\n    _eye.subVectors(scope.object.position, scope.target);\n\n    scope.object.lookAt(scope.target);\n    scope.dispatchEvent(changeEvent);\n    lastPosition.copy(scope.object.position);\n    lastZoom = scope.object.zoom;\n  }; // listeners\n\n\n  function keydown(event) {\n    if (scope.enabled === false) return;\n    window.removeEventListener('keydown', keydown);\n\n    if (_keyState !== STATE.NONE) {\n      return;\n    } else if (event.keyCode === scope.keys[STATE.ROTATE] && !scope.noRotate) {\n      _keyState = STATE.ROTATE;\n    } else if (event.keyCode === scope.keys[STATE.ZOOM] && !scope.noZoom) {\n      _keyState = STATE.ZOOM;\n    } else if (event.keyCode === scope.keys[STATE.PAN] && !scope.noPan) {\n      _keyState = STATE.PAN;\n    }\n  }\n\n  function keyup() {\n    if (scope.enabled === false) return;\n    _keyState = STATE.NONE;\n    window.addEventListener('keydown', keydown, false);\n  }\n\n  function mousedown(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (_state === STATE.NONE) {\n      switch (event.button) {\n        case scope.mouseButtons.LEFT:\n          _state = STATE.ROTATE;\n          break;\n\n        case scope.mouseButtons.MIDDLE:\n          _state = STATE.ZOOM;\n          break;\n\n        case scope.mouseButtons.RIGHT:\n          _state = STATE.PAN;\n          break;\n\n        default:\n          _state = STATE.NONE;\n      }\n    }\n\n    var state = _keyState !== STATE.NONE ? _keyState : _state;\n\n    if (state === STATE.ROTATE && !scope.noRotate) {\n      _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n\n      _movePrev.copy(_moveCurr);\n    } else if (state === STATE.ZOOM && !scope.noZoom) {\n      _zoomStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n\n      _zoomEnd.copy(_zoomStart);\n    } else if (state === STATE.PAN && !scope.noPan) {\n      _panStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n\n      _panEnd.copy(_panStart);\n    }\n\n    scope.domElement.ownerDocument.addEventListener('mousemove', mousemove, false);\n    scope.domElement.ownerDocument.addEventListener('mouseup', mouseup, false);\n    scope.dispatchEvent(startEvent);\n  }\n\n  function mousemove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n    var state = _keyState !== STATE.NONE ? _keyState : _state;\n\n    if (state === STATE.ROTATE && !scope.noRotate) {\n      _movePrev.copy(_moveCurr);\n\n      _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n    } else if (state === STATE.ZOOM && !scope.noZoom) {\n      _zoomEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n    } else if (state === STATE.PAN && !scope.noPan) {\n      _panEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n    }\n  }\n\n  function mouseup(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n    _state = STATE.NONE;\n    scope.domElement.ownerDocument.removeEventListener('mousemove', mousemove);\n    scope.domElement.ownerDocument.removeEventListener('mouseup', mouseup);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function mousewheel(event) {\n    if (scope.enabled === false) return;\n    if (scope.noZoom === true) return;\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.deltaMode) {\n      case 2:\n        // Zoom in pages\n        _zoomStart.y -= event.deltaY * 0.025;\n        break;\n\n      case 1:\n        // Zoom in lines\n        _zoomStart.y -= event.deltaY * 0.01;\n        break;\n\n      default:\n        // undefined, 0, assume pixels\n        _zoomStart.y -= event.deltaY * 0.00025;\n        break;\n    }\n\n    scope.dispatchEvent(startEvent);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function touchstart(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1:\n        _state = STATE.TOUCH_ROTATE;\n\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n        _movePrev.copy(_moveCurr);\n\n        break;\n\n      default:\n        // 2 or more\n        _state = STATE.TOUCH_ZOOM_PAN;\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        _touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n        var x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n        var y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n\n        _panStart.copy(getMouseOnScreen(x, y));\n\n        _panEnd.copy(_panStart);\n\n        break;\n    }\n\n    scope.dispatchEvent(startEvent);\n  }\n\n  function touchmove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n      case 1:\n        _movePrev.copy(_moveCurr);\n\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n        break;\n\n      default:\n        // 2 or more\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        _touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n        var x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n        var y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n\n        _panEnd.copy(getMouseOnScreen(x, y));\n\n        break;\n    }\n  }\n\n  function touchend(event) {\n    if (scope.enabled === false) return;\n\n    switch (event.touches.length) {\n      case 0:\n        _state = STATE.NONE;\n        break;\n\n      case 1:\n        _state = STATE.TOUCH_ROTATE;\n\n        _moveCurr.copy(getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n\n        _movePrev.copy(_moveCurr);\n\n        break;\n    }\n\n    scope.dispatchEvent(endEvent);\n  }\n\n  function contextmenu(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n  }\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener('contextmenu', contextmenu, false);\n    scope.domElement.removeEventListener('mousedown', mousedown, false);\n    scope.domElement.removeEventListener('wheel', mousewheel, false);\n    scope.domElement.removeEventListener('touchstart', touchstart, false);\n    scope.domElement.removeEventListener('touchend', touchend, false);\n    scope.domElement.removeEventListener('touchmove', touchmove, false);\n    scope.domElement.ownerDocument.removeEventListener('mousemove', mousemove, false);\n    scope.domElement.ownerDocument.removeEventListener('mouseup', mouseup, false);\n    window.removeEventListener('keydown', keydown, false);\n    window.removeEventListener('keyup', keyup, false);\n  };\n\n  this.domElement.addEventListener('contextmenu', contextmenu, false);\n  this.domElement.addEventListener('mousedown', mousedown, false);\n  this.domElement.addEventListener('wheel', mousewheel, false);\n  this.domElement.addEventListener('touchstart', touchstart, false);\n  this.domElement.addEventListener('touchend', touchend, false);\n  this.domElement.addEventListener('touchmove', touchmove, false);\n  window.addEventListener('keydown', keydown, false);\n  window.addEventListener('keyup', keyup, false);\n  this.handleResize(); // force an update at start\n\n  this.update();\n};\n\nTrackballControls.prototype = Object.create(EventDispatcher.prototype);\nTrackballControls.prototype.constructor = TrackballControls;\nexport { TrackballControls };","/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * @author ScieCode / http://github.com/sciecode\n */\nimport { EventDispatcher, MOUSE, Quaternion, Spherical, TOUCH, Vector2, Vector3 } from \"../../../build/three.module.js\"; // This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function OrbitControls(object, domElement) {\n  if (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n  if (domElement === document) console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n  this.object = object;\n  this.domElement = domElement; // Set to false to disable this control\n\n  this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n  this.target = new Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n  this.minDistance = 0;\n  this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n  this.minZoom = 0;\n  this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n\n  this.minPolarAngle = 0; // radians\n\n  this.maxPolarAngle = Math.PI; // radians\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\n  this.minAzimuthAngle = -Infinity; // radians\n\n  this.maxAzimuthAngle = Infinity; // radians\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n\n  this.enableDamping = false;\n  this.dampingFactor = 0.05; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0; // Set to false to disable rotating\n\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0; // Set to false to disable panning\n\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n  // Set to false to disable use of the keys\n\n  this.enableKeys = true; // The four arrow keys\n\n  this.keys = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    BOTTOM: 40\n  }; // Mouse buttons\n\n  this.mouseButtons = {\n    LEFT: MOUSE.ROTATE,\n    MIDDLE: MOUSE.DOLLY,\n    RIGHT: MOUSE.PAN\n  }; // Touch fingers\n\n  this.touches = {\n    ONE: TOUCH.ROTATE,\n    TWO: TOUCH.DOLLY_PAN\n  }; // for reset\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom; //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return spherical.theta;\n  };\n\n  this.saveState = function () {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.reset = function () {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n    scope.update();\n    state = STATE.NONE;\n  }; // this method is exposed, but perhaps it would be better if we can make it private...\n\n\n  this.update = function () {\n    var offset = new Vector3(); // so camera.up is the orbit axis\n\n    var quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n    var quatInverse = quat.clone().inverse();\n    var lastPosition = new Vector3();\n    var lastQuaternion = new Quaternion();\n    var twoPI = 2 * Math.PI;\n    return function update() {\n      var position = scope.object.position;\n      offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\n\n      offset.applyQuaternion(quat); // angle from z-axis around y-axis\n\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      if (scope.enableDamping) {\n        spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n        spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n      } else {\n        spherical.theta += sphericalDelta.theta;\n        spherical.phi += sphericalDelta.phi;\n      } // restrict theta to be between desired limits\n\n\n      var min = scope.minAzimuthAngle;\n      var max = scope.maxAzimuthAngle;\n\n      if (isFinite(min) && isFinite(max)) {\n        if (min < -Math.PI) min += twoPI;else if (min > Math.PI) min -= twoPI;\n        if (max < -Math.PI) max += twoPI;else if (max > Math.PI) max -= twoPI;\n\n        if (min < max) {\n          spherical.theta = Math.max(min, Math.min(max, spherical.theta));\n        } else {\n          spherical.theta = spherical.theta > (min + max) / 2 ? Math.max(min, spherical.theta) : Math.min(max, spherical.theta);\n        }\n      } // restrict phi to be between desired limits\n\n\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n      spherical.makeSafe();\n      spherical.radius *= scale; // restrict radius to be between desired limits\n\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\n\n      if (scope.enableDamping === true) {\n        scope.target.addScaledVector(panOffset, scope.dampingFactor);\n      } else {\n        scope.target.add(panOffset);\n      }\n\n      offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\n\n      offset.applyQuaternion(quatInverse);\n      position.copy(scope.target).add(offset);\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n        panOffset.set(0, 0, 0);\n      }\n\n      scale = 1; // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n        scope.dispatchEvent(changeEvent);\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n        return true;\n      }\n\n      return false;\n    };\n  }();\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n    scope.domElement.removeEventListener('mousedown', onMouseDown, false);\n    scope.domElement.removeEventListener('wheel', onMouseWheel, false);\n    scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n    scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n    scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n    scope.domElement.ownerDocument.removeEventListener('mousemove', onMouseMove, false);\n    scope.domElement.ownerDocument.removeEventListener('mouseup', onMouseUp, false);\n    scope.domElement.removeEventListener('keydown', onKeyDown, false); //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  }; //\n  // internals\n  //\n\n\n  var scope = this;\n  var changeEvent = {\n    type: 'change'\n  };\n  var startEvent = {\n    type: 'start'\n  };\n  var endEvent = {\n    type: 'end'\n  };\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_PAN: 4,\n    TOUCH_DOLLY_PAN: 5,\n    TOUCH_DOLLY_ROTATE: 6\n  };\n  var state = STATE.NONE;\n  var EPS = 0.000001; // current position in spherical coordinates\n\n  var spherical = new Spherical();\n  var sphericalDelta = new Spherical();\n  var scale = 1;\n  var panOffset = new Vector3();\n  var zoomChanged = false;\n  var rotateStart = new Vector2();\n  var rotateEnd = new Vector2();\n  var rotateDelta = new Vector2();\n  var panStart = new Vector2();\n  var panEnd = new Vector2();\n  var panDelta = new Vector2();\n  var dollyStart = new Vector2();\n  var dollyEnd = new Vector2();\n  var dollyDelta = new Vector2();\n\n  function getAutoRotationAngle() {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft(angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = function () {\n    var v = new Vector3();\n    return function panLeft(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\n      v.multiplyScalar(-distance);\n      panOffset.add(v);\n    };\n  }();\n\n  var panUp = function () {\n    var v = new Vector3();\n    return function panUp(distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n      panOffset.add(v);\n    };\n  }(); // deltaX and deltaY are in pixels; right and down are positive\n\n\n  var pan = function () {\n    var offset = new Vector3();\n    return function pan(deltaX, deltaY) {\n      var element = scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length(); // half of the fov is center to top of screen\n\n        targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we use only clientHeight here so aspect ratio does not distort speed\n\n        panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n        panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n        panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n        scope.enablePan = false;\n      }\n    };\n  }();\n\n  function dollyOut(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyIn(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n      scope.enableZoom = false;\n    }\n  } //\n  // event callbacks - update the object state\n  //\n\n\n  function handleMouseDownRotate(event) {\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n    rotateEnd.set(event.clientX, event.clientY);\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n    var element = scope.domElement;\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n    rotateStart.copy(rotateEnd);\n    scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n    dollyEnd.set(event.clientX, event.clientY);\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyOut(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyIn(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n    scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n    panEnd.set(event.clientX, event.clientY);\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n    pan(panDelta.x, panDelta.y);\n    panStart.copy(panEnd);\n    scope.update();\n  }\n\n  function handleMouseUp()\n  /*event*/\n  {// no-op\n  }\n\n  function handleMouseWheel(event) {\n    if (event.deltaY < 0) {\n      dollyIn(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyOut(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown(event) {\n    var needsUpdate = false;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n    }\n\n    if (needsUpdate) {\n      // prevent the browser from scrolling on cursor keys\n      event.preventDefault();\n      scope.update();\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n    if (event.touches.length == 1) {\n      rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      rotateStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartPan(event) {\n    if (event.touches.length == 1) {\n      panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n    var distance = Math.sqrt(dx * dx + dy * dy);\n    dollyStart.set(0, distance);\n  }\n\n  function handleTouchStartDollyPan(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n    if (scope.enablePan) handleTouchStartPan(event);\n  }\n\n  function handleTouchStartDollyRotate(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n    if (scope.enableRotate) handleTouchStartRotate(event);\n  }\n\n  function handleTouchMoveRotate(event) {\n    if (event.touches.length == 1) {\n      rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      rotateEnd.set(x, y);\n    }\n\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n    var element = scope.domElement;\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n    rotateStart.copy(rotateEnd);\n  }\n\n  function handleTouchMovePan(event) {\n    if (event.touches.length == 1) {\n      panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      panEnd.set(x, y);\n    }\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n    pan(panDelta.x, panDelta.y);\n    panStart.copy(panEnd);\n  }\n\n  function handleTouchMoveDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n    var distance = Math.sqrt(dx * dx + dy * dy);\n    dollyEnd.set(0, distance);\n    dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n    dollyOut(dollyDelta.y);\n    dollyStart.copy(dollyEnd);\n  }\n\n  function handleTouchMoveDollyPan(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n    if (scope.enablePan) handleTouchMovePan(event);\n  }\n\n  function handleTouchMoveDollyRotate(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n    if (scope.enableRotate) handleTouchMoveRotate(event);\n  }\n\n  function handleTouchEnd()\n  /*event*/\n  {// no-op\n  } //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n\n  function onMouseDown(event) {\n    if (scope.enabled === false) return; // Prevent the browser from scrolling.\n\n    event.preventDefault(); // Manually set the focus since calling preventDefault above\n    // prevents the browser from setting it automatically.\n\n    scope.domElement.focus ? scope.domElement.focus() : window.focus();\n    var mouseAction;\n\n    switch (event.button) {\n      case 0:\n        mouseAction = scope.mouseButtons.LEFT;\n        break;\n\n      case 1:\n        mouseAction = scope.mouseButtons.MIDDLE;\n        break;\n\n      case 2:\n        mouseAction = scope.mouseButtons.RIGHT;\n        break;\n\n      default:\n        mouseAction = -1;\n    }\n\n    switch (mouseAction) {\n      case MOUSE.DOLLY:\n        if (scope.enableZoom === false) return;\n        handleMouseDownDolly(event);\n        state = STATE.DOLLY;\n        break;\n\n      case MOUSE.ROTATE:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          if (scope.enablePan === false) return;\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        } else {\n          if (scope.enableRotate === false) return;\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        }\n\n        break;\n\n      case MOUSE.PAN:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          if (scope.enableRotate === false) return;\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        } else {\n          if (scope.enablePan === false) return;\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        }\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.domElement.ownerDocument.addEventListener('mousemove', onMouseMove, false);\n      scope.domElement.ownerDocument.addEventListener('mouseup', onMouseUp, false);\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n        handleMouseMoveRotate(event);\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n        handleMouseMoveDolly(event);\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n        handleMouseMovePan(event);\n        break;\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n    handleMouseUp(event);\n    scope.domElement.ownerDocument.removeEventListener('mousemove', onMouseMove, false);\n    scope.domElement.ownerDocument.removeEventListener('mouseup', onMouseUp, false);\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n    event.preventDefault();\n    event.stopPropagation();\n    scope.dispatchEvent(startEvent);\n    handleMouseWheel(event);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault(); // prevent scrolling\n\n    switch (event.touches.length) {\n      case 1:\n        switch (scope.touches.ONE) {\n          case TOUCH.ROTATE:\n            if (scope.enableRotate === false) return;\n            handleTouchStartRotate(event);\n            state = STATE.TOUCH_ROTATE;\n            break;\n\n          case TOUCH.PAN:\n            if (scope.enablePan === false) return;\n            handleTouchStartPan(event);\n            state = STATE.TOUCH_PAN;\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      case 2:\n        switch (scope.touches.TWO) {\n          case TOUCH.DOLLY_PAN:\n            if (scope.enableZoom === false && scope.enablePan === false) return;\n            handleTouchStartDollyPan(event);\n            state = STATE.TOUCH_DOLLY_PAN;\n            break;\n\n          case TOUCH.DOLLY_ROTATE:\n            if (scope.enableZoom === false && scope.enableRotate === false) return;\n            handleTouchStartDollyRotate(event);\n            state = STATE.TOUCH_DOLLY_ROTATE;\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault(); // prevent scrolling\n\n    event.stopPropagation();\n\n    switch (state) {\n      case STATE.TOUCH_ROTATE:\n        if (scope.enableRotate === false) return;\n        handleTouchMoveRotate(event);\n        scope.update();\n        break;\n\n      case STATE.TOUCH_PAN:\n        if (scope.enablePan === false) return;\n        handleTouchMovePan(event);\n        scope.update();\n        break;\n\n      case STATE.TOUCH_DOLLY_PAN:\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n        handleTouchMoveDollyPan(event);\n        scope.update();\n        break;\n\n      case STATE.TOUCH_DOLLY_ROTATE:\n        if (scope.enableZoom === false && scope.enableRotate === false) return;\n        handleTouchMoveDollyRotate(event);\n        scope.update();\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd(event) {\n    if (scope.enabled === false) return;\n    handleTouchEnd(event);\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n  } //\n\n\n  scope.domElement.addEventListener('contextmenu', onContextMenu, false);\n  scope.domElement.addEventListener('mousedown', onMouseDown, false);\n  scope.domElement.addEventListener('wheel', onMouseWheel, false);\n  scope.domElement.addEventListener('touchstart', onTouchStart, false);\n  scope.domElement.addEventListener('touchend', onTouchEnd, false);\n  scope.domElement.addEventListener('touchmove', onTouchMove, false);\n  scope.domElement.addEventListener('keydown', onKeyDown, false); // make sure element can receive keys.\n\n  if (scope.domElement.tabIndex === -1) {\n    scope.domElement.tabIndex = 0;\n  } // force an update at start\n\n\n  this.update();\n};\n\nOrbitControls.prototype = Object.create(EventDispatcher.prototype);\nOrbitControls.prototype.constructor = OrbitControls; // This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function MapControls(object, domElement) {\n  OrbitControls.call(this, object, domElement);\n  this.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n  this.mouseButtons.LEFT = MOUSE.PAN;\n  this.mouseButtons.RIGHT = MOUSE.ROTATE;\n  this.touches.ONE = TOUCH.PAN;\n  this.touches.TWO = TOUCH.DOLLY_ROTATE;\n};\n\nMapControls.prototype = Object.create(EventDispatcher.prototype);\nMapControls.prototype.constructor = MapControls;\nexport { OrbitControls, MapControls };","/**\n * @author James Baicoianu / http://www.baicoianu.com/\n */\nimport { Quaternion, Vector3 } from \"../../../build/three.module.js\";\n\nvar FlyControls = function FlyControls(object, domElement) {\n  if (domElement === undefined) {\n    console.warn('THREE.FlyControls: The second parameter \"domElement\" is now mandatory.');\n    domElement = document;\n  }\n\n  this.object = object;\n  this.domElement = domElement;\n  if (domElement) this.domElement.setAttribute('tabindex', -1); // API\n\n  this.movementSpeed = 1.0;\n  this.rollSpeed = 0.005;\n  this.dragToLook = false;\n  this.autoForward = false; // disable default target object behavior\n  // internals\n\n  this.tmpQuaternion = new Quaternion();\n  this.mouseStatus = 0;\n  this.moveState = {\n    up: 0,\n    down: 0,\n    left: 0,\n    right: 0,\n    forward: 0,\n    back: 0,\n    pitchUp: 0,\n    pitchDown: 0,\n    yawLeft: 0,\n    yawRight: 0,\n    rollLeft: 0,\n    rollRight: 0\n  };\n  this.moveVector = new Vector3(0, 0, 0);\n  this.rotationVector = new Vector3(0, 0, 0);\n\n  this.keydown = function (event) {\n    if (event.altKey) {\n      return;\n    } //event.preventDefault();\n\n\n    switch (event.keyCode) {\n      case 16:\n        /* shift */\n        this.movementSpeedMultiplier = .1;\n        break;\n\n      case 87:\n        /*W*/\n        this.moveState.forward = 1;\n        break;\n\n      case 83:\n        /*S*/\n        this.moveState.back = 1;\n        break;\n\n      case 65:\n        /*A*/\n        this.moveState.left = 1;\n        break;\n\n      case 68:\n        /*D*/\n        this.moveState.right = 1;\n        break;\n\n      case 82:\n        /*R*/\n        this.moveState.up = 1;\n        break;\n\n      case 70:\n        /*F*/\n        this.moveState.down = 1;\n        break;\n\n      case 38:\n        /*up*/\n        this.moveState.pitchUp = 1;\n        break;\n\n      case 40:\n        /*down*/\n        this.moveState.pitchDown = 1;\n        break;\n\n      case 37:\n        /*left*/\n        this.moveState.yawLeft = 1;\n        break;\n\n      case 39:\n        /*right*/\n        this.moveState.yawRight = 1;\n        break;\n\n      case 81:\n        /*Q*/\n        this.moveState.rollLeft = 1;\n        break;\n\n      case 69:\n        /*E*/\n        this.moveState.rollRight = 1;\n        break;\n    }\n\n    this.updateMovementVector();\n    this.updateRotationVector();\n  };\n\n  this.keyup = function (event) {\n    switch (event.keyCode) {\n      case 16:\n        /* shift */\n        this.movementSpeedMultiplier = 1;\n        break;\n\n      case 87:\n        /*W*/\n        this.moveState.forward = 0;\n        break;\n\n      case 83:\n        /*S*/\n        this.moveState.back = 0;\n        break;\n\n      case 65:\n        /*A*/\n        this.moveState.left = 0;\n        break;\n\n      case 68:\n        /*D*/\n        this.moveState.right = 0;\n        break;\n\n      case 82:\n        /*R*/\n        this.moveState.up = 0;\n        break;\n\n      case 70:\n        /*F*/\n        this.moveState.down = 0;\n        break;\n\n      case 38:\n        /*up*/\n        this.moveState.pitchUp = 0;\n        break;\n\n      case 40:\n        /*down*/\n        this.moveState.pitchDown = 0;\n        break;\n\n      case 37:\n        /*left*/\n        this.moveState.yawLeft = 0;\n        break;\n\n      case 39:\n        /*right*/\n        this.moveState.yawRight = 0;\n        break;\n\n      case 81:\n        /*Q*/\n        this.moveState.rollLeft = 0;\n        break;\n\n      case 69:\n        /*E*/\n        this.moveState.rollRight = 0;\n        break;\n    }\n\n    this.updateMovementVector();\n    this.updateRotationVector();\n  };\n\n  this.mousedown = function (event) {\n    if (this.domElement !== document) {\n      this.domElement.focus();\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.dragToLook) {\n      this.mouseStatus++;\n    } else {\n      switch (event.button) {\n        case 0:\n          this.moveState.forward = 1;\n          break;\n\n        case 2:\n          this.moveState.back = 1;\n          break;\n      }\n\n      this.updateMovementVector();\n    }\n  };\n\n  this.mousemove = function (event) {\n    if (!this.dragToLook || this.mouseStatus > 0) {\n      var container = this.getContainerDimensions();\n      var halfWidth = container.size[0] / 2;\n      var halfHeight = container.size[1] / 2;\n      this.moveState.yawLeft = -(event.pageX - container.offset[0] - halfWidth) / halfWidth;\n      this.moveState.pitchDown = (event.pageY - container.offset[1] - halfHeight) / halfHeight;\n      this.updateRotationVector();\n    }\n  };\n\n  this.mouseup = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.dragToLook) {\n      this.mouseStatus--;\n      this.moveState.yawLeft = this.moveState.pitchDown = 0;\n    } else {\n      switch (event.button) {\n        case 0:\n          this.moveState.forward = 0;\n          break;\n\n        case 2:\n          this.moveState.back = 0;\n          break;\n      }\n\n      this.updateMovementVector();\n    }\n\n    this.updateRotationVector();\n  };\n\n  this.update = function (delta) {\n    var moveMult = delta * this.movementSpeed;\n    var rotMult = delta * this.rollSpeed;\n    this.object.translateX(this.moveVector.x * moveMult);\n    this.object.translateY(this.moveVector.y * moveMult);\n    this.object.translateZ(this.moveVector.z * moveMult);\n    this.tmpQuaternion.set(this.rotationVector.x * rotMult, this.rotationVector.y * rotMult, this.rotationVector.z * rotMult, 1).normalize();\n    this.object.quaternion.multiply(this.tmpQuaternion); // expose the rotation vector for convenience\n\n    this.object.rotation.setFromQuaternion(this.object.quaternion, this.object.rotation.order);\n  };\n\n  this.updateMovementVector = function () {\n    var forward = this.moveState.forward || this.autoForward && !this.moveState.back ? 1 : 0;\n    this.moveVector.x = -this.moveState.left + this.moveState.right;\n    this.moveVector.y = -this.moveState.down + this.moveState.up;\n    this.moveVector.z = -forward + this.moveState.back; //console.log( 'move:', [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\n  };\n\n  this.updateRotationVector = function () {\n    this.rotationVector.x = -this.moveState.pitchDown + this.moveState.pitchUp;\n    this.rotationVector.y = -this.moveState.yawRight + this.moveState.yawLeft;\n    this.rotationVector.z = -this.moveState.rollRight + this.moveState.rollLeft; //console.log( 'rotate:', [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\n  };\n\n  this.getContainerDimensions = function () {\n    if (this.domElement != document) {\n      return {\n        size: [this.domElement.offsetWidth, this.domElement.offsetHeight],\n        offset: [this.domElement.offsetLeft, this.domElement.offsetTop]\n      };\n    } else {\n      return {\n        size: [window.innerWidth, window.innerHeight],\n        offset: [0, 0]\n      };\n    }\n  };\n\n  function bind(scope, fn) {\n    return function () {\n      fn.apply(scope, arguments);\n    };\n  }\n\n  function contextmenu(event) {\n    event.preventDefault();\n  }\n\n  this.dispose = function () {\n    this.domElement.removeEventListener('contextmenu', contextmenu, false);\n    this.domElement.removeEventListener('mousedown', _mousedown, false);\n    this.domElement.removeEventListener('mousemove', _mousemove, false);\n    this.domElement.removeEventListener('mouseup', _mouseup, false);\n    window.removeEventListener('keydown', _keydown, false);\n    window.removeEventListener('keyup', _keyup, false);\n  };\n\n  var _mousemove = bind(this, this.mousemove);\n\n  var _mousedown = bind(this, this.mousedown);\n\n  var _mouseup = bind(this, this.mouseup);\n\n  var _keydown = bind(this, this.keydown);\n\n  var _keyup = bind(this, this.keyup);\n\n  this.domElement.addEventListener('contextmenu', contextmenu, false);\n  this.domElement.addEventListener('mousemove', _mousemove, false);\n  this.domElement.addEventListener('mousedown', _mousedown, false);\n  this.domElement.addEventListener('mouseup', _mouseup, false);\n  window.addEventListener('keydown', _keydown, false);\n  window.addEventListener('keyup', _keyup, false);\n  this.updateMovementVector();\n  this.updateRotationVector();\n};\n\nexport { FlyControls };","import { OrthographicCamera, PlaneBufferGeometry, Mesh } from \"../../../build/three.module.js\";\n\nfunction Pass() {\n  // if set to true, the pass is processed by the composer\n  this.enabled = true; // if set to true, the pass indicates to swap read and write buffer after rendering\n\n  this.needsSwap = true; // if set to true, the pass clears its buffer before rendering\n\n  this.clear = false; // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\n  this.renderToScreen = false;\n}\n\nObject.assign(Pass.prototype, {\n  setSize: function setSize()\n  /* width, height */\n  {},\n  render: function render()\n  /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */\n  {\n    console.error('THREE.Pass: .render() must be implemented in derived pass.');\n  }\n}); // Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = function () {\n  var camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var geometry = new PlaneBufferGeometry(2, 2);\n\n  var FullScreenQuad = function FullScreenQuad(material) {\n    this._mesh = new Mesh(geometry, material);\n  };\n\n  Object.defineProperty(FullScreenQuad.prototype, 'material', {\n    get: function get() {\n      return this._mesh.material;\n    },\n    set: function set(value) {\n      this._mesh.material = value;\n    }\n  });\n  Object.assign(FullScreenQuad.prototype, {\n    dispose: function dispose() {\n      this._mesh.geometry.dispose();\n    },\n    render: function render(renderer) {\n      renderer.render(this._mesh, camera);\n    }\n  });\n  return FullScreenQuad;\n}();\n\nexport { Pass };","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\nvar CopyShader = {\n  uniforms: {\n    \"tDiffuse\": {\n      value: null\n    },\n    \"opacity\": {\n      value: 1.0\n    }\n  },\n  vertexShader: [\"varying vec2 vUv;\", \"void main() {\", \"\tvUv = uv;\", \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\", \"}\"].join(\"\\n\"),\n  fragmentShader: [\"uniform float opacity;\", \"uniform sampler2D tDiffuse;\", \"varying vec2 vUv;\", \"void main() {\", \"\tvec4 texel = texture2D( tDiffuse, vUv );\", \"\tgl_FragColor = opacity * texel;\", \"}\"].join(\"\\n\")\n};\nexport { CopyShader };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { ShaderMaterial, UniformsUtils } from \"../../../build/three.module.js\";\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar ShaderPass = function ShaderPass(shader, textureID) {\n  Pass.call(this);\n  this.textureID = textureID !== undefined ? textureID : \"tDiffuse\";\n\n  if (shader instanceof ShaderMaterial) {\n    this.uniforms = shader.uniforms;\n    this.material = shader;\n  } else if (shader) {\n    this.uniforms = UniformsUtils.clone(shader.uniforms);\n    this.material = new ShaderMaterial({\n      defines: Object.assign({}, shader.defines),\n      uniforms: this.uniforms,\n      vertexShader: shader.vertexShader,\n      fragmentShader: shader.fragmentShader\n    });\n  }\n\n  this.fsQuad = new Pass.FullScreenQuad(this.material);\n};\n\nShaderPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: ShaderPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    if (this.uniforms[this.textureID]) {\n      this.uniforms[this.textureID].value = readBuffer.texture;\n    }\n\n    this.fsQuad.material = this.material;\n\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n      if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n      this.fsQuad.render(renderer);\n    }\n  }\n});\nexport { ShaderPass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar MaskPass = function MaskPass(scene, camera) {\n  Pass.call(this);\n  this.scene = scene;\n  this.camera = camera;\n  this.clear = true;\n  this.needsSwap = false;\n  this.inverse = false;\n};\n\nMaskPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: MaskPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    var context = renderer.getContext();\n    var state = renderer.state; // don't update color or depth\n\n    state.buffers.color.setMask(false);\n    state.buffers.depth.setMask(false); // lock buffers\n\n    state.buffers.color.setLocked(true);\n    state.buffers.depth.setLocked(true); // set up stencil\n\n    var writeValue, clearValue;\n\n    if (this.inverse) {\n      writeValue = 0;\n      clearValue = 1;\n    } else {\n      writeValue = 1;\n      clearValue = 0;\n    }\n\n    state.buffers.stencil.setTest(true);\n    state.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n    state.buffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\n    state.buffers.stencil.setClear(clearValue);\n    state.buffers.stencil.setLocked(true); // draw into the stencil buffer\n\n    renderer.setRenderTarget(readBuffer);\n    if (this.clear) renderer.clear();\n    renderer.render(this.scene, this.camera);\n    renderer.setRenderTarget(writeBuffer);\n    if (this.clear) renderer.clear();\n    renderer.render(this.scene, this.camera); // unlock color and depth buffer for subsequent rendering\n\n    state.buffers.color.setLocked(false);\n    state.buffers.depth.setLocked(false); // only render where stencil is set to 1\n\n    state.buffers.stencil.setLocked(false);\n    state.buffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff); // draw if == 1\n\n    state.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n    state.buffers.stencil.setLocked(true);\n  }\n});\n\nvar ClearMaskPass = function ClearMaskPass() {\n  Pass.call(this);\n  this.needsSwap = false;\n};\n\nClearMaskPass.prototype = Object.create(Pass.prototype);\nObject.assign(ClearMaskPass.prototype, {\n  render: function render(renderer\n  /*, writeBuffer, readBuffer, deltaTime, maskActive */\n  ) {\n    renderer.state.buffers.stencil.setLocked(false);\n    renderer.state.buffers.stencil.setTest(false);\n  }\n});\nexport { MaskPass, ClearMaskPass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Clock, LinearFilter, Mesh, OrthographicCamera, PlaneBufferGeometry, RGBAFormat, Vector2, WebGLRenderTarget } from \"../../../build/three.module.js\";\nimport { CopyShader } from \"../shaders/CopyShader.js\";\nimport { ShaderPass } from \"../postprocessing/ShaderPass.js\";\nimport { MaskPass } from \"../postprocessing/MaskPass.js\";\nimport { ClearMaskPass } from \"../postprocessing/MaskPass.js\";\n\nvar EffectComposer = function EffectComposer(renderer, renderTarget) {\n  this.renderer = renderer;\n\n  if (renderTarget === undefined) {\n    var parameters = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBAFormat,\n      stencilBuffer: false\n    };\n    var size = renderer.getSize(new Vector2());\n    this._pixelRatio = renderer.getPixelRatio();\n    this._width = size.width;\n    this._height = size.height;\n    renderTarget = new WebGLRenderTarget(this._width * this._pixelRatio, this._height * this._pixelRatio, parameters);\n    renderTarget.texture.name = 'EffectComposer.rt1';\n  } else {\n    this._pixelRatio = 1;\n    this._width = renderTarget.width;\n    this._height = renderTarget.height;\n  }\n\n  this.renderTarget1 = renderTarget;\n  this.renderTarget2 = renderTarget.clone();\n  this.renderTarget2.texture.name = 'EffectComposer.rt2';\n  this.writeBuffer = this.renderTarget1;\n  this.readBuffer = this.renderTarget2;\n  this.renderToScreen = true;\n  this.passes = []; // dependencies\n\n  if (CopyShader === undefined) {\n    console.error('THREE.EffectComposer relies on CopyShader');\n  }\n\n  if (ShaderPass === undefined) {\n    console.error('THREE.EffectComposer relies on ShaderPass');\n  }\n\n  this.copyPass = new ShaderPass(CopyShader);\n  this.clock = new Clock();\n};\n\nObject.assign(EffectComposer.prototype, {\n  swapBuffers: function swapBuffers() {\n    var tmp = this.readBuffer;\n    this.readBuffer = this.writeBuffer;\n    this.writeBuffer = tmp;\n  },\n  addPass: function addPass(pass) {\n    this.passes.push(pass);\n    pass.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n  },\n  insertPass: function insertPass(pass, index) {\n    this.passes.splice(index, 0, pass);\n    pass.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n  },\n  isLastEnabledPass: function isLastEnabledPass(passIndex) {\n    for (var i = passIndex + 1; i < this.passes.length; i++) {\n      if (this.passes[i].enabled) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  render: function render(deltaTime) {\n    // deltaTime value is in seconds\n    if (deltaTime === undefined) {\n      deltaTime = this.clock.getDelta();\n    }\n\n    var currentRenderTarget = this.renderer.getRenderTarget();\n    var maskActive = false;\n    var pass,\n        i,\n        il = this.passes.length;\n\n    for (i = 0; i < il; i++) {\n      pass = this.passes[i];\n      if (pass.enabled === false) continue;\n      pass.renderToScreen = this.renderToScreen && this.isLastEnabledPass(i);\n      pass.render(this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive);\n\n      if (pass.needsSwap) {\n        if (maskActive) {\n          var context = this.renderer.getContext();\n          var stencil = this.renderer.state.buffers.stencil; //context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n          stencil.setFunc(context.NOTEQUAL, 1, 0xffffffff);\n          this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, deltaTime); //context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\n          stencil.setFunc(context.EQUAL, 1, 0xffffffff);\n        }\n\n        this.swapBuffers();\n      }\n\n      if (MaskPass !== undefined) {\n        if (pass instanceof MaskPass) {\n          maskActive = true;\n        } else if (pass instanceof ClearMaskPass) {\n          maskActive = false;\n        }\n      }\n    }\n\n    this.renderer.setRenderTarget(currentRenderTarget);\n  },\n  reset: function reset(renderTarget) {\n    if (renderTarget === undefined) {\n      var size = this.renderer.getSize(new Vector2());\n      this._pixelRatio = this.renderer.getPixelRatio();\n      this._width = size.width;\n      this._height = size.height;\n      renderTarget = this.renderTarget1.clone();\n      renderTarget.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n    }\n\n    this.renderTarget1.dispose();\n    this.renderTarget2.dispose();\n    this.renderTarget1 = renderTarget;\n    this.renderTarget2 = renderTarget.clone();\n    this.writeBuffer = this.renderTarget1;\n    this.readBuffer = this.renderTarget2;\n  },\n  setSize: function setSize(width, height) {\n    this._width = width;\n    this._height = height;\n    var effectiveWidth = this._width * this._pixelRatio;\n    var effectiveHeight = this._height * this._pixelRatio;\n    this.renderTarget1.setSize(effectiveWidth, effectiveHeight);\n    this.renderTarget2.setSize(effectiveWidth, effectiveHeight);\n\n    for (var i = 0; i < this.passes.length; i++) {\n      this.passes[i].setSize(effectiveWidth, effectiveHeight);\n    }\n  },\n  setPixelRatio: function setPixelRatio(pixelRatio) {\n    this._pixelRatio = pixelRatio;\n    this.setSize(this._width, this._height);\n  }\n});\n\nvar Pass = function Pass() {\n  // if set to true, the pass is processed by the composer\n  this.enabled = true; // if set to true, the pass indicates to swap read and write buffer after rendering\n\n  this.needsSwap = true; // if set to true, the pass clears its buffer before rendering\n\n  this.clear = false; // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\n  this.renderToScreen = false;\n};\n\nObject.assign(Pass.prototype, {\n  setSize: function setSize()\n  /* width, height */\n  {},\n  render: function render()\n  /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */\n  {\n    console.error('THREE.Pass: .render() must be implemented in derived pass.');\n  }\n}); // Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = function () {\n  var camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var geometry = new PlaneBufferGeometry(2, 2);\n\n  var FullScreenQuad = function FullScreenQuad(material) {\n    this._mesh = new Mesh(geometry, material);\n  };\n\n  Object.defineProperty(FullScreenQuad.prototype, 'material', {\n    get: function get() {\n      return this._mesh.material;\n    },\n    set: function set(value) {\n      this._mesh.material = value;\n    }\n  });\n  Object.assign(FullScreenQuad.prototype, {\n    dispose: function dispose() {\n      this._mesh.geometry.dispose();\n    },\n    render: function render(renderer) {\n      renderer.render(this._mesh, camera);\n    }\n  });\n  return FullScreenQuad;\n}();\n\nexport { EffectComposer, Pass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar RenderPass = function RenderPass(scene, camera, overrideMaterial, clearColor, clearAlpha) {\n  Pass.call(this);\n  this.scene = scene;\n  this.camera = camera;\n  this.overrideMaterial = overrideMaterial;\n  this.clearColor = clearColor;\n  this.clearAlpha = clearAlpha !== undefined ? clearAlpha : 0;\n  this.clear = true;\n  this.clearDepth = false;\n  this.needsSwap = false;\n};\n\nRenderPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: RenderPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    var oldAutoClear = renderer.autoClear;\n    renderer.autoClear = false;\n    var oldClearColor, oldClearAlpha, oldOverrideMaterial;\n\n    if (this.overrideMaterial !== undefined) {\n      oldOverrideMaterial = this.scene.overrideMaterial;\n      this.scene.overrideMaterial = this.overrideMaterial;\n    }\n\n    if (this.clearColor) {\n      oldClearColor = renderer.getClearColor().getHex();\n      oldClearAlpha = renderer.getClearAlpha();\n      renderer.setClearColor(this.clearColor, this.clearAlpha);\n    }\n\n    if (this.clearDepth) {\n      renderer.clearDepth();\n    }\n\n    renderer.setRenderTarget(this.renderToScreen ? null : readBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n    if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n    renderer.render(this.scene, this.camera);\n\n    if (this.clearColor) {\n      renderer.setClearColor(oldClearColor, oldClearAlpha);\n    }\n\n    if (this.overrideMaterial !== undefined) {\n      this.scene.overrideMaterial = oldOverrideMaterial;\n    }\n\n    renderer.autoClear = oldAutoClear;\n  }\n});\nexport { RenderPass };","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _wrapNativeSuper from '@babel/runtime/helpers/esm/wrapNativeSuper';\nimport _taggedTemplateLiteralLoose from '@babel/runtime/helpers/esm/taggedTemplateLiteralLoose';\n\nfunction last() {\n  var _ref;\n\n  return _ref = arguments.length - 1, _ref < 0 || arguments.length <= _ref ? undefined : arguments[_ref];\n}\n\nfunction negation(a) {\n  return -a;\n}\n\nfunction addition(a, b) {\n  return a + b;\n}\n\nfunction subtraction(a, b) {\n  return a - b;\n}\n\nfunction multiplication(a, b) {\n  return a * b;\n}\n\nfunction division(a, b) {\n  return a / b;\n}\n\nfunction factorial(a) {\n  if (a % 1 || !(+a >= 0)) return NaN;\n  if (a > 170) return Infinity;else if (a === 0) return 1;else {\n    return a * factorial(a - 1);\n  }\n}\n\nfunction power(a, b) {\n  return Math.pow(a, b);\n}\n\nfunction sqrt(a) {\n  return Math.sqrt(a);\n}\n\nfunction max() {\n  return Math.max.apply(Math, arguments);\n}\n\nfunction min() {\n  return Math.min.apply(Math, arguments);\n}\n\nfunction comma() {\n  return Array.of.apply(Array, arguments);\n}\n\nvar defaultMathSymbols = {\n  symbols: {\n    '!': {\n      postfix: {\n        symbol: '!',\n        f: factorial,\n        notation: 'postfix',\n        precedence: 6,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '!',\n      regSymbol: '!'\n    },\n    '^': {\n      infix: {\n        symbol: '^',\n        f: power,\n        notation: 'infix',\n        precedence: 5,\n        rightToLeft: 1,\n        argCount: 2\n      },\n      symbol: '^',\n      regSymbol: '\\\\^'\n    },\n    '*': {\n      infix: {\n        symbol: '*',\n        f: multiplication,\n        notation: 'infix',\n        precedence: 4,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: '*',\n      regSymbol: '\\\\*'\n    },\n    '/': {\n      infix: {\n        symbol: '/',\n        f: division,\n        notation: 'infix',\n        precedence: 4,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: '/',\n      regSymbol: '/'\n    },\n    '+': {\n      infix: {\n        symbol: '+',\n        f: addition,\n        notation: 'infix',\n        precedence: 2,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      prefix: {\n        symbol: '+',\n        f: last,\n        notation: 'prefix',\n        precedence: 3,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '+',\n      regSymbol: '\\\\+'\n    },\n    '-': {\n      infix: {\n        symbol: '-',\n        f: subtraction,\n        notation: 'infix',\n        precedence: 2,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      prefix: {\n        symbol: '-',\n        f: negation,\n        notation: 'prefix',\n        precedence: 3,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '-',\n      regSymbol: '-'\n    },\n    ',': {\n      infix: {\n        symbol: ',',\n        f: comma,\n        notation: 'infix',\n        precedence: 1,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: ',',\n      regSymbol: ','\n    },\n    '(': {\n      prefix: {\n        symbol: '(',\n        f: last,\n        notation: 'prefix',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '(',\n      regSymbol: '\\\\('\n    },\n    ')': {\n      postfix: {\n        symbol: ')',\n        f: undefined,\n        notation: 'postfix',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: ')',\n      regSymbol: '\\\\)'\n    },\n    min: {\n      func: {\n        symbol: 'min',\n        f: min,\n        notation: 'func',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: 'min',\n      regSymbol: 'min\\\\b'\n    },\n    max: {\n      func: {\n        symbol: 'max',\n        f: max,\n        notation: 'func',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: 'max',\n      regSymbol: 'max\\\\b'\n    },\n    sqrt: {\n      func: {\n        symbol: 'sqrt',\n        f: sqrt,\n        notation: 'func',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: 'sqrt',\n      regSymbol: 'sqrt\\\\b'\n    }\n  }\n}; // based on https://github.com/styled-components/styled-components/blob/fcf6f3804c57a14dd7984dfab7bc06ee2edca044/src/utils/error.js\n\n/**\n * Parse errors.md and turn it into a simple hash of code: message\n * @private\n */\n\nvar ERRORS = {\n  \"1\": \"Passed invalid arguments to hsl, please pass multiple numbers e.g. hsl(360, 0.75, 0.4) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75 }).\\n\\n\",\n  \"2\": \"Passed invalid arguments to hsla, please pass multiple numbers e.g. hsla(360, 0.75, 0.4, 0.7) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75, alpha: 0.7 }).\\n\\n\",\n  \"3\": \"Passed an incorrect argument to a color function, please pass a string representation of a color.\\n\\n\",\n  \"4\": \"Couldn't generate valid rgb string from %s, it returned %s.\\n\\n\",\n  \"5\": \"Couldn't parse the color string. Please provide the color as a string in hex, rgb, rgba, hsl or hsla notation.\\n\\n\",\n  \"6\": \"Passed invalid arguments to rgb, please pass multiple numbers e.g. rgb(255, 205, 100) or an object e.g. rgb({ red: 255, green: 205, blue: 100 }).\\n\\n\",\n  \"7\": \"Passed invalid arguments to rgba, please pass multiple numbers e.g. rgb(255, 205, 100, 0.75) or an object e.g. rgb({ red: 255, green: 205, blue: 100, alpha: 0.75 }).\\n\\n\",\n  \"8\": \"Passed invalid argument to toColorString, please pass a RgbColor, RgbaColor, HslColor or HslaColor object.\\n\\n\",\n  \"9\": \"Please provide a number of steps to the modularScale helper.\\n\\n\",\n  \"10\": \"Please pass a number or one of the predefined scales to the modularScale helper as the ratio.\\n\\n\",\n  \"11\": \"Invalid value passed as base to modularScale, expected number or em string but got \\\"%s\\\"\\n\\n\",\n  \"12\": \"Expected a string ending in \\\"px\\\" or a number passed as the first argument to %s(), got \\\"%s\\\" instead.\\n\\n\",\n  \"13\": \"Expected a string ending in \\\"px\\\" or a number passed as the second argument to %s(), got \\\"%s\\\" instead.\\n\\n\",\n  \"14\": \"Passed invalid pixel value (\\\"%s\\\") to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"15\": \"Passed invalid base value (\\\"%s\\\") to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"16\": \"You must provide a template to this method.\\n\\n\",\n  \"17\": \"You passed an unsupported selector state to this method.\\n\\n\",\n  \"18\": \"minScreen and maxScreen must be provided as stringified numbers with the same units.\\n\\n\",\n  \"19\": \"fromSize and toSize must be provided as stringified numbers with the same units.\\n\\n\",\n  \"20\": \"expects either an array of objects or a single object with the properties prop, fromSize, and toSize.\\n\\n\",\n  \"21\": \"expects the objects in the first argument array to have the properties `prop`, `fromSize`, and `toSize`.\\n\\n\",\n  \"22\": \"expects the first argument object to have the properties `prop`, `fromSize`, and `toSize`.\\n\\n\",\n  \"23\": \"fontFace expects a name of a font-family.\\n\\n\",\n  \"24\": \"fontFace expects either the path to the font file(s) or a name of a local copy.\\n\\n\",\n  \"25\": \"fontFace expects localFonts to be an array.\\n\\n\",\n  \"26\": \"fontFace expects fileFormats to be an array.\\n\\n\",\n  \"27\": \"radialGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"28\": \"Please supply a filename to retinaImage() as the first argument.\\n\\n\",\n  \"29\": \"Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.\\n\\n\",\n  \"30\": \"Passed an invalid value to `height` or `width`. Please provide a pixel based unit.\\n\\n\",\n  \"31\": \"The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation\\n\\n\",\n  \"32\": \"To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s')\\n\\n\",\n  \"33\": \"The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation\\n\\n\",\n  \"34\": \"borderRadius expects a radius value as a string or number as the second argument.\\n\\n\",\n  \"35\": \"borderRadius expects one of \\\"top\\\", \\\"bottom\\\", \\\"left\\\" or \\\"right\\\" as the first argument.\\n\\n\",\n  \"36\": \"Property must be a string value.\\n\\n\",\n  \"37\": \"Syntax Error at %s.\\n\\n\",\n  \"38\": \"Formula contains a function that needs parentheses at %s.\\n\\n\",\n  \"39\": \"Formula is missing closing parenthesis at %s.\\n\\n\",\n  \"40\": \"Formula has too many closing parentheses at %s.\\n\\n\",\n  \"41\": \"All values in a formula must have the same unit or be unitless.\\n\\n\",\n  \"42\": \"Please provide a number of steps to the modularScale helper.\\n\\n\",\n  \"43\": \"Please pass a number or one of the predefined scales to the modularScale helper as the ratio.\\n\\n\",\n  \"44\": \"Invalid value passed as base to modularScale, expected number or em/rem string but got %s.\\n\\n\",\n  \"45\": \"Passed invalid argument to hslToColorString, please pass a HslColor or HslaColor object.\\n\\n\",\n  \"46\": \"Passed invalid argument to rgbToColorString, please pass a RgbColor or RgbaColor object.\\n\\n\",\n  \"47\": \"minScreen and maxScreen must be provided as stringified numbers with the same units.\\n\\n\",\n  \"48\": \"fromSize and toSize must be provided as stringified numbers with the same units.\\n\\n\",\n  \"49\": \"Expects either an array of objects or a single object with the properties prop, fromSize, and toSize.\\n\\n\",\n  \"50\": \"Expects the objects in the first argument array to have the properties prop, fromSize, and toSize.\\n\\n\",\n  \"51\": \"Expects the first argument object to have the properties prop, fromSize, and toSize.\\n\\n\",\n  \"52\": \"fontFace expects either the path to the font file(s) or a name of a local copy.\\n\\n\",\n  \"53\": \"fontFace expects localFonts to be an array.\\n\\n\",\n  \"54\": \"fontFace expects fileFormats to be an array.\\n\\n\",\n  \"55\": \"fontFace expects a name of a font-family.\\n\\n\",\n  \"56\": \"linearGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"57\": \"radialGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"58\": \"Please supply a filename to retinaImage() as the first argument.\\n\\n\",\n  \"59\": \"Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.\\n\\n\",\n  \"60\": \"Passed an invalid value to `height` or `width`. Please provide a pixel based unit.\\n\\n\",\n  \"61\": \"Property must be a string value.\\n\\n\",\n  \"62\": \"borderRadius expects a radius value as a string or number as the second argument.\\n\\n\",\n  \"63\": \"borderRadius expects one of \\\"top\\\", \\\"bottom\\\", \\\"left\\\" or \\\"right\\\" as the first argument.\\n\\n\",\n  \"64\": \"The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation.\\n\\n\",\n  \"65\": \"To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\\\\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s').\\n\\n\",\n  \"66\": \"The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation.\\n\\n\",\n  \"67\": \"You must provide a template to this method.\\n\\n\",\n  \"68\": \"You passed an unsupported selector state to this method.\\n\\n\",\n  \"69\": \"Expected a string ending in \\\"px\\\" or a number passed as the first argument to %s(), got %s instead.\\n\\n\",\n  \"70\": \"Expected a string ending in \\\"px\\\" or a number passed as the second argument to %s(), got %s instead.\\n\\n\",\n  \"71\": \"Passed invalid pixel value %s to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"72\": \"Passed invalid base value %s to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"73\": \"Please provide a valid CSS variable.\\n\\n\",\n  \"74\": \"CSS variable not found.\\n\"\n};\n/**\n * super basic version of sprintf\n * @private\n */\n\nfunction format() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var a = args[0];\n  var b = [];\n  var c;\n\n  for (c = 1; c < args.length; c += 1) {\n    b.push(args[c]);\n  }\n\n  b.forEach(function (d) {\n    a = a.replace(/%[a-z]/, d);\n  });\n  return a;\n}\n/**\n * Create an error file out of errors.md for development and a simple web link to the full errors\n * in production mode.\n * @private\n */\n\n\nvar PolishedError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(PolishedError, _Error);\n\n  function PolishedError(code) {\n    var _this;\n\n    if (process.env.NODE_ENV === 'production') {\n      _this = _Error.call(this, \"An error occurred. See https://github.com/styled-components/polished/blob/master/src/internalHelpers/errors.md#\" + code + \" for more information.\") || this;\n    } else {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      _this = _Error.call(this, format.apply(void 0, [ERRORS[code]].concat(args))) || this;\n    }\n\n    return _assertThisInitialized(_this);\n  }\n\n  return PolishedError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar unitRegExp = /((?!\\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\\D|$)|ged|darg?|nrut)/g; // Merges additional math functionality into the defaults.\n\nfunction mergeSymbolMaps(additionalSymbols) {\n  var symbolMap = {};\n  symbolMap.symbols = additionalSymbols ? _extends({}, defaultMathSymbols.symbols, {}, additionalSymbols.symbols) : _extends({}, defaultMathSymbols.symbols);\n  return symbolMap;\n}\n\nfunction exec(operators, values) {\n  var _ref;\n\n  var op = operators.pop();\n  values.push(op.f.apply(op, (_ref = []).concat.apply(_ref, values.splice(-op.argCount))));\n  return op.precedence;\n}\n\nfunction calculate(expression, additionalSymbols) {\n  var symbolMap = mergeSymbolMaps(additionalSymbols);\n  var match;\n  var operators = [symbolMap.symbols['('].prefix];\n  var values = [];\n  var pattern = new RegExp( // Pattern for numbers\n  \"\\\\d+(?:\\\\.\\\\d+)?|\" + // ...and patterns for individual operators/function names\n  Object.keys(symbolMap.symbols).map(function (key) {\n    return symbolMap.symbols[key];\n  }) // longer symbols should be listed first\n  // $FlowFixMe\n  .sort(function (a, b) {\n    return b.symbol.length - a.symbol.length;\n  }) // $FlowFixMe\n  .map(function (val) {\n    return val.regSymbol;\n  }).join('|') + \"|(\\\\S)\", 'g');\n  pattern.lastIndex = 0; // Reset regular expression object\n\n  var afterValue = false;\n\n  do {\n    match = pattern.exec(expression);\n\n    var _ref2 = match || [')', undefined],\n        token = _ref2[0],\n        bad = _ref2[1];\n\n    var notNumber = symbolMap.symbols[token];\n    var notNewValue = notNumber && !notNumber.prefix && !notNumber.func;\n    var notAfterValue = !notNumber || !notNumber.postfix && !notNumber.infix; // Check for syntax errors:\n\n    if (bad || (afterValue ? notAfterValue : notNewValue)) {\n      throw new PolishedError(37, match ? match.index : expression.length, expression);\n    }\n\n    if (afterValue) {\n      // We either have an infix or postfix operator (they should be mutually exclusive)\n      var curr = notNumber.postfix || notNumber.infix;\n\n      do {\n        var prev = operators[operators.length - 1];\n        if ((curr.precedence - prev.precedence || prev.rightToLeft) > 0) break; // Apply previous operator, since it has precedence over current one\n      } while (exec(operators, values)); // Exit loop after executing an opening parenthesis or function\n\n\n      afterValue = curr.notation === 'postfix';\n\n      if (curr.symbol !== ')') {\n        operators.push(curr); // Postfix always has precedence over any operator that follows after it\n\n        if (afterValue) exec(operators, values);\n      }\n    } else if (notNumber) {\n      // prefix operator or function\n      operators.push(notNumber.prefix || notNumber.func);\n\n      if (notNumber.func) {\n        // Require an opening parenthesis\n        match = pattern.exec(expression);\n\n        if (!match || match[0] !== '(') {\n          throw new PolishedError(38, match ? match.index : expression.length, expression);\n        }\n      }\n    } else {\n      // number\n      values.push(+token);\n      afterValue = true;\n    }\n  } while (match && operators.length);\n\n  if (operators.length) {\n    throw new PolishedError(39, match ? match.index : expression.length, expression);\n  } else if (match) {\n    throw new PolishedError(40, match ? match.index : expression.length, expression);\n  } else {\n    return values.pop();\n  }\n}\n\nfunction reverseString(str) {\n  return str.split('').reverse().join('');\n}\n/**\n * Helper for doing math with CSS Units. Accepts a formula as a string. All values in the formula must have the same unit (or be unitless). Supports complex formulas utliziing addition, subtraction, multiplication, division, square root, powers, factorial, min, max, as well as parentheses for order of operation.\n *\n *In cases where you need to do calculations with mixed units where one unit is a [relative length unit](https://developer.mozilla.org/en-US/docs/Web/CSS/length#Relative_length_units), you will want to use [CSS Calc](https://developer.mozilla.org/en-US/docs/Web/CSS/calc).\n *\n * *warning* While we've done everything possible to ensure math safely evalutes formulas expressed as strings, you should always use extreme caution when passing `math` user provided values.\n * @example\n * // Styles as object usage\n * const styles = {\n *   fontSize: math('12rem + 8rem'),\n *   fontSize: math('(12px + 2px) * 3'),\n *   fontSize: math('3px^2 + sqrt(4)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   fontSize: ${math('12rem + 8rem')};\n *   fontSize: ${math('(12px + 2px) * 3')};\n *   fontSize: ${math('3px^2 + sqrt(4)')};\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   fontSize: '20rem',\n *   fontSize: '42px',\n *   fontSize: '11px',\n * }\n */\n\n\nfunction math(formula, additionalSymbols) {\n  var reversedFormula = reverseString(formula);\n  var formulaMatch = reversedFormula.match(unitRegExp); // Check that all units are the same\n\n  if (formulaMatch && !formulaMatch.every(function (unit) {\n    return unit === formulaMatch[0];\n  })) {\n    throw new PolishedError(41);\n  }\n\n  var cleanFormula = reverseString(reversedFormula.replace(unitRegExp, ''));\n  return \"\" + calculate(cleanFormula, additionalSymbols) + (formulaMatch ? reverseString(formulaMatch[0]) : '');\n}\n\nvar cssVariableRegex = /--[\\S]*/g;\n/**\n * Fetches the value of a passed CSS Variable.\n *\n * Passthrough can be enabled (off by default) for when you are unsure of the input and want non-variable values to be returned instead of an error.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'background': cssVar('--background-color'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${cssVar('--background-color')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'background': 'red'\n * }\n */\n\nfunction cssVar(cssVariable, passThrough) {\n  if (!cssVariable || !cssVariable.match(cssVariableRegex)) {\n    if (passThrough) return cssVariable;\n    throw new PolishedError(73);\n  }\n\n  var variableValue;\n  /* eslint-disable */\n\n  /* istanbul ignore next */\n\n  if (typeof document !== 'undefined' && document.documentElement !== null) {\n    variableValue = getComputedStyle(document.documentElement).getPropertyValue(cssVariable);\n  }\n  /* eslint-enable */\n\n\n  if (variableValue) {\n    return variableValue.trim();\n  } else {\n    throw new PolishedError(74);\n  }\n} // @private\n\n\nfunction capitalizeString(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar positionMap = ['Top', 'Right', 'Bottom', 'Left'];\n\nfunction generateProperty(property, position) {\n  if (!property) return position.toLowerCase();\n  var splitProperty = property.split('-');\n\n  if (splitProperty.length > 1) {\n    splitProperty.splice(1, 0, position);\n    return splitProperty.reduce(function (acc, val) {\n      return \"\" + acc + capitalizeString(val);\n    });\n  }\n\n  var joinedProperty = property.replace(/([a-z])([A-Z])/g, \"$1\" + position + \"$2\");\n  return property === joinedProperty ? \"\" + property + position : joinedProperty;\n}\n\nfunction generateStyles(property, valuesWithDefaults) {\n  var styles = {};\n\n  for (var i = 0; i < valuesWithDefaults.length; i += 1) {\n    if (valuesWithDefaults[i] || valuesWithDefaults[i] === 0) {\n      styles[generateProperty(property, positionMap[i])] = valuesWithDefaults[i];\n    }\n  }\n\n  return styles;\n}\n/**\n * Enables shorthand for direction-based properties. It accepts a property (hyphenated or camelCased) and up to four values that map to top, right, bottom, and left, respectively. You can optionally pass an empty string to get only the directional values as properties. You can also optionally pass a null argument for a directional value to ignore it.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...directionalProperty('padding', '12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${directionalProperty('padding', '12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'paddingTop': '12px',\n *   'paddingRight': '24px',\n *   'paddingBottom': '36px',\n *   'paddingLeft': '48px'\n * }\n */\n\n\nfunction directionalProperty(property) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  } //  prettier-ignore\n\n\n  var firstValue = values[0],\n      _values$ = values[1],\n      secondValue = _values$ === void 0 ? firstValue : _values$,\n      _values$2 = values[2],\n      thirdValue = _values$2 === void 0 ? firstValue : _values$2,\n      _values$3 = values[3],\n      fourthValue = _values$3 === void 0 ? secondValue : _values$3;\n  var valuesWithDefaults = [firstValue, secondValue, thirdValue, fourthValue];\n  return generateStyles(property, valuesWithDefaults);\n}\n/**\n * Check if a string ends with something\n * @private\n */\n\n\nfunction endsWith(string, suffix) {\n  return string.substr(-suffix.length) === suffix;\n}\n\nvar cssRegex = /^([+-]?(?:\\d+|\\d*\\.\\d+))([a-z]*|%)$/;\n/**\n * Returns a given CSS value minus its unit of measure.\n *\n * @deprecated - stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   '--dimension': stripUnit('100px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   --dimension: ${stripUnit('100px')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   '--dimension': 100\n * }\n */\n\nfunction stripUnit(value, unitReturn) {\n  if (typeof value !== 'string') return unitReturn ? [value, undefined] : value;\n  var matchedValue = value.match(cssRegex);\n\n  if (unitReturn) {\n    // eslint-disable-next-line no-console\n    console.warn(\"stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit.\");\n    if (matchedValue) return [parseFloat(value), matchedValue[2]];\n    return [value, undefined];\n  }\n\n  if (matchedValue) return parseFloat(value);\n  return value;\n}\n/**\n * Factory function that creates pixel-to-x converters\n * @private\n */\n\n\nvar pxtoFactory = function pxtoFactory(to) {\n  return function (pxval, base) {\n    if (base === void 0) {\n      base = '16px';\n    }\n\n    var newPxval = pxval;\n    var newBase = base;\n\n    if (typeof pxval === 'string') {\n      if (!endsWith(pxval, 'px')) {\n        throw new PolishedError(69, to, pxval);\n      }\n\n      newPxval = stripUnit(pxval);\n    }\n\n    if (typeof base === 'string') {\n      if (!endsWith(base, 'px')) {\n        throw new PolishedError(70, to, base);\n      }\n\n      newBase = stripUnit(base);\n    }\n\n    if (typeof newPxval === 'string') {\n      throw new PolishedError(71, pxval, to);\n    }\n\n    if (typeof newBase === 'string') {\n      throw new PolishedError(72, base, to);\n    }\n\n    return \"\" + newPxval / newBase + to;\n  };\n};\n/**\n * Convert pixel value to ems. The default base value is 16px, but can be changed by passing a\n * second argument to the function.\n * @function\n * @param {string|number} pxval\n * @param {string|number} [base='16px']\n * @example\n * // Styles as object usage\n * const styles = {\n *   'height': em('16px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   height: ${em('16px')}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'height': '1em'\n * }\n */\n\n\nvar em = /*#__PURE__*/pxtoFactory('em');\nvar cssRegex$1 = /^([+-]?(?:\\d+|\\d*\\.\\d+))([a-z]*|%)$/;\n/**\n * Returns a given CSS value and its unit as elements of an array.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   '--dimension': getValueAndUnit('100px')[0],\n *   '--unit': getValueAndUnit('100px')[1],\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   --dimension: ${getValueAndUnit('100px')[0]};\n *   --unit: ${getValueAndUnit('100px')[1]};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   '--dimension': 100,\n *   '--unit': 'px',\n * }\n */\n\nfunction getValueAndUnit(value) {\n  if (typeof value !== 'string') return [value, ''];\n  var matchedValue = value.match(cssRegex$1);\n  if (matchedValue) return [parseFloat(value), matchedValue[2]];\n  return [value, undefined];\n}\n\nvar ratioNames = {\n  minorSecond: 1.067,\n  majorSecond: 1.125,\n  minorThird: 1.2,\n  majorThird: 1.25,\n  perfectFourth: 1.333,\n  augFourth: 1.414,\n  perfectFifth: 1.5,\n  minorSixth: 1.6,\n  goldenSection: 1.618,\n  majorSixth: 1.667,\n  minorSeventh: 1.778,\n  majorSeventh: 1.875,\n  octave: 2,\n  majorTenth: 2.5,\n  majorEleventh: 2.667,\n  majorTwelfth: 3,\n  doubleOctave: 4\n};\n\nfunction getRatio(ratioName) {\n  return ratioNames[ratioName];\n}\n/**\n * Establish consistent measurements and spacial relationships throughout your projects by incrementing an em or rem value up or down a defined scale. We provide a list of commonly used scales as pre-defined variables.\n * @example\n * // Styles as object usage\n * const styles = {\n *    // Increment two steps up the default scale\n *   'fontSize': modularScale(2)\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *    // Increment two steps up the default scale\n *   fontSize: ${modularScale(2)}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'fontSize': '1.77689em'\n * }\n */\n\n\nfunction modularScale(steps, base, ratio) {\n  if (base === void 0) {\n    base = '1em';\n  }\n\n  if (ratio === void 0) {\n    ratio = 1.333;\n  }\n\n  if (typeof steps !== 'number') {\n    throw new PolishedError(42);\n  }\n\n  if (typeof ratio === 'string' && !ratioNames[ratio]) {\n    throw new PolishedError(43);\n  }\n\n  var _ref = typeof base === 'string' ? getValueAndUnit(base) : [base, ''],\n      realBase = _ref[0],\n      unit = _ref[1];\n\n  var realRatio = typeof ratio === 'string' ? getRatio(ratio) : ratio;\n\n  if (typeof realBase === 'string') {\n    throw new PolishedError(44, base);\n  }\n\n  return \"\" + realBase * Math.pow(realRatio, steps) + (unit || '');\n}\n/**\n * Convert pixel value to rems. The default base value is 16px, but can be changed by passing a\n * second argument to the function.\n * @function\n * @param {string|number} pxval\n * @param {string|number} [base='16px']\n * @example\n * // Styles as object usage\n * const styles = {\n *   'height': rem('16px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   height: ${rem('16px')}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'height': '1rem'\n * }\n */\n\n\nvar rem = /*#__PURE__*/pxtoFactory('rem');\n/**\n * Returns a CSS calc formula for linear interpolation of a property between two values. Accepts optional minScreen (defaults to '320px') and maxScreen (defaults to '1200px').\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   fontSize: between('20px', '100px', '400px', '1000px'),\n *   fontSize: between('20px', '100px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   fontSize: ${between('20px', '100px', '400px', '1000px')};\n *   fontSize: ${between('20px', '100px')}\n * `\n *\n * // CSS as JS Output\n *\n * h1: {\n *   'fontSize': 'calc(-33.33333333333334px + 13.333333333333334vw)',\n *   'fontSize': 'calc(-9.090909090909093px + 9.090909090909092vw)'\n * }\n */\n\nfunction between(fromSize, toSize, minScreen, maxScreen) {\n  if (minScreen === void 0) {\n    minScreen = '320px';\n  }\n\n  if (maxScreen === void 0) {\n    maxScreen = '1200px';\n  }\n\n  var _getValueAndUnit = getValueAndUnit(fromSize),\n      unitlessFromSize = _getValueAndUnit[0],\n      fromSizeUnit = _getValueAndUnit[1];\n\n  var _getValueAndUnit2 = getValueAndUnit(toSize),\n      unitlessToSize = _getValueAndUnit2[0],\n      toSizeUnit = _getValueAndUnit2[1];\n\n  var _getValueAndUnit3 = getValueAndUnit(minScreen),\n      unitlessMinScreen = _getValueAndUnit3[0],\n      minScreenUnit = _getValueAndUnit3[1];\n\n  var _getValueAndUnit4 = getValueAndUnit(maxScreen),\n      unitlessMaxScreen = _getValueAndUnit4[0],\n      maxScreenUnit = _getValueAndUnit4[1];\n\n  if (typeof unitlessMinScreen !== 'number' || typeof unitlessMaxScreen !== 'number' || !minScreenUnit || !maxScreenUnit || minScreenUnit !== maxScreenUnit) {\n    throw new PolishedError(47);\n  }\n\n  if (typeof unitlessFromSize !== 'number' || typeof unitlessToSize !== 'number' || fromSizeUnit !== toSizeUnit) {\n    throw new PolishedError(48);\n  }\n\n  var slope = (unitlessFromSize - unitlessToSize) / (unitlessMinScreen - unitlessMaxScreen);\n  var base = unitlessToSize - slope * unitlessMaxScreen;\n  return \"calc(\" + base.toFixed(2) + (fromSizeUnit || '') + \" + \" + (100 * slope).toFixed(2) + \"vw)\";\n}\n/**\n * CSS to contain a float (credit to CSSMojo).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *    ...clearFix(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${clearFix()}\n * `\n *\n * // CSS as JS Output\n *\n * '&::after': {\n *   'clear': 'both',\n *   'content': '\"\"',\n *   'display': 'table'\n * }\n */\n\n\nfunction clearFix(parent) {\n  var _ref;\n\n  if (parent === void 0) {\n    parent = '&';\n  }\n\n  var pseudoSelector = parent + \"::after\";\n  return _ref = {}, _ref[pseudoSelector] = {\n    clear: 'both',\n    content: '\"\"',\n    display: 'table'\n  }, _ref;\n}\n/**\n * CSS to fully cover an area. Can optionally be passed an offset to act as a \"padding\".\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...cover()\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${cover()}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   'position': 'absolute',\n *   'top': '0',\n *   'right: '0',\n *   'bottom': '0',\n *   'left: '0'\n * }\n */\n\n\nfunction cover(offset) {\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  return {\n    position: 'absolute',\n    top: offset,\n    right: offset,\n    bottom: offset,\n    left: offset\n  };\n}\n/**\n * CSS to represent truncated text with an ellipsis.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...ellipsis('250px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${ellipsis('250px')}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   'display': 'inline-block',\n *   'maxWidth': '250px',\n *   'overflow': 'hidden',\n *   'textOverflow': 'ellipsis',\n *   'whiteSpace': 'nowrap',\n *   'wordWrap': 'normal'\n * }\n */\n\n\nfunction ellipsis(width) {\n  if (width === void 0) {\n    width = '100%';\n  }\n\n  return {\n    display: 'inline-block',\n    maxWidth: width,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    wordWrap: 'normal'\n  };\n}\n\nfunction _createForOfIteratorHelperLoose(o) {\n  var i = 0;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  i = o[Symbol.iterator]();\n  return i.next.bind(i);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n/**\n * Returns a set of media queries that resizes a property (or set of properties) between a provided fromSize and toSize. Accepts optional minScreen (defaults to '320px') and maxScreen (defaults to '1200px') to constrain the interpolation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...fluidRange(\n *    {\n *        prop: 'padding',\n *        fromSize: '20px',\n *        toSize: '100px',\n *      },\n *      '400px',\n *      '1000px',\n *    )\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${fluidRange(\n *      {\n *        prop: 'padding',\n *        fromSize: '20px',\n *        toSize: '100px',\n *      },\n *      '400px',\n *      '1000px',\n *    )}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   \"@media (min-width: 1000px)\": Object {\n *     \"padding\": \"100px\",\n *   },\n *   \"@media (min-width: 400px)\": Object {\n *     \"padding\": \"calc(-33.33333333333334px + 13.333333333333334vw)\",\n *   },\n *   \"padding\": \"20px\",\n * }\n */\n\n\nfunction fluidRange(cssProp, minScreen, maxScreen) {\n  if (minScreen === void 0) {\n    minScreen = '320px';\n  }\n\n  if (maxScreen === void 0) {\n    maxScreen = '1200px';\n  }\n\n  if (!Array.isArray(cssProp) && typeof cssProp !== 'object' || cssProp === null) {\n    throw new PolishedError(49);\n  }\n\n  if (Array.isArray(cssProp)) {\n    var mediaQueries = {};\n    var fallbacks = {};\n\n    for (var _iterator = _createForOfIteratorHelperLoose(cssProp), _step; !(_step = _iterator()).done;) {\n      var _extends2, _extends3;\n\n      var obj = _step.value;\n\n      if (!obj.prop || !obj.fromSize || !obj.toSize) {\n        throw new PolishedError(50);\n      }\n\n      fallbacks[obj.prop] = obj.fromSize;\n      mediaQueries[\"@media (min-width: \" + minScreen + \")\"] = _extends({}, mediaQueries[\"@media (min-width: \" + minScreen + \")\"], (_extends2 = {}, _extends2[obj.prop] = between(obj.fromSize, obj.toSize, minScreen, maxScreen), _extends2));\n      mediaQueries[\"@media (min-width: \" + maxScreen + \")\"] = _extends({}, mediaQueries[\"@media (min-width: \" + maxScreen + \")\"], (_extends3 = {}, _extends3[obj.prop] = obj.toSize, _extends3));\n    }\n\n    return _extends({}, fallbacks, {}, mediaQueries);\n  } else {\n    var _ref, _ref2, _ref3;\n\n    if (!cssProp.prop || !cssProp.fromSize || !cssProp.toSize) {\n      throw new PolishedError(51);\n    }\n\n    return _ref3 = {}, _ref3[cssProp.prop] = cssProp.fromSize, _ref3[\"@media (min-width: \" + minScreen + \")\"] = (_ref = {}, _ref[cssProp.prop] = between(cssProp.fromSize, cssProp.toSize, minScreen, maxScreen), _ref), _ref3[\"@media (min-width: \" + maxScreen + \")\"] = (_ref2 = {}, _ref2[cssProp.prop] = cssProp.toSize, _ref2), _ref3;\n  }\n}\n\nvar dataURIRegex = /^\\s*data:([a-z]+\\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\\-._~:@/?%\\s]*\\s*$/i;\nvar formatHintMap = {\n  woff: 'woff',\n  woff2: 'woff2',\n  ttf: 'truetype',\n  otf: 'opentype',\n  eot: 'embedded-opentype',\n  svg: 'svg',\n  svgz: 'svg'\n};\n\nfunction generateFormatHint(format, formatHint) {\n  if (!formatHint) return '';\n  return \" format(\\\"\" + formatHintMap[format] + \"\\\")\";\n}\n\nfunction isDataURI(fontFilePath) {\n  return !!fontFilePath.match(dataURIRegex);\n}\n\nfunction generateFileReferences(fontFilePath, fileFormats, formatHint) {\n  if (isDataURI(fontFilePath)) {\n    return \"url(\\\"\" + fontFilePath + \"\\\")\" + generateFormatHint(fileFormats[0], formatHint);\n  }\n\n  var fileFontReferences = fileFormats.map(function (format) {\n    return \"url(\\\"\" + fontFilePath + \".\" + format + \"\\\")\" + generateFormatHint(format, formatHint);\n  });\n  return fileFontReferences.join(', ');\n}\n\nfunction generateLocalReferences(localFonts) {\n  var localFontReferences = localFonts.map(function (font) {\n    return \"local(\\\"\" + font + \"\\\")\";\n  });\n  return localFontReferences.join(', ');\n}\n\nfunction generateSources(fontFilePath, localFonts, fileFormats, formatHint) {\n  var fontReferences = [];\n  if (localFonts) fontReferences.push(generateLocalReferences(localFonts));\n\n  if (fontFilePath) {\n    fontReferences.push(generateFileReferences(fontFilePath, fileFormats, formatHint));\n  }\n\n  return fontReferences.join(', ');\n}\n/**\n * CSS for a @font-face declaration.\n *\n * @example\n * // Styles as object basic usage\n * const styles = {\n *    ...fontFace({\n *      'fontFamily': 'Sans-Pro',\n *      'fontFilePath': 'path/to/file'\n *    })\n * }\n *\n * // styled-components basic usage\n * const GlobalStyle = createGlobalStyle`${\n *   fontFace({\n *     'fontFamily': 'Sans-Pro',\n *     'fontFilePath': 'path/to/file'\n *   }\n * )}`\n *\n * // CSS as JS Output\n *\n * '@font-face': {\n *   'fontFamily': 'Sans-Pro',\n *   'src': 'url(\"path/to/file.eot\"), url(\"path/to/file.woff2\"), url(\"path/to/file.woff\"), url(\"path/to/file.ttf\"), url(\"path/to/file.svg\")',\n * }\n */\n\n\nfunction fontFace(_ref) {\n  var fontFamily = _ref.fontFamily,\n      fontFilePath = _ref.fontFilePath,\n      fontStretch = _ref.fontStretch,\n      fontStyle = _ref.fontStyle,\n      fontVariant = _ref.fontVariant,\n      fontWeight = _ref.fontWeight,\n      _ref$fileFormats = _ref.fileFormats,\n      fileFormats = _ref$fileFormats === void 0 ? ['eot', 'woff2', 'woff', 'ttf', 'svg'] : _ref$fileFormats,\n      _ref$formatHint = _ref.formatHint,\n      formatHint = _ref$formatHint === void 0 ? false : _ref$formatHint,\n      localFonts = _ref.localFonts,\n      unicodeRange = _ref.unicodeRange,\n      fontDisplay = _ref.fontDisplay,\n      fontVariationSettings = _ref.fontVariationSettings,\n      fontFeatureSettings = _ref.fontFeatureSettings; // Error Handling\n\n  if (!fontFamily) throw new PolishedError(55);\n\n  if (!fontFilePath && !localFonts) {\n    throw new PolishedError(52);\n  }\n\n  if (localFonts && !Array.isArray(localFonts)) {\n    throw new PolishedError(53);\n  }\n\n  if (!Array.isArray(fileFormats)) {\n    throw new PolishedError(54);\n  }\n\n  var fontFaceDeclaration = {\n    '@font-face': {\n      fontFamily: fontFamily,\n      src: generateSources(fontFilePath, localFonts, fileFormats, formatHint),\n      unicodeRange: unicodeRange,\n      fontStretch: fontStretch,\n      fontStyle: fontStyle,\n      fontVariant: fontVariant,\n      fontWeight: fontWeight,\n      fontDisplay: fontDisplay,\n      fontVariationSettings: fontVariationSettings,\n      fontFeatureSettings: fontFeatureSettings\n    }\n  }; // Removes undefined fields for cleaner css object.\n\n  return JSON.parse(JSON.stringify(fontFaceDeclaration));\n}\n/**\n * CSS to hide text to show a background image in a SEO-friendly way.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'backgroundImage': 'url(logo.png)',\n *   ...hideText(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   backgroundImage: url(logo.png);\n *   ${hideText()};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'backgroundImage': 'url(logo.png)',\n *   'textIndent': '101%',\n *   'overflow': 'hidden',\n *   'whiteSpace': 'nowrap',\n * }\n */\n\n\nfunction hideText() {\n  return {\n    textIndent: '101%',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap'\n  };\n}\n/**\n * CSS to hide content visually but remain accessible to screen readers.\n * from [HTML5 Boilerplate](https://github.com/h5bp/html5-boilerplate/blob/9a176f57af1cfe8ec70300da4621fb9b07e5fa31/src/css/main.css#L121)\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...hideVisually(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${hideVisually()};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'border': '0',\n *   'clip': 'rect(0 0 0 0)',\n *   'height': '1px',\n *   'margin': '-1px',\n *   'overflow': 'hidden',\n *   'padding': '0',\n *   'position': 'absolute',\n *   'whiteSpace': 'nowrap',\n *   'width': '1px',\n * }\n */\n\n\nfunction hideVisually() {\n  return {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    whiteSpace: 'nowrap',\n    width: '1px'\n  };\n}\n/**\n * Generates a media query to target HiDPI devices.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *  [hiDPI(1.5)]: {\n *    width: 200px;\n *  }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${hiDPI(1.5)} {\n *     width: 200px;\n *   }\n * `\n *\n * // CSS as JS Output\n *\n * '@media only screen and (-webkit-min-device-pixel-ratio: 1.5),\n *  only screen and (min--moz-device-pixel-ratio: 1.5),\n *  only screen and (-o-min-device-pixel-ratio: 1.5/1),\n *  only screen and (min-resolution: 144dpi),\n *  only screen and (min-resolution: 1.5dppx)': {\n *   'width': '200px',\n * }\n */\n\n\nfunction hiDPI(ratio) {\n  if (ratio === void 0) {\n    ratio = 1.3;\n  }\n\n  return \"\\n    @media only screen and (-webkit-min-device-pixel-ratio: \" + ratio + \"),\\n    only screen and (min--moz-device-pixel-ratio: \" + ratio + \"),\\n    only screen and (-o-min-device-pixel-ratio: \" + ratio + \"/1),\\n    only screen and (min-resolution: \" + Math.round(ratio * 96) + \"dpi),\\n    only screen and (min-resolution: \" + ratio + \"dppx)\\n  \";\n}\n\nfunction constructGradientValue(literals) {\n  var template = '';\n\n  for (var _len = arguments.length, substitutions = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    substitutions[_key - 1] = arguments[_key];\n  }\n\n  for (var i = 0; i < literals.length; i += 1) {\n    template += literals[i];\n\n    if (i === substitutions.length - 1 && substitutions[i]) {\n      var definedValues = substitutions.filter(function (substitute) {\n        return !!substitute;\n      }); // Adds leading coma if properties preceed color-stops\n\n      if (definedValues.length > 1) {\n        template = template.slice(0, -1);\n        template += \", \" + substitutions[i]; // No trailing space if color-stops is the only param provided\n      } else if (definedValues.length === 1) {\n        template += \"\" + substitutions[i];\n      }\n    } else if (substitutions[i]) {\n      template += substitutions[i] + \" \";\n    }\n  }\n\n  return template.trim();\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"linear-gradient(\", \"\", \")\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n/**\n * CSS for declaring a linear gradient, including a fallback background-color. The fallback is either the first color-stop or an explicitly passed fallback color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...linearGradient({\n        colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n        toDirection: 'to top right',\n        fallback: '#FFF',\n      })\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${linearGradient({\n        colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n        toDirection: 'to top right',\n        fallback: '#FFF',\n      })}\n *`\n *\n * // CSS as JS Output\n *\n * div: {\n *   'backgroundColor': '#FFF',\n *   'backgroundImage': 'linear-gradient(to top right, #00FFFF 0%, rgba(0, 0, 255, 0) 50%, #0000FF 95%)',\n * }\n */\n\n\nfunction linearGradient(_ref) {\n  var colorStops = _ref.colorStops,\n      fallback = _ref.fallback,\n      _ref$toDirection = _ref.toDirection,\n      toDirection = _ref$toDirection === void 0 ? '' : _ref$toDirection;\n\n  if (!colorStops || colorStops.length < 2) {\n    throw new PolishedError(56);\n  }\n\n  return {\n    backgroundColor: fallback || colorStops[0].split(' ')[0],\n    backgroundImage: constructGradientValue(_templateObject(), toDirection, colorStops.join(', '))\n  };\n}\n/**\n * CSS to normalize abnormalities across browsers (normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css)\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *    ...normalize(),\n * }\n *\n * // styled-components usage\n * const GlobalStyle = createGlobalStyle`${normalize()}`\n *\n * // CSS as JS Output\n *\n * html {\n *   lineHeight: 1.15,\n *   textSizeAdjust: 100%,\n * } ...\n */\n\n\nfunction normalize() {\n  var _ref;\n\n  return [(_ref = {\n    html: {\n      lineHeight: '1.15',\n      textSizeAdjust: '100%'\n    },\n    body: {\n      margin: '0'\n    },\n    main: {\n      display: 'block'\n    },\n    h1: {\n      fontSize: '2em',\n      margin: '0.67em 0'\n    },\n    hr: {\n      boxSizing: 'content-box',\n      height: '0',\n      overflow: 'visible'\n    },\n    pre: {\n      fontFamily: 'monospace, monospace',\n      fontSize: '1em'\n    },\n    a: {\n      backgroundColor: 'transparent'\n    },\n    'abbr[title]': {\n      borderBottom: 'none',\n      textDecoration: 'underline'\n    }\n  }, _ref[\"b,\\n    strong\"] = {\n    fontWeight: 'bolder'\n  }, _ref[\"code,\\n    kbd,\\n    samp\"] = {\n    fontFamily: 'monospace, monospace',\n    fontSize: '1em'\n  }, _ref.small = {\n    fontSize: '80%'\n  }, _ref[\"sub,\\n    sup\"] = {\n    fontSize: '75%',\n    lineHeight: '0',\n    position: 'relative',\n    verticalAlign: 'baseline'\n  }, _ref.sub = {\n    bottom: '-0.25em'\n  }, _ref.sup = {\n    top: '-0.5em'\n  }, _ref.img = {\n    borderStyle: 'none'\n  }, _ref[\"button,\\n    input,\\n    optgroup,\\n    select,\\n    textarea\"] = {\n    fontFamily: 'inherit',\n    fontSize: '100%',\n    lineHeight: '1.15',\n    margin: '0'\n  }, _ref[\"button,\\n    input\"] = {\n    overflow: 'visible'\n  }, _ref[\"button,\\n    select\"] = {\n    textTransform: 'none'\n  }, _ref[\"button,\\n    html [type=\\\"button\\\"],\\n    [type=\\\"reset\\\"],\\n    [type=\\\"submit\\\"]\"] = {\n    WebkitAppearance: 'button'\n  }, _ref[\"button::-moz-focus-inner,\\n    [type=\\\"button\\\"]::-moz-focus-inner,\\n    [type=\\\"reset\\\"]::-moz-focus-inner,\\n    [type=\\\"submit\\\"]::-moz-focus-inner\"] = {\n    borderStyle: 'none',\n    padding: '0'\n  }, _ref[\"button:-moz-focusring,\\n    [type=\\\"button\\\"]:-moz-focusring,\\n    [type=\\\"reset\\\"]:-moz-focusring,\\n    [type=\\\"submit\\\"]:-moz-focusring\"] = {\n    outline: '1px dotted ButtonText'\n  }, _ref.fieldset = {\n    padding: '0.35em 0.625em 0.75em'\n  }, _ref.legend = {\n    boxSizing: 'border-box',\n    color: 'inherit',\n    display: 'table',\n    maxWidth: '100%',\n    padding: '0',\n    whiteSpace: 'normal'\n  }, _ref.progress = {\n    verticalAlign: 'baseline'\n  }, _ref.textarea = {\n    overflow: 'auto'\n  }, _ref[\"[type=\\\"checkbox\\\"],\\n    [type=\\\"radio\\\"]\"] = {\n    boxSizing: 'border-box',\n    padding: '0'\n  }, _ref[\"[type=\\\"number\\\"]::-webkit-inner-spin-button,\\n    [type=\\\"number\\\"]::-webkit-outer-spin-button\"] = {\n    height: 'auto'\n  }, _ref['[type=\"search\"]'] = {\n    WebkitAppearance: 'textfield',\n    outlineOffset: '-2px'\n  }, _ref['[type=\"search\"]::-webkit-search-decoration'] = {\n    WebkitAppearance: 'none'\n  }, _ref['::-webkit-file-upload-button'] = {\n    WebkitAppearance: 'button',\n    font: 'inherit'\n  }, _ref.details = {\n    display: 'block'\n  }, _ref.summary = {\n    display: 'list-item'\n  }, _ref.template = {\n    display: 'none'\n  }, _ref['[hidden]'] = {\n    display: 'none'\n  }, _ref), {\n    'abbr[title]': {\n      textDecoration: 'underline dotted'\n    }\n  }];\n}\n\nfunction _templateObject$1() {\n  var data = _taggedTemplateLiteralLoose([\"radial-gradient(\", \"\", \"\", \"\", \")\"]);\n\n  _templateObject$1 = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n/**\n * CSS for declaring a radial gradient, including a fallback background-color. The fallback is either the first color-stop or an explicitly passed fallback color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...radialGradient({\n *     colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n *     extent: 'farthest-corner at 45px 45px',\n *     position: 'center',\n *     shape: 'ellipse',\n *   })\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${radialGradient({\n *     colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n *     extent: 'farthest-corner at 45px 45px',\n *     position: 'center',\n *     shape: 'ellipse',\n *   })}\n *`\n *\n * // CSS as JS Output\n *\n * div: {\n *   'backgroundColor': '#00FFFF',\n *   'backgroundImage': 'radial-gradient(center ellipse farthest-corner at 45px 45px, #00FFFF 0%, rgba(0, 0, 255, 0) 50%, #0000FF 95%)',\n * }\n */\n\n\nfunction radialGradient(_ref) {\n  var colorStops = _ref.colorStops,\n      _ref$extent = _ref.extent,\n      extent = _ref$extent === void 0 ? '' : _ref$extent,\n      fallback = _ref.fallback,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? '' : _ref$position,\n      _ref$shape = _ref.shape,\n      shape = _ref$shape === void 0 ? '' : _ref$shape;\n\n  if (!colorStops || colorStops.length < 2) {\n    throw new PolishedError(57);\n  }\n\n  return {\n    backgroundColor: fallback || colorStops[0].split(' ')[0],\n    backgroundImage: constructGradientValue(_templateObject$1(), position, shape, extent, colorStops.join(', '))\n  };\n}\n/**\n * A helper to generate a retina background image and non-retina\n * background image. The retina background image will output to a HiDPI media query. The mixin uses\n * a _2x.png filename suffix by default.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *  ...retinaImage('my-img')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${retinaImage('my-img')}\n * `\n *\n * // CSS as JS Output\n * div {\n *   backgroundImage: 'url(my-img.png)',\n *   '@media only screen and (-webkit-min-device-pixel-ratio: 1.3),\n *    only screen and (min--moz-device-pixel-ratio: 1.3),\n *    only screen and (-o-min-device-pixel-ratio: 1.3/1),\n *    only screen and (min-resolution: 144dpi),\n *    only screen and (min-resolution: 1.5dppx)': {\n *     backgroundImage: 'url(my-img_2x.png)',\n *   }\n * }\n */\n\n\nfunction retinaImage(filename, backgroundSize, extension, retinaFilename, retinaSuffix) {\n  var _ref;\n\n  if (extension === void 0) {\n    extension = 'png';\n  }\n\n  if (retinaSuffix === void 0) {\n    retinaSuffix = '_2x';\n  }\n\n  if (!filename) {\n    throw new PolishedError(58);\n  } // Replace the dot at the beginning of the passed extension if one exists\n\n\n  var ext = extension.replace(/^\\./, '');\n  var rFilename = retinaFilename ? retinaFilename + \".\" + ext : \"\" + filename + retinaSuffix + \".\" + ext;\n  return _ref = {\n    backgroundImage: \"url(\" + filename + \".\" + ext + \")\"\n  }, _ref[hiDPI()] = _extends({\n    backgroundImage: \"url(\" + rFilename + \")\"\n  }, backgroundSize ? {\n    backgroundSize: backgroundSize\n  } : {}), _ref;\n}\n/* eslint-disable key-spacing */\n\n\nvar functionsMap = {\n  easeInBack: 'cubic-bezier(0.600, -0.280, 0.735, 0.045)',\n  easeInCirc: 'cubic-bezier(0.600,  0.040, 0.980, 0.335)',\n  easeInCubic: 'cubic-bezier(0.550,  0.055, 0.675, 0.190)',\n  easeInExpo: 'cubic-bezier(0.950,  0.050, 0.795, 0.035)',\n  easeInQuad: 'cubic-bezier(0.550,  0.085, 0.680, 0.530)',\n  easeInQuart: 'cubic-bezier(0.895,  0.030, 0.685, 0.220)',\n  easeInQuint: 'cubic-bezier(0.755,  0.050, 0.855, 0.060)',\n  easeInSine: 'cubic-bezier(0.470,  0.000, 0.745, 0.715)',\n  easeOutBack: 'cubic-bezier(0.175,  0.885, 0.320, 1.275)',\n  easeOutCubic: 'cubic-bezier(0.215,  0.610, 0.355, 1.000)',\n  easeOutCirc: 'cubic-bezier(0.075,  0.820, 0.165, 1.000)',\n  easeOutExpo: 'cubic-bezier(0.190,  1.000, 0.220, 1.000)',\n  easeOutQuad: 'cubic-bezier(0.250,  0.460, 0.450, 0.940)',\n  easeOutQuart: 'cubic-bezier(0.165,  0.840, 0.440, 1.000)',\n  easeOutQuint: 'cubic-bezier(0.230,  1.000, 0.320, 1.000)',\n  easeOutSine: 'cubic-bezier(0.390,  0.575, 0.565, 1.000)',\n  easeInOutBack: 'cubic-bezier(0.680, -0.550, 0.265, 1.550)',\n  easeInOutCirc: 'cubic-bezier(0.785,  0.135, 0.150, 0.860)',\n  easeInOutCubic: 'cubic-bezier(0.645,  0.045, 0.355, 1.000)',\n  easeInOutExpo: 'cubic-bezier(1.000,  0.000, 0.000, 1.000)',\n  easeInOutQuad: 'cubic-bezier(0.455,  0.030, 0.515, 0.955)',\n  easeInOutQuart: 'cubic-bezier(0.770,  0.000, 0.175, 1.000)',\n  easeInOutQuint: 'cubic-bezier(0.860,  0.000, 0.070, 1.000)',\n  easeInOutSine: 'cubic-bezier(0.445,  0.050, 0.550, 0.950)'\n};\n/* eslint-enable key-spacing */\n\nfunction getTimingFunction(functionName) {\n  return functionsMap[functionName];\n}\n/**\n * String to represent common easing functions as demonstrated here: (github.com/jaukia/easie).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'transitionTimingFunction': timingFunctions('easeInQuad')\n * }\n *\n * // styled-components usage\n *  const div = styled.div`\n *   transitionTimingFunction: ${timingFunctions('easeInQuad')};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'transitionTimingFunction': 'cubic-bezier(0.550,  0.085, 0.680, 0.530)',\n * }\n */\n\n\nfunction timingFunctions(timingFunction) {\n  return getTimingFunction(timingFunction);\n}\n\nvar getBorderWidth = function getBorderWidth(pointingDirection, height, width) {\n  var fullWidth = \"\" + width[0] + (width[1] || '');\n  var halfWidth = \"\" + width[0] / 2 + (width[1] || '');\n  var fullHeight = \"\" + height[0] + (height[1] || '');\n  var halfHeight = \"\" + height[0] / 2 + (height[1] || '');\n\n  switch (pointingDirection) {\n    case 'top':\n      return \"0 \" + halfWidth + \" \" + fullHeight + \" \" + halfWidth;\n\n    case 'topLeft':\n      return fullWidth + \" \" + fullHeight + \" 0 0\";\n\n    case 'left':\n      return halfHeight + \" \" + fullWidth + \" \" + halfHeight + \" 0\";\n\n    case 'bottomLeft':\n      return fullWidth + \" 0 0 \" + fullHeight;\n\n    case 'bottom':\n      return fullHeight + \" \" + halfWidth + \" 0 \" + halfWidth;\n\n    case 'bottomRight':\n      return \"0 0 \" + fullWidth + \" \" + fullHeight;\n\n    case 'right':\n      return halfHeight + \" 0 \" + halfHeight + \" \" + fullWidth;\n\n    case 'topRight':\n    default:\n      return \"0 \" + fullWidth + \" \" + fullHeight + \" 0\";\n  }\n};\n\nvar getBorderColor = function getBorderColor(pointingDirection, foregroundColor, backgroundColor) {\n  switch (pointingDirection) {\n    case 'top':\n    case 'bottomRight':\n      return backgroundColor + \" \" + backgroundColor + \" \" + foregroundColor + \" \" + backgroundColor;\n\n    case 'right':\n    case 'bottomLeft':\n      return backgroundColor + \" \" + backgroundColor + \" \" + backgroundColor + \" \" + foregroundColor;\n\n    case 'bottom':\n    case 'topLeft':\n      return foregroundColor + \" \" + backgroundColor + \" \" + backgroundColor + \" \" + backgroundColor;\n\n    case 'left':\n    case 'topRight':\n      return backgroundColor + \" \" + foregroundColor + \" \" + backgroundColor + \" \" + backgroundColor;\n\n    default:\n      throw new PolishedError(59);\n  }\n};\n/**\n * CSS to represent triangle with any pointing direction with an optional background color.\n *\n * @example\n * // Styles as object usage\n *\n * const styles = {\n *   ...triangle({ pointingDirection: 'right', width: '100px', height: '100px', foregroundColor: 'red' })\n * }\n *\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${triangle({ pointingDirection: 'right', width: '100px', height: '100px', foregroundColor: 'red' })}\n *\n *\n * // CSS as JS Output\n *\n * div: {\n *  'borderColor': 'transparent transparent transparent red',\n *  'borderStyle': 'solid',\n *  'borderWidth': '50px 0 50px 100px',\n *  'height': '0',\n *  'width': '0',\n * }\n */\n\n\nfunction triangle(_ref) {\n  var pointingDirection = _ref.pointingDirection,\n      height = _ref.height,\n      width = _ref.width,\n      foregroundColor = _ref.foregroundColor,\n      _ref$backgroundColor = _ref.backgroundColor,\n      backgroundColor = _ref$backgroundColor === void 0 ? 'transparent' : _ref$backgroundColor;\n  var widthAndUnit = getValueAndUnit(width);\n  var heightAndUnit = getValueAndUnit(height);\n\n  if (isNaN(heightAndUnit[0]) || isNaN(widthAndUnit[0])) {\n    throw new PolishedError(60);\n  }\n\n  return {\n    width: '0',\n    height: '0',\n    borderColor: getBorderColor(pointingDirection, foregroundColor, backgroundColor),\n    borderStyle: 'solid',\n    borderWidth: getBorderWidth(pointingDirection, heightAndUnit, widthAndUnit)\n  };\n}\n/**\n * Provides an easy way to change the `wordWrap` property.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...wordWrap('break-word')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${wordWrap('break-word')}\n * `\n *\n * // CSS as JS Output\n *\n * const styles = {\n *   overflowWrap: 'break-word',\n *   wordWrap: 'break-word',\n *   wordBreak: 'break-all',\n * }\n */\n\n\nfunction wordWrap(wrap) {\n  if (wrap === void 0) {\n    wrap = 'break-word';\n  }\n\n  var wordBreak = wrap === 'break-word' ? 'break-all' : wrap;\n  return {\n    overflowWrap: wrap,\n    wordWrap: wrap,\n    wordBreak: wordBreak\n  };\n}\n\nfunction colorToInt(color) {\n  return Math.round(color * 255);\n}\n\nfunction convertToInt(red, green, blue) {\n  return colorToInt(red) + \",\" + colorToInt(green) + \",\" + colorToInt(blue);\n}\n\nfunction hslToRgb(hue, saturation, lightness, convert) {\n  if (convert === void 0) {\n    convert = convertToInt;\n  }\n\n  if (saturation === 0) {\n    // achromatic\n    return convert(lightness, lightness, lightness);\n  } // formulae from https://en.wikipedia.org/wiki/HSL_and_HSV\n\n\n  var huePrime = (hue % 360 + 360) % 360 / 60;\n  var chroma = (1 - Math.abs(2 * lightness - 1)) * saturation;\n  var secondComponent = chroma * (1 - Math.abs(huePrime % 2 - 1));\n  var red = 0;\n  var green = 0;\n  var blue = 0;\n\n  if (huePrime >= 0 && huePrime < 1) {\n    red = chroma;\n    green = secondComponent;\n  } else if (huePrime >= 1 && huePrime < 2) {\n    red = secondComponent;\n    green = chroma;\n  } else if (huePrime >= 2 && huePrime < 3) {\n    green = chroma;\n    blue = secondComponent;\n  } else if (huePrime >= 3 && huePrime < 4) {\n    green = secondComponent;\n    blue = chroma;\n  } else if (huePrime >= 4 && huePrime < 5) {\n    red = secondComponent;\n    blue = chroma;\n  } else if (huePrime >= 5 && huePrime < 6) {\n    red = chroma;\n    blue = secondComponent;\n  }\n\n  var lightnessModification = lightness - chroma / 2;\n  var finalRed = red + lightnessModification;\n  var finalGreen = green + lightnessModification;\n  var finalBlue = blue + lightnessModification;\n  return convert(finalRed, finalGreen, finalBlue);\n}\n\nvar namedColorMap = {\n  aliceblue: 'f0f8ff',\n  antiquewhite: 'faebd7',\n  aqua: '00ffff',\n  aquamarine: '7fffd4',\n  azure: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '000',\n  blanchedalmond: 'ffebcd',\n  blue: '0000ff',\n  blueviolet: '8a2be2',\n  brown: 'a52a2a',\n  burlywood: 'deb887',\n  cadetblue: '5f9ea0',\n  chartreuse: '7fff00',\n  chocolate: 'd2691e',\n  coral: 'ff7f50',\n  cornflowerblue: '6495ed',\n  cornsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: '00ffff',\n  darkblue: '00008b',\n  darkcyan: '008b8b',\n  darkgoldenrod: 'b8860b',\n  darkgray: 'a9a9a9',\n  darkgreen: '006400',\n  darkgrey: 'a9a9a9',\n  darkkhaki: 'bdb76b',\n  darkmagenta: '8b008b',\n  darkolivegreen: '556b2f',\n  darkorange: 'ff8c00',\n  darkorchid: '9932cc',\n  darkred: '8b0000',\n  darksalmon: 'e9967a',\n  darkseagreen: '8fbc8f',\n  darkslateblue: '483d8b',\n  darkslategray: '2f4f4f',\n  darkslategrey: '2f4f4f',\n  darkturquoise: '00ced1',\n  darkviolet: '9400d3',\n  deeppink: 'ff1493',\n  deepskyblue: '00bfff',\n  dimgray: '696969',\n  dimgrey: '696969',\n  dodgerblue: '1e90ff',\n  firebrick: 'b22222',\n  floralwhite: 'fffaf0',\n  forestgreen: '228b22',\n  fuchsia: 'ff00ff',\n  gainsboro: 'dcdcdc',\n  ghostwhite: 'f8f8ff',\n  gold: 'ffd700',\n  goldenrod: 'daa520',\n  gray: '808080',\n  green: '008000',\n  greenyellow: 'adff2f',\n  grey: '808080',\n  honeydew: 'f0fff0',\n  hotpink: 'ff69b4',\n  indianred: 'cd5c5c',\n  indigo: '4b0082',\n  ivory: 'fffff0',\n  khaki: 'f0e68c',\n  lavender: 'e6e6fa',\n  lavenderblush: 'fff0f5',\n  lawngreen: '7cfc00',\n  lemonchiffon: 'fffacd',\n  lightblue: 'add8e6',\n  lightcoral: 'f08080',\n  lightcyan: 'e0ffff',\n  lightgoldenrodyellow: 'fafad2',\n  lightgray: 'd3d3d3',\n  lightgreen: '90ee90',\n  lightgrey: 'd3d3d3',\n  lightpink: 'ffb6c1',\n  lightsalmon: 'ffa07a',\n  lightseagreen: '20b2aa',\n  lightskyblue: '87cefa',\n  lightslategray: '789',\n  lightslategrey: '789',\n  lightsteelblue: 'b0c4de',\n  lightyellow: 'ffffe0',\n  lime: '0f0',\n  limegreen: '32cd32',\n  linen: 'faf0e6',\n  magenta: 'f0f',\n  maroon: '800000',\n  mediumaquamarine: '66cdaa',\n  mediumblue: '0000cd',\n  mediumorchid: 'ba55d3',\n  mediumpurple: '9370db',\n  mediumseagreen: '3cb371',\n  mediumslateblue: '7b68ee',\n  mediumspringgreen: '00fa9a',\n  mediumturquoise: '48d1cc',\n  mediumvioletred: 'c71585',\n  midnightblue: '191970',\n  mintcream: 'f5fffa',\n  mistyrose: 'ffe4e1',\n  moccasin: 'ffe4b5',\n  navajowhite: 'ffdead',\n  navy: '000080',\n  oldlace: 'fdf5e6',\n  olive: '808000',\n  olivedrab: '6b8e23',\n  orange: 'ffa500',\n  orangered: 'ff4500',\n  orchid: 'da70d6',\n  palegoldenrod: 'eee8aa',\n  palegreen: '98fb98',\n  paleturquoise: 'afeeee',\n  palevioletred: 'db7093',\n  papayawhip: 'ffefd5',\n  peachpuff: 'ffdab9',\n  peru: 'cd853f',\n  pink: 'ffc0cb',\n  plum: 'dda0dd',\n  powderblue: 'b0e0e6',\n  purple: '800080',\n  rebeccapurple: '639',\n  red: 'f00',\n  rosybrown: 'bc8f8f',\n  royalblue: '4169e1',\n  saddlebrown: '8b4513',\n  salmon: 'fa8072',\n  sandybrown: 'f4a460',\n  seagreen: '2e8b57',\n  seashell: 'fff5ee',\n  sienna: 'a0522d',\n  silver: 'c0c0c0',\n  skyblue: '87ceeb',\n  slateblue: '6a5acd',\n  slategray: '708090',\n  slategrey: '708090',\n  snow: 'fffafa',\n  springgreen: '00ff7f',\n  steelblue: '4682b4',\n  tan: 'd2b48c',\n  teal: '008080',\n  thistle: 'd8bfd8',\n  tomato: 'ff6347',\n  turquoise: '40e0d0',\n  violet: 'ee82ee',\n  wheat: 'f5deb3',\n  white: 'fff',\n  whitesmoke: 'f5f5f5',\n  yellow: 'ff0',\n  yellowgreen: '9acd32'\n};\n/**\n * Checks if a string is a CSS named color and returns its equivalent hex value, otherwise returns the original color.\n * @private\n */\n\nfunction nameToHex(color) {\n  if (typeof color !== 'string') return color;\n  var normalizedColorName = color.toLowerCase();\n  return namedColorMap[normalizedColorName] ? \"#\" + namedColorMap[normalizedColorName] : color;\n}\n\nvar hexRegex = /^#[a-fA-F0-9]{6}$/;\nvar hexRgbaRegex = /^#[a-fA-F0-9]{8}$/;\nvar reducedHexRegex = /^#[a-fA-F0-9]{3}$/;\nvar reducedRgbaHexRegex = /^#[a-fA-F0-9]{4}$/;\nvar rgbRegex = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i;\nvar rgbaRegex = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*([-+]?[0-9]*[.]?[0-9]+)\\s*\\)$/i;\nvar hslRegex = /^hsl\\(\\s*(\\d{0,3}[.]?[0-9]+)\\s*,\\s*(\\d{1,3}[.]?[0-9]?)%\\s*,\\s*(\\d{1,3}[.]?[0-9]?)%\\s*\\)$/i;\nvar hslaRegex = /^hsla\\(\\s*(\\d{0,3}[.]?[0-9]+)\\s*,\\s*(\\d{1,3}[.]?[0-9]?)%\\s*,\\s*(\\d{1,3}[.]?[0-9]?)%\\s*,\\s*([-+]?[0-9]*[.]?[0-9]+)\\s*\\)$/i;\n/**\n * Returns an RgbColor or RgbaColor object. This utility function is only useful\n * if want to extract a color component. With the color util `toColorString` you\n * can convert a RgbColor or RgbaColor object back to a string.\n *\n * @example\n * // Assigns `{ red: 255, green: 0, blue: 0 }` to color1\n * const color1 = parseToRgb('rgb(255, 0, 0)');\n * // Assigns `{ red: 92, green: 102, blue: 112, alpha: 0.75 }` to color2\n * const color2 = parseToRgb('hsla(210, 10%, 40%, 0.75)');\n */\n\nfunction parseToRgb(color) {\n  if (typeof color !== 'string') {\n    throw new PolishedError(3);\n  }\n\n  var normalizedColor = nameToHex(color);\n\n  if (normalizedColor.match(hexRegex)) {\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[2], 16),\n      green: parseInt(\"\" + normalizedColor[3] + normalizedColor[4], 16),\n      blue: parseInt(\"\" + normalizedColor[5] + normalizedColor[6], 16)\n    };\n  }\n\n  if (normalizedColor.match(hexRgbaRegex)) {\n    var alpha = parseFloat((parseInt(\"\" + normalizedColor[7] + normalizedColor[8], 16) / 255).toFixed(2));\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[2], 16),\n      green: parseInt(\"\" + normalizedColor[3] + normalizedColor[4], 16),\n      blue: parseInt(\"\" + normalizedColor[5] + normalizedColor[6], 16),\n      alpha: alpha\n    };\n  }\n\n  if (normalizedColor.match(reducedHexRegex)) {\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[1], 16),\n      green: parseInt(\"\" + normalizedColor[2] + normalizedColor[2], 16),\n      blue: parseInt(\"\" + normalizedColor[3] + normalizedColor[3], 16)\n    };\n  }\n\n  if (normalizedColor.match(reducedRgbaHexRegex)) {\n    var _alpha = parseFloat((parseInt(\"\" + normalizedColor[4] + normalizedColor[4], 16) / 255).toFixed(2));\n\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[1], 16),\n      green: parseInt(\"\" + normalizedColor[2] + normalizedColor[2], 16),\n      blue: parseInt(\"\" + normalizedColor[3] + normalizedColor[3], 16),\n      alpha: _alpha\n    };\n  }\n\n  var rgbMatched = rgbRegex.exec(normalizedColor);\n\n  if (rgbMatched) {\n    return {\n      red: parseInt(\"\" + rgbMatched[1], 10),\n      green: parseInt(\"\" + rgbMatched[2], 10),\n      blue: parseInt(\"\" + rgbMatched[3], 10)\n    };\n  }\n\n  var rgbaMatched = rgbaRegex.exec(normalizedColor);\n\n  if (rgbaMatched) {\n    return {\n      red: parseInt(\"\" + rgbaMatched[1], 10),\n      green: parseInt(\"\" + rgbaMatched[2], 10),\n      blue: parseInt(\"\" + rgbaMatched[3], 10),\n      alpha: parseFloat(\"\" + rgbaMatched[4])\n    };\n  }\n\n  var hslMatched = hslRegex.exec(normalizedColor);\n\n  if (hslMatched) {\n    var hue = parseInt(\"\" + hslMatched[1], 10);\n    var saturation = parseInt(\"\" + hslMatched[2], 10) / 100;\n    var lightness = parseInt(\"\" + hslMatched[3], 10) / 100;\n    var rgbColorString = \"rgb(\" + hslToRgb(hue, saturation, lightness) + \")\";\n    var hslRgbMatched = rgbRegex.exec(rgbColorString);\n\n    if (!hslRgbMatched) {\n      throw new PolishedError(4, normalizedColor, rgbColorString);\n    }\n\n    return {\n      red: parseInt(\"\" + hslRgbMatched[1], 10),\n      green: parseInt(\"\" + hslRgbMatched[2], 10),\n      blue: parseInt(\"\" + hslRgbMatched[3], 10)\n    };\n  }\n\n  var hslaMatched = hslaRegex.exec(normalizedColor);\n\n  if (hslaMatched) {\n    var _hue = parseInt(\"\" + hslaMatched[1], 10);\n\n    var _saturation = parseInt(\"\" + hslaMatched[2], 10) / 100;\n\n    var _lightness = parseInt(\"\" + hslaMatched[3], 10) / 100;\n\n    var _rgbColorString = \"rgb(\" + hslToRgb(_hue, _saturation, _lightness) + \")\";\n\n    var _hslRgbMatched = rgbRegex.exec(_rgbColorString);\n\n    if (!_hslRgbMatched) {\n      throw new PolishedError(4, normalizedColor, _rgbColorString);\n    }\n\n    return {\n      red: parseInt(\"\" + _hslRgbMatched[1], 10),\n      green: parseInt(\"\" + _hslRgbMatched[2], 10),\n      blue: parseInt(\"\" + _hslRgbMatched[3], 10),\n      alpha: parseFloat(\"\" + hslaMatched[4])\n    };\n  }\n\n  throw new PolishedError(5);\n}\n\nfunction rgbToHsl(color) {\n  // make sure rgb are contained in a set of [0, 255]\n  var red = color.red / 255;\n  var green = color.green / 255;\n  var blue = color.blue / 255;\n  var max = Math.max(red, green, blue);\n  var min = Math.min(red, green, blue);\n  var lightness = (max + min) / 2;\n\n  if (max === min) {\n    // achromatic\n    if (color.alpha !== undefined) {\n      return {\n        hue: 0,\n        saturation: 0,\n        lightness: lightness,\n        alpha: color.alpha\n      };\n    } else {\n      return {\n        hue: 0,\n        saturation: 0,\n        lightness: lightness\n      };\n    }\n  }\n\n  var hue;\n  var delta = max - min;\n  var saturation = lightness > 0.5 ? delta / (2 - max - min) : delta / (max + min);\n\n  switch (max) {\n    case red:\n      hue = (green - blue) / delta + (green < blue ? 6 : 0);\n      break;\n\n    case green:\n      hue = (blue - red) / delta + 2;\n      break;\n\n    default:\n      // blue case\n      hue = (red - green) / delta + 4;\n      break;\n  }\n\n  hue *= 60;\n\n  if (color.alpha !== undefined) {\n    return {\n      hue: hue,\n      saturation: saturation,\n      lightness: lightness,\n      alpha: color.alpha\n    };\n  }\n\n  return {\n    hue: hue,\n    saturation: saturation,\n    lightness: lightness\n  };\n}\n/**\n * Returns an HslColor or HslaColor object. This utility function is only useful\n * if want to extract a color component. With the color util `toColorString` you\n * can convert a HslColor or HslaColor object back to a string.\n *\n * @example\n * // Assigns `{ hue: 0, saturation: 1, lightness: 0.5 }` to color1\n * const color1 = parseToHsl('rgb(255, 0, 0)');\n * // Assigns `{ hue: 128, saturation: 1, lightness: 0.5, alpha: 0.75 }` to color2\n * const color2 = parseToHsl('hsla(128, 100%, 50%, 0.75)');\n */\n\n\nfunction parseToHsl(color) {\n  // Note: At a later stage we can optimize this function as right now a hsl\n  // color would be parsed converted to rgb values and converted back to hsl.\n  return rgbToHsl(parseToRgb(color));\n}\n/**\n * Reduces hex values if possible e.g. #ff8866 to #f86\n * @private\n */\n\n\nvar reduceHexValue = function reduceHexValue(value) {\n  if (value.length === 7 && value[1] === value[2] && value[3] === value[4] && value[5] === value[6]) {\n    return \"#\" + value[1] + value[3] + value[5];\n  }\n\n  return value;\n};\n\nfunction numberToHex(value) {\n  var hex = value.toString(16);\n  return hex.length === 1 ? \"0\" + hex : hex;\n}\n\nfunction colorToHex(color) {\n  return numberToHex(Math.round(color * 255));\n}\n\nfunction convertToHex(red, green, blue) {\n  return reduceHexValue(\"#\" + colorToHex(red) + colorToHex(green) + colorToHex(blue));\n}\n\nfunction hslToHex(hue, saturation, lightness) {\n  return hslToRgb(hue, saturation, lightness, convertToHex);\n}\n/**\n * Returns a string value for the color. The returned result is the smallest possible hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hsl(359, 0.75, 0.4),\n *   background: hsl({ hue: 360, saturation: 0.75, lightness: 0.4 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hsl(359, 0.75, 0.4)};\n *   background: ${hsl({ hue: 360, saturation: 0.75, lightness: 0.4 })};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#b3191c\";\n *   background: \"#b3191c\";\n * }\n */\n\n\nfunction hsl(value, saturation, lightness) {\n  if (typeof value === 'number' && typeof saturation === 'number' && typeof lightness === 'number') {\n    return hslToHex(value, saturation, lightness);\n  } else if (typeof value === 'object' && saturation === undefined && lightness === undefined) {\n    return hslToHex(value.hue, value.saturation, value.lightness);\n  }\n\n  throw new PolishedError(1);\n}\n/**\n * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hsla(359, 0.75, 0.4, 0.7),\n *   background: hsla({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0,7 }),\n *   background: hsla(359, 0.75, 0.4, 1),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hsla(359, 0.75, 0.4, 0.7)};\n *   background: ${hsla({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0,7 })};\n *   background: ${hsla(359, 0.75, 0.4, 1)};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(179,25,28,0.7)\";\n *   background: \"rgba(179,25,28,0.7)\";\n *   background: \"#b3191c\";\n * }\n */\n\n\nfunction hsla(value, saturation, lightness, alpha) {\n  if (typeof value === 'number' && typeof saturation === 'number' && typeof lightness === 'number' && typeof alpha === 'number') {\n    return alpha >= 1 ? hslToHex(value, saturation, lightness) : \"rgba(\" + hslToRgb(value, saturation, lightness) + \",\" + alpha + \")\";\n  } else if (typeof value === 'object' && saturation === undefined && lightness === undefined && alpha === undefined) {\n    return value.alpha >= 1 ? hslToHex(value.hue, value.saturation, value.lightness) : \"rgba(\" + hslToRgb(value.hue, value.saturation, value.lightness) + \",\" + value.alpha + \")\";\n  }\n\n  throw new PolishedError(2);\n}\n/**\n * Returns a string value for the color. The returned result is the smallest possible hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgb(255, 205, 100),\n *   background: rgb({ red: 255, green: 205, blue: 100 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgb(255, 205, 100)};\n *   background: ${rgb({ red: 255, green: 205, blue: 100 })};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#ffcd64\";\n *   background: \"#ffcd64\";\n * }\n */\n\n\nfunction rgb(value, green, blue) {\n  if (typeof value === 'number' && typeof green === 'number' && typeof blue === 'number') {\n    return reduceHexValue(\"#\" + numberToHex(value) + numberToHex(green) + numberToHex(blue));\n  } else if (typeof value === 'object' && green === undefined && blue === undefined) {\n    return reduceHexValue(\"#\" + numberToHex(value.red) + numberToHex(value.green) + numberToHex(value.blue));\n  }\n\n  throw new PolishedError(6);\n}\n/**\n * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.\n *\n * Can also be used to fade a color by passing a hex value or named CSS color along with an alpha value.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgba(255, 205, 100, 0.7),\n *   background: rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 }),\n *   background: rgba(255, 205, 100, 1),\n *   background: rgba('#ffffff', 0.4),\n *   background: rgba('black', 0.7),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgba(255, 205, 100, 0.7)};\n *   background: ${rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 })};\n *   background: ${rgba(255, 205, 100, 1)};\n *   background: ${rgba('#ffffff', 0.4)};\n *   background: ${rgba('black', 0.7)};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(255,205,100,0.7)\";\n *   background: \"rgba(255,205,100,0.7)\";\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,255,255,0.4)\";\n *   background: \"rgba(0,0,0,0.7)\";\n * }\n */\n\n\nfunction rgba(firstValue, secondValue, thirdValue, fourthValue) {\n  if (typeof firstValue === 'string' && typeof secondValue === 'number') {\n    var rgbValue = parseToRgb(firstValue);\n    return \"rgba(\" + rgbValue.red + \",\" + rgbValue.green + \",\" + rgbValue.blue + \",\" + secondValue + \")\";\n  } else if (typeof firstValue === 'number' && typeof secondValue === 'number' && typeof thirdValue === 'number' && typeof fourthValue === 'number') {\n    return fourthValue >= 1 ? rgb(firstValue, secondValue, thirdValue) : \"rgba(\" + firstValue + \",\" + secondValue + \",\" + thirdValue + \",\" + fourthValue + \")\";\n  } else if (typeof firstValue === 'object' && secondValue === undefined && thirdValue === undefined && fourthValue === undefined) {\n    return firstValue.alpha >= 1 ? rgb(firstValue.red, firstValue.green, firstValue.blue) : \"rgba(\" + firstValue.red + \",\" + firstValue.green + \",\" + firstValue.blue + \",\" + firstValue.alpha + \")\";\n  }\n\n  throw new PolishedError(7);\n}\n\nvar isRgb = function isRgb(color) {\n  return typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number' && (typeof color.alpha !== 'number' || typeof color.alpha === 'undefined');\n};\n\nvar isRgba = function isRgba(color) {\n  return typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number' && typeof color.alpha === 'number';\n};\n\nvar isHsl = function isHsl(color) {\n  return typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number' && (typeof color.alpha !== 'number' || typeof color.alpha === 'undefined');\n};\n\nvar isHsla = function isHsla(color) {\n  return typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number' && typeof color.alpha === 'number';\n};\n/**\n * Converts a RgbColor, RgbaColor, HslColor or HslaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `rgb`, `rgba`, `hsl` or `hsla`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: toColorString({ red: 255, green: 205, blue: 100 }),\n *   background: toColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 }),\n *   background: toColorString({ hue: 240, saturation: 1, lightness: 0.5 }),\n *   background: toColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${toColorString({ red: 255, green: 205, blue: 100 })};\n *   background: ${toColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 })};\n *   background: ${toColorString({ hue: 240, saturation: 1, lightness: 0.5 })};\n *   background: ${toColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,205,100,0.72)\";\n *   background: \"#00f\";\n *   background: \"rgba(179,25,25,0.72)\";\n * }\n */\n\n\nfunction toColorString(color) {\n  if (typeof color !== 'object') throw new PolishedError(8);\n  if (isRgba(color)) return rgba(color);\n  if (isRgb(color)) return rgb(color);\n  if (isHsla(color)) return hsla(color);\n  if (isHsl(color)) return hsl(color);\n  throw new PolishedError(8);\n} // Type definitions taken from https://github.com/gcanti/flow-static-land/blob/master/src/Fun.js\n// eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line no-redeclare\n\n\nfunction curried(f, length, acc) {\n  return function fn() {\n    // eslint-disable-next-line prefer-rest-params\n    var combined = acc.concat(Array.prototype.slice.call(arguments));\n    return combined.length >= length ? f.apply(this, combined) : curried(f, length, combined);\n  };\n} // eslint-disable-next-line no-redeclare\n\n\nfunction curry(f) {\n  // eslint-disable-line no-redeclare\n  return curried(f, f.length, []);\n}\n/**\n * Changes the hue of the color. Hue is a number between 0 to 360. The first\n * argument for adjustHue is the amount of degrees the color is rotated around\n * the color wheel, always producing a positive hue value.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: adjustHue(180, '#448'),\n *   background: adjustHue('180', 'rgba(101,100,205,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${adjustHue(180, '#448')};\n *   background: ${adjustHue('180', 'rgba(101,100,205,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#888844\";\n *   background: \"rgba(136,136,68,0.7)\";\n * }\n */\n\n\nfunction adjustHue(degree, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    hue: hslColor.hue + parseFloat(degree)\n  }));\n} // prettier-ignore\n\n\nvar curriedAdjustHue = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(adjustHue);\n/**\n * Returns the complement of the provided color. This is identical to adjustHue(180, <color>).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: complement('#448'),\n *   background: complement('rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${complement('#448')};\n *   background: ${complement('rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#884\";\n *   background: \"rgba(153,153,153,0.7)\";\n * }\n */\n\nfunction complement(color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    hue: (hslColor.hue + 180) % 360\n  }));\n}\n\nfunction guard(lowerBoundary, upperBoundary, value) {\n  return Math.max(lowerBoundary, Math.min(upperBoundary, value));\n}\n/**\n * Returns a string value for the darkened color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: darken(0.2, '#FFCD64'),\n *   background: darken('0.2', 'rgba(255,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${darken(0.2, '#FFCD64')};\n *   background: ${darken('0.2', 'rgba(255,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#ffbd31\";\n *   background: \"rgba(255,189,49,0.7)\";\n * }\n */\n\n\nfunction darken(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    lightness: guard(0, 1, hslColor.lightness - parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedDarken = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(darken);\n/**\n * Decreases the intensity of a color. Its range is between 0 to 1. The first\n * argument of the desaturate function is the amount by how much the color\n * intensity should be decreased.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: desaturate(0.2, '#CCCD64'),\n *   background: desaturate('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${desaturate(0.2, '#CCCD64')};\n *   background: ${desaturate('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#b8b979\";\n *   background: \"rgba(184,185,121,0.7)\";\n * }\n */\n\nfunction desaturate(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    saturation: guard(0, 1, hslColor.saturation - parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedDesaturate = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(desaturate);\n/**\n * Returns a number (float) representing the luminance of a color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: getLuminance('#CCCD64') >= getLuminance('#0000ff') ? '#CCCD64' : '#0000ff',\n *   background: getLuminance('rgba(58, 133, 255, 1)') >= getLuminance('rgba(255, 57, 149, 1)') ?\n *                             'rgba(58, 133, 255, 1)' :\n *                             'rgba(255, 57, 149, 1)',\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${getLuminance('#CCCD64') >= getLuminance('#0000ff') ? '#CCCD64' : '#0000ff'};\n *   background: ${getLuminance('rgba(58, 133, 255, 1)') >= getLuminance('rgba(255, 57, 149, 1)') ?\n *                             'rgba(58, 133, 255, 1)' :\n *                             'rgba(255, 57, 149, 1)'};\n *\n * // CSS in JS Output\n *\n * div {\n *   background: \"#CCCD64\";\n *   background: \"rgba(58, 133, 255, 1)\";\n * }\n */\n\nfunction getLuminance(color) {\n  if (color === 'transparent') return 0;\n  var rgbColor = parseToRgb(color);\n\n  var _Object$keys$map = Object.keys(rgbColor).map(function (key) {\n    var channel = rgbColor[key] / 255;\n    return channel <= 0.03928 ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);\n  }),\n      r = _Object$keys$map[0],\n      g = _Object$keys$map[1],\n      b = _Object$keys$map[2];\n\n  return parseFloat((0.2126 * r + 0.7152 * g + 0.0722 * b).toFixed(3));\n}\n/**\n * Returns the contrast ratio between two colors based on\n * [W3's recommended equation for calculating contrast](http://www.w3.org/TR/WCAG20/#contrast-ratiodef).\n *\n * @example\n * const contrastRatio = getContrast('#444', '#fff');\n */\n\n\nfunction getContrast(color1, color2) {\n  var luminance1 = getLuminance(color1);\n  var luminance2 = getLuminance(color2);\n  return parseFloat((luminance1 > luminance2 ? (luminance1 + 0.05) / (luminance2 + 0.05) : (luminance2 + 0.05) / (luminance1 + 0.05)).toFixed(2));\n}\n/**\n * Converts the color to a grayscale, by reducing its saturation to 0.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: grayscale('#CCCD64'),\n *   background: grayscale('rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${grayscale('#CCCD64')};\n *   background: ${grayscale('rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#999\";\n *   background: \"rgba(153,153,153,0.7)\";\n * }\n */\n\n\nfunction grayscale(color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    saturation: 0\n  }));\n}\n/**\n * Converts a HslColor or HslaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `hsl` or `hsla`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hslToColorString({ hue: 240, saturation: 1, lightness: 0.5 }),\n *   background: hslToColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hslToColorString({ hue: 240, saturation: 1, lightness: 0.5 })};\n *   background: ${hslToColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#00f\";\n *   background: \"rgba(179,25,25,0.72)\";\n * }\n */\n\n\nfunction hslToColorString(color) {\n  if (typeof color === 'object' && typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number') {\n    if (color.alpha && typeof color.alpha === 'number') {\n      return hsla({\n        hue: color.hue,\n        saturation: color.saturation,\n        lightness: color.lightness,\n        alpha: color.alpha\n      });\n    }\n\n    return hsl({\n      hue: color.hue,\n      saturation: color.saturation,\n      lightness: color.lightness\n    });\n  }\n\n  throw new PolishedError(45);\n}\n/**\n * Inverts the red, green and blue values of a color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: invert('#CCCD64'),\n *   background: invert('rgba(101,100,205,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${invert('#CCCD64')};\n *   background: ${invert('rgba(101,100,205,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#33329b\";\n *   background: \"rgba(154,155,50,0.7)\";\n * }\n */\n\n\nfunction invert(color) {\n  if (color === 'transparent') return color; // parse color string to rgb\n\n  var value = parseToRgb(color);\n  return toColorString(_extends({}, value, {\n    red: 255 - value.red,\n    green: 255 - value.green,\n    blue: 255 - value.blue\n  }));\n}\n/**\n * Returns a string value for the lightened color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: lighten(0.2, '#CCCD64'),\n *   background: lighten('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${lighten(0.2, '#FFCD64')};\n *   background: ${lighten('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#e5e6b1\";\n *   background: \"rgba(229,230,177,0.7)\";\n * }\n */\n\n\nfunction lighten(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    lightness: guard(0, 1, hslColor.lightness + parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedLighten = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(lighten);\n/**\n * Determines which contrast guidelines have been met for two colors.\n * Based on the [contrast calculations recommended by W3](https://www.w3.org/WAI/WCAG21/Understanding/contrast-enhanced.html).\n *\n * @example\n * const scores = meetsContrastGuidelines('#444', '#fff');\n */\n\nfunction meetsContrastGuidelines(color1, color2) {\n  var contrastRatio = getContrast(color1, color2);\n  return {\n    AA: contrastRatio >= 4.5,\n    AALarge: contrastRatio >= 3,\n    AAA: contrastRatio >= 7,\n    AAALarge: contrastRatio >= 4.5\n  };\n}\n/**\n * Mixes the two provided colors together by calculating the average of each of the RGB components weighted to the first color by the provided weight.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: mix(0.5, '#f00', '#00f')\n *   background: mix(0.25, '#f00', '#00f')\n *   background: mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${mix(0.5, '#f00', '#00f')};\n *   background: ${mix(0.25, '#f00', '#00f')};\n *   background: ${mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#7f007f\";\n *   background: \"#3f00bf\";\n *   background: \"rgba(63, 0, 191, 0.75)\";\n * }\n */\n\n\nfunction mix(weight, color, otherColor) {\n  if (color === 'transparent') return otherColor;\n  if (otherColor === 'transparent') return color;\n  if (weight === 0) return otherColor;\n  var parsedColor1 = parseToRgb(color);\n\n  var color1 = _extends({}, parsedColor1, {\n    alpha: typeof parsedColor1.alpha === 'number' ? parsedColor1.alpha : 1\n  });\n\n  var parsedColor2 = parseToRgb(otherColor);\n\n  var color2 = _extends({}, parsedColor2, {\n    alpha: typeof parsedColor2.alpha === 'number' ? parsedColor2.alpha : 1\n  }); // The formula is copied from the original Sass implementation:\n  // http://sass-lang.com/documentation/Sass/Script/Functions.html#mix-instance_method\n\n\n  var alphaDelta = color1.alpha - color2.alpha;\n  var x = parseFloat(weight) * 2 - 1;\n  var y = x * alphaDelta === -1 ? x : x + alphaDelta;\n  var z = 1 + x * alphaDelta;\n  var weight1 = (y / z + 1) / 2.0;\n  var weight2 = 1 - weight1;\n  var mixedColor = {\n    red: Math.floor(color1.red * weight1 + color2.red * weight2),\n    green: Math.floor(color1.green * weight1 + color2.green * weight2),\n    blue: Math.floor(color1.blue * weight1 + color2.blue * weight2),\n    alpha: color1.alpha * (parseFloat(weight) / 1.0) + color2.alpha * (1 - parseFloat(weight) / 1.0)\n  };\n  return rgba(mixedColor);\n} // prettier-ignore\n\n\nvar curriedMix = /*#__PURE__*/curry\n/* ::<number | string, string, string, string> */\n(mix);\n/**\n * Increases the opacity of a color. Its range for the amount is between 0 to 1.\n *\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: opacify(0.1, 'rgba(255, 255, 255, 0.9)');\n *   background: opacify(0.2, 'hsla(0, 0%, 100%, 0.5)'),\n *   background: opacify('0.5', 'rgba(255, 0, 0, 0.2)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${opacify(0.1, 'rgba(255, 255, 255, 0.9)')};\n *   background: ${opacify(0.2, 'hsla(0, 0%, 100%, 0.5)')},\n *   background: ${opacify('0.5', 'rgba(255, 0, 0, 0.2)')},\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#fff\";\n *   background: \"rgba(255,255,255,0.7)\";\n *   background: \"rgba(255,0,0,0.7)\";\n * }\n */\n\nfunction opacify(amount, color) {\n  if (color === 'transparent') return color;\n  var parsedColor = parseToRgb(color);\n  var alpha = typeof parsedColor.alpha === 'number' ? parsedColor.alpha : 1;\n\n  var colorWithAlpha = _extends({}, parsedColor, {\n    alpha: guard(0, 1, (alpha * 100 + parseFloat(amount) * 100) / 100)\n  });\n\n  return rgba(colorWithAlpha);\n} // prettier-ignore\n\n\nvar curriedOpacify = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(opacify);\nvar defaultLightReturnColor = '#000';\nvar defaultDarkReturnColor = '#fff';\n/**\n * Returns black or white (or optional light and dark return colors) for best\n * contrast depending on the luminosity of the given color.\n * When passing custom return colors, set `strict` to `true` to ensure that the\n * return color always meets or exceeds WCAG level AA or greater. If this test\n * fails, the default return color (black or white) is returned in place of the\n * custom return color.\n *\n * Follows [W3C specs for readability](https://www.w3.org/TR/WCAG20-TECHS/G18.html).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   color: readableColor('#000'),\n *   color: readableColor('black', '#001', '#ff8'),\n *   color: readableColor('white', '#001', '#ff8'),\n *   color: readableColor('red', '#333', '#ddd', true)\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   color: ${readableColor('#000')};\n *   color: ${readableColor('black', '#001', '#ff8')};\n *   color: ${readableColor('white', '#001', '#ff8')};\n *   color: ${readableColor('red', '#333', '#ddd', true)};\n * `\n *\n * // CSS in JS Output\n * element {\n *   color: \"#fff\";\n *   color: \"#ff8\";\n *   color: \"#001\";\n *   color: \"#000\";\n * }\n */\n\nfunction readableColor(color, lightReturnColor, darkReturnColor, strict) {\n  if (lightReturnColor === void 0) {\n    lightReturnColor = defaultLightReturnColor;\n  }\n\n  if (darkReturnColor === void 0) {\n    darkReturnColor = defaultDarkReturnColor;\n  }\n\n  if (strict === void 0) {\n    strict = false;\n  }\n\n  var isLightColor = getLuminance(color) > 0.179;\n  var preferredReturnColor = isLightColor ? lightReturnColor : darkReturnColor; // TODO: Make `strict` the default behaviour in the next major release.\n  // Without `strict`, this may return a color that does not meet WCAG AA.\n\n  if (!strict || getContrast(color, preferredReturnColor) >= 4.5) {\n    return preferredReturnColor;\n  }\n\n  return isLightColor ? defaultLightReturnColor : defaultDarkReturnColor;\n}\n/**\n * Converts a RgbColor or RgbaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `rgb` or `rgba`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgbToColorString({ red: 255, green: 205, blue: 100 }),\n *   background: rgbToColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgbToColorString({ red: 255, green: 205, blue: 100 })};\n *   background: ${rgbToColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,205,100,0.72)\";\n * }\n */\n\n\nfunction rgbToColorString(color) {\n  if (typeof color === 'object' && typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number') {\n    if (typeof color.alpha === 'number') {\n      return rgba({\n        red: color.red,\n        green: color.green,\n        blue: color.blue,\n        alpha: color.alpha\n      });\n    }\n\n    return rgb({\n      red: color.red,\n      green: color.green,\n      blue: color.blue\n    });\n  }\n\n  throw new PolishedError(46);\n}\n/**\n * Increases the intensity of a color. Its range is between 0 to 1. The first\n * argument of the saturate function is the amount by how much the color\n * intensity should be increased.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: saturate(0.2, '#CCCD64'),\n *   background: saturate('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${saturate(0.2, '#FFCD64')};\n *   background: ${saturate('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#e0e250\";\n *   background: \"rgba(224,226,80,0.7)\";\n * }\n */\n\n\nfunction saturate(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    saturation: guard(0, 1, hslColor.saturation + parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedSaturate = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(saturate);\n/**\n * Sets the hue of a color to the provided value. The hue range can be\n * from 0 and 359.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setHue(42, '#CCCD64'),\n *   background: setHue('244', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setHue(42, '#CCCD64')};\n *   background: ${setHue('244', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#cdae64\";\n *   background: \"rgba(107,100,205,0.7)\";\n * }\n */\n\nfunction setHue(hue, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    hue: parseFloat(hue)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetHue = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setHue);\n/**\n * Sets the lightness of a color to the provided value. The lightness range can be\n * from 0 and 1.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setLightness(0.2, '#CCCD64'),\n *   background: setLightness('0.75', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setLightness(0.2, '#CCCD64')};\n *   background: ${setLightness('0.75', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#4d4d19\";\n *   background: \"rgba(223,224,159,0.7)\";\n * }\n */\n\nfunction setLightness(lightness, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    lightness: parseFloat(lightness)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetLightness = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setLightness);\n/**\n * Sets the saturation of a color to the provided value. The saturation range can be\n * from 0 and 1.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setSaturation(0.2, '#CCCD64'),\n *   background: setSaturation('0.75', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setSaturation(0.2, '#CCCD64')};\n *   background: ${setSaturation('0.75', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#adad84\";\n *   background: \"rgba(228,229,76,0.7)\";\n * }\n */\n\nfunction setSaturation(saturation, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    saturation: parseFloat(saturation)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetSaturation = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setSaturation);\n/**\n * Shades a color by mixing it with black. `shade` can produce\n * hue shifts, where as `darken` manipulates the luminance channel and therefore\n * doesn't produce hue shifts.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: shade(0.25, '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${shade(0.25, '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#00003f\";\n * }\n */\n\nfunction shade(percentage, color) {\n  if (color === 'transparent') return color;\n  return curriedMix(parseFloat(percentage), 'rgb(0, 0, 0)', color);\n} // prettier-ignore\n\n\nvar curriedShade = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(shade);\n/**\n * Tints a color by mixing it with white. `tint` can produce\n * hue shifts, where as `lighten` manipulates the luminance channel and therefore\n * doesn't produce hue shifts.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: tint(0.25, '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${tint(0.25, '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#bfbfff\";\n * }\n */\n\nfunction tint(percentage, color) {\n  if (color === 'transparent') return color;\n  return curriedMix(parseFloat(percentage), 'rgb(255, 255, 255)', color);\n} // prettier-ignore\n\n\nvar curriedTint = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(tint);\n/**\n * Decreases the opacity of a color. Its range for the amount is between 0 to 1.\n *\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: transparentize(0.1, '#fff');\n *   background: transparentize(0.2, 'hsl(0, 0%, 100%)'),\n *   background: transparentize('0.5', 'rgba(255, 0, 0, 0.8)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${transparentize(0.1, '#fff')};\n *   background: ${transparentize(0.2, 'hsl(0, 0%, 100%)')},\n *   background: ${transparentize('0.5', 'rgba(255, 0, 0, 0.8)')},\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(255,255,255,0.9)\";\n *   background: \"rgba(255,255,255,0.8)\";\n *   background: \"rgba(255,0,0,0.3)\";\n * }\n */\n\nfunction transparentize(amount, color) {\n  if (color === 'transparent') return color;\n  var parsedColor = parseToRgb(color);\n  var alpha = typeof parsedColor.alpha === 'number' ? parsedColor.alpha : 1;\n\n  var colorWithAlpha = _extends({}, parsedColor, {\n    alpha: guard(0, 1, (alpha * 100 - parseFloat(amount) * 100) / 100)\n  });\n\n  return rgba(colorWithAlpha);\n} // prettier-ignore\n\n\nvar curriedTransparentize = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(transparentize);\n/**\n * Shorthand for easily setting the animation property. Allows either multiple arrays with animations\n * or a single animation spread over the arguments.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...animation(['rotate', '1s', 'ease-in-out'], ['colorchange', '2s'])\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${animation(['rotate', '1s', 'ease-in-out'], ['colorchange', '2s'])}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'animation': 'rotate 1s ease-in-out, colorchange 2s'\n * }\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...animation('rotate', '1s', 'ease-in-out')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${animation('rotate', '1s', 'ease-in-out')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'animation': 'rotate 1s ease-in-out'\n * }\n */\n\nfunction animation() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  } // Allow single or multiple animations passed\n\n\n  var multiMode = Array.isArray(args[0]);\n\n  if (!multiMode && args.length > 8) {\n    throw new PolishedError(64);\n  }\n\n  var code = args.map(function (arg) {\n    if (multiMode && !Array.isArray(arg) || !multiMode && Array.isArray(arg)) {\n      throw new PolishedError(65);\n    }\n\n    if (Array.isArray(arg) && arg.length > 8) {\n      throw new PolishedError(66);\n    }\n\n    return Array.isArray(arg) ? arg.join(' ') : arg;\n  }).join(', ');\n  return {\n    animation: code\n  };\n}\n/**\n * Shorthand that accepts any number of backgroundImage values as parameters for creating a single background statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...backgroundImages('url(\"/image/background.jpg\")', 'linear-gradient(red, green)')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${backgroundImages('url(\"/image/background.jpg\")', 'linear-gradient(red, green)')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'backgroundImage': 'url(\"/image/background.jpg\"), linear-gradient(red, green)'\n * }\n */\n\n\nfunction backgroundImages() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  return {\n    backgroundImage: properties.join(', ')\n  };\n}\n/**\n * Shorthand that accepts any number of background values as parameters for creating a single background statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...backgrounds('url(\"/image/background.jpg\")', 'linear-gradient(red, green)', 'center no-repeat')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${backgrounds('url(\"/image/background.jpg\")', 'linear-gradient(red, green)', 'center no-repeat')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'background': 'url(\"/image/background.jpg\"), linear-gradient(red, green), center no-repeat'\n * }\n */\n\n\nfunction backgrounds() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  return {\n    background: properties.join(', ')\n  };\n}\n\nvar sideMap = ['top', 'right', 'bottom', 'left'];\n/**\n * Shorthand for the border property that splits out individual properties for use with tools like Fela and Styletron. A side keyword can optionally be passed to target only one side's border properties.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...border('1px', 'solid', 'red')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${border('1px', 'solid', 'red')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderColor': 'red',\n *   'borderStyle': 'solid',\n *   'borderWidth': `1px`,\n * }\n *\n * // Styles as object usage\n * const styles = {\n *   ...border('top', '1px', 'solid', 'red')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${border('top', '1px', 'solid', 'red')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopColor': 'red',\n *   'borderTopStyle': 'solid',\n *   'borderTopWidth': `1px`,\n * }\n */\n\nfunction border(sideKeyword) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  }\n\n  if (typeof sideKeyword === 'string' && sideMap.indexOf(sideKeyword) >= 0) {\n    var _ref;\n\n    return _ref = {}, _ref[\"border\" + capitalizeString(sideKeyword) + \"Width\"] = values[0], _ref[\"border\" + capitalizeString(sideKeyword) + \"Style\"] = values[1], _ref[\"border\" + capitalizeString(sideKeyword) + \"Color\"] = values[2], _ref;\n  } else {\n    values.unshift(sideKeyword);\n    return {\n      borderWidth: values[0],\n      borderStyle: values[1],\n      borderColor: values[2]\n    };\n  }\n}\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderColor('red', 'green', 'blue', 'yellow')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderColor('red', 'green', 'blue', 'yellow')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopColor': 'red',\n *   'borderRightColor': 'green',\n *   'borderBottomColor': 'blue',\n *   'borderLeftColor': 'yellow'\n * }\n */\n\n\nfunction borderColor() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderColor'].concat(values));\n}\n/**\n * Shorthand that accepts a value for side and a value for radius and applies the radius value to both corners of the side.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderRadius('top', '5px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderRadius('top', '5px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopRightRadius': '5px',\n *   'borderTopLeftRadius': '5px',\n * }\n */\n\n\nfunction borderRadius(side, radius) {\n  var uppercaseSide = capitalizeString(side);\n\n  if (!radius && radius !== 0) {\n    throw new PolishedError(62);\n  }\n\n  if (uppercaseSide === 'Top' || uppercaseSide === 'Bottom') {\n    var _ref;\n\n    return _ref = {}, _ref[\"border\" + uppercaseSide + \"RightRadius\"] = radius, _ref[\"border\" + uppercaseSide + \"LeftRadius\"] = radius, _ref;\n  }\n\n  if (uppercaseSide === 'Left' || uppercaseSide === 'Right') {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[\"borderTop\" + uppercaseSide + \"Radius\"] = radius, _ref2[\"borderBottom\" + uppercaseSide + \"Radius\"] = radius, _ref2;\n  }\n\n  throw new PolishedError(63);\n}\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderStyle('solid', 'dashed', 'dotted', 'double')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderStyle('solid', 'dashed', 'dotted', 'double')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopStyle': 'solid',\n *   'borderRightStyle': 'dashed',\n *   'borderBottomStyle': 'dotted',\n *   'borderLeftStyle': 'double'\n * }\n */\n\n\nfunction borderStyle() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderStyle'].concat(values));\n}\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderWidth('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderWidth('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopWidth': '12px',\n *   'borderRightWidth': '24px',\n *   'borderBottomWidth': '36px',\n *   'borderLeftWidth': '48px'\n * }\n */\n\n\nfunction borderWidth() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderWidth'].concat(values));\n}\n\nfunction generateSelectors(template, state) {\n  var stateSuffix = state ? \":\" + state : '';\n  return template(stateSuffix);\n}\n/**\n * Function helper that adds an array of states to a template of selectors. Used in textInputs and buttons.\n * @private\n */\n\n\nfunction statefulSelectors(states, template, stateMap) {\n  if (!template) throw new PolishedError(67);\n  if (states.length === 0) return generateSelectors(template, null);\n  var selectors = [];\n\n  for (var i = 0; i < states.length; i += 1) {\n    if (stateMap && stateMap.indexOf(states[i]) < 0) {\n      throw new PolishedError(68);\n    }\n\n    selectors.push(generateSelectors(template, states[i]));\n  }\n\n  selectors = selectors.join(',');\n  return selectors;\n}\n\nvar stateMap = [undefined, null, 'active', 'focus', 'hover'];\n\nfunction template(state) {\n  return \"button\" + state + \",\\n  input[type=\\\"button\\\"]\" + state + \",\\n  input[type=\\\"reset\\\"]\" + state + \",\\n  input[type=\\\"submit\\\"]\" + state;\n}\n/**\n * Populates selectors that target all buttons. You can pass optional states to append to the selectors.\n * @example\n * // Styles as object usage\n * const styles = {\n *   [buttons('active')]: {\n *     'border': 'none'\n *   }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   > ${buttons('active')} {\n *     border: none;\n *   }\n * `\n *\n * // CSS in JS Output\n *\n *  'button:active,\n *  'input[type=\"button\"]:active,\n *  'input[type=\\\"reset\\\"]:active,\n *  'input[type=\\\"submit\\\"]:active: {\n *   'border': 'none'\n * }\n */\n\n\nfunction buttons() {\n  for (var _len = arguments.length, states = new Array(_len), _key = 0; _key < _len; _key++) {\n    states[_key] = arguments[_key];\n  }\n\n  return statefulSelectors(states, template, stateMap);\n}\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...margin('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${margin('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'marginTop': '12px',\n *   'marginRight': '24px',\n *   'marginBottom': '36px',\n *   'marginLeft': '48px'\n * }\n */\n\n\nfunction margin() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['margin'].concat(values));\n}\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...padding('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${padding('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'paddingTop': '12px',\n *   'paddingRight': '24px',\n *   'paddingBottom': '36px',\n *   'paddingLeft': '48px'\n * }\n */\n\n\nfunction padding() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['padding'].concat(values));\n}\n\nvar positionMap$1 = ['absolute', 'fixed', 'relative', 'static', 'sticky'];\n/**\n * Shorthand accepts up to five values, including null to skip a value, and maps them to their respective directions. The first value can optionally be a position keyword.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...position('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${position('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'top': '12px',\n *   'right': '24px',\n *   'bottom': '36px',\n *   'left': '48px'\n * }\n *\n * // Styles as object usage\n * const styles = {\n *   ...position('absolute', '12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${position('absolute', '12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'position': 'absolute',\n *   'top': '12px',\n *   'right': '24px',\n *   'bottom': '36px',\n *   'left': '48px'\n * }\n */\n\nfunction position(firstValue) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  }\n\n  if (positionMap$1.indexOf(firstValue) >= 0 && firstValue) {\n    return _extends({}, directionalProperty.apply(void 0, [''].concat(values)), {\n      position: firstValue\n    });\n  } else {\n    return directionalProperty.apply(void 0, ['', firstValue].concat(values));\n  }\n}\n/**\n * Shorthand to set the height and width properties in a single statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...size('300px', '250px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${size('300px', '250px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'height': '300px',\n *   'width': '250px',\n * }\n */\n\n\nfunction size(height, width) {\n  if (width === void 0) {\n    width = height;\n  }\n\n  return {\n    height: height,\n    width: width\n  };\n}\n\nvar stateMap$1 = [undefined, null, 'active', 'focus', 'hover'];\n\nfunction template$1(state) {\n  return \"input[type=\\\"color\\\"]\" + state + \",\\n    input[type=\\\"date\\\"]\" + state + \",\\n    input[type=\\\"datetime\\\"]\" + state + \",\\n    input[type=\\\"datetime-local\\\"]\" + state + \",\\n    input[type=\\\"email\\\"]\" + state + \",\\n    input[type=\\\"month\\\"]\" + state + \",\\n    input[type=\\\"number\\\"]\" + state + \",\\n    input[type=\\\"password\\\"]\" + state + \",\\n    input[type=\\\"search\\\"]\" + state + \",\\n    input[type=\\\"tel\\\"]\" + state + \",\\n    input[type=\\\"text\\\"]\" + state + \",\\n    input[type=\\\"time\\\"]\" + state + \",\\n    input[type=\\\"url\\\"]\" + state + \",\\n    input[type=\\\"week\\\"]\" + state + \",\\n    input:not([type])\" + state + \",\\n    textarea\" + state;\n}\n/**\n * Populates selectors that target all text inputs. You can pass optional states to append to the selectors.\n * @example\n * // Styles as object usage\n * const styles = {\n *   [textInputs('active')]: {\n *     'border': 'none'\n *   }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   > ${textInputs('active')} {\n *     border: none;\n *   }\n * `\n *\n * // CSS in JS Output\n *\n *  'input[type=\"color\"]:active,\n *  input[type=\"date\"]:active,\n *  input[type=\"datetime\"]:active,\n *  input[type=\"datetime-local\"]:active,\n *  input[type=\"email\"]:active,\n *  input[type=\"month\"]:active,\n *  input[type=\"number\"]:active,\n *  input[type=\"password\"]:active,\n *  input[type=\"search\"]:active,\n *  input[type=\"tel\"]:active,\n *  input[type=\"text\"]:active,\n *  input[type=\"time\"]:active,\n *  input[type=\"url\"]:active,\n *  input[type=\"week\"]:active,\n *  input:not([type]):active,\n *  textarea:active': {\n *   'border': 'none'\n * }\n */\n\n\nfunction textInputs() {\n  for (var _len = arguments.length, states = new Array(_len), _key = 0; _key < _len; _key++) {\n    states[_key] = arguments[_key];\n  }\n\n  return statefulSelectors(states, template$1, stateMap$1);\n}\n/**\n * Accepts any number of transition values as parameters for creating a single transition statement. You may also pass an array of properties as the first parameter that you would like to apply the same transition values to (second parameter).\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...transitions('opacity 1.0s ease-in 0s', 'width 2.0s ease-in 2s'),\n *   ...transitions(['color', 'background-color'], '2.0s ease-in 2s')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${transitions('opacity 1.0s ease-in 0s', 'width 2.0s ease-in 2s')};\n *   ${transitions(['color', 'background-color'], '2.0s ease-in 2s'),};\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'transition': 'opacity 1.0s ease-in 0s, width 2.0s ease-in 2s'\n *   'transition': 'color 2.0s ease-in 2s, background-color 2.0s ease-in 2s',\n * }\n */\n\n\nfunction transitions() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  if (Array.isArray(properties[0]) && properties.length === 2) {\n    var value = properties[1];\n\n    if (typeof value !== 'string') {\n      throw new PolishedError(61);\n    }\n\n    var transitionsString = properties[0].map(function (property) {\n      return property + \" \" + value;\n    }).join(', ');\n    return {\n      transition: transitionsString\n    };\n  } else {\n    return {\n      transition: properties.join(', ')\n    };\n  }\n}\n\nexport { curriedAdjustHue as adjustHue, animation, backgroundImages, backgrounds, between, border, borderColor, borderRadius, borderStyle, borderWidth, buttons, clearFix, complement, cover, cssVar, curriedDarken as darken, curriedDesaturate as desaturate, directionalProperty, ellipsis, em, fluidRange, fontFace, getContrast, getLuminance, getValueAndUnit, grayscale, hiDPI, hideText, hideVisually, hsl, hslToColorString, hsla, invert, curriedLighten as lighten, linearGradient, margin, math, meetsContrastGuidelines, curriedMix as mix, modularScale, normalize, curriedOpacify as opacify, padding, parseToHsl, parseToRgb, position, radialGradient, readableColor, rem, retinaImage, rgb, rgbToColorString, rgba, curriedSaturate as saturate, curriedSetHue as setHue, curriedSetLightness as setLightness, curriedSetSaturation as setSaturation, curriedShade as shade, size, stripUnit, textInputs, timingFunctions, curriedTint as tint, toColorString, transitions, curriedTransparentize as transparentize, triangle, wordWrap };","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import { WebGLRenderer, Scene, PerspectiveCamera, Raycaster, TextureLoader, Vector2, Vector3, Box3, Color, Mesh, SphereGeometry, MeshBasicMaterial, BackSide, EventDispatcher, MOUSE, Quaternion, Spherical, Clock } from 'three';\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { FlyControls } from 'three/examples/jsm/controls/FlyControls.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { parseToRgb, opacify } from 'polished';\nimport TWEEN from '@tweenjs/tween.js';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".scene-nav-info {\\n  bottom: 5px;\\n  width: 100%;\\n  text-align: center;\\n  color: slategrey;\\n  opacity: 0.7;\\n  font-size: 10px;\\n}\\n\\n.scene-tooltip {\\n  color: lavender;\\n  font-size: 15px;\\n}\\n\\n.scene-nav-info, .scene-tooltip {\\n  position: absolute;\\n  font-family: sans-serif;\\n  pointer-events: none;\\n}\";\nstyleInject(css_248z);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  WebGLRenderer: WebGLRenderer,\n  Scene: Scene,\n  PerspectiveCamera: PerspectiveCamera,\n  Raycaster: Raycaster,\n  TextureLoader: TextureLoader,\n  Vector2: Vector2,\n  Vector3: Vector3,\n  Box3: Box3,\n  Color: Color,\n  Mesh: Mesh,\n  SphereGeometry: SphereGeometry,\n  MeshBasicMaterial: MeshBasicMaterial,\n  BackSide: BackSide,\n  EventDispatcher: EventDispatcher,\n  MOUSE: MOUSE,\n  Quaternion: Quaternion,\n  Spherical: Spherical,\n  Clock: Clock\n};\nvar threeRenderObjects = Kapsule({\n  props: {\n    width: {\n      \"default\": window.innerWidth,\n      onChange: function onChange(width, state, prevWidth) {\n        isNaN(width) && (state.width = prevWidth);\n      }\n    },\n    height: {\n      \"default\": window.innerHeight,\n      onChange: function onChange(height, state, prevHeight) {\n        isNaN(height) && (state.height = prevHeight);\n      }\n    },\n    backgroundColor: {\n      \"default\": '#000011'\n    },\n    backgroundImageUrl: {},\n    onBackgroundImageLoaded: {},\n    showNavInfo: {\n      \"default\": true\n    },\n    skyRadius: {\n      \"default\": 50000\n    },\n    objects: {\n      \"default\": []\n    },\n    enablePointerInteraction: {\n      \"default\": true,\n      onChange: function onChange(_, state) {\n        // Reset hover state\n        state.hoverObj = null;\n        if (state.toolTipElem) state.toolTipElem.innerHTML = '';\n      },\n      triggerUpdate: false\n    },\n    lineHoverPrecision: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    hoverOrderComparator: {\n      \"default\": function _default() {\n        return -1;\n      },\n      triggerUpdate: false\n    },\n    // keep existing order by default\n    hoverFilter: {\n      \"default\": function _default() {\n        return true;\n      },\n      triggerUpdate: false\n    },\n    // exclude objects from interaction\n    tooltipContent: {\n      triggerUpdate: false\n    },\n    hoverDuringDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    clickAfterDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    onHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onRightClick: {\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    tick: function tick(state) {\n      if (state.initialised) {\n        state.controls.update && state.controls.update(state.clock.getDelta()); // timedelta is required for fly controls\n\n        state.postProcessingComposer ? state.postProcessingComposer.render() // if using postprocessing, switch the output to it\n        : state.renderer.render(state.scene, state.camera);\n\n        if (state.enablePointerInteraction) {\n          // Update tooltip and trigger onHover events\n          var topObject = null;\n\n          if (state.hoverDuringDrag || !state.isPointerDragging) {\n            var intersects = this.intersectingObjects(state.pointerPos.x, state.pointerPos.y).filter(function (d) {\n              return state.hoverFilter(d.object);\n            }).sort(function (a, b) {\n              return state.hoverOrderComparator(a.object, b.object);\n            });\n            var topIntersect = intersects.length ? intersects[0] : null;\n            topObject = topIntersect ? topIntersect.object : null;\n            state.intersectionPoint = topIntersect ? topIntersect.point : null;\n          }\n\n          if (topObject !== state.hoverObj) {\n            state.onHover(topObject, state.hoverObj);\n            state.toolTipElem.innerHTML = topObject ? accessorFn(state.tooltipContent)(topObject) || '' : '';\n            state.hoverObj = topObject;\n          }\n        }\n\n        TWEEN.update(); // update camera animation tweens\n      }\n\n      return this;\n    },\n    getPointerPos: function getPointerPos(state) {\n      var _state$pointerPos = state.pointerPos,\n          x = _state$pointerPos.x,\n          y = _state$pointerPos.y;\n      return {\n        x: x,\n        y: y\n      };\n    },\n    cameraPosition: function cameraPosition(state, position, lookAt, transitionDuration) {\n      var camera = state.camera; // Setter\n\n      if (position && state.initialised) {\n        var finalPos = position;\n        var finalLookAt = lookAt || {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n\n        if (!transitionDuration) {\n          // no animation\n          setCameraPos(finalPos);\n          setLookAt(finalLookAt);\n        } else {\n          var camPos = Object.assign({}, camera.position);\n          var camLookAt = getLookAt();\n          new TWEEN.Tween(camPos).to(finalPos, transitionDuration).easing(TWEEN.Easing.Quadratic.Out).onUpdate(setCameraPos).start(); // Face direction in 1/3rd of time\n\n          new TWEEN.Tween(camLookAt).to(finalLookAt, transitionDuration / 3).easing(TWEEN.Easing.Quadratic.Out).onUpdate(setLookAt).start();\n        }\n\n        return this;\n      } // Getter\n\n\n      return Object.assign({}, camera.position, {\n        lookAt: getLookAt()\n      }); //\n\n      function setCameraPos(pos) {\n        var x = pos.x,\n            y = pos.y,\n            z = pos.z;\n        if (x !== undefined) camera.position.x = x;\n        if (y !== undefined) camera.position.y = y;\n        if (z !== undefined) camera.position.z = z;\n      }\n\n      function setLookAt(lookAt) {\n        state.controls.target = new three.Vector3(lookAt.x, lookAt.y, lookAt.z);\n      }\n\n      function getLookAt() {\n        return Object.assign(new three.Vector3(0, 0, -1000).applyQuaternion(camera.quaternion).add(camera.position));\n      }\n    },\n    zoomToFit: function zoomToFit(state) {\n      var transitionDuration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var padding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n\n      for (var _len = arguments.length, bboxArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        bboxArgs[_key - 3] = arguments[_key];\n      }\n\n      return this.fitToBbox(this.getBbox.apply(this, bboxArgs), transitionDuration, padding);\n    },\n    fitToBbox: function fitToBbox(state, bbox) {\n      var transitionDuration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var padding = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10; // based on https://discourse.threejs.org/t/camera-zoom-to-fit-object/936/24\n\n      var camera = state.camera;\n\n      if (bbox) {\n        var center = new three.Vector3(0, 0, 0); // reset camera aim to center\n\n        var maxBoxSide = Math.max.apply(Math, _toConsumableArray(Object.entries(bbox).map(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              coordType = _ref2[0],\n              coords = _ref2[1];\n\n          return Math.max.apply(Math, _toConsumableArray(coords.map(function (c) {\n            return Math.abs(center[coordType] - c);\n          })));\n        }))) * 2; // find distance that fits whole bbox within padded fov\n\n        var paddedFov = (1 - padding * 2 / state.height) * camera.fov;\n        var fitHeightDistance = maxBoxSide / Math.atan(paddedFov * Math.PI / 180);\n        var fitWidthDistance = fitHeightDistance / camera.aspect;\n        var distance = Math.max(fitHeightDistance, fitWidthDistance);\n\n        if (distance > 0) {\n          var newCameraPosition = center.clone().sub(camera.position).normalize().multiplyScalar(-distance);\n          this.cameraPosition(newCameraPosition, center, transitionDuration);\n        }\n      }\n\n      return this;\n    },\n    getBbox: function getBbox(state) {\n      var objFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var box = new three.Box3(new three.Vector3(0, 0, 0), new three.Vector3(0, 0, 0));\n      var objs = state.objects.filter(objFilter);\n      if (!objs.length) return null;\n      objs.forEach(function (obj) {\n        return box.expandByObject(obj);\n      }); // extract global x,y,z min/max\n\n      return Object.assign.apply(Object, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n        return _defineProperty({}, c, [box.min[c], box.max[c]]);\n      })));\n    },\n    getScreenCoords: function getScreenCoords(state, x, y, z) {\n      var vec = new three.Vector3(x, y, z);\n      vec.project(this.camera()); // project to the camera plane\n\n      return {\n        // align relative pos to canvas dimensions\n        x: (vec.x + 1) * state.width / 2,\n        y: -(vec.y - 1) * state.height / 2\n      };\n    },\n    intersectingObjects: function intersectingObjects(state, x, y) {\n      var relCoords = new three.Vector2(x / state.width * 2 - 1, -(y / state.height) * 2 + 1);\n      var raycaster = new three.Raycaster();\n      raycaster.params.Line.threshold = state.lineHoverPrecision; // set linePrecision\n\n      raycaster.setFromCamera(relCoords, state.camera);\n      return raycaster.intersectObjects(state.objects, true);\n    },\n    renderer: function renderer(state) {\n      return state.renderer;\n    },\n    scene: function scene(state) {\n      return state.scene;\n    },\n    camera: function camera(state) {\n      return state.camera;\n    },\n    postProcessingComposer: function postProcessingComposer(state) {\n      return state.postProcessingComposer;\n    },\n    controls: function controls(state) {\n      return state.controls;\n    },\n    tbControls: function tbControls(state) {\n      return state.controls;\n    } // to be deprecated\n\n  },\n  stateInit: function stateInit() {\n    return {\n      scene: new three.Scene(),\n      camera: new three.PerspectiveCamera(),\n      clock: new three.Clock()\n    };\n  },\n  init: function init(domNode, state, _ref4) {\n    var _ref4$controlType = _ref4.controlType,\n        controlType = _ref4$controlType === void 0 ? 'trackball' : _ref4$controlType,\n        _ref4$rendererConfig = _ref4.rendererConfig,\n        rendererConfig = _ref4$rendererConfig === void 0 ? {} : _ref4$rendererConfig,\n        _ref4$waitForLoadComp = _ref4.waitForLoadComplete,\n        waitForLoadComplete = _ref4$waitForLoadComp === void 0 ? true : _ref4$waitForLoadComp; // Wipe DOM\n\n    domNode.innerHTML = ''; // Add relative container\n\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.style.position = 'relative'; // Add nav info section\n\n    state.container.appendChild(state.navInfo = document.createElement('div'));\n    state.navInfo.className = 'scene-nav-info';\n    state.navInfo.textContent = {\n      orbit: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      trackball: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      fly: 'WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw'\n    }[controlType] || '';\n    state.navInfo.style.display = state.showNavInfo ? null : 'none'; // Setup tooltip\n\n    state.toolTipElem = document.createElement('div');\n    state.toolTipElem.classList.add('scene-tooltip');\n    state.container.appendChild(state.toolTipElem); // Capture pointer coords on move or touchstart\n\n    state.pointerPos = new three.Vector2();\n    state.pointerPos.x = -2; // Initialize off canvas\n\n    state.pointerPos.y = -2;\n    ['pointermove', 'pointerdown'].forEach(function (evType) {\n      return state.container.addEventListener(evType, function (ev) {\n        // detect point drag\n        !state.isPointerDragging && ev.type === 'pointermove' && ev.pressure > 0 && (ev.movementX !== 0 || ev.movementY !== 0) && (state.isPointerDragging = true);\n\n        if (state.enablePointerInteraction) {\n          // update the pointer pos\n          var offset = getOffset(state.container);\n          state.pointerPos.x = ev.pageX - offset.left;\n          state.pointerPos.y = ev.pageY - offset.top; // Move tooltip\n\n          state.toolTipElem.style.top = \"\".concat(state.pointerPos.y, \"px\");\n          state.toolTipElem.style.left = \"\".concat(state.pointerPos.x, \"px\");\n          state.toolTipElem.style.transform = \"translate(-\".concat(state.pointerPos.x / state.width * 100, \"%, 21px)\"); // adjust horizontal position to not exceed canvas boundaries\n        }\n\n        function getOffset(el) {\n          var rect = el.getBoundingClientRect(),\n              scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\n              scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n          return {\n            top: rect.top + scrollTop,\n            left: rect.left + scrollLeft\n          };\n        }\n      }, false);\n    }); // Handle click events on objs\n\n    state.container.addEventListener('pointerup', function (ev) {\n      if (state.isPointerDragging) {\n        state.isPointerDragging = false;\n        if (!state.clickAfterDrag) return; // don't trigger onClick after pointer drag (camera motion via controls)\n      }\n\n      requestAnimationFrame(function () {\n        // trigger click events asynchronously, to allow hoverObj to be set (on frame)\n        if (ev.button === 0) {\n          // left-click\n          state.onClick(state.hoverObj || null, ev, state.intersectionPoint); // trigger background clicks with null\n        }\n\n        if (ev.button === 2 && state.onRightClick) {\n          // right-click\n          state.onRightClick(state.hoverObj || null, ev, state.intersectionPoint);\n        }\n      });\n    }, true); // use capture phase to prevent propagation blocking from controls (specifically for fly)\n\n    state.container.addEventListener('contextmenu', function (ev) {\n      if (state.onRightClick) ev.preventDefault(); // prevent default contextmenu behavior and allow pointerup to fire instead\n    }, false); // Setup renderer, camera and controls\n\n    state.renderer = new three.WebGLRenderer(Object.assign({\n      antialias: true,\n      alpha: true\n    }, rendererConfig));\n    state.renderer.setPixelRatio(window.devicePixelRatio);\n    state.container.appendChild(state.renderer.domElement); // configure post-processing composer\n\n    state.postProcessingComposer = new EffectComposer(state.renderer);\n    state.postProcessingComposer.addPass(new RenderPass(state.scene, state.camera)); // render scene as first pass\n    // configure controls\n\n    state.controls = new {\n      trackball: TrackballControls,\n      orbit: OrbitControls,\n      fly: FlyControls\n    }[controlType](state.camera, state.renderer.domElement);\n\n    if (controlType === 'fly') {\n      state.controls.movementSpeed = 300;\n      state.controls.rollSpeed = Math.PI / 6;\n      state.controls.dragToLook = true;\n    }\n\n    if (controlType === 'trackball' || controlType === 'orbit') {\n      state.controls.minDistance = 0.1;\n      state.controls.maxDistance = state.skyRadius;\n      state.controls.addEventListener('start', function () {\n        return state.controlsEngaged = true;\n      });\n      state.controls.addEventListener('change', function () {\n        if (state.controlsEngaged) {\n          state.controlsDragging = true;\n        }\n      });\n      state.controls.addEventListener('end', function () {\n        state.controlsEngaged = false;\n        state.controlsDragging = false;\n      });\n    }\n\n    state.renderer.setSize(state.width, state.height);\n    state.postProcessingComposer.setSize(state.width, state.height);\n    state.camera.aspect = state.width / state.height;\n    state.camera.updateProjectionMatrix();\n    state.camera.position.z = 1000; // add sky\n\n    state.scene.add(state.skysphere = new three.Mesh());\n    state.skysphere.visible = false;\n    state.loadComplete = state.scene.visible = !waitForLoadComplete;\n    window.scene = state.scene;\n  },\n  update: function update(state, changedProps) {\n    // resize canvas\n    if (state.width && state.height && (changedProps.hasOwnProperty('width') || changedProps.hasOwnProperty('height'))) {\n      state.container.style.width = state.width;\n      state.container.style.height = state.height;\n      state.renderer.setSize(state.width, state.height);\n      state.postProcessingComposer.setSize(state.width, state.height);\n      state.camera.aspect = state.width / state.height;\n      state.camera.updateProjectionMatrix();\n    }\n\n    if (changedProps.hasOwnProperty('skyRadius') && state.skyRadius) {\n      state.controls.hasOwnProperty('maxDistance') && changedProps.skyRadius && (state.controls.maxDistance = state.skyRadius);\n      state.camera.far = state.skyRadius * 2.5;\n      state.camera.updateProjectionMatrix();\n      state.skysphere.geometry = new three.SphereGeometry(state.skyRadius);\n    }\n\n    if (changedProps.hasOwnProperty('backgroundColor')) {\n      var alpha = parseToRgb(state.backgroundColor).alpha;\n      if (alpha === undefined) alpha = 1;\n      state.renderer.setClearColor(new three.Color(opacify(1, state.backgroundColor)), alpha);\n    }\n\n    if (changedProps.hasOwnProperty('backgroundImageUrl')) {\n      if (!state.backgroundImageUrl) {\n        state.skysphere.visible = false;\n        state.skysphere.material.map = null;\n        !state.loadComplete && finishLoad();\n      } else {\n        new three.TextureLoader().load(state.backgroundImageUrl, function (texture) {\n          state.skysphere.material = new three.MeshBasicMaterial({\n            map: texture,\n            side: three.BackSide\n          });\n          state.skysphere.visible = true; // triggered when background image finishes loading (asynchronously to allow 1 frame to load texture)\n\n          state.onBackgroundImageLoaded && setTimeout(state.onBackgroundImageLoaded);\n          !state.loadComplete && finishLoad();\n        });\n      }\n    }\n\n    changedProps.hasOwnProperty('showNavInfo') && (state.navInfo.style.display = state.showNavInfo ? null : 'none');\n\n    if (changedProps.hasOwnProperty('objects')) {\n      (changedProps.objects || []).forEach(function (obj) {\n        return state.scene.remove(obj);\n      }); // Clear the place\n\n      state.objects.forEach(function (obj) {\n        return state.scene.add(obj);\n      }); // Add to scene\n    } //\n\n\n    function finishLoad() {\n      state.loadComplete = state.scene.visible = true;\n    }\n  }\n});\nexport default threeRenderObjects;","import { AmbientLight, DirectionalLight, Vector3 } from 'three';\nimport ThreeDragControls from 'three-dragcontrols';\nimport ThreeForceGraph from 'three-forcegraph';\nimport ThreeRenderObjects from 'three-render-objects';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".graph-info-msg {\\n  top: 50%;\\n  width: 100%;\\n  text-align: center;\\n  color: lavender;\\n  opacity: 0.7;\\n  font-size: 22px;\\n  position: absolute;\\n  font-family: Sans-serif;\\n}\\n\\n.grabbable {\\n  cursor: move;\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n\\n.grabbable:active {\\n  cursor: grabbing;\\n  cursor: -moz-grabbing;\\n  cursor: -webkit-grabbing;\\n}\";\nstyleInject(css_248z);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction linkKapsule(kapsulePropName, kapsuleType) {\n  var dummyK = new kapsuleType(); // To extract defaults\n\n  return {\n    linkProp: function linkProp(prop) {\n      // link property config\n      return {\n        \"default\": dummyK[prop](),\n        onChange: function onChange(v, state) {\n          state[kapsulePropName][prop](v);\n        },\n        triggerUpdate: false\n      };\n    },\n    linkMethod: function linkMethod(method) {\n      // link method pass-through\n      return function (state) {\n        var kapsuleInstance = state[kapsulePropName];\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var returnVal = kapsuleInstance[method].apply(kapsuleInstance, args);\n        return returnVal === kapsuleInstance ? this // chain based on the parent object, not the inner kapsule\n        : returnVal;\n      };\n    }\n  };\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  AmbientLight: AmbientLight,\n  DirectionalLight: DirectionalLight,\n  Vector3: Vector3\n};\nvar CAMERA_DISTANCE2NODES_FACTOR = 170; //\n// Expose config from forceGraph\n\nvar bindFG = linkKapsule('forceGraph', ThreeForceGraph);\nvar linkedFGProps = Object.assign.apply(Object, _toConsumableArray(['jsonUrl', 'graphData', 'numDimensions', 'dagMode', 'dagLevelDistance', 'dagNodeFilter', 'onDagError', 'nodeRelSize', 'nodeId', 'nodeVal', 'nodeResolution', 'nodeColor', 'nodeAutoColorBy', 'nodeOpacity', 'nodeVisibility', 'nodeThreeObject', 'nodeThreeObjectExtend', 'linkSource', 'linkTarget', 'linkVisibility', 'linkColor', 'linkAutoColorBy', 'linkOpacity', 'linkWidth', 'linkResolution', 'linkCurvature', 'linkCurveRotation', 'linkMaterial', 'linkThreeObject', 'linkThreeObjectExtend', 'linkPositionUpdate', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowRelPos', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleSpeed', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution', 'forceEngine', 'd3AlphaDecay', 'd3VelocityDecay', 'd3AlphaMin', 'ngraphPhysics', 'warmupTicks', 'cooldownTicks', 'cooldownTime', 'onEngineTick', 'onEngineStop'].map(function (p) {\n  return _defineProperty({}, p, bindFG.linkProp(p));\n})));\nvar linkedFGMethods = Object.assign.apply(Object, _toConsumableArray(['refresh', 'getGraphBbox', 'd3Force', 'd3ReheatSimulation', 'emitParticle'].map(function (p) {\n  return _defineProperty({}, p, bindFG.linkMethod(p));\n}))); // Expose config from renderObjs\n\nvar bindRenderObjs = linkKapsule('renderObjs', ThreeRenderObjects);\nvar linkedRenderObjsProps = Object.assign.apply(Object, _toConsumableArray(['width', 'height', 'backgroundColor', 'showNavInfo', 'enablePointerInteraction'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkProp(p));\n})));\nvar linkedRenderObjsMethods = Object.assign.apply(Object, _toConsumableArray(['cameraPosition', 'postProcessingComposer'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkMethod(p));\n})).concat([{\n  graph2ScreenCoords: bindRenderObjs.linkMethod('getScreenCoords')\n}])); //\n\nvar _3dForceGraph = Kapsule({\n  props: _objectSpread2(_objectSpread2({\n    nodeLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    linkLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    linkHoverPrecision: {\n      \"default\": 1,\n      onChange: function onChange(p, state) {\n        return state.renderObjs.lineHoverPrecision(p);\n      },\n      triggerUpdate: false\n    },\n    enableNavigationControls: {\n      \"default\": true,\n      onChange: function onChange(enable, state) {\n        var controls = state.renderObjs.controls();\n\n        if (controls) {\n          controls.enabled = enable;\n        }\n      },\n      triggerUpdate: false\n    },\n    enableNodeDrag: {\n      \"default\": true,\n      triggerUpdate: false\n    },\n    onNodeDrag: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeDragEnd: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLinkClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLinkRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLinkHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onBackgroundClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onBackgroundRightClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    }\n  }, linkedFGProps), linkedRenderObjsProps),\n  methods: _objectSpread2(_objectSpread2({\n    zoomToFit: function zoomToFit(state, transitionDuration, padding) {\n      var _state$forceGraph;\n\n      for (var _len = arguments.length, bboxArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        bboxArgs[_key - 3] = arguments[_key];\n      }\n\n      state.renderObjs.fitToBbox((_state$forceGraph = state.forceGraph).getGraphBbox.apply(_state$forceGraph, bboxArgs), transitionDuration, padding);\n      return this;\n    },\n    pauseAnimation: function pauseAnimation(state) {\n      if (state.animationFrameRequestId !== null) {\n        cancelAnimationFrame(state.animationFrameRequestId);\n        state.animationFrameRequestId = null;\n      }\n\n      return this;\n    },\n    resumeAnimation: function resumeAnimation(state) {\n      if (state.animationFrameRequestId === null) {\n        this._animationCycle();\n      }\n\n      return this;\n    },\n    _animationCycle: function _animationCycle(state) {\n      if (state.enablePointerInteraction) {\n        // reset canvas cursor (override dragControls cursor)\n        this.renderer().domElement.style.cursor = null;\n      } // Frame cycle\n\n\n      state.forceGraph.tickFrame();\n      state.renderObjs.tick();\n      state.animationFrameRequestId = requestAnimationFrame(this._animationCycle);\n    },\n    scene: function scene(state) {\n      return state.renderObjs.scene();\n    },\n    // Expose scene\n    camera: function camera(state) {\n      return state.renderObjs.camera();\n    },\n    // Expose camera\n    renderer: function renderer(state) {\n      return state.renderObjs.renderer();\n    },\n    // Expose renderer\n    controls: function controls(state) {\n      return state.renderObjs.controls();\n    },\n    // Expose controls\n    tbControls: function tbControls(state) {\n      return state.renderObjs.tbControls();\n    },\n    // To be deprecated\n    _destructor: function _destructor() {\n      this.pauseAnimation();\n      this.graphData({\n        nodes: [],\n        links: []\n      });\n    }\n  }, linkedFGMethods), linkedRenderObjsMethods),\n  stateInit: function stateInit(_ref5) {\n    var controlType = _ref5.controlType,\n        rendererConfig = _ref5.rendererConfig;\n    return {\n      forceGraph: new ThreeForceGraph(),\n      renderObjs: ThreeRenderObjects({\n        controlType: controlType,\n        rendererConfig: rendererConfig\n      })\n    };\n  },\n  init: function init(domNode, state) {\n    // Wipe DOM\n    domNode.innerHTML = ''; // Add relative container\n\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.style.position = 'relative'; // Add renderObjs\n\n    var roDomNode = document.createElement('div');\n    state.container.appendChild(roDomNode);\n    state.renderObjs(roDomNode);\n    var camera = state.renderObjs.camera();\n    var renderer = state.renderObjs.renderer();\n    var controls = state.renderObjs.controls();\n    controls.enabled = !!state.enableNavigationControls;\n    state.lastSetCameraZ = camera.position.z; // Add info space\n\n    var infoElem;\n    state.container.appendChild(infoElem = document.createElement('div'));\n    infoElem.className = 'graph-info-msg';\n    infoElem.textContent = ''; // config forcegraph\n\n    state.forceGraph.onLoading(function () {\n      infoElem.textContent = 'Loading...';\n    }).onFinishLoading(function () {\n      infoElem.textContent = '';\n    }).onUpdate(function () {\n      // sync graph data structures\n      state.graphData = state.forceGraph.graphData(); // re-aim camera, if still in default position (not user modified)\n\n      if (camera.position.x === 0 && camera.position.y === 0 && camera.position.z === state.lastSetCameraZ && state.graphData.nodes.length) {\n        camera.lookAt(state.forceGraph.position);\n        state.lastSetCameraZ = camera.position.z = Math.cbrt(state.graphData.nodes.length) * CAMERA_DISTANCE2NODES_FACTOR;\n      }\n    }).onFinishUpdate(function () {\n      // Setup node drag interaction\n      if (state._dragControls) {\n        var curNodeDrag = state.graphData.nodes.find(function (node) {\n          return node.__initialFixedPos && !node.__disposeControlsAfterDrag;\n        }); // detect if there's a node being dragged using the existing drag controls\n\n        if (curNodeDrag) {\n          curNodeDrag.__disposeControlsAfterDrag = true; // postpone previous controls disposal until drag ends\n        } else {\n          state._dragControls.dispose(); // cancel previous drag controls\n\n        }\n\n        state._dragControls = undefined;\n      }\n\n      if (state.enableNodeDrag && state.enablePointerInteraction && state.forceEngine === 'd3') {\n        // Can't access node positions programatically in ngraph\n        var dragControls = state._dragControls = new ThreeDragControls(state.graphData.nodes.map(function (node) {\n          return node.__threeObj;\n        }).filter(function (obj) {\n          return obj;\n        }), camera, renderer.domElement);\n        dragControls.addEventListener('dragstart', function (event) {\n          controls.enabled = false; // Disable controls while dragging\n\n          var node = event.object.__data;\n          !node.__initialFixedPos && (node.__initialFixedPos = {\n            fx: node.fx,\n            fy: node.fy,\n            fz: node.fz\n          });\n          !node.__initialPos && (node.__initialPos = {\n            x: node.x,\n            y: node.y,\n            z: node.z\n          }); // lock node\n\n          ['x', 'y', 'z'].forEach(function (c) {\n            return node[\"f\".concat(c)] = node[c];\n          }); // drag cursor\n\n          renderer.domElement.classList.add('grabbable');\n        });\n        dragControls.addEventListener('drag', function (event) {\n          var node = event.object.__data;\n          var newPos = event.object.position;\n          var translate = {\n            x: newPos.x - node.x,\n            y: newPos.y - node.y,\n            z: newPos.z - node.z\n          }; // Move fx/fy/fz (and x/y/z) of nodes based on object new position\n\n          ['x', 'y', 'z'].forEach(function (c) {\n            return node[\"f\".concat(c)] = node[c] = newPos[c];\n          });\n          state.forceGraph.d3AlphaTarget(0.3) // keep engine running at low intensity throughout drag\n          .resetCountdown(); // prevent freeze while dragging\n\n          node.__dragged = true;\n          state.onNodeDrag(node, translate);\n        });\n        dragControls.addEventListener('dragend', function (event) {\n          var node = event.object.__data; // dispose previous controls if needed\n\n          if (node.__disposeControlsAfterDrag) {\n            dragControls.dispose();\n            delete node.__disposeControlsAfterDrag;\n          }\n\n          var initFixedPos = node.__initialFixedPos;\n          var initPos = node.__initialPos;\n          var translate = {\n            x: initPos.x - node.x,\n            y: initPos.y - node.y,\n            z: initPos.z - node.z\n          };\n\n          if (initFixedPos) {\n            ['x', 'y', 'z'].forEach(function (c) {\n              var fc = \"f\".concat(c);\n\n              if (initFixedPos[fc] === undefined) {\n                delete node[fc];\n              }\n            });\n            delete node.__initialFixedPos;\n            delete node.__initialPos;\n\n            if (node.__dragged) {\n              delete node.__dragged;\n              state.onNodeDragEnd(node, translate);\n            }\n          }\n\n          state.forceGraph.d3AlphaTarget(0) // release engine low intensity\n          .resetCountdown(); // let the engine readjust after releasing fixed nodes\n\n          if (state.enableNavigationControls) {\n            controls.enabled = true; // Re-enable controls\n          } // clear cursor\n\n\n          renderer.domElement.classList.remove('grabbable');\n        });\n      }\n    }); // config renderObjs\n\n    var getGraphObj = function getGraphObj(object) {\n      var obj = object; // recurse up object chain until finding the graph object\n\n      while (obj && !obj.hasOwnProperty('__graphObjType')) {\n        obj = obj.parent;\n      }\n\n      return obj;\n    };\n\n    state.renderObjs.objects([// Populate scene\n    new three.AmbientLight(0xbbbbbb), new three.DirectionalLight(0xffffff, 0.6), state.forceGraph]).hoverOrderComparator(function (a, b) {\n      // Prioritize graph objects\n      var aObj = getGraphObj(a);\n      if (!aObj) return 1;\n      var bObj = getGraphObj(b);\n      if (!bObj) return -1; // Prioritize nodes over links\n\n      var isNode = function isNode(o) {\n        return o.__graphObjType === 'node';\n      };\n\n      return isNode(bObj) - isNode(aObj);\n    }).tooltipContent(function (obj) {\n      var graphObj = getGraphObj(obj);\n      return graphObj ? accessorFn(state[\"\".concat(graphObj.__graphObjType, \"Label\")])(graphObj.__data) || '' : '';\n    }).hoverDuringDrag(false).onHover(function (obj) {\n      // Update tooltip and trigger onHover events\n      var hoverObj = getGraphObj(obj);\n\n      if (hoverObj !== state.hoverObj) {\n        var prevObjType = state.hoverObj ? state.hoverObj.__graphObjType : null;\n        var prevObjData = state.hoverObj ? state.hoverObj.__data : null;\n        var objType = hoverObj ? hoverObj.__graphObjType : null;\n        var objData = hoverObj ? hoverObj.__data : null;\n\n        if (prevObjType && prevObjType !== objType) {\n          // Hover out\n          state[\"on\".concat(prevObjType === 'node' ? 'Node' : 'Link', \"Hover\")](null, prevObjData);\n        }\n\n        if (objType) {\n          // Hover in\n          state[\"on\".concat(objType === 'node' ? 'Node' : 'Link', \"Hover\")](objData, prevObjType === objType ? prevObjData : null);\n        }\n\n        state.hoverObj = hoverObj;\n      }\n    }).clickAfterDrag(false).onClick(function (obj, ev) {\n      var graphObj = getGraphObj(obj);\n\n      if (graphObj) {\n        state[\"on\".concat(graphObj.__graphObjType === 'node' ? 'Node' : 'Link', \"Click\")](graphObj.__data, ev);\n      } else {\n        state.onBackgroundClick(ev);\n      }\n    }).onRightClick(function (obj, ev) {\n      // Handle right-click events\n      var graphObj = getGraphObj(obj);\n\n      if (graphObj) {\n        state[\"on\".concat(graphObj.__graphObjType === 'node' ? 'Node' : 'Link', \"RightClick\")](graphObj.__data, ev);\n      } else {\n        state.onBackgroundRightClick(ev);\n      }\n    }); //\n    // Kick-off renderer\n\n    this._animationCycle();\n  }\n});\n\nexport default _3dForceGraph;","function none() {}\n\nexport default function (selector) {\n  return selector == null ? none : function () {\n    return this.querySelector(selector);\n  };\n}","function empty() {\n  return [];\n}\n\nexport default function (selector) {\n  return selector == null ? empty : function () {\n    return this.querySelectorAll(selector);\n  };\n}","export default function (update) {\n  return new Array(update.length);\n}","import sparse from \"./sparse\";\nimport { Selection } from \"./index\";\nexport default function () {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function appendChild(child) {\n    return this._parent.insertBefore(child, this._next);\n  },\n  insertBefore: function insertBefore(child, next) {\n    return this._parent.insertBefore(child, next);\n  },\n  querySelector: function querySelector(selector) {\n    return this._parent.querySelector(selector);\n  },\n  querySelectorAll: function querySelectorAll(selector) {\n    return this._parent.querySelectorAll(selector);\n  }\n};","import { Selection } from \"./index\";\nimport { EnterNode } from \"./enter\";\nimport constant from \"../constant\";\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length; // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  } // Put any non-null nodes that dont fit into exit.\n\n\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue; // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  } // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n\n\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  } // Add any remaining nodes that were not bound to data to exit.\n\n\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && nodeByKeyValue[keyValues[i]] === node) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function (value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function (d) {\n      data[++j] = d;\n    });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key); // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength) {\n          ;\n        }\n\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}","import { Selection } from \"./index\";\nexport default function (compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","export default function () {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}","export var xhtml = \"http://www.w3.org/1999/xhtml\";\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};","import namespaces from \"./namespaces\";\nexport default function (name) {\n  var prefix = name += \"\",\n      i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {\n    space: namespaces[prefix],\n    local: name\n  } : name;\n}","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function () {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function () {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function () {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function () {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function (name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null ? fullname.local ? attrRemoveNS : attrRemove : typeof value === \"function\" ? fullname.local ? attrFunctionNS : attrFunction : fullname.local ? attrConstantNS : attrConstant)(fullname, value));\n}","export default function (node) {\n  return node.ownerDocument && node.ownerDocument.defaultView || // node is a Node\n  node.document && node // node is a Window\n  || node.defaultView; // node is a Document\n}","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function () {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function () {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function () {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function (name, value, priority) {\n  return arguments.length > 1 ? this.each((value == null ? styleRemove : typeof value === \"function\" ? styleFunction : styleConstant)(name, value, priority == null ? \"\" : priority)) : styleValue(this.node(), name);\n}\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name) || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}","function propertyRemove(name) {\n  return function () {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function () {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];else this[name] = v;\n  };\n}\n\nexport default function (name, value) {\n  return arguments.length > 1 ? this.each((value == null ? propertyRemove : typeof value === \"function\" ? propertyFunction : propertyConstant)(name, value)) : this.node()[name];\n}","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function add(name) {\n    var i = this._names.indexOf(name);\n\n    if (i < 0) {\n      this._names.push(name);\n\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function remove(name) {\n    var i = this._names.indexOf(name);\n\n    if (i >= 0) {\n      this._names.splice(i, 1);\n\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function contains(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node),\n      i = -1,\n      n = names.length;\n\n  while (++i < n) {\n    list.add(names[i]);\n  }\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node),\n      i = -1,\n      n = names.length;\n\n  while (++i < n) {\n    list.remove(names[i]);\n  }\n}\n\nfunction classedTrue(names) {\n  return function () {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function () {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function () {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function (name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()),\n        i = -1,\n        n = names.length;\n\n    while (++i < n) {\n      if (!list.contains(names[i])) return false;\n    }\n\n    return true;\n  }\n\n  return this.each((typeof value === \"function\" ? classedFunction : value ? classedTrue : classedFalse)(names, value));\n}","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function () {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function (value) {\n  return arguments.length ? this.each(value == null ? textRemove : (typeof value === \"function\" ? textFunction : textConstant)(value)) : this.node().textContent;\n}","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function () {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function (value) {\n  return arguments.length ? this.each(value == null ? htmlRemove : (typeof value === \"function\" ? htmlFunction : htmlConstant)(value)) : this.node().innerHTML;\n}","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function () {\n  return this.each(raise);\n}","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function () {\n  return this.each(lower);\n}","import namespace from \"./namespace\";\nimport { xhtml } from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function () {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml ? document.createElement(name) : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function () {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function (name) {\n  var fullname = namespace(name);\n  return (fullname.local ? creatorFixed : creatorInherit)(fullname);\n}","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function (name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function () {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function () {\n  return this.each(remove);\n}","function selection_cloneShallow() {\n  var clone = this.cloneNode(false),\n      parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true),\n      parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function (deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}","var filterEvents = {};\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {\n      mouseenter: \"mouseover\",\n      mouseleave: \"mouseout\"\n    };\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function (event) {\n    var related = event.relatedTarget;\n\n    if (!related || related !== this && !(related.compareDocumentPosition(this) & 8)) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function (event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n\n    event = event1;\n\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function (t) {\n    var name = \"\",\n        i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {\n      type: t,\n      name: name\n    };\n  });\n}\n\nfunction onRemove(typename) {\n  return function () {\n    var on = this.__on;\n    if (!on) return;\n\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n\n    if (++i) on.length = i;else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function (d, i, group) {\n    var on = this.__on,\n        o,\n        listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {\n      type: typename.type,\n      name: typename.name,\n      value: value,\n      listener: listener,\n      capture: capture\n    };\n    if (!on) this.__on = [o];else on.push(o);\n  };\n}\n\nexport default function (typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"),\n      i,\n      n = typenames.length,\n      t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n\n  for (i = 0; i < n; ++i) {\n    this.each(on(typenames[i], value, capture));\n  }\n\n  return this;\n}\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function () {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function () {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function (type, params) {\n  return this.each((typeof params === \"function\" ? dispatchFunction : dispatchConstant)(type, params));\n}","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\nexport var root = [null];\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\nexport default selection;","import { Selection } from \"./index\";\nimport selector from \"../selector\";\nexport default function (select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}","import { Selection } from \"./index\";\nimport selectorAll from \"../selectorAll\";\nexport default function (select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}","import { Selection } from \"./index\";\nimport matcher from \"../matcher\";\nexport default function (match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}","export default function (selector) {\n  return function () {\n    return this.matches(selector);\n  };\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","import sparse from \"./sparse\";\nimport { Selection } from \"./index\";\nexport default function () {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}","export default function (onenter, onupdate, onexit) {\n  var enter = this.enter(),\n      update = this,\n      exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove();else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}","import { Selection } from \"./index\";\nexport default function (selection) {\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}","export default function () {\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}","export default function () {\n  var nodes = new Array(this.size()),\n      i = -1;\n  this.each(function () {\n    nodes[++i] = this;\n  });\n  return nodes;\n}","export default function () {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}","export default function () {\n  var size = 0;\n  this.each(function () {\n    ++size;\n  });\n  return size;\n}","export default function () {\n  return !this.node();\n}","export default function (callback) {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}","import creator from \"../creator\";\nexport default function (name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function () {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}","export default function (value) {\n  return arguments.length ? this.property(\"__data__\", value) : this.node().__data__;\n}","import { Selection, root } from \"./selection/index\";\nexport default function (selector) {\n  return typeof selector === \"string\" ? new Selection([[document.querySelector(selector)]], [document.documentElement]) : new Selection([[selector]], root);\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","export default function DragEvent(target, type, subject, id, active, x, y, dx, dy, dispatch) {\n  this.target = target;\n  this.type = type;\n  this.subject = subject;\n  this.identifier = id;\n  this.active = active;\n  this.x = x;\n  this.y = y;\n  this.dx = dx;\n  this.dy = dy;\n  this._ = dispatch;\n}\n\nDragEvent.prototype.on = function () {\n  var value = this._.on.apply(this._, arguments);\n\n  return value === this._ ? this : value;\n};","import { dispatch } from \"d3-dispatch\";\nimport { event, customEvent, select, mouse, touch } from \"d3-selection\";\nimport nodrag, { yesdrag } from \"./nodrag.js\";\nimport noevent, { nopropagation } from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\"; // Ignore right-click, since that should open the context menu.\n\nfunction defaultFilter() {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(d) {\n  return d == null ? {\n    x: event.x,\n    y: event.y\n  } : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || \"ontouchstart\" in this;\n}\n\nexport default function () {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection.on(\"mousedown.drag\", mousedowned).filter(touchable).on(\"touchstart.drag\", touchstarted).on(\"touchmove.drag\", touchmoved).on(\"touchend.drag touchcancel.drag\", touchended).style(\"touch-action\", \"none\").style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned() {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var gesture = beforestart(\"mouse\", container.apply(this, arguments), mouse, this, arguments);\n    if (!gesture) return;\n    select(event.view).on(\"mousemove.drag\", mousemoved, true).on(\"mouseup.drag\", mouseupped, true);\n    nodrag(event.view);\n    nopropagation();\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\");\n  }\n\n  function mousemoved() {\n    noevent();\n\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx,\n          dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n\n    gestures.mouse(\"drag\");\n  }\n\n  function mouseupped() {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent();\n    gestures.mouse(\"end\");\n  }\n\n  function touchstarted() {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.changedTouches,\n        c = container.apply(this, arguments),\n        n = touches.length,\n        i,\n        gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(touches[i].identifier, c, touch, this, arguments)) {\n        nopropagation();\n        gesture(\"start\");\n      }\n    }\n  }\n\n  function touchmoved() {\n    var touches = event.changedTouches,\n        n = touches.length,\n        i,\n        gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent();\n        gesture(\"drag\");\n      }\n    }\n  }\n\n  function touchended() {\n    var touches = event.changedTouches,\n        n = touches.length,\n        i,\n        gesture;\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function () {\n      touchending = null;\n    }, 500); // Ghost clicks are delayed!\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation();\n        gesture(\"end\");\n      }\n    }\n  }\n\n  function beforestart(id, container, point, that, args) {\n    var p = point(container, id),\n        s,\n        dx,\n        dy,\n        sublisteners = listeners.copy();\n    if (!customEvent(new DragEvent(drag, \"beforestart\", s, id, active, p[0], p[1], 0, 0, sublisteners), function () {\n      if ((event.subject = s = subject.apply(that, args)) == null) return false;\n      dx = s.x - p[0] || 0;\n      dy = s.y - p[1] || 0;\n      return true;\n    })) return;\n    return function gesture(type) {\n      var p0 = p,\n          n;\n\n      switch (type) {\n        case \"start\":\n          gestures[id] = gesture, n = active++;\n          break;\n\n        case \"end\":\n          delete gestures[id], --active;\n        // nobreak\n\n        case \"drag\":\n          p = point(container, id), n = active;\n          break;\n      }\n\n      customEvent(new DragEvent(drag, type, s, id, n, p[0] + dx, p[1] + dy, p[0] - p0[0], p[1] - p0[1], sublisteners), sublisteners.apply, sublisteners, [type, that, args]);\n    };\n  }\n\n  drag.filter = function (_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function (_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function (_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function (_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function () {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function (_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function min(values, valueof) {\n  var min;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (min > _value || min === undefined && _value >= _value)) {\n          min = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return min;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function max(values, valueof) {\n  var max;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (max < _value || max === undefined && _value >= _value)) {\n          max = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return max;\n}","import tinyColor from 'tinycolor2';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar ENTROPY = 123; // Raise numbers to prevent collisions in lower indexes\n\nvar int2HexColor = function int2HexColor(num) {\n  return \"#\".concat(Math.min(num, Math.pow(2, 24)).toString(16).padStart(6, '0'));\n};\n\nvar rgb2Int = function rgb2Int(r, g, b) {\n  return (r << 16) + (g << 8) + b;\n};\n\nvar colorStr2Int = function colorStr2Int(str) {\n  var _tinyColor$toRgb = tinyColor(str).toRgb(),\n      r = _tinyColor$toRgb.r,\n      g = _tinyColor$toRgb.g,\n      b = _tinyColor$toRgb.b;\n\n  return rgb2Int(r, g, b);\n};\n\nvar checksum = function checksum(n, csBits) {\n  return n * ENTROPY % Math.pow(2, csBits);\n};\n\nvar _default = /*#__PURE__*/function () {\n  function _default() {\n    var csBits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 6;\n\n    _classCallCheck(this, _default);\n\n    this.csBits = csBits; // How many bits to reserve for checksum. Will eat away into the usable size of the registry.\n\n    this.registry = ['__reserved for background__']; // indexed objects for rgb lookup;\n  }\n\n  _createClass(_default, [{\n    key: \"register\",\n    value: function register(obj) {\n      if (this.registry.length >= Math.pow(2, 24 - this.csBits)) {\n        // color has 24 bits (-checksum)\n        return null; // Registry is full\n      }\n\n      var idx = this.registry.length;\n      var cs = checksum(idx, this.csBits);\n      var color = int2HexColor(idx + (cs << 24 - this.csBits));\n      this.registry.push(obj);\n      return color;\n    }\n  }, {\n    key: \"lookup\",\n    value: function lookup(color) {\n      var n = typeof color === 'string' ? colorStr2Int(color) : rgb2Int.apply(void 0, _toConsumableArray(color));\n      if (!n) return null; // 0 index is reserved for background\n\n      var idx = n & Math.pow(2, 24 - this.csBits) - 1; // registry index\n\n      var cs = n >> 24 - this.csBits & Math.pow(2, this.csBits) - 1; // extract bits reserved for checksum\n\n      if (checksum(idx, this.csBits) !== cs || idx >= this.registry.length) return null; // failed checksum or registry out of bounds\n\n      return this.registry[idx];\n    }\n  }]);\n\n  return _default;\n}();\n\nexport default _default;","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0:\n      break;\n\n    case 1:\n      this.range(domain);\n      break;\n\n    default:\n      this.range(range).domain(domain);\n      break;\n  }\n\n  return this;\n}\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0:\n      break;\n\n    case 1:\n      {\n        if (typeof domain === \"function\") this.interpolator(domain);else this.range(domain);\n        break;\n      }\n\n    default:\n      {\n        this.domain(domain);\n        if (typeof interpolator === \"function\") this.interpolator(interpolator);else this.range(interpolator);\n        break;\n      }\n  }\n\n  return this;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { initRange } from \"./init.js\";\nexport var implicit = Symbol(\"implicit\");\nexport default function ordinal() {\n  var index = new Map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\",\n        i = index.get(key);\n\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function (_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new Map();\n\n    var _iterator = _createForOfIteratorHelper(_),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n        var key = value + \"\";\n        if (index.has(key)) continue;\n        index.set(key, domain.push(value));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return scale;\n  };\n\n  scale.range = function (_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function (_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function () {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n  return scale;\n}","import { select, event } from 'd3-selection';\nimport { zoomTransform, zoom } from 'd3-zoom';\nimport { drag } from 'd3-drag';\nimport { min, max } from 'd3-array';\nimport throttle from 'lodash.throttle';\nimport TWEEN from '@tweenjs/tween.js';\nimport Kapsule from 'kapsule';\nimport accessorFn from 'accessor-fn';\nimport ColorTracker from 'canvas-color-tracker';\nimport { forceSimulation, forceLink, forceManyBody, forceCenter, forceRadial } from 'd3-force-3d';\nimport Bezier from 'bezier-js';\nimport indexBy from 'index-array-by';\nimport { scaleOrdinal } from 'd3-scale';\nimport { schemePaired } from 'd3-scale-chromatic';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"canvas {\\n  user-select: none;\\n  outline: none;\\n  -webkit-tap-highlight-color: transparent;\\n}\\n\\n.graph-tooltip {\\n  position: absolute;\\n  transform: translate(-50%, 25px);\\n  font-family: sans-serif;\\n  font-size: 16px;\\n  padding: 4px;\\n  border-radius: 3px;\\n  color: #eee;\\n  background: rgba(0,0,0,0.65);\\n  visibility: hidden; /* by default */\\n}\\n\\n.grabbable {\\n  cursor: move;\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n\\n.grabbable:active {\\n  cursor: grabbing;\\n  cursor: -moz-grabbing;\\n  cursor: -webkit-grabbing;\\n}\\n\";\nstyleInject(css_248z);\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar autoColorScale = scaleOrdinal(schemePaired); // Autoset attribute colorField by colorByAccessor property\n// If an object has already a color, don't set it\n// Objects can be nodes or links\n\nfunction autoColorObjects(objects, colorByAccessor, colorField) {\n  if (!colorByAccessor || typeof colorField !== 'string') return;\n  objects.filter(function (obj) {\n    return !obj[colorField];\n  }).forEach(function (obj) {\n    obj[colorField] = autoColorScale(colorByAccessor(obj));\n  });\n}\n\nfunction getDagDepths(_ref, idAccessor) {\n  var nodes = _ref.nodes,\n      links = _ref.links;\n\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref2$nodeFilter = _ref2.nodeFilter,\n      nodeFilter = _ref2$nodeFilter === void 0 ? function () {\n    return true;\n  } : _ref2$nodeFilter,\n      _ref2$onLoopError = _ref2.onLoopError,\n      onLoopError = _ref2$onLoopError === void 0 ? function (loopIds) {\n    throw \"Invalid DAG structure! Found cycle in node path: \".concat(loopIds.join(' -> '), \".\");\n  } : _ref2$onLoopError; // linked graph\n\n\n  var graph = {};\n  nodes.forEach(function (node) {\n    return graph[idAccessor(node)] = {\n      data: node,\n      out: [],\n      depth: -1,\n      skip: !nodeFilter(node)\n    };\n  });\n  links.forEach(function (_ref3) {\n    var source = _ref3.source,\n        target = _ref3.target;\n    var sourceId = getNodeId(source);\n    var targetId = getNodeId(target);\n    if (!graph.hasOwnProperty(sourceId)) throw \"Missing source node with id: \".concat(sourceId);\n    if (!graph.hasOwnProperty(targetId)) throw \"Missing target node with id: \".concat(targetId);\n    var sourceNode = graph[sourceId];\n    var targetNode = graph[targetId];\n    sourceNode.out.push(targetNode);\n\n    function getNodeId(node) {\n      return _typeof(node) === 'object' ? idAccessor(node) : node;\n    }\n  });\n  var foundLoops = [];\n  traverse(Object.values(graph));\n  var nodeDepths = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(graph).filter(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        node = _ref5[1];\n\n    return !node.skip;\n  }).map(function (_ref6) {\n    var _ref7 = _slicedToArray(_ref6, 2),\n        id = _ref7[0],\n        node = _ref7[1];\n\n    return _defineProperty({}, id, node.depth);\n  }))));\n  return nodeDepths;\n\n  function traverse(nodes) {\n    var nodeStack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var currentDepth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      var node = nodes[i];\n\n      if (nodeStack.indexOf(node) !== -1) {\n        var _ret = function () {\n          var loop = [].concat(_toConsumableArray(nodeStack.slice(nodeStack.indexOf(node))), [node]).map(function (d) {\n            return idAccessor(d.data);\n          });\n\n          if (!foundLoops.some(function (foundLoop) {\n            return foundLoop.length === loop.length && foundLoop.every(function (id, idx) {\n              return id === loop[idx];\n            });\n          })) {\n            foundLoops.push(loop);\n            onLoopError(loop);\n          }\n\n          return \"continue\";\n        }();\n\n        if (_ret === \"continue\") continue;\n      }\n\n      if (currentDepth > node.depth) {\n        // Don't unnecessarily revisit chunks of the graph\n        node.depth = currentDepth;\n        traverse(node.out, [].concat(_toConsumableArray(nodeStack), [node]), currentDepth + (node.skip ? 0 : 1));\n      }\n    }\n  }\n}\n\nvar DAG_LEVEL_NODE_RATIO = 2;\nvar CanvasForceGraph = Kapsule({\n  props: {\n    graphData: {\n      \"default\": {\n        nodes: [],\n        links: []\n      },\n      onChange: function onChange(_, state) {\n        state.engineRunning = false;\n      } // Pause simulation\n\n    },\n    dagMode: {\n      onChange: function onChange(dagMode, state) {\n        // td, bu, lr, rl, radialin, radialout\n        !dagMode && (state.graphData.nodes || []).forEach(function (n) {\n          return n.fx = n.fy = undefined;\n        }); // unfix nodes when disabling dag mode\n      }\n    },\n    dagLevelDistance: {},\n    dagNodeFilter: {\n      \"default\": function _default(node) {\n        return true;\n      }\n    },\n    onDagError: {\n      triggerUpdate: false\n    },\n    nodeRelSize: {\n      \"default\": 4,\n      triggerUpdate: false\n    },\n    // area per val unit\n    nodeId: {\n      \"default\": 'id'\n    },\n    nodeVal: {\n      \"default\": 'val',\n      triggerUpdate: false\n    },\n    nodeColor: {\n      \"default\": 'color',\n      triggerUpdate: false\n    },\n    nodeAutoColorBy: {},\n    nodeCanvasObject: {\n      triggerUpdate: false\n    },\n    nodeCanvasObjectMode: {\n      \"default\": function _default() {\n        return 'replace';\n      },\n      triggerUpdate: false\n    },\n    nodeVisibility: {\n      \"default\": true,\n      triggerUpdate: false\n    },\n    linkSource: {\n      \"default\": 'source'\n    },\n    linkTarget: {\n      \"default\": 'target'\n    },\n    linkVisibility: {\n      \"default\": true,\n      triggerUpdate: false\n    },\n    linkColor: {\n      \"default\": 'color',\n      triggerUpdate: false\n    },\n    linkAutoColorBy: {},\n    linkLineDash: {\n      triggerUpdate: false\n    },\n    linkWidth: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    linkCurvature: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    linkCanvasObject: {\n      triggerUpdate: false\n    },\n    linkCanvasObjectMode: {\n      \"default\": function _default() {\n        return 'replace';\n      },\n      triggerUpdate: false\n    },\n    linkDirectionalArrowLength: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    linkDirectionalArrowColor: {\n      triggerUpdate: false\n    },\n    linkDirectionalArrowRelPos: {\n      \"default\": 0.5,\n      triggerUpdate: false\n    },\n    // value between 0<>1 indicating the relative pos along the (exposed) line\n    linkDirectionalParticles: {\n      \"default\": 0\n    },\n    // animate photons travelling in the link direction\n    linkDirectionalParticleSpeed: {\n      \"default\": 0.01,\n      triggerUpdate: false\n    },\n    // in link length ratio per frame\n    linkDirectionalParticleWidth: {\n      \"default\": 4,\n      triggerUpdate: false\n    },\n    linkDirectionalParticleColor: {\n      triggerUpdate: false\n    },\n    globalScale: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    d3AlphaMin: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    d3AlphaDecay: {\n      \"default\": 0.0228,\n      triggerUpdate: false,\n      onChange: function onChange(alphaDecay, state) {\n        state.forceLayout.alphaDecay(alphaDecay);\n      }\n    },\n    d3AlphaTarget: {\n      \"default\": 0,\n      triggerUpdate: false,\n      onChange: function onChange(alphaTarget, state) {\n        state.forceLayout.alphaTarget(alphaTarget);\n      }\n    },\n    d3VelocityDecay: {\n      \"default\": 0.4,\n      triggerUpdate: false,\n      onChange: function onChange(velocityDecay, state) {\n        state.forceLayout.velocityDecay(velocityDecay);\n      }\n    },\n    warmupTicks: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // how many times to tick the force engine at init before starting to render\n    cooldownTicks: {\n      \"default\": Infinity,\n      triggerUpdate: false\n    },\n    cooldownTime: {\n      \"default\": 15000,\n      triggerUpdate: false\n    },\n    // ms\n    onUpdate: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onFinishUpdate: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onEngineTick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onEngineStop: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    isShadow: {\n      \"default\": false,\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    // Expose d3 forces for external manipulation\n    d3Force: function d3Force(state, forceName, forceFn) {\n      if (forceFn === undefined) {\n        return state.forceLayout.force(forceName); // Force getter\n      }\n\n      state.forceLayout.force(forceName, forceFn); // Force setter\n\n      return this;\n    },\n    d3ReheatSimulation: function d3ReheatSimulation(state) {\n      state.forceLayout.alpha(1);\n      this.resetCountdown();\n      return this;\n    },\n    // reset cooldown state\n    resetCountdown: function resetCountdown(state) {\n      state.cntTicks = 0;\n      state.startTickTime = new Date();\n      state.engineRunning = true;\n      return this;\n    },\n    tickFrame: function tickFrame(state) {\n      !state.isShadow && layoutTick();\n      paintLinks();\n      !state.isShadow && paintArrows();\n      !state.isShadow && paintPhotons();\n      paintNodes();\n      return this; //\n\n      function layoutTick() {\n        if (state.engineRunning) {\n          if (++state.cntTicks > state.cooldownTicks || new Date() - state.startTickTime > state.cooldownTime || state.d3AlphaMin > 0 && state.forceLayout.alpha() < state.d3AlphaMin) {\n            state.engineRunning = false; // Stop ticking graph\n\n            state.onEngineStop();\n          } else {\n            state.forceLayout.tick(); // Tick it\n\n            state.onEngineTick();\n          }\n        }\n      }\n\n      function paintNodes() {\n        var getVisibility = accessorFn(state.nodeVisibility);\n        var getVal = accessorFn(state.nodeVal);\n        var getColor = accessorFn(state.nodeColor);\n        var getNodeCanvasObjectMode = accessorFn(state.nodeCanvasObjectMode);\n        var ctx = state.ctx; // Draw wider nodes by 1px on shadow canvas for more precise hovering (due to boundary anti-aliasing)\n\n        var padAmount = state.isShadow / state.globalScale;\n        var visibleNodes = state.graphData.nodes.filter(getVisibility);\n        ctx.save();\n        visibleNodes.forEach(function (node) {\n          var nodeCanvasObjectMode = getNodeCanvasObjectMode(node);\n\n          if (state.nodeCanvasObject && (nodeCanvasObjectMode === 'before' || nodeCanvasObjectMode === 'replace')) {\n            // Custom node before/replace paint\n            state.nodeCanvasObject(node, ctx, state.globalScale, state.isShadow);\n\n            if (nodeCanvasObjectMode === 'replace') {\n              ctx.restore();\n              return;\n            }\n          } // Draw wider nodes by 1px on shadow canvas for more precise hovering (due to boundary anti-aliasing)\n\n\n          var r = Math.sqrt(Math.max(0, getVal(node) || 1)) * state.nodeRelSize + padAmount;\n          ctx.beginPath();\n          ctx.arc(node.x, node.y, r, 0, 2 * Math.PI, false);\n          ctx.fillStyle = getColor(node) || 'rgba(31, 120, 180, 0.92)';\n          ctx.fill();\n\n          if (state.nodeCanvasObject && nodeCanvasObjectMode === 'after') {\n            // Custom node after paint\n            state.nodeCanvasObject(node, state.ctx, state.globalScale);\n          }\n        });\n        ctx.restore();\n      }\n\n      function paintLinks() {\n        var getVisibility = accessorFn(state.linkVisibility);\n        var getColor = accessorFn(state.linkColor);\n        var getWidth = accessorFn(state.linkWidth);\n        var getLineDash = accessorFn(state.linkLineDash);\n        var getCurvature = accessorFn(state.linkCurvature);\n        var getLinkCanvasObjectMode = accessorFn(state.linkCanvasObjectMode);\n        var ctx = state.ctx; // Draw wider lines by 2px on shadow canvas for more precise hovering (due to boundary anti-aliasing)\n\n        var padAmount = state.isShadow * 2;\n        var visibleLinks = state.graphData.links.filter(getVisibility);\n        visibleLinks.forEach(calcLinkControlPoints); // calculate curvature control points for all visible links\n\n        var beforeCustomLinks = [],\n            afterCustomLinks = [],\n            defaultPaintLinks = visibleLinks;\n\n        if (state.linkCanvasObject) {\n          var replaceCustomLinks = [],\n              otherCustomLinks = [];\n          visibleLinks.forEach(function (d) {\n            return ({\n              before: beforeCustomLinks,\n              after: afterCustomLinks,\n              replace: replaceCustomLinks\n            }[getLinkCanvasObjectMode(d)] || otherCustomLinks).push(d);\n          });\n          defaultPaintLinks = [].concat(_toConsumableArray(beforeCustomLinks), afterCustomLinks, otherCustomLinks);\n          beforeCustomLinks = beforeCustomLinks.concat(replaceCustomLinks);\n        } // Custom link before paints\n\n\n        ctx.save();\n        beforeCustomLinks.forEach(function (link) {\n          return state.linkCanvasObject(link, ctx, state.globalScale);\n        });\n        ctx.restore(); // Bundle strokes per unique color/width/dash for performance optimization\n\n        var linksPerColor = indexBy(defaultPaintLinks, [getColor, getWidth, getLineDash]);\n        ctx.save();\n        Object.entries(linksPerColor).forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              color = _ref2[0],\n              linksPerWidth = _ref2[1];\n\n          var lineColor = !color || color === 'undefined' ? 'rgba(0,0,0,0.15)' : color;\n          Object.entries(linksPerWidth).forEach(function (_ref3) {\n            var _ref4 = _slicedToArray(_ref3, 2),\n                width = _ref4[0],\n                linesPerLineDash = _ref4[1];\n\n            var lineWidth = (width || 1) / state.globalScale + padAmount;\n            Object.entries(linesPerLineDash).forEach(function (_ref5) {\n              var _ref6 = _slicedToArray(_ref5, 2),\n                  dashSegments = _ref6[0],\n                  links = _ref6[1];\n\n              var lineDashSegments = getLineDash(links[0]);\n              ctx.beginPath();\n              links.forEach(function (link) {\n                var start = link.source;\n                var end = link.target;\n                if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n                ctx.moveTo(start.x, start.y);\n                var controlPoints = link.__controlPoints;\n\n                if (!controlPoints) {\n                  // Straight line\n                  ctx.lineTo(end.x, end.y);\n                } else {\n                  // Use quadratic curves for regular lines and bezier for loops\n                  ctx[controlPoints.length === 2 ? 'quadraticCurveTo' : 'bezierCurveTo'].apply(ctx, _toConsumableArray(controlPoints).concat([end.x, end.y]));\n                }\n              });\n              ctx.strokeStyle = lineColor;\n              ctx.lineWidth = lineWidth;\n              ctx.setLineDash(lineDashSegments || []);\n              ctx.stroke();\n            });\n          });\n        });\n        ctx.restore(); // Custom link after paints\n\n        ctx.save();\n        afterCustomLinks.forEach(function (link) {\n          return state.linkCanvasObject(link, ctx, state.globalScale);\n        });\n        ctx.restore(); //\n\n        function calcLinkControlPoints(link) {\n          var curvature = getCurvature(link);\n\n          if (!curvature) {\n            // straight line\n            link.__controlPoints = null;\n            return;\n          }\n\n          var start = link.source;\n          var end = link.target;\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var l = Math.sqrt(Math.pow(end.x - start.x, 2) + Math.pow(end.y - start.y, 2)); // line length\n\n          if (l > 0) {\n            var a = Math.atan2(end.y - start.y, end.x - start.x); // line angle\n\n            var d = l * curvature; // control point distance\n\n            var cp = {\n              // control point\n              x: (start.x + end.x) / 2 + d * Math.cos(a - Math.PI / 2),\n              y: (start.y + end.y) / 2 + d * Math.sin(a - Math.PI / 2)\n            };\n            link.__controlPoints = [cp.x, cp.y];\n          } else {\n            // Same point, draw a loop\n            var _d = curvature * 70;\n\n            link.__controlPoints = [end.x, end.y - _d, end.x + _d, end.y];\n          }\n        }\n      }\n\n      function paintArrows() {\n        var ARROW_WH_RATIO = 1.6;\n        var ARROW_VLEN_RATIO = 0.2;\n        var getLength = accessorFn(state.linkDirectionalArrowLength);\n        var getRelPos = accessorFn(state.linkDirectionalArrowRelPos);\n        var getVisibility = accessorFn(state.linkVisibility);\n        var getColor = accessorFn(state.linkDirectionalArrowColor || state.linkColor);\n        var getNodeVal = accessorFn(state.nodeVal);\n        var ctx = state.ctx;\n        ctx.save();\n        state.graphData.links.filter(getVisibility).forEach(function (link) {\n          var arrowLength = getLength(link);\n          if (!arrowLength || arrowLength < 0) return;\n          var start = link.source;\n          var end = link.target;\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var startR = Math.sqrt(Math.max(0, getNodeVal(start) || 1)) * state.nodeRelSize;\n          var endR = Math.sqrt(Math.max(0, getNodeVal(end) || 1)) * state.nodeRelSize;\n          var arrowRelPos = Math.min(1, Math.max(0, getRelPos(link)));\n          var arrowColor = getColor(link) || 'rgba(0,0,0,0.28)';\n          var arrowHalfWidth = arrowLength / ARROW_WH_RATIO / 2; // Construct bezier for curved lines\n\n          var bzLine = link.__controlPoints && _construct(Bezier, [start.x, start.y].concat(_toConsumableArray(link.__controlPoints), [end.x, end.y]));\n\n          var getCoordsAlongLine = bzLine ? function (t) {\n            return bzLine.get(t);\n          } // get position along bezier line\n          : function (t) {\n            return {\n              // straight line: interpolate linearly\n              x: start.x + (end.x - start.x) * t || 0,\n              y: start.y + (end.y - start.y) * t || 0\n            };\n          };\n          var lineLen = bzLine ? bzLine.length() : Math.sqrt(Math.pow(end.x - start.x, 2) + Math.pow(end.y - start.y, 2));\n          var posAlongLine = startR + arrowLength + (lineLen - startR - endR - arrowLength) * arrowRelPos;\n          var arrowHead = getCoordsAlongLine(posAlongLine / lineLen);\n          var arrowTail = getCoordsAlongLine((posAlongLine - arrowLength) / lineLen);\n          var arrowTailVertex = getCoordsAlongLine((posAlongLine - arrowLength * (1 - ARROW_VLEN_RATIO)) / lineLen);\n          var arrowTailAngle = Math.atan2(arrowHead.y - arrowTail.y, arrowHead.x - arrowTail.x) - Math.PI / 2;\n          ctx.beginPath();\n          ctx.moveTo(arrowHead.x, arrowHead.y);\n          ctx.lineTo(arrowTail.x + arrowHalfWidth * Math.cos(arrowTailAngle), arrowTail.y + arrowHalfWidth * Math.sin(arrowTailAngle));\n          ctx.lineTo(arrowTailVertex.x, arrowTailVertex.y);\n          ctx.lineTo(arrowTail.x - arrowHalfWidth * Math.cos(arrowTailAngle), arrowTail.y - arrowHalfWidth * Math.sin(arrowTailAngle));\n          ctx.fillStyle = arrowColor;\n          ctx.fill();\n        });\n        ctx.restore();\n      }\n\n      function paintPhotons() {\n        var getNumPhotons = accessorFn(state.linkDirectionalParticles);\n        var getSpeed = accessorFn(state.linkDirectionalParticleSpeed);\n        var getDiameter = accessorFn(state.linkDirectionalParticleWidth);\n        var getVisibility = accessorFn(state.linkVisibility);\n        var getColor = accessorFn(state.linkDirectionalParticleColor || state.linkColor);\n        var ctx = state.ctx;\n        ctx.save();\n        state.graphData.links.filter(getVisibility).forEach(function (link) {\n          var numCyclePhotons = getNumPhotons(link);\n          if (!link.hasOwnProperty('__photons') || !link.__photons.length) return;\n          var start = link.source;\n          var end = link.target;\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var particleSpeed = getSpeed(link);\n          var photons = link.__photons || [];\n          var photonR = Math.max(0, getDiameter(link) / 2) / Math.sqrt(state.globalScale);\n          var photonColor = getColor(link) || 'rgba(0,0,0,0.28)';\n          ctx.fillStyle = photonColor; // Construct bezier for curved lines\n\n          var bzLine = link.__controlPoints ? _construct(Bezier, [start.x, start.y].concat(_toConsumableArray(link.__controlPoints), [end.x, end.y])) : null;\n          var cyclePhotonIdx = 0;\n          var needsCleanup = false; // whether some photons need to be removed from list\n\n          photons.forEach(function (photon) {\n            var singleHop = !!photon.__singleHop;\n\n            if (!photon.hasOwnProperty('__progressRatio')) {\n              photon.__progressRatio = singleHop ? 0 : cyclePhotonIdx / numCyclePhotons;\n            }\n\n            !singleHop && cyclePhotonIdx++; // increase regular photon index\n\n            photon.__progressRatio += particleSpeed;\n\n            if (photon.__progressRatio >= 1) {\n              if (!singleHop) {\n                photon.__progressRatio = photon.__progressRatio % 1;\n              } else {\n                needsCleanup = true;\n                return;\n              }\n            }\n\n            var photonPosRatio = photon.__progressRatio;\n            var coords = bzLine ? bzLine.get(photonPosRatio) // get position along bezier line\n            : {\n              // straight line: interpolate linearly\n              x: start.x + (end.x - start.x) * photonPosRatio || 0,\n              y: start.y + (end.y - start.y) * photonPosRatio || 0\n            };\n            ctx.beginPath();\n            ctx.arc(coords.x, coords.y, photonR, 0, 2 * Math.PI, false);\n            ctx.fill();\n          });\n\n          if (needsCleanup) {\n            // remove expired single hop photons\n            link.__photons = link.__photons.filter(function (photon) {\n              return !photon.__singleHop || photon.__progressRatio <= 1;\n            });\n          }\n        });\n        ctx.restore();\n      }\n    },\n    emitParticle: function emitParticle(state, link) {\n      if (link) {\n        !link.__photons && (link.__photons = []);\n\n        link.__photons.push({\n          __singleHop: true\n        }); // add a single hop particle\n\n      }\n\n      return this;\n    }\n  },\n  stateInit: function stateInit() {\n    return {\n      forceLayout: forceSimulation().force('link', forceLink()).force('charge', forceManyBody()).force('center', forceCenter()).force('dagRadial', null).stop(),\n      engineRunning: false\n    };\n  },\n  init: function init(canvasCtx, state) {\n    // Main canvas object to manipulate\n    state.ctx = canvasCtx;\n  },\n  update: function update(state) {\n    state.engineRunning = false; // Pause simulation\n\n    state.onUpdate();\n\n    if (state.nodeAutoColorBy !== null) {\n      // Auto add color to uncolored nodes\n      autoColorObjects(state.graphData.nodes, accessorFn(state.nodeAutoColorBy), state.nodeColor);\n    }\n\n    if (state.linkAutoColorBy !== null) {\n      // Auto add color to uncolored links\n      autoColorObjects(state.graphData.links, accessorFn(state.linkAutoColorBy), state.linkColor);\n    } // parse links\n\n\n    state.graphData.links.forEach(function (link) {\n      link.source = link[state.linkSource];\n      link.target = link[state.linkTarget];\n    });\n\n    if (!state.isShadow) {\n      // Add photon particles\n      var linkParticlesAccessor = accessorFn(state.linkDirectionalParticles);\n      state.graphData.links.forEach(function (link) {\n        var numPhotons = Math.round(Math.abs(linkParticlesAccessor(link)));\n\n        if (numPhotons) {\n          link.__photons = _toConsumableArray(Array(numPhotons)).map(function () {\n            return {};\n          });\n        } else {\n          delete link.__photons;\n        }\n      });\n    } // Feed data to force-directed layout\n\n\n    state.forceLayout.stop().alpha(1) // re-heat the simulation\n    .nodes(state.graphData.nodes); // add links (if link force is still active)\n\n    var linkForce = state.forceLayout.force('link');\n\n    if (linkForce) {\n      linkForce.id(function (d) {\n        return d[state.nodeId];\n      }).links(state.graphData.links);\n    } // setup dag force constraints\n\n\n    var nodeDepths = state.dagMode && getDagDepths(state.graphData, function (node) {\n      return node[state.nodeId];\n    }, {\n      nodeFilter: state.dagNodeFilter,\n      onLoopError: state.onDagError || undefined\n    });\n    var maxDepth = Math.max.apply(Math, _toConsumableArray(Object.values(nodeDepths || [])));\n    var dagLevelDistance = state.dagLevelDistance || state.graphData.nodes.length / (maxDepth || 1) * DAG_LEVEL_NODE_RATIO * (['radialin', 'radialout'].indexOf(state.dagMode) !== -1 ? 0.7 : 1); // Fix nodes to x,y for dag mode\n\n    if (state.dagMode) {\n      var getFFn = function getFFn(fix, invert) {\n        return function (node) {\n          return !fix ? undefined : (nodeDepths[node[state.nodeId]] - maxDepth / 2) * dagLevelDistance * (invert ? -1 : 1);\n        };\n      };\n\n      var fxFn = getFFn(['lr', 'rl'].indexOf(state.dagMode) !== -1, state.dagMode === 'rl');\n      var fyFn = getFFn(['td', 'bu'].indexOf(state.dagMode) !== -1, state.dagMode === 'bu');\n      state.graphData.nodes.filter(state.dagNodeFilter).forEach(function (node) {\n        node.fx = fxFn(node);\n        node.fy = fyFn(node);\n      });\n    } // Use radial force for radial dags\n\n\n    state.forceLayout.force('dagRadial', ['radialin', 'radialout'].indexOf(state.dagMode) !== -1 ? forceRadial(function (node) {\n      var nodeDepth = nodeDepths[node[state.nodeId]] || -1;\n      return (state.dagMode === 'radialin' ? maxDepth - nodeDepth : nodeDepth) * dagLevelDistance;\n    }).strength(function (node) {\n      return state.dagNodeFilter(node) ? 1 : 0;\n    }) : null);\n\n    for (var i = 0; i < state.warmupTicks && !(state.d3AlphaMin > 0 && state.forceLayout.alpha() < state.d3AlphaMin); i++) {\n      state.forceLayout.tick();\n    } // Initial ticks before starting to render\n\n\n    this.resetCountdown();\n    state.onFinishUpdate();\n  }\n});\n\nfunction linkKapsule(kapsulePropNames, kapsuleType) {\n  var propNames = kapsulePropNames instanceof Array ? kapsulePropNames : [kapsulePropNames];\n  var dummyK = new kapsuleType(); // To extract defaults\n\n  return {\n    linkProp: function linkProp(prop) {\n      // link property config\n      return {\n        \"default\": dummyK[prop](),\n        onChange: function onChange(v, state) {\n          propNames.forEach(function (propName) {\n            return state[propName][prop](v);\n          });\n        },\n        triggerUpdate: false\n      };\n    },\n    linkMethod: function linkMethod(method) {\n      // link method pass-through\n      return function (state) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var returnVals = [];\n        propNames.forEach(function (propName) {\n          var kapsuleInstance = state[propName];\n          var returnVal = kapsuleInstance[method].apply(kapsuleInstance, args);\n\n          if (returnVal !== kapsuleInstance) {\n            returnVals.push(returnVal);\n          }\n        });\n        return returnVals.length ? returnVals[0] : this; // chain based on the parent object, not the inner kapsule\n      };\n    }\n  };\n}\n\nvar HOVER_CANVAS_THROTTLE_DELAY = 800; // ms to throttle shadow canvas updates for perf improvement\n\nvar ZOOM2NODES_FACTOR = 4; // Expose config from forceGraph\n\nvar bindFG = linkKapsule('forceGraph', CanvasForceGraph);\nvar bindBoth = linkKapsule(['forceGraph', 'shadowGraph'], CanvasForceGraph);\nvar linkedProps = Object.assign.apply(Object, _toConsumableArray(['nodeColor', 'nodeAutoColorBy', 'nodeCanvasObject', 'nodeCanvasObjectMode', 'linkColor', 'linkAutoColorBy', 'linkLineDash', 'linkWidth', 'linkCanvasObject', 'linkCanvasObjectMode', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowRelPos', 'linkDirectionalParticles', 'linkDirectionalParticleSpeed', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'dagMode', 'dagLevelDistance', 'dagNodeFilter', 'onDagError', 'd3AlphaMin', 'd3AlphaDecay', 'd3VelocityDecay', 'warmupTicks', 'cooldownTicks', 'cooldownTime', 'onEngineTick', 'onEngineStop'].map(function (p) {\n  return _defineProperty({}, p, bindFG.linkProp(p));\n})).concat(_toConsumableArray(['nodeRelSize', 'nodeId', 'nodeVal', 'nodeVisibility', 'linkSource', 'linkTarget', 'linkVisibility', 'linkCurvature'].map(function (p) {\n  return _defineProperty({}, p, bindBoth.linkProp(p));\n}))));\nvar linkedMethods = Object.assign.apply(Object, _toConsumableArray(['d3Force', 'd3ReheatSimulation', 'emitParticle'].map(function (p) {\n  return _defineProperty({}, p, bindFG.linkMethod(p));\n})));\n\nfunction adjustCanvasSize(state) {\n  if (state.canvas) {\n    var curWidth = state.canvas.width;\n    var curHeight = state.canvas.height;\n\n    if (curWidth === 300 && curHeight === 150) {\n      // Default canvas dimensions\n      curWidth = curHeight = 0;\n    }\n\n    var pxScale = window.devicePixelRatio; // 2 on retina displays\n\n    curWidth /= pxScale;\n    curHeight /= pxScale; // Resize canvases\n\n    [state.canvas, state.shadowCanvas].forEach(function (canvas) {\n      // Element size\n      canvas.style.width = \"\".concat(state.width, \"px\");\n      canvas.style.height = \"\".concat(state.height, \"px\"); // Memory size (scaled to avoid blurriness)\n\n      canvas.width = state.width * pxScale;\n      canvas.height = state.height * pxScale; // Normalize coordinate system to use css pixels (on init only)\n\n      if (!curWidth && !curHeight) {\n        canvas.getContext('2d').scale(pxScale, pxScale);\n      }\n    }); // Relative center panning based on 0,0\n\n    var k = zoomTransform(state.canvas).k;\n    state.zoom.translateBy(state.zoom.__baseElem, (state.width - curWidth) / 2 / k, (state.height - curHeight) / 2 / k);\n  }\n}\n\nfunction resetTransform(ctx) {\n  var pxRatio = window.devicePixelRatio;\n  ctx.setTransform(pxRatio, 0, 0, pxRatio, 0, 0);\n}\n\nfunction clearCanvas(ctx, width, height) {\n  ctx.save();\n  resetTransform(ctx); // reset transform\n\n  ctx.clearRect(0, 0, width, height);\n  ctx.restore(); //restore transforms\n} //\n\n\nvar forceGraph = Kapsule({\n  props: _objectSpread2({\n    width: {\n      \"default\": window.innerWidth,\n      onChange: function onChange(_, state) {\n        return adjustCanvasSize(state);\n      },\n      triggerUpdate: false\n    },\n    height: {\n      \"default\": window.innerHeight,\n      onChange: function onChange(_, state) {\n        return adjustCanvasSize(state);\n      },\n      triggerUpdate: false\n    },\n    graphData: {\n      \"default\": {\n        nodes: [],\n        links: []\n      },\n      onChange: function onChange(d, state) {\n        if (d.nodes.length || d.links.length) {\n          console.info('force-graph loading', d.nodes.length + ' nodes', d.links.length + ' links');\n        }\n\n        [{\n          type: 'Node',\n          objs: d.nodes\n        }, {\n          type: 'Link',\n          objs: d.links\n        }].forEach(hexIndex);\n        state.forceGraph.graphData(d);\n        state.shadowGraph.graphData(d);\n\n        function hexIndex(_ref4) {\n          var type = _ref4.type,\n              objs = _ref4.objs;\n          objs.filter(function (d) {\n            if (!d.hasOwnProperty('__indexColor')) return true;\n            var cur = state.colorTracker.lookup(d.__indexColor);\n            return !cur || !cur.hasOwnProperty('d') || cur.d !== d;\n          }).forEach(function (d) {\n            // store object lookup color\n            d.__indexColor = state.colorTracker.register({\n              type: type,\n              d: d\n            });\n          });\n        }\n      },\n      triggerUpdate: false\n    },\n    backgroundColor: {\n      onChange: function onChange(color, state) {\n        state.canvas && color && (state.canvas.style.background = color);\n      },\n      triggerUpdate: false\n    },\n    nodeLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    linkLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    linkHoverPrecision: {\n      \"default\": 4,\n      triggerUpdate: false\n    },\n    enableNodeDrag: {\n      \"default\": true,\n      triggerUpdate: false\n    },\n    enableZoomPanInteraction: {\n      \"default\": true,\n      triggerUpdate: false\n    },\n    enablePointerInteraction: {\n      \"default\": true,\n      onChange: function onChange(_, state) {\n        state.hoverObj = null;\n      },\n      triggerUpdate: false\n    },\n    onNodeDrag: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeDragEnd: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeRightClick: {\n      triggerUpdate: false\n    },\n    onNodeHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLinkClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onLinkRightClick: {\n      triggerUpdate: false\n    },\n    onLinkHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onBackgroundClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onBackgroundRightClick: {\n      triggerUpdate: false\n    },\n    onZoom: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onZoomEnd: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    }\n  }, linkedProps),\n  aliases: {\n    // Prop names supported for backwards compatibility\n    stopAnimation: 'pauseAnimation'\n  },\n  methods: _objectSpread2({\n    graph2ScreenCoords: function graph2ScreenCoords(state, x, y) {\n      var t = zoomTransform(state.canvas);\n      return {\n        x: x * t.k + t.x,\n        y: y * t.k + t.y\n      };\n    },\n    screen2GraphCoords: function screen2GraphCoords(state, x, y) {\n      var t = zoomTransform(state.canvas);\n      return {\n        x: (x - t.x) / t.k,\n        y: (y - t.y) / t.k\n      };\n    },\n    centerAt: function centerAt(state, x, y, transitionDuration) {\n      if (!state.canvas) return null; // no canvas yet\n      // setter\n\n      if (x !== undefined || y !== undefined) {\n        var finalPos = Object.assign({}, x !== undefined ? {\n          x: x\n        } : {}, y !== undefined ? {\n          y: y\n        } : {});\n\n        if (!transitionDuration) {\n          // no animation\n          setCenter(finalPos);\n        } else {\n          new TWEEN.Tween(getCenter()).to(finalPos, transitionDuration).easing(TWEEN.Easing.Quadratic.Out).onUpdate(setCenter).start();\n        }\n\n        return this;\n      } // getter\n\n\n      return getCenter(); //\n\n      function getCenter() {\n        var t = zoomTransform(state.canvas);\n        return {\n          x: (state.width / 2 - t.x) / t.k,\n          y: (state.height / 2 - t.y) / t.k\n        };\n      }\n\n      function setCenter(_ref5) {\n        var x = _ref5.x,\n            y = _ref5.y;\n        state.zoom.translateTo(state.zoom.__baseElem, x === undefined ? getCenter().x : x, y === undefined ? getCenter().y : y);\n      }\n    },\n    zoom: function zoom(state, k, transitionDuration) {\n      if (!state.canvas) return null; // no canvas yet\n      // setter\n\n      if (k !== undefined) {\n        if (!transitionDuration) {\n          // no animation\n          setZoom(k);\n        } else {\n          new TWEEN.Tween({\n            k: getZoom()\n          }).to({\n            k: k\n          }, transitionDuration).easing(TWEEN.Easing.Quadratic.Out).onUpdate(function (_ref6) {\n            var k = _ref6.k;\n            return setZoom(k);\n          }).start();\n        }\n\n        return this;\n      } // getter\n\n\n      return getZoom(); //\n\n      function getZoom() {\n        return zoomTransform(state.canvas).k;\n      }\n\n      function setZoom(k) {\n        state.zoom.scaleTo(state.zoom.__baseElem, k);\n      }\n    },\n    zoomToFit: function zoomToFit(state) {\n      var transitionDuration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var padding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n\n      for (var _len = arguments.length, bboxArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        bboxArgs[_key - 3] = arguments[_key];\n      }\n\n      var bbox = this.getGraphBbox.apply(this, bboxArgs);\n\n      if (bbox) {\n        var center = {\n          x: (bbox.x[0] + bbox.x[1]) / 2,\n          y: (bbox.y[0] + bbox.y[1]) / 2\n        };\n        var zoomK = Math.max(1e-12, Math.min(1e12, (state.width - padding * 2) / (bbox.x[1] - bbox.x[0]), (state.height - padding * 2) / (bbox.y[1] - bbox.y[0])));\n        this.centerAt(center.x, center.y, transitionDuration);\n        this.zoom(zoomK, transitionDuration);\n      }\n\n      return this;\n    },\n    getGraphBbox: function getGraphBbox(state) {\n      var nodeFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var getVal = accessorFn(state.nodeVal);\n\n      var getR = function getR(node) {\n        return Math.sqrt(Math.max(0, getVal(node) || 1)) * state.nodeRelSize;\n      };\n\n      var nodesPos = state.graphData.nodes.filter(nodeFilter).map(function (node) {\n        return {\n          x: node.x,\n          y: node.y,\n          r: getR(node)\n        };\n      });\n      return !nodesPos.length ? null : {\n        x: [min(nodesPos, function (node) {\n          return node.x - node.r;\n        }), max(nodesPos, function (node) {\n          return node.x + node.r;\n        })],\n        y: [min(nodesPos, function (node) {\n          return node.y - node.r;\n        }), max(nodesPos, function (node) {\n          return node.y + node.r;\n        })]\n      };\n    },\n    pauseAnimation: function pauseAnimation(state) {\n      if (state.animationFrameRequestId) {\n        cancelAnimationFrame(state.animationFrameRequestId);\n        state.animationFrameRequestId = null;\n      }\n\n      return this;\n    },\n    resumeAnimation: function resumeAnimation(state) {\n      if (!state.animationFrameRequestId) {\n        this._animationCycle();\n      }\n\n      return this;\n    },\n    _destructor: function _destructor() {\n      this.pauseAnimation();\n      this.graphData({\n        nodes: [],\n        links: []\n      });\n    }\n  }, linkedMethods),\n  stateInit: function stateInit() {\n    return {\n      lastSetZoom: 1,\n      forceGraph: new CanvasForceGraph(),\n      shadowGraph: new CanvasForceGraph().cooldownTicks(0).nodeColor('__indexColor').linkColor('__indexColor').isShadow(true),\n      colorTracker: new ColorTracker() // indexed objects for rgb lookup\n\n    };\n  },\n  init: function init(domNode, state) {\n    // Wipe DOM\n    domNode.innerHTML = ''; // Container anchor for canvas and tooltip\n\n    var container = document.createElement('div');\n    container.style.position = 'relative';\n    domNode.appendChild(container);\n    state.canvas = document.createElement('canvas');\n    if (state.backgroundColor) state.canvas.style.background = state.backgroundColor;\n    container.appendChild(state.canvas);\n    state.shadowCanvas = document.createElement('canvas'); // Show shadow canvas\n    //state.shadowCanvas.style.position = 'absolute';\n    //state.shadowCanvas.style.top = '0';\n    //state.shadowCanvas.style.left = '0';\n    //container.appendChild(state.shadowCanvas);\n\n    var ctx = state.canvas.getContext('2d');\n    var shadowCtx = state.shadowCanvas.getContext('2d'); // Setup node drag interaction\n\n    select(state.canvas).call(drag().subject(function () {\n      if (!state.enableNodeDrag) {\n        return null;\n      }\n\n      var obj = state.hoverObj;\n      return obj && obj.type === 'Node' ? obj.d : null; // Only drag nodes\n    }).on('start', function () {\n      var obj = event.subject;\n      obj.__initialDragPos = {\n        x: obj.x,\n        y: obj.y,\n        fx: obj.fx,\n        fy: obj.fy\n      }; // keep engine running at low intensity throughout drag\n\n      if (!event.active) {\n        obj.fx = obj.x;\n        obj.fy = obj.y; // Fix points\n      } // drag cursor\n\n\n      state.canvas.classList.add('grabbable');\n    }).on('drag', function () {\n      var obj = event.subject;\n      var initPos = obj.__initialDragPos;\n      var dragPos = event;\n      var k = zoomTransform(state.canvas).k;\n      var translate = {\n        x: initPos.x + (dragPos.x - initPos.x) / k - obj.x,\n        y: initPos.y + (dragPos.y - initPos.y) / k - obj.y\n      }; // Move fx/fy (and x/y) of nodes based on the scaled drag distance since the drag start\n\n      ['x', 'y'].forEach(function (c) {\n        return obj[\"f\".concat(c)] = obj[c] = initPos[c] + (dragPos[c] - initPos[c]) / k;\n      }); // prevent freeze while dragging\n\n      state.forceGraph.d3AlphaTarget(0.3) // keep engine running at low intensity throughout drag\n      .resetCountdown(); // prevent freeze while dragging\n\n      obj.__dragged = true;\n      state.onNodeDrag(obj, translate);\n    }).on('end', function () {\n      var obj = event.subject;\n      var initPos = obj.__initialDragPos;\n      var translate = {\n        x: obj.x - initPos.x,\n        y: obj.y - initPos.y\n      };\n\n      if (initPos.fx === undefined) {\n        obj.fx = undefined;\n      }\n\n      if (initPos.fy === undefined) {\n        obj.fy = undefined;\n      }\n\n      delete obj.__initialDragPos;\n      state.forceGraph.d3AlphaTarget(0) // release engine low intensity\n      .resetCountdown(); // let the engine readjust after releasing fixed nodes\n      // drag cursor\n\n      state.canvas.classList.remove('grabbable');\n\n      if (obj.__dragged) {\n        delete obj.__dragged;\n        state.onNodeDragEnd(obj, translate);\n      }\n    })); // Setup zoom / pan interaction\n\n    state.zoom = zoom();\n    state.zoom(state.zoom.__baseElem = select(state.canvas)); // Attach controlling elem for easy access\n\n    state.zoom.__baseElem.on('dblclick.zoom', null); // Disable double-click to zoom\n\n\n    state.zoom.filter(function () {\n      return state.enableZoomPanInteraction ? !event.button : false;\n    }) // disable zoom interaction\n    .scaleExtent([0.01, 1000]).on('zoom', function () {\n      var t = zoomTransform(this); // Same as d3.event.transform\n\n      [ctx, shadowCtx].forEach(function (c) {\n        resetTransform(c);\n        c.translate(t.x, t.y);\n        c.scale(t.k, t.k);\n      });\n      state.onZoom(_objectSpread2({}, t));\n    }).on('end', function () {\n      var t = zoomTransform(this); // Same as d3.event.transform\n\n      state.onZoomEnd(_objectSpread2({}, t));\n    });\n    adjustCanvasSize(state);\n    state.forceGraph.onFinishUpdate(function () {\n      // re-zoom, if still in default position (not user modified)\n      if (zoomTransform(state.canvas).k === state.lastSetZoom && state.graphData.nodes.length) {\n        state.zoom.scaleTo(state.zoom.__baseElem, state.lastSetZoom = ZOOM2NODES_FACTOR / Math.cbrt(state.graphData.nodes.length));\n      }\n    }); // Setup tooltip\n\n    var toolTipElem = document.createElement('div');\n    toolTipElem.classList.add('graph-tooltip');\n    container.appendChild(toolTipElem); // Capture pointer coords on move or touchstart\n\n    var pointerPos = {\n      x: -1e12,\n      y: -1e12\n    };\n    ['pointermove', 'pointerdown'].forEach(function (evType) {\n      return container.addEventListener(evType, function (ev) {\n        // detect point drag\n        !state.isPointerDragging && ev.type === 'pointermove' && ev.pressure > 0 && (ev.movementX !== 0 || ev.movementY !== 0) && (state.isPointerDragging = true); // update the pointer pos\n\n        var offset = getOffset(container);\n        pointerPos.x = ev.pageX - offset.left;\n        pointerPos.y = ev.pageY - offset.top; // Move tooltip\n\n        toolTipElem.style.top = \"\".concat(pointerPos.y, \"px\");\n        toolTipElem.style.left = \"\".concat(pointerPos.x, \"px\"); //\n\n        function getOffset(el) {\n          var rect = el.getBoundingClientRect(),\n              scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\n              scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n          return {\n            top: rect.top + scrollTop,\n            left: rect.left + scrollLeft\n          };\n        }\n      }, false);\n    }); // Handle click/touch events on nodes/links\n\n    container.addEventListener('pointerup', function (ev) {\n      if (state.isPointerDragging) {\n        state.isPointerDragging = false;\n        return; // don't trigger click events after pointer drag (pan / node drag functionality)\n      }\n\n      requestAnimationFrame(function () {\n        // trigger click events asynchronously, to allow hoverObj to be set (on frame)\n        if (ev.button === 0) {\n          // mouse left-click or touch\n          if (state.hoverObj) {\n            state[\"on\".concat(state.hoverObj.type, \"Click\")](state.hoverObj.d, ev);\n          } else {\n            state.onBackgroundClick(ev);\n          }\n        }\n\n        if (ev.button === 2) {\n          // mouse right-click\n          if (state.hoverObj) {\n            var fn = state[\"on\".concat(state.hoverObj.type, \"RightClick\")];\n            fn && fn(state.hoverObj.d, ev);\n          } else {\n            state.onBackgroundRightClick && state.onBackgroundRightClick(ev);\n          }\n        }\n      });\n    }, false);\n    container.addEventListener('contextmenu', function (ev) {\n      if (!state.onBackgroundRightClick && !state.onNodeRightClick && !state.onLinkRightClick) return true; // default contextmenu behavior\n\n      ev.preventDefault();\n      return false;\n    }, false);\n    state.forceGraph(ctx);\n    state.shadowGraph(shadowCtx); //\n\n    var refreshShadowCanvas = throttle(function () {\n      // wipe canvas\n      clearCanvas(shadowCtx, state.width, state.height); // Adjust link hover area\n\n      state.shadowGraph.linkWidth(function (l) {\n        return accessorFn(state.linkWidth)(l) + state.linkHoverPrecision;\n      }); // redraw\n\n      var t = zoomTransform(state.canvas);\n      state.shadowGraph.globalScale(t.k).tickFrame();\n    }, HOVER_CANVAS_THROTTLE_DELAY); // Kick-off renderer\n\n    (this._animationCycle = function animate() {\n      // IIFE\n      if (state.enablePointerInteraction) {\n        // Update tooltip and trigger onHover events\n        var obj = null;\n\n        if (!state.isPointerDragging) {\n          // don't hover during drag\n          // Lookup object per pixel color\n          var pxScale = window.devicePixelRatio;\n          var px = pointerPos.x > 0 && pointerPos.y > 0 ? shadowCtx.getImageData(pointerPos.x * pxScale, pointerPos.y * pxScale, 1, 1) : null;\n          px && (obj = state.colorTracker.lookup(px.data));\n        }\n\n        if (obj !== state.hoverObj) {\n          var prevObj = state.hoverObj;\n          var prevObjType = prevObj ? prevObj.type : null;\n          var objType = obj ? obj.type : null;\n\n          if (prevObjType && prevObjType !== objType) {\n            // Hover out\n            state[\"on\".concat(prevObjType, \"Hover\")](null, prevObj.d);\n          }\n\n          if (objType) {\n            // Hover in\n            state[\"on\".concat(objType, \"Hover\")](obj.d, prevObjType === objType ? prevObj.d : null);\n          }\n\n          var tooltipContent = obj ? accessorFn(state[\"\".concat(obj.type.toLowerCase(), \"Label\")])(obj.d) || '' : '';\n          toolTipElem.style.visibility = tooltipContent ? 'visible' : 'hidden';\n          toolTipElem.innerHTML = tooltipContent;\n          state.hoverObj = obj;\n        }\n\n        refreshShadowCanvas();\n      } // Wipe canvas\n\n\n      clearCanvas(ctx, state.width, state.height); // Frame cycle\n\n      var t = zoomTransform(state.canvas);\n      state.forceGraph.globalScale(t.k).tickFrame();\n      TWEEN.update(); // update canvas animation tweens\n\n      state.animationFrameRequestId = requestAnimationFrame(animate);\n    })();\n  },\n  update: function updateFn(state) {}\n});\nexport default forceGraph;","import fromKapsule from 'react-kapsule';\nimport ForceGraphVRKapsule from '3d-force-graph-vr';\nimport PropTypes from 'prop-types';\nimport ForceGraphARKapsule from '3d-force-graph-ar';\nimport ForceGraph3DKapsule from '3d-force-graph';\nimport ForceGraph2DKapsule from 'force-graph';\nvar commonPropTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  graphData: PropTypes.shape({\n    nodes: PropTypes.arrayOf(PropTypes.object).isRequired,\n    links: PropTypes.arrayOf(PropTypes.object).isRequired\n  }),\n  backgroundColor: PropTypes.string,\n  nodeRelSize: PropTypes.number,\n  nodeId: PropTypes.string,\n  nodeLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  nodeVal: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  nodeVisibility: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.func]),\n  nodeColor: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  nodeAutoColorBy: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkSource: PropTypes.string,\n  linkTarget: PropTypes.string,\n  linkLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkVisibility: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.func]),\n  linkHoverPrecision: PropTypes.number,\n  linkColor: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkAutoColorBy: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkCurvature: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalArrowLength: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalArrowColor: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkDirectionalArrowRelPos: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalParticles: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalParticleSpeed: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalParticleWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalParticleColor: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  dagMode: PropTypes.oneOf(['td', 'bu', 'lr', 'rl', 'zin', 'zout', 'radialin', 'radialout']),\n  dagLevelDistance: PropTypes.number,\n  dagNodeFilter: PropTypes.func,\n  onDagError: PropTypes.func,\n  d3AlphaMin: PropTypes.number,\n  d3AlphaDecay: PropTypes.number,\n  d3VelocityDecay: PropTypes.number,\n  warmupTicks: PropTypes.number,\n  cooldownTicks: PropTypes.number,\n  cooldownTime: PropTypes.number,\n  onEngineTick: PropTypes.func,\n  onEngineStop: PropTypes.func,\n  getGraphBbox: PropTypes.func\n};\nvar pointerBasedPropTypes = {\n  zoomToFit: PropTypes.func,\n  onNodeClick: PropTypes.func,\n  onNodeRightClick: PropTypes.func,\n  onNodeHover: PropTypes.func,\n  onNodeDrag: PropTypes.func,\n  onNodeDragEnd: PropTypes.func,\n  onLinkClick: PropTypes.func,\n  onLinkRightClick: PropTypes.func,\n  onLinkHover: PropTypes.func,\n  onBackgroundClick: PropTypes.func,\n  onBackgroundRightClick: PropTypes.func,\n  enablePointerInteraction: PropTypes.bool,\n  enableNodeDrag: PropTypes.bool\n};\nvar threeBasedPropTypes = {\n  showNavInfo: PropTypes.bool,\n  nodeOpacity: PropTypes.number,\n  nodeResolution: PropTypes.number,\n  nodeThreeObject: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  nodeThreeObjectExtend: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.func]),\n  linkOpacity: PropTypes.number,\n  linkResolution: PropTypes.number,\n  linkCurveRotation: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkMaterial: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  linkThreeObject: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  linkThreeObjectExtend: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.func]),\n  linkPositionUpdate: PropTypes.func,\n  linkDirectionalArrowResolution: PropTypes.number,\n  linkDirectionalParticleResolution: PropTypes.number,\n  forceEngine: PropTypes.oneOf(['d3', 'ngraph']),\n  ngraphPhysics: PropTypes.object,\n  numDimensions: PropTypes.oneOf([1, 2, 3])\n};\nvar ForceGraph2DPropTypes = Object.assign({}, commonPropTypes, pointerBasedPropTypes, {\n  linkLineDash: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.number), PropTypes.string, PropTypes.func]),\n  nodeCanvasObject: PropTypes.func,\n  nodeCanvasObjectMode: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkCanvasObject: PropTypes.func,\n  linkCanvasObjectMode: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  enableZoomPanInteraction: PropTypes.bool,\n  onZoom: PropTypes.func,\n  onZoomEnd: PropTypes.func\n});\nvar ForceGraph3DPropTypes = Object.assign({}, commonPropTypes, pointerBasedPropTypes, threeBasedPropTypes, {\n  enableNavigationControls: PropTypes.bool,\n  controlType: PropTypes.oneOf(['trackball', 'orbit', 'fly']),\n  rendererConfig: PropTypes.object\n});\nvar ForceGraphVRPropTypes = Object.assign({}, commonPropTypes, threeBasedPropTypes, {\n  nodeDesc: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkDesc: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  onNodeCenterHover: PropTypes.func,\n  onLinkCenterHover: PropTypes.func\n});\nvar ForceGraphARPropTypes = Object.assign({}, commonPropTypes, threeBasedPropTypes, {\n  markerAttrs: PropTypes.object,\n  yOffset: PropTypes.number,\n  glScale: PropTypes.number,\n  onNodeCenterHover: PropTypes.func,\n  onLinkCenterHover: PropTypes.func\n});\nvar ForceGraphVR = fromKapsule(ForceGraphVRKapsule, {\n  methodNames: [// bind methods\n  'getGraphBbox', 'emitParticle', 'd3Force', 'd3ReheatSimulation', 'refresh']\n});\nForceGraphVR.displayName = 'ForceGraphVR';\nForceGraphVR.propTypes = ForceGraphVRPropTypes;\nvar ForceGraphAR = fromKapsule(ForceGraphARKapsule, {\n  methodNames: [// bind methods\n  'getGraphBbox', 'emitParticle', 'd3Force', 'd3ReheatSimulation', 'refresh'],\n  initPropNames: ['markerAttrs']\n});\nForceGraphAR.displayName = 'ForceGraphAR';\nForceGraphAR.propTypes = ForceGraphARPropTypes;\nvar ForceGraph3D = fromKapsule(ForceGraph3DKapsule, {\n  methodNames: [// bind methods\n  'emitParticle', 'd3Force', 'd3ReheatSimulation', 'stopAnimation', 'pauseAnimation', 'resumeAnimation', 'cameraPosition', 'zoomToFit', 'getGraphBbox', 'graph2ScreenCoords', 'postProcessingComposer', 'scene', 'camera', 'renderer', 'controls', 'refresh'],\n  initPropNames: ['controlType', 'rendererConfig']\n});\nForceGraph3D.displayName = 'ForceGraph3D';\nForceGraph3D.propTypes = ForceGraph3DPropTypes;\nvar ForceGraph2D = fromKapsule(ForceGraph2DKapsule, {\n  methodNames: [// bind methods\n  'emitParticle', 'd3Force', 'd3ReheatSimulation', 'stopAnimation', 'pauseAnimation', 'resumeAnimation', 'centerAt', 'zoom', 'zoomToFit', 'getGraphBbox', 'screen2GraphCoords', 'graph2ScreenCoords']\n});\nForceGraph2D.displayName = 'ForceGraph2D';\nForceGraph2D.propTypes = ForceGraph2DPropTypes;\nexport { ForceGraph2D, ForceGraph3D, ForceGraphAR, ForceGraphVR };","require('./checkpoint');\n\nrequire('./cube-env-map');\n\nrequire('./grab');\n\nrequire('./jump-ability');\n\nrequire('./kinematic-body');\n\nrequire('./mesh-smooth');\n\nrequire('./normal-material');\n\nrequire('./sphere-collider');","// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n(function (Math) {\n  var trimLeft = /^\\s+/,\n      trimRight = /\\s+$/,\n      tinyCounter = 0,\n      mathRound = Math.round,\n      mathMin = Math.min,\n      mathMax = Math.max,\n      mathRandom = Math.random;\n\n  function tinycolor(color, opts) {\n    color = color ? color : '';\n    opts = opts || {}; // If input is already a tinycolor, return itself\n\n    if (color instanceof tinycolor) {\n      return color;\n    } // If we are called as a function, call using new instead\n\n\n    if (!(this instanceof tinycolor)) {\n      return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = mathRound(100 * this._a) / 100, this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType; // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n\n    if (this._r < 1) {\n      this._r = mathRound(this._r);\n    }\n\n    if (this._g < 1) {\n      this._g = mathRound(this._g);\n    }\n\n    if (this._b < 1) {\n      this._b = mathRound(this._b);\n    }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n  }\n\n  tinycolor.prototype = {\n    isDark: function isDark() {\n      return this.getBrightness() < 128;\n    },\n    isLight: function isLight() {\n      return !this.isDark();\n    },\n    isValid: function isValid() {\n      return this._ok;\n    },\n    getOriginalInput: function getOriginalInput() {\n      return this._originalInput;\n    },\n    getFormat: function getFormat() {\n      return this._format;\n    },\n    getAlpha: function getAlpha() {\n      return this._a;\n    },\n    getBrightness: function getBrightness() {\n      //http://www.w3.org/TR/AERT#color-contrast\n      var rgb = this.toRgb();\n      return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function getLuminance() {\n      //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n      var rgb = this.toRgb();\n      var RsRGB, GsRGB, BsRGB, R, G, B;\n      RsRGB = rgb.r / 255;\n      GsRGB = rgb.g / 255;\n      BsRGB = rgb.b / 255;\n\n      if (RsRGB <= 0.03928) {\n        R = RsRGB / 12.92;\n      } else {\n        R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n      }\n\n      if (GsRGB <= 0.03928) {\n        G = GsRGB / 12.92;\n      } else {\n        G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n      }\n\n      if (BsRGB <= 0.03928) {\n        B = BsRGB / 12.92;\n      } else {\n        B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n      }\n\n      return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n    },\n    setAlpha: function setAlpha(value) {\n      this._a = boundAlpha(value);\n      this._roundA = mathRound(100 * this._a) / 100;\n      return this;\n    },\n    toHsv: function toHsv() {\n      var hsv = rgbToHsv(this._r, this._g, this._b);\n      return {\n        h: hsv.h * 360,\n        s: hsv.s,\n        v: hsv.v,\n        a: this._a\n      };\n    },\n    toHsvString: function toHsvString() {\n      var hsv = rgbToHsv(this._r, this._g, this._b);\n      var h = mathRound(hsv.h * 360),\n          s = mathRound(hsv.s * 100),\n          v = mathRound(hsv.v * 100);\n      return this._a == 1 ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\" : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n    },\n    toHsl: function toHsl() {\n      var hsl = rgbToHsl(this._r, this._g, this._b);\n      return {\n        h: hsl.h * 360,\n        s: hsl.s,\n        l: hsl.l,\n        a: this._a\n      };\n    },\n    toHslString: function toHslString() {\n      var hsl = rgbToHsl(this._r, this._g, this._b);\n      var h = mathRound(hsl.h * 360),\n          s = mathRound(hsl.s * 100),\n          l = mathRound(hsl.l * 100);\n      return this._a == 1 ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\" : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n    },\n    toHex: function toHex(allow3Char) {\n      return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function toHexString(allow3Char) {\n      return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function toHex8(allow4Char) {\n      return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function toHex8String(allow4Char) {\n      return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function toRgb() {\n      return {\n        r: mathRound(this._r),\n        g: mathRound(this._g),\n        b: mathRound(this._b),\n        a: this._a\n      };\n    },\n    toRgbString: function toRgbString() {\n      return this._a == 1 ? \"rgb(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" : \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function toPercentageRgb() {\n      return {\n        r: mathRound(bound01(this._r, 255) * 100) + \"%\",\n        g: mathRound(bound01(this._g, 255) * 100) + \"%\",\n        b: mathRound(bound01(this._b, 255) * 100) + \"%\",\n        a: this._a\n      };\n    },\n    toPercentageRgbString: function toPercentageRgbString() {\n      return this._a == 1 ? \"rgb(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" : \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function toName() {\n      if (this._a === 0) {\n        return \"transparent\";\n      }\n\n      if (this._a < 1) {\n        return false;\n      }\n\n      return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function toFilter(secondColor) {\n      var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n      var secondHex8String = hex8String;\n      var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n      if (secondColor) {\n        var s = tinycolor(secondColor);\n        secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n      }\n\n      return \"progid:DXImageTransform.Microsoft.gradient(\" + gradientType + \"startColorstr=\" + hex8String + \",endColorstr=\" + secondHex8String + \")\";\n    },\n    toString: function toString(format) {\n      var formatSet = !!format;\n      format = format || this._format;\n      var formattedString = false;\n      var hasAlpha = this._a < 1 && this._a >= 0;\n      var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n      if (needsAlphaFormat) {\n        // Special case for \"transparent\", all other non-alpha formats\n        // will return rgba when there is transparency.\n        if (format === \"name\" && this._a === 0) {\n          return this.toName();\n        }\n\n        return this.toRgbString();\n      }\n\n      if (format === \"rgb\") {\n        formattedString = this.toRgbString();\n      }\n\n      if (format === \"prgb\") {\n        formattedString = this.toPercentageRgbString();\n      }\n\n      if (format === \"hex\" || format === \"hex6\") {\n        formattedString = this.toHexString();\n      }\n\n      if (format === \"hex3\") {\n        formattedString = this.toHexString(true);\n      }\n\n      if (format === \"hex4\") {\n        formattedString = this.toHex8String(true);\n      }\n\n      if (format === \"hex8\") {\n        formattedString = this.toHex8String();\n      }\n\n      if (format === \"name\") {\n        formattedString = this.toName();\n      }\n\n      if (format === \"hsl\") {\n        formattedString = this.toHslString();\n      }\n\n      if (format === \"hsv\") {\n        formattedString = this.toHsvString();\n      }\n\n      return formattedString || this.toHexString();\n    },\n    clone: function clone() {\n      return tinycolor(this.toString());\n    },\n    _applyModification: function _applyModification(fn, args) {\n      var color = fn.apply(null, [this].concat([].slice.call(args)));\n      this._r = color._r;\n      this._g = color._g;\n      this._b = color._b;\n      this.setAlpha(color._a);\n      return this;\n    },\n    lighten: function lighten() {\n      return this._applyModification(_lighten, arguments);\n    },\n    brighten: function brighten() {\n      return this._applyModification(_brighten, arguments);\n    },\n    darken: function darken() {\n      return this._applyModification(_darken, arguments);\n    },\n    desaturate: function desaturate() {\n      return this._applyModification(_desaturate, arguments);\n    },\n    saturate: function saturate() {\n      return this._applyModification(_saturate, arguments);\n    },\n    greyscale: function greyscale() {\n      return this._applyModification(_greyscale, arguments);\n    },\n    spin: function spin() {\n      return this._applyModification(_spin, arguments);\n    },\n    _applyCombination: function _applyCombination(fn, args) {\n      return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function analogous() {\n      return this._applyCombination(_analogous, arguments);\n    },\n    complement: function complement() {\n      return this._applyCombination(_complement, arguments);\n    },\n    monochromatic: function monochromatic() {\n      return this._applyCombination(_monochromatic, arguments);\n    },\n    splitcomplement: function splitcomplement() {\n      return this._applyCombination(_splitcomplement, arguments);\n    },\n    triad: function triad() {\n      return this._applyCombination(_triad, arguments);\n    },\n    tetrad: function tetrad() {\n      return this._applyCombination(_tetrad, arguments);\n    }\n  }; // If input is an object, force 1 into \"1.0\" to handle ratios properly\n  // String input requires \"1.0\" as input, so 1 will be treated as 1\n\n  tinycolor.fromRatio = function (color, opts) {\n    if (typeof color == \"object\") {\n      var newColor = {};\n\n      for (var i in color) {\n        if (color.hasOwnProperty(i)) {\n          if (i === \"a\") {\n            newColor[i] = color[i];\n          } else {\n            newColor[i] = convertToPercentage(color[i]);\n          }\n        }\n      }\n\n      color = newColor;\n    }\n\n    return tinycolor(color, opts);\n  }; // Given a string or object, convert that input to RGB\n  // Possible string inputs:\n  //\n  //     \"red\"\n  //     \"#f00\" or \"f00\"\n  //     \"#ff0000\" or \"ff0000\"\n  //     \"#ff000000\" or \"ff000000\"\n  //     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n  //     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n  //     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n  //     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n  //     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n  //     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n  //     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n  //\n\n\n  function inputToRGB(color) {\n    var rgb = {\n      r: 0,\n      g: 0,\n      b: 0\n    };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n      color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n      if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n        rgb = rgbToRgb(color.r, color.g, color.b);\n        ok = true;\n        format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n      } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n        s = convertToPercentage(color.s);\n        v = convertToPercentage(color.v);\n        rgb = hsvToRgb(color.h, s, v);\n        ok = true;\n        format = \"hsv\";\n      } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n        s = convertToPercentage(color.s);\n        l = convertToPercentage(color.l);\n        rgb = hslToRgb(color.h, s, l);\n        ok = true;\n        format = \"hsl\";\n      }\n\n      if (color.hasOwnProperty(\"a\")) {\n        a = color.a;\n      }\n    }\n\n    a = boundAlpha(a);\n    return {\n      ok: ok,\n      format: color.format || format,\n      r: mathMin(255, mathMax(rgb.r, 0)),\n      g: mathMin(255, mathMax(rgb.g, 0)),\n      b: mathMin(255, mathMax(rgb.b, 0)),\n      a: a\n    };\n  } // Conversion Functions\n  // --------------------\n  // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n  // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n  // `rgbToRgb`\n  // Handle bounds / percentage checking to conform to CSS color spec\n  // <http://www.w3.org/TR/css3-color/>\n  // *Assumes:* r, g, b in [0, 255] or [0, 1]\n  // *Returns:* { r, g, b } in [0, 255]\n\n\n  function rgbToRgb(r, g, b) {\n    return {\n      r: bound01(r, 255) * 255,\n      g: bound01(g, 255) * 255,\n      b: bound01(b, 255) * 255\n    };\n  } // `rgbToHsl`\n  // Converts an RGB color value to HSL.\n  // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n  // *Returns:* { h, s, l } in [0,1]\n\n\n  function rgbToHsl(r, g, b) {\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n    var max = mathMax(r, g, b),\n        min = mathMin(r, g, b);\n    var h,\n        s,\n        l = (max + min) / 2;\n\n    if (max == min) {\n      h = s = 0; // achromatic\n    } else {\n      var d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n\n      h /= 6;\n    }\n\n    return {\n      h: h,\n      s: s,\n      l: l\n    };\n  } // `hslToRgb`\n  // Converts an HSL color value to RGB.\n  // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n  // *Returns:* { r, g, b } in the set [0, 255]\n\n\n  function hslToRgb(h, s, l) {\n    var r, g, b;\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\n      if (t < 1 / 2) return q;\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n      return p;\n    }\n\n    if (s === 0) {\n      r = g = b = l; // achromatic\n    } else {\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      var p = 2 * l - q;\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return {\n      r: r * 255,\n      g: g * 255,\n      b: b * 255\n    };\n  } // `rgbToHsv`\n  // Converts an RGB color value to HSV\n  // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n  // *Returns:* { h, s, v } in [0,1]\n\n\n  function rgbToHsv(r, g, b) {\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n    var max = mathMax(r, g, b),\n        min = mathMin(r, g, b);\n    var h,\n        s,\n        v = max;\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if (max == min) {\n      h = 0; // achromatic\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n\n      h /= 6;\n    }\n\n    return {\n      h: h,\n      s: s,\n      v: v\n    };\n  } // `hsvToRgb`\n  // Converts an HSV color value to RGB.\n  // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n  // *Returns:* { r, g, b } in the set [0, 255]\n\n\n  function hsvToRgb(h, s, v) {\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n    return {\n      r: r * 255,\n      g: g * 255,\n      b: b * 255\n    };\n  } // `rgbToHex`\n  // Converts an RGB color to hex\n  // Assumes r, g, and b are contained in the set [0, 255]\n  // Returns a 3 or 6 character hex\n\n\n  function rgbToHex(r, g, b, allow3Char) {\n    var hex = [pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16))]; // Return a 3 character hex if possible\n\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n      return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n  } // `rgbaToHex`\n  // Converts an RGBA color plus alpha transparency to hex\n  // Assumes r, g, b are contained in the set [0, 255] and\n  // a in [0, 1]. Returns a 4 or 8 character rgba hex\n\n\n  function rgbaToHex(r, g, b, a, allow4Char) {\n    var hex = [pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16)), pad2(convertDecimalToHex(a))]; // Return a 4 character hex if possible\n\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n      return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n  } // `rgbaToArgbHex`\n  // Converts an RGBA color to an ARGB Hex8 string\n  // Rarely used, but required for \"toFilter()\"\n\n\n  function rgbaToArgbHex(r, g, b, a) {\n    var hex = [pad2(convertDecimalToHex(a)), pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16))];\n    return hex.join(\"\");\n  } // `equals`\n  // Can be called with any tinycolor input\n\n\n  tinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) {\n      return false;\n    }\n\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n  };\n\n  tinycolor.random = function () {\n    return tinycolor.fromRatio({\n      r: mathRandom(),\n      g: mathRandom(),\n      b: mathRandom()\n    });\n  }; // Modification Functions\n  // ----------------------\n  // Thanks to less.js for some of the basics here\n  // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\n\n  function _desaturate(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n  }\n\n  function _saturate(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n  }\n\n  function _greyscale(color) {\n    return tinycolor(color).desaturate(100);\n  }\n\n  function _lighten(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n  }\n\n  function _brighten(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * -(amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * -(amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * -(amount / 100))));\n    return tinycolor(rgb);\n  }\n\n  function _darken(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n  } // Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n  // Values outside of this range will be wrapped into this range.\n\n\n  function _spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n  } // Combination Functions\n  // ---------------------\n  // Thanks to jQuery xColor for some of the ideas behind these\n  // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\n\n  function _complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n  }\n\n  function _triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [tinycolor(color), tinycolor({\n      h: (h + 120) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }), tinycolor({\n      h: (h + 240) % 360,\n      s: hsl.s,\n      l: hsl.l\n    })];\n  }\n\n  function _tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [tinycolor(color), tinycolor({\n      h: (h + 90) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }), tinycolor({\n      h: (h + 180) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }), tinycolor({\n      h: (h + 270) % 360,\n      s: hsl.s,\n      l: hsl.l\n    })];\n  }\n\n  function _splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [tinycolor(color), tinycolor({\n      h: (h + 72) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }), tinycolor({\n      h: (h + 216) % 360,\n      s: hsl.s,\n      l: hsl.l\n    })];\n  }\n\n  function _analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) {\n      hsl.h = (hsl.h + part) % 360;\n      ret.push(tinycolor(hsl));\n    }\n\n    return ret;\n  }\n\n  function _monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h,\n        s = hsv.s,\n        v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n      ret.push(tinycolor({\n        h: h,\n        s: s,\n        v: v\n      }));\n      v = (v + modification) % 1;\n    }\n\n    return ret;\n  } // Utility Functions\n  // ---------------------\n\n\n  tinycolor.mix = function (color1, color2, amount) {\n    amount = amount === 0 ? 0 : amount || 50;\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n    var p = amount / 100;\n    var rgba = {\n      r: (rgb2.r - rgb1.r) * p + rgb1.r,\n      g: (rgb2.g - rgb1.g) * p + rgb1.g,\n      b: (rgb2.b - rgb1.b) * p + rgb1.b,\n      a: (rgb2.a - rgb1.a) * p + rgb1.a\n    };\n    return tinycolor(rgba);\n  }; // Readability Functions\n  // ---------------------\n  // <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n  // `contrast`\n  // Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\n\n\n  tinycolor.readability = function (color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) / (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05);\n  }; // `isReadable`\n  // Ensure that foreground and background color combinations meet WCAG2 guidelines.\n  // The third argument is an optional Object.\n  //      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n  //      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n  // If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n  // *Example*\n  //    tinycolor.isReadable(\"#000\", \"#111\") => false\n  //    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\n\n\n  tinycolor.isReadable = function (color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n    out = false;\n    wcag2Parms = validateWCAG2Parms(wcag2);\n\n    switch (wcag2Parms.level + wcag2Parms.size) {\n      case \"AAsmall\":\n      case \"AAAlarge\":\n        out = readability >= 4.5;\n        break;\n\n      case \"AAlarge\":\n        out = readability >= 3;\n        break;\n\n      case \"AAAsmall\":\n        out = readability >= 7;\n        break;\n    }\n\n    return out;\n  }; // `mostReadable`\n  // Given a base color and a list of possible foreground or background\n  // colors for that base, returns the most readable color.\n  // Optionally returns Black or White if the most readable color is unreadable.\n  // *Example*\n  //    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n  //    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n  //    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n  //    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\n\n\n  tinycolor.mostReadable = function (baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors;\n    level = args.level;\n    size = args.size;\n\n    for (var i = 0; i < colorList.length; i++) {\n      readability = tinycolor.readability(baseColor, colorList[i]);\n\n      if (readability > bestScore) {\n        bestScore = readability;\n        bestColor = tinycolor(colorList[i]);\n      }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\n      \"level\": level,\n      \"size\": size\n    }) || !includeFallbackColors) {\n      return bestColor;\n    } else {\n      args.includeFallbackColors = false;\n      return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n    }\n  }; // Big List of Colors\n  // ------------------\n  // <http://www.w3.org/TR/css3-color/#svg-color>\n\n\n  var names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n  }; // Make it easy to access colors via `hexNames[hex]`\n\n  var hexNames = tinycolor.hexNames = flip(names); // Utilities\n  // ---------\n  // `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\n\n  function flip(o) {\n    var flipped = {};\n\n    for (var i in o) {\n      if (o.hasOwnProperty(i)) {\n        flipped[o[i]] = i;\n      }\n    }\n\n    return flipped;\n  } // Return a valid alpha value [0,1] with all invalid values being set to 1\n\n\n  function boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n      a = 1;\n    }\n\n    return a;\n  } // Take input from [0, n] and return it as [0, 1]\n\n\n  function bound01(n, max) {\n    if (isOnePointZero(n)) {\n      n = \"100%\";\n    }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n))); // Automatically convert percentage into number\n\n    if (processPercent) {\n      n = parseInt(n * max, 10) / 100;\n    } // Handle floating point rounding errors\n\n\n    if (Math.abs(n - max) < 0.000001) {\n      return 1;\n    } // Convert into [0, 1] range if it isn't already\n\n\n    return n % max / parseFloat(max);\n  } // Force a number between 0 and 1\n\n\n  function clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n  } // Parse a base-16 hex value into a base-10 integer\n\n\n  function parseIntFromHex(val) {\n    return parseInt(val, 16);\n  } // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n  // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n\n\n  function isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n  } // Check to see if string passed in is a percentage\n\n\n  function isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n  } // Force a hex value to have 2 characters\n\n\n  function pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n  } // Replace a decimal with it's percentage value\n\n\n  function convertToPercentage(n) {\n    if (n <= 1) {\n      n = n * 100 + \"%\";\n    }\n\n    return n;\n  } // Converts a decimal to a hex value\n\n\n  function convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n  } // Converts a hex value to a decimal\n\n\n  function convertHexToDecimal(h) {\n    return parseIntFromHex(h) / 255;\n  }\n\n  var matchers = function () {\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\"; // <http://www.w3.org/TR/css3-values/#number-value>\n\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\"; // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\"; // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    return {\n      CSS_UNIT: new RegExp(CSS_UNIT),\n      rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n      rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n      hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n      hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n      hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n      hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n      hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n      hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n      hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n      hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n  }(); // `isValidCSSUnit`\n  // Take in a single string / number and check to see if it looks like a CSS unit\n  // (see `matchers` above for definition).\n\n\n  function isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n  } // `stringInputToObject`\n  // Permissive string parsing.  Take in a number of formats, and output an object\n  // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n\n\n  function stringInputToObject(color) {\n    color = color.replace(trimLeft, '').replace(trimRight, '').toLowerCase();\n    var named = false;\n\n    if (names[color]) {\n      color = names[color];\n      named = true;\n    } else if (color == 'transparent') {\n      return {\n        r: 0,\n        g: 0,\n        b: 0,\n        a: 0,\n        format: \"name\"\n      };\n    } // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n\n\n    var match;\n\n    if (match = matchers.rgb.exec(color)) {\n      return {\n        r: match[1],\n        g: match[2],\n        b: match[3]\n      };\n    }\n\n    if (match = matchers.rgba.exec(color)) {\n      return {\n        r: match[1],\n        g: match[2],\n        b: match[3],\n        a: match[4]\n      };\n    }\n\n    if (match = matchers.hsl.exec(color)) {\n      return {\n        h: match[1],\n        s: match[2],\n        l: match[3]\n      };\n    }\n\n    if (match = matchers.hsla.exec(color)) {\n      return {\n        h: match[1],\n        s: match[2],\n        l: match[3],\n        a: match[4]\n      };\n    }\n\n    if (match = matchers.hsv.exec(color)) {\n      return {\n        h: match[1],\n        s: match[2],\n        v: match[3]\n      };\n    }\n\n    if (match = matchers.hsva.exec(color)) {\n      return {\n        h: match[1],\n        s: match[2],\n        v: match[3],\n        a: match[4]\n      };\n    }\n\n    if (match = matchers.hex8.exec(color)) {\n      return {\n        r: parseIntFromHex(match[1]),\n        g: parseIntFromHex(match[2]),\n        b: parseIntFromHex(match[3]),\n        a: convertHexToDecimal(match[4]),\n        format: named ? \"name\" : \"hex8\"\n      };\n    }\n\n    if (match = matchers.hex6.exec(color)) {\n      return {\n        r: parseIntFromHex(match[1]),\n        g: parseIntFromHex(match[2]),\n        b: parseIntFromHex(match[3]),\n        format: named ? \"name\" : \"hex\"\n      };\n    }\n\n    if (match = matchers.hex4.exec(color)) {\n      return {\n        r: parseIntFromHex(match[1] + '' + match[1]),\n        g: parseIntFromHex(match[2] + '' + match[2]),\n        b: parseIntFromHex(match[3] + '' + match[3]),\n        a: convertHexToDecimal(match[4] + '' + match[4]),\n        format: named ? \"name\" : \"hex8\"\n      };\n    }\n\n    if (match = matchers.hex3.exec(color)) {\n      return {\n        r: parseIntFromHex(match[1] + '' + match[1]),\n        g: parseIntFromHex(match[2] + '' + match[2]),\n        b: parseIntFromHex(match[3] + '' + match[3]),\n        format: named ? \"name\" : \"hex\"\n      };\n    }\n\n    return false;\n  }\n\n  function validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\n      \"level\": \"AA\",\n      \"size\": \"small\"\n    };\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n\n    if (level !== \"AA\" && level !== \"AAA\") {\n      level = \"AA\";\n    }\n\n    if (size !== \"small\" && size !== \"large\") {\n      size = \"small\";\n    }\n\n    return {\n      \"level\": level,\n      \"size\": size\n    };\n  } // Node: Export function\n\n\n  if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n  } // AMD/requirejs: Define the module\n  else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return tinycolor;\n      });\n    } // Browser: Expose to window\n    else {\n        window.tinycolor = tinycolor;\n      }\n})(Math);","require('./a-grid');\n\nrequire('./a-hexgrid');\n\nrequire('./a-ocean');\n\nrequire('./a-tube');","/**\n * Represents 3d spring force, which updates forces acting on two bodies, conntected\n * by a spring.\n *\n * @param {Object} options for the spring force\n * @param {Number=} options.springCoeff spring force coefficient.\n * @param {Number=} options.springLength desired length of a spring at rest.\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge');\n\n  var random = require('ngraph.random').random(42);\n\n  var expose = require('ngraph.expose');\n\n  options = merge(options, {\n    springCoeff: 0.0002,\n    springLength: 80\n  });\n  var api = {\n    /**\n     * Upsates forces acting on a spring\n     */\n    update: function update(spring) {\n      var body1 = spring.from,\n          body2 = spring.to,\n          length = spring.length < 0 ? options.springLength : spring.length,\n          dx = body2.pos.x - body1.pos.x,\n          dy = body2.pos.y - body1.pos.y,\n          dz = body2.pos.z - body1.pos.z,\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n      if (r === 0) {\n        dx = (random.nextDouble() - 0.5) / 50;\n        dy = (random.nextDouble() - 0.5) / 50;\n        dz = (random.nextDouble() - 0.5) / 50;\n        r = Math.sqrt(dx * dx + dy * dy + dz * dz);\n      }\n\n      var d = r - length;\n      var coeff = (!spring.coeff || spring.coeff < 0 ? options.springCoeff : spring.coeff) * d / r * spring.weight;\n      body1.force.x += coeff * dx;\n      body1.force.y += coeff * dy;\n      body1.force.z += coeff * dz;\n      body2.force.x -= coeff * dx;\n      body2.force.y -= coeff * dy;\n      body2.force.z -= coeff * dz;\n    }\n  };\n  expose(options, api, ['springCoeff', 'springLength']);\n  return api;\n};","module.exports = AFRAME.registerComponent('checkpoint', {\n  schema: {\n    offset: {\n      default: {\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      type: 'vec3'\n    }\n  },\n  init: function init() {\n    this.active = false;\n    this.targetEl = null;\n    this.fire = this.fire.bind(this);\n    this.offset = new THREE.Vector3();\n  },\n  update: function update() {\n    this.offset.copy(this.data.offset);\n  },\n  play: function play() {\n    this.el.addEventListener('click', this.fire);\n  },\n  pause: function pause() {\n    this.el.removeEventListener('click', this.fire);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  fire: function fire() {\n    var targetEl = this.el.sceneEl.querySelector('[checkpoint-controls]');\n\n    if (!targetEl) {\n      throw new Error('No `checkpoint-controls` component found.');\n    }\n\n    targetEl.components['checkpoint-controls'].setCheckpoint(this.el);\n  },\n  getOffset: function getOffset() {\n    return this.offset.copy(this.data.offset);\n  }\n});","/* global AFRAME */\nif (typeof AFRAME === 'undefined') {\n  throw new Error('Component attempted to register before AFRAME was available.');\n}\n\nvar accessorFn = require('accessor-fn');\n\nif (accessorFn.hasOwnProperty('default')) {\n  // unwrap default export\n  accessorFn = accessorFn.default;\n}\n\nvar ThreeForceGraph = require('three-forcegraph');\n\nif (ThreeForceGraph.hasOwnProperty('default')) {\n  // unwrap default export\n  ThreeForceGraph = ThreeForceGraph.default;\n}\n\nvar parseJson = function parseJson(prop) {\n  return typeof prop === 'string' ? JSON.parse(prop) : prop; // already parsed\n};\n\nvar parseFn = function parseFn(prop) {\n  if (typeof prop === 'function') return prop; // already a function\n\n  var geval = eval; // Avoid using eval directly https://github.com/rollup/rollup/wiki/Troubleshooting#avoiding-eval\n\n  try {\n    var evalled = geval('(' + prop + ')');\n    return evalled;\n  } catch (e) {} // Can't eval, not a function\n\n\n  return null;\n};\n\nvar parseAccessor = function parseAccessor(prop) {\n  if (!isNaN(parseFloat(prop))) {\n    return parseFloat(prop);\n  } // parse numbers\n\n\n  if (parseFn(prop)) {\n    return parseFn(prop);\n  } // parse functions\n\n\n  return prop; // strings\n};\n/**\n * 3D Force-Directed Graph component for A-Frame.\n */\n\n\nAFRAME.registerComponent('forcegraph', {\n  schema: {\n    jsonUrl: {\n      type: 'string',\n      default: ''\n    },\n    nodes: {\n      parse: parseJson,\n      default: []\n    },\n    links: {\n      parse: parseJson,\n      default: []\n    },\n    numDimensions: {\n      type: 'number',\n      default: 3\n    },\n    dagMode: {\n      type: 'string',\n      default: ''\n    },\n    dagLevelDistance: {\n      type: 'number',\n      default: 0\n    },\n    dagNodeFilter: {\n      parse: parseFn,\n      function: function _function() {\n        return true;\n      }\n    },\n    onDagError: {\n      parse: parseFn,\n      default: undefined\n    },\n    nodeRelSize: {\n      type: 'number',\n      default: 4\n    },\n    // volume per val unit\n    nodeId: {\n      type: 'string',\n      default: 'id'\n    },\n    nodeLabel: {\n      parse: parseAccessor,\n      default: 'name'\n    },\n    nodeDesc: {\n      parse: parseAccessor,\n      default: 'desc'\n    },\n    nodeVal: {\n      parse: parseAccessor,\n      default: 'val'\n    },\n    nodeResolution: {\n      type: 'number',\n      default: 8\n    },\n    // how many slice segments in the sphere's circumference\n    nodeVisibility: {\n      parse: parseAccessor,\n      default: true\n    },\n    nodeColor: {\n      parse: parseAccessor,\n      default: 'color'\n    },\n    nodeAutoColorBy: {\n      parse: parseAccessor,\n      default: ''\n    },\n    // color nodes with the same field equally\n    nodeOpacity: {\n      type: 'number',\n      default: 0.75\n    },\n    nodeThreeObject: {\n      parse: parseAccessor,\n      default: null\n    },\n    nodeThreeObjectExtend: {\n      parse: parseAccessor,\n      default: false\n    },\n    linkSource: {\n      type: 'string',\n      default: 'source'\n    },\n    linkTarget: {\n      type: 'string',\n      default: 'target'\n    },\n    linkLabel: {\n      parse: parseAccessor,\n      default: 'name'\n    },\n    linkDesc: {\n      parse: parseAccessor,\n      default: 'desc'\n    },\n    linkHoverPrecision: {\n      type: 'number',\n      default: 2\n    },\n    linkVisibility: {\n      parse: parseAccessor,\n      default: true\n    },\n    linkColor: {\n      parse: parseAccessor,\n      default: 'color'\n    },\n    linkAutoColorBy: {\n      parse: parseAccessor,\n      default: ''\n    },\n    // color links with the same field equally\n    linkOpacity: {\n      type: 'number',\n      default: 0.2\n    },\n    linkWidth: {\n      parse: parseAccessor,\n      default: 0\n    },\n    linkResolution: {\n      type: 'number',\n      default: 6\n    },\n    // how many radial segments in each line cylinder's geometry\n    linkCurvature: {\n      parse: parseAccessor,\n      default: 0\n    },\n    linkCurveRotation: {\n      parse: parseAccessor,\n      default: 0\n    },\n    linkMaterial: {\n      parse: parseAccessor,\n      default: null\n    },\n    linkThreeObject: {\n      parse: parseAccessor,\n      default: null\n    },\n    linkThreeObjectExtend: {\n      parse: parseAccessor,\n      default: false\n    },\n    linkPositionUpdate: {\n      parse: parseFn,\n      default: null\n    },\n    linkDirectionalArrowLength: {\n      parse: parseAccessor,\n      default: 0\n    },\n    linkDirectionalArrowColor: {\n      parse: parseAccessor,\n      default: null\n    },\n    linkDirectionalArrowRelPos: {\n      parse: parseAccessor,\n      default: 0.5\n    },\n    // value between 0<>1 indicating the relative pos along the (exposed) line\n    linkDirectionalArrowResolution: {\n      type: 'number',\n      default: 8\n    },\n    // how many slice segments in the arrow's conic circumference\n    linkDirectionalParticles: {\n      parse: parseAccessor,\n      default: 0\n    },\n    // animate photons travelling in the link direction\n    linkDirectionalParticleSpeed: {\n      parse: parseAccessor,\n      default: 0.01\n    },\n    // in link length ratio per frame\n    linkDirectionalParticleWidth: {\n      parse: parseAccessor,\n      default: 0.5\n    },\n    linkDirectionalParticleColor: {\n      parse: parseAccessor,\n      default: null\n    },\n    linkDirectionalParticleResolution: {\n      type: 'number',\n      default: 4\n    },\n    // how many slice segments in the particle sphere's circumference\n    onNodeCenterHover: {\n      parse: parseFn,\n      default: function _default() {}\n    },\n    onLinkCenterHover: {\n      parse: parseFn,\n      default: function _default() {}\n    },\n    forceEngine: {\n      type: 'string',\n      default: 'd3'\n    },\n    // 'd3' or 'ngraph'\n    d3AlphaMin: {\n      type: 'number',\n      default: 0\n    },\n    d3AlphaDecay: {\n      type: 'number',\n      default: 0.0228\n    },\n    d3VelocityDecay: {\n      type: 'number',\n      default: 0.4\n    },\n    ngraphPhysics: {\n      parse: parseJson,\n      default: null\n    },\n    warmupTicks: {\n      type: 'int',\n      default: 0\n    },\n    // how many times to tick the force engine at init before starting to render\n    cooldownTicks: {\n      type: 'int',\n      default: 1e18\n    },\n    // Simulate infinity (int parser doesn't accept Infinity object)\n    cooldownTime: {\n      type: 'int',\n      default: 15000\n    },\n    // ms\n    onEngineTick: {\n      parse: parseFn,\n      default: function _default() {}\n    },\n    onEngineStop: {\n      parse: parseFn,\n      default: function _default() {}\n    }\n  },\n  // Bind component methods\n  getGraphBbox: function getGraphBbox() {\n    if (!this.forceGraph) {\n      // Got here before component init -> initialize forceGraph\n      this.forceGraph = new ThreeForceGraph();\n    }\n\n    return this.forceGraph.getGraphBbox();\n  },\n  emitParticle: function emitParticle() {\n    if (!this.forceGraph) {\n      // Got here before component init -> initialize forceGraph\n      this.forceGraph = new ThreeForceGraph();\n    }\n\n    var forceGraph = this.forceGraph;\n    var returnVal = forceGraph.emitParticle.apply(forceGraph, arguments);\n    return returnVal === forceGraph ? this // return self, not the inner forcegraph component\n    : returnVal;\n  },\n  d3Force: function d3Force() {\n    if (!this.forceGraph) {\n      // Got here before component init -> initialize forceGraph\n      this.forceGraph = new ThreeForceGraph();\n    }\n\n    var forceGraph = this.forceGraph;\n    var returnVal = forceGraph.d3Force.apply(forceGraph, arguments);\n    return returnVal === forceGraph ? this // return self, not the inner forcegraph component\n    : returnVal;\n  },\n  d3ReheatSimulation: function d3ReheatSimulation() {\n    this.forceGraph && this.forceGraph.d3ReheatSimulation();\n    return this;\n  },\n  refresh: function refresh() {\n    this.forceGraph && this.forceGraph.refresh();\n    return this;\n  },\n  init: function init() {\n    var state = this.state = {}; // Internal state\n    // Add info msg\n\n    state.infoEl = document.createElement('a-text');\n    state.infoEl.setAttribute('position', '0 -0.1 -1'); // Canvas center\n\n    state.infoEl.setAttribute('width', 1);\n    state.infoEl.setAttribute('align', 'center');\n    state.infoEl.setAttribute('color', 'lavender'); // Setup tooltip\n\n    state.tooltipEl = document.createElement('a-text');\n    state.tooltipEl.setAttribute('position', '0 -0.5 -1'); // Aligned to canvas bottom\n\n    state.tooltipEl.setAttribute('width', 2);\n    state.tooltipEl.setAttribute('align', 'center');\n    state.tooltipEl.setAttribute('color', 'lavender');\n    state.tooltipEl.setAttribute('value', ''); // Setup sub-tooltip\n\n    state.subTooltipEl = document.createElement('a-text');\n    state.subTooltipEl.setAttribute('position', '0 -0.6 -1'); // Aligned to canvas bottom\n\n    state.subTooltipEl.setAttribute('width', 1.5);\n    state.subTooltipEl.setAttribute('align', 'center');\n    state.subTooltipEl.setAttribute('color', 'lavender');\n    state.subTooltipEl.setAttribute('value', ''); // Get camera dom element and attach fixed view elements to camera\n\n    var cameraEl = document.querySelector('a-entity[camera], a-camera');\n    cameraEl.appendChild(state.infoEl);\n    cameraEl.appendChild(state.tooltipEl);\n    cameraEl.appendChild(state.subTooltipEl); // Keep reference to Three camera object\n\n    state.cameraObj = cameraEl.object3D.children.filter(function (child) {\n      return child.type === 'PerspectiveCamera';\n    })[0]; // On camera switch\n\n    this.el.sceneEl.addEventListener('camera-set-active', function (evt) {\n      // Switch camera reference\n      state.cameraObj = evt.detail.cameraEl.components.camera.camera;\n    }); // setup FG object\n\n    if (!this.forceGraph) this.forceGraph = new ThreeForceGraph(); // initialize forceGraph if it doesn't exist yet\n\n    this.el.object3D.add(this.forceGraph);\n    this.forceGraph.onLoading(function () {\n      state.infoEl.setAttribute('value', 'Loading...'); // Add loading msg\n    }).onFinishLoading(function () {\n      state.infoEl.setAttribute('value', '');\n    });\n  },\n  remove: function remove() {\n    // Clean-up elems\n    this.state.infoEl.remove();\n    this.state.tooltipEl.remove();\n    this.state.subTooltipEl.remove();\n  },\n  update: function update(oldData) {\n    var comp = this;\n    var elData = this.data;\n    var diff = AFRAME.utils.diff(elData, oldData);\n    var fgProps = ['jsonUrl', 'numDimensions', 'dagMode', 'dagLevelDistance', 'dagNodeFilter', 'onDagError', 'nodeRelSize', 'nodeId', 'nodeVal', 'nodeResolution', 'nodeVisibility', 'nodeColor', 'nodeAutoColorBy', 'nodeOpacity', 'nodeThreeObject', 'nodeThreeObjectExtend', 'linkSource', 'linkTarget', 'linkVisibility', 'linkColor', 'linkAutoColorBy', 'linkOpacity', 'linkWidth', 'linkResolution', 'linkCurvature', 'linkCurveRotation', 'linkMaterial', 'linkThreeObject', 'linkThreeObjectExtend', 'linkPositionUpdate', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowRelPos', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleSpeed', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution', 'forceEngine', 'd3AlphaMin', 'd3AphaDecay', 'd3VelocityDecay', 'ngraphPhysics', 'warmupTicks', 'cooldownTicks', 'cooldownTime', 'onEngineTick', 'onEngineStop'];\n    fgProps.filter(function (p) {\n      return p in diff;\n    }).forEach(function (p) {\n      comp.forceGraph[p](elData[p] !== '' ? elData[p] : null);\n    }); // Convert blank values into nulls\n\n    if ('nodes' in diff || 'links' in diff) {\n      comp.forceGraph.graphData({\n        nodes: elData.nodes,\n        links: elData.links\n      });\n    }\n  },\n  tick: function tick(t, td) {\n    // Update tooltip\n    var centerRaycaster = new THREE.Raycaster();\n    centerRaycaster.linePrecision = this.data.linkHoverPrecision;\n    centerRaycaster.setFromCamera(new THREE.Vector2(0, 0), // Canvas center\n    this.state.cameraObj);\n    var intersects = centerRaycaster.intersectObjects(this.forceGraph.children).filter(function (o) {\n      // Check only node/link objects\n      return ['node', 'link'].indexOf(o.object.__graphObjType) !== -1;\n    }).sort(function (a, b) {\n      // Prioritize nodes over links\n      return isNode(b) - isNode(a);\n\n      function isNode(o) {\n        return o.object.__graphObjType === 'node';\n      }\n    });\n    var topObject = intersects.length ? intersects[0].object : null;\n\n    if (topObject !== this.state.hoverObj) {\n      var prevObjType = this.state.hoverObj ? this.state.hoverObj.__graphObjType : null;\n      var prevObjData = this.state.hoverObj ? this.state.hoverObj.__data : null;\n      var objType = topObject ? topObject.__graphObjType : null;\n      var objData = topObject ? topObject.__data : null;\n\n      if (prevObjType && prevObjType !== objType) {\n        // Hover out\n        this.data['on' + (prevObjType === 'node' ? 'Node' : 'Link') + 'CenterHover'](null, prevObjData);\n      }\n\n      if (objType) {\n        // Hover in\n        this.data['on' + (objType === 'node' ? 'Node' : 'Link') + 'CenterHover'](objData, prevObjType === objType ? prevObjData : null);\n      }\n\n      this.state.hoverObj = topObject;\n      this.state.tooltipEl.setAttribute('value', topObject ? accessorFn(this.data[topObject.__graphObjType + 'Label'])(topObject.__data) || '' : '');\n      this.state.subTooltipEl.setAttribute('value', topObject ? accessorFn(this.data[topObject.__graphObjType + 'Desc'])(topObject.__data) || '' : '');\n    } // Run force-graph ticker\n\n\n    this.forceGraph.tickFrame();\n  }\n});","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","module.exports = function (bodies, settings) {\n  var random = require('ngraph.random').random(42);\n\n  var boundingBox = {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0\n  };\n  return {\n    box: boundingBox,\n    update: updateBoundingBox,\n    reset: function reset() {\n      boundingBox.x1 = boundingBox.y1 = 0;\n      boundingBox.x2 = boundingBox.y2 = 0;\n    },\n    getBestNewPosition: function getBestNewPosition(neighbors) {\n      var graphRect = boundingBox;\n      var baseX = 0,\n          baseY = 0;\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          baseX += neighbors[i].pos.x;\n          baseY += neighbors[i].pos.y;\n        }\n\n        baseX /= neighbors.length;\n        baseY /= neighbors.length;\n      } else {\n        baseX = (graphRect.x1 + graphRect.x2) / 2;\n        baseY = (graphRect.y1 + graphRect.y2) / 2;\n      }\n\n      var springLength = settings.springLength;\n      return {\n        x: baseX + random.next(springLength) - springLength / 2,\n        y: baseY + random.next(springLength) - springLength / 2\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n\n    if (i === 0) {\n      return;\n    } // don't have to wory here.\n\n\n    var x1 = Number.MAX_VALUE,\n        y1 = Number.MAX_VALUE,\n        x2 = Number.MIN_VALUE,\n        y2 = Number.MIN_VALUE;\n\n    while (i--) {\n      // this is O(n), could it be done faster with quadtree?\n      // how about pinned nodes?\n      var body = bodies[i];\n\n      if (body.isPinned) {\n        body.pos.x = body.prevPos.x;\n        body.pos.y = body.prevPos.y;\n      } else {\n        body.prevPos.x = body.pos.x;\n        body.prevPos.y = body.pos.y;\n      }\n\n      if (body.pos.x < x1) {\n        x1 = body.pos.x;\n      }\n\n      if (body.pos.x > x2) {\n        x2 = body.pos.x;\n      }\n\n      if (body.pos.y < y1) {\n        y1 = body.pos.y;\n      }\n\n      if (body.pos.y > y2) {\n        y2 = body.pos.y;\n      }\n    }\n\n    boundingBox.x1 = x1;\n    boundingBox.x2 = x2;\n    boundingBox.y1 = y1;\n    boundingBox.y2 = y2;\n  }\n};","/**\n * Represents 3d drag force, which reduces force value on each step by given\n * coefficient.\n *\n * @param {Object} options for the drag force\n * @param {Number=} options.dragCoeff drag force coefficient. 0.1 by default\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge'),\n      expose = require('ngraph.expose');\n\n  options = merge(options, {\n    dragCoeff: 0.02\n  });\n  var api = {\n    update: function update(body) {\n      body.force.x -= options.dragCoeff * body.velocity.x;\n      body.force.y -= options.dragCoeff * body.velocity.y;\n      body.force.z -= options.dragCoeff * body.velocity.z;\n    }\n  }; // let easy access to dragCoeff:\n\n  expose(options, api, ['dragCoeff']);\n  return api;\n};","/* global CANNON */\n\n/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Handles events coming from the hand-controls.\n * Determines if the entity is grabbed or released.\n * Updates its position to move along the controller.\n */\nmodule.exports = AFRAME.registerComponent('grab', {\n  init: function init() {\n    this.system = this.el.sceneEl.systems.physics;\n    this.GRABBED_STATE = 'grabbed';\n    this.grabbing = false;\n    this.hitEl =\n    /** @type {AFRAME.Element}    */\n    null;\n    this.physics =\n    /** @type {AFRAME.System}     */\n    this.el.sceneEl.systems.physics;\n    this.constraint =\n    /** @type {CANNON.Constraint} */\n    null; // Bind event handlers\n\n    this.onHit = this.onHit.bind(this);\n    this.onGripOpen = this.onGripOpen.bind(this);\n    this.onGripClose = this.onGripClose.bind(this);\n  },\n  play: function play() {\n    var el = this.el;\n    el.addEventListener('hit', this.onHit);\n    el.addEventListener('gripdown', this.onGripClose);\n    el.addEventListener('gripup', this.onGripOpen);\n    el.addEventListener('trackpaddown', this.onGripClose);\n    el.addEventListener('trackpadup', this.onGripOpen);\n    el.addEventListener('triggerdown', this.onGripClose);\n    el.addEventListener('triggerup', this.onGripOpen);\n  },\n  pause: function pause() {\n    var el = this.el;\n    el.removeEventListener('hit', this.onHit);\n    el.removeEventListener('gripdown', this.onGripClose);\n    el.removeEventListener('gripup', this.onGripOpen);\n    el.removeEventListener('trackpaddown', this.onGripClose);\n    el.removeEventListener('trackpadup', this.onGripOpen);\n    el.removeEventListener('triggerdown', this.onGripClose);\n    el.removeEventListener('triggerup', this.onGripOpen);\n  },\n  onGripClose: function onGripClose() {\n    this.grabbing = true;\n  },\n  onGripOpen: function onGripOpen() {\n    var hitEl = this.hitEl;\n    this.grabbing = false;\n\n    if (!hitEl) {\n      return;\n    }\n\n    hitEl.removeState(this.GRABBED_STATE);\n    this.hitEl = undefined;\n    this.system.removeConstraint(this.constraint);\n    this.constraint = null;\n  },\n  onHit: function onHit(evt) {\n    var hitEl = evt.detail.el; // If the element is already grabbed (it could be grabbed by another controller).\n    // If the hand is not grabbing the element does not stick.\n    // If we're already grabbing something you can't grab again.\n\n    if (!hitEl || hitEl.is(this.GRABBED_STATE) || !this.grabbing || this.hitEl) {\n      return;\n    }\n\n    hitEl.addState(this.GRABBED_STATE);\n    this.hitEl = hitEl;\n    this.constraint = new CANNON.LockConstraint(this.el.body, hitEl.body);\n    this.system.addConstraint(this.constraint);\n  }\n});","/**\n * Movement Controls\n *\n * @author Don McCurdy <dm@donmccurdy.com>\n */\nvar COMPONENT_SUFFIX = '-controls',\n    MAX_DELTA = 0.2,\n    // ms\nEPS = 10e-6;\nmodule.exports = AFRAME.registerComponent('movement-controls', {\n  /*******************************************************************\n   * Schema\n   */\n  dependencies: ['rotation'],\n  schema: {\n    enabled: {\n      default: true\n    },\n    controls: {\n      default: ['gamepad', 'trackpad', 'keyboard', 'touch']\n    },\n    speed: {\n      default: 0.3,\n      min: 0\n    },\n    fly: {\n      default: false\n    },\n    constrainToNavMesh: {\n      default: false\n    },\n    camera: {\n      default: '[movement-controls] [camera]',\n      type: 'selector'\n    }\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n  init: function init() {\n    var el = this.el;\n    this.velocityCtrl = null;\n    this.velocity = new THREE.Vector3();\n    this.heading = new THREE.Quaternion(); // Navigation\n\n    this.navGroup = null;\n    this.navNode = null;\n\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    } else {\n      el.sceneEl.addEventListener('loaded', this.injectControls.bind(this));\n    }\n  },\n  update: function update(prevData) {\n    var el = this.el;\n    var data = this.data;\n    var nav = el.sceneEl.systems.nav;\n\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    }\n\n    if (nav && data.constrainToNavMesh !== prevData.constrainToNavMesh) {\n      data.constrainToNavMesh ? nav.addAgent(this) : nav.removeAgent(this);\n    }\n  },\n  injectControls: function injectControls() {\n    var data = this.data;\n    var name;\n\n    for (var i = 0; i < data.controls.length; i++) {\n      name = data.controls[i] + COMPONENT_SUFFIX;\n\n      if (!this.el.components[name]) {\n        this.el.setAttribute(name, '');\n      }\n    }\n  },\n  updateNavLocation: function updateNavLocation() {\n    this.navGroup = null;\n    this.navNode = null;\n  },\n\n  /*******************************************************************\n   * Tick\n   */\n  tick: function () {\n    var start = new THREE.Vector3();\n    var end = new THREE.Vector3();\n    var clampedEnd = new THREE.Vector3();\n    return function (t, dt) {\n      if (!dt) return;\n      var el = this.el;\n      var data = this.data;\n      if (!data.enabled) return;\n      this.updateVelocityCtrl();\n      var velocityCtrl = this.velocityCtrl;\n      var velocity = this.velocity;\n      if (!velocityCtrl) return; // Update velocity. If FPS is too low, reset.\n\n      if (dt / 1000 > MAX_DELTA) {\n        velocity.set(0, 0, 0);\n      } else {\n        this.updateVelocity(dt);\n      }\n\n      if (data.constrainToNavMesh && velocityCtrl.isNavMeshConstrained !== false) {\n        if (velocity.lengthSq() < EPS) return;\n        start.copy(el.object3D.position);\n        end.copy(velocity).multiplyScalar(dt / 1000).add(start);\n        var nav = el.sceneEl.systems.nav;\n        this.navGroup = this.navGroup === null ? nav.getGroup(start) : this.navGroup;\n        this.navNode = this.navNode || nav.getNode(start, this.navGroup);\n        this.navNode = nav.clampStep(start, end, this.navGroup, this.navNode, clampedEnd);\n        el.object3D.position.copy(clampedEnd);\n      } else if (el.hasAttribute('velocity')) {\n        el.setAttribute('velocity', velocity);\n      } else {\n        el.object3D.position.x += velocity.x * dt / 1000;\n        el.object3D.position.y += velocity.y * dt / 1000;\n        el.object3D.position.z += velocity.z * dt / 1000;\n      }\n    };\n  }(),\n\n  /*******************************************************************\n   * Movement\n   */\n  updateVelocityCtrl: function updateVelocityCtrl() {\n    var data = this.data;\n\n    if (data.enabled) {\n      for (var i = 0, l = data.controls.length; i < l; i++) {\n        var control = this.el.components[data.controls[i] + COMPONENT_SUFFIX];\n\n        if (control && control.isVelocityActive()) {\n          this.velocityCtrl = control;\n          return;\n        }\n      }\n\n      this.velocityCtrl = null;\n    }\n  },\n  updateVelocity: function () {\n    var vector2 = new THREE.Vector2();\n    var quaternion = new THREE.Quaternion();\n    return function (dt) {\n      var dVelocity;\n      var el = this.el;\n      var control = this.velocityCtrl;\n      var velocity = this.velocity;\n      var data = this.data;\n\n      if (control) {\n        if (control.getVelocityDelta) {\n          dVelocity = control.getVelocityDelta(dt);\n        } else if (control.getVelocity) {\n          velocity.copy(control.getVelocity());\n          return;\n        } else if (control.getPositionDelta) {\n          velocity.copy(control.getPositionDelta(dt).multiplyScalar(1000 / dt));\n          return;\n        } else {\n          throw new Error('Incompatible movement controls: ', control);\n        }\n      }\n\n      if (el.hasAttribute('velocity') && !data.constrainToNavMesh) {\n        velocity.copy(this.el.getAttribute('velocity'));\n      }\n\n      if (dVelocity && data.enabled) {\n        var cameraEl = data.camera; // Rotate to heading\n\n        quaternion.copy(cameraEl.object3D.quaternion);\n        quaternion.premultiply(el.object3D.quaternion);\n        dVelocity.applyQuaternion(quaternion);\n        var factor = dVelocity.length();\n\n        if (data.fly) {\n          velocity.copy(dVelocity);\n          velocity.multiplyScalar(this.data.speed * 16.66667);\n        } else {\n          vector2.set(dVelocity.x, dVelocity.z);\n          vector2.setLength(factor * this.data.speed * 16.66667);\n          velocity.x = vector2.x;\n          velocity.z = vector2.y;\n        }\n      }\n    };\n  }()\n});","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/** Used as references for various `Number` constants. */\n\nvar NAN = 0 / 0;\n/** `Object#toString` result references. */\n\nvar symbolTag = '[object Symbol]';\n/** Used to match leading and trailing whitespace. */\n\nvar reTrim = /^\\s+|\\s+$/g;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/** Detect free variable `global` from Node.js. */\n\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n/** Detect free variable `self`. */\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\n/** Used for built-in method references. */\n\nvar objectProto = Object.prototype;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar objectToString = objectProto.toString;\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n\nvar now = function now() {\n  return root.Date.now();\n};\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n\n\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  wait = toNumber(wait) || 0;\n\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time; // Start the timer for the trailing edge.\n\n    timerId = setTimeout(timerExpired, wait); // Invoke the leading edge.\n\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n\n  function timerExpired() {\n    var time = now();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    } // Restart the timer.\n\n\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined; // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\n\n\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\n\n\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n\n\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike(value) && objectToString.call(value) == symbolTag;\n}\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nmodule.exports = throttle;","require('../../lib/keyboard.polyfill');\n\nvar MAX_DELTA = 0.2,\n    PROXY_FLAG = '__keyboard-controls-proxy';\nvar KeyboardEvent = window.KeyboardEvent;\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if youre a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\n\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled: {\n      default: true\n    },\n    debug: {\n      default: false\n    }\n  },\n  init: function init() {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this)\n    };\n    this.attachEventListeners();\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n  isVelocityActive: function isVelocityActive() {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    var data = this.data,\n        keys = this.getKeys();\n    this.dVelocity.set(0, 0, 0);\n\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp) {\n        this.dVelocity.z -= 1;\n      }\n\n      if (keys.KeyA || keys.ArrowLeft) {\n        this.dVelocity.x -= 1;\n      }\n\n      if (keys.KeyS || keys.ArrowDown) {\n        this.dVelocity.z += 1;\n      }\n\n      if (keys.KeyD || keys.ArrowRight) {\n        this.dVelocity.x += 1;\n      }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n  play: function play() {\n    this.attachEventListeners();\n  },\n  pause: function pause() {\n    this.removeEventListeners();\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  attachEventListeners: function attachEventListeners() {\n    window.addEventListener('keydown', this.listeners.keydown, false);\n    window.addEventListener('keyup', this.listeners.keyup, false);\n    window.addEventListener('blur', this.listeners.blur, false);\n  },\n  removeEventListeners: function removeEventListeners() {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n  onKeyDown: function onKeyDown(event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n  onKeyUp: function onKeyUp(event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n  onBlur: function onBlur() {\n    for (var code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n  emit: function emit(event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    } // Emit convenience event, identifying key.\n\n\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n  isPressed: function isPressed(code) {\n    return code in this.getKeys();\n  },\n  getKeys: function getKeys() {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n\n    return this.localKeys;\n  },\n  isProxied: function isProxied() {\n    var proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n});","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function min(values, valueof) {\n  var min;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (min > _value || min === undefined && _value >= _value)) {\n          min = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return min;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function max(values, valueof) {\n  var max;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (max < _value || max === undefined && _value >= _value)) {\n          max = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return max;\n}","import indexBy from 'index-array-by';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction diffArrays(prev, next, idAccessor) {\n  var result = {\n    enter: [],\n    update: [],\n    exit: []\n  };\n\n  if (!idAccessor) {\n    // use object references for comparison\n    var prevSet = new Set(prev);\n    var nextSet = new Set(next);\n    new Set([].concat(_toConsumableArray(prevSet), _toConsumableArray(nextSet))).forEach(function (item) {\n      var type = !prevSet.has(item) ? 'enter' : !nextSet.has(item) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [item, item] : item);\n    });\n  } else {\n    // compare by id (duplicate keys are ignored)\n    var prevById = indexBy(prev, idAccessor, false);\n    var nextById = indexBy(next, idAccessor, false);\n    var byId = Object.assign({}, prevById, nextById);\n    Object.entries(byId).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          id = _ref2[0],\n          item = _ref2[1];\n\n      var type = !prevById.hasOwnProperty(id) ? 'enter' : !nextById.hasOwnProperty(id) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [prevById[id], nextById[id]] : item);\n    });\n  }\n\n  return result;\n}\n\nfunction dataBindDiff(data, existingObjs, _ref3) {\n  var _ref3$objBindAttr = _ref3.objBindAttr,\n      objBindAttr = _ref3$objBindAttr === void 0 ? '__obj' : _ref3$objBindAttr,\n      _ref3$dataBindAttr = _ref3.dataBindAttr,\n      dataBindAttr = _ref3$dataBindAttr === void 0 ? '__data' : _ref3$dataBindAttr,\n      idAccessor = _ref3.idAccessor,\n      _ref3$purge = _ref3.purge,\n      purge = _ref3$purge === void 0 ? false : _ref3$purge;\n\n  var isObjValid = function isObjValid(obj) {\n    return obj.hasOwnProperty(dataBindAttr);\n  };\n\n  var removeObjs = existingObjs.filter(function (obj) {\n    return !isObjValid(obj);\n  });\n  var prevD = existingObjs.filter(isObjValid).map(function (obj) {\n    return obj[dataBindAttr];\n  });\n  var nextD = data;\n  var diff = purge ? {\n    enter: nextD,\n    exit: prevD,\n    update: []\n  } // don't diff data in purge mode\n  : diffArrays(prevD, nextD, idAccessor);\n  diff.update = diff.update.map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        prevD = _ref5[0],\n        nextD = _ref5[1];\n\n    if (prevD !== nextD) {\n      // transfer obj to new data point (if different)\n      nextD[objBindAttr] = prevD[objBindAttr];\n      nextD[objBindAttr][dataBindAttr] = nextD;\n    }\n\n    return nextD;\n  });\n  diff.exit = diff.exit.concat(removeObjs.map(function (obj) {\n    return _defineProperty({}, objBindAttr, obj);\n  }));\n  return diff;\n}\n\nfunction viewDigest(data, existingObjs, // list\nappendObj, // item => {...} function\nremoveObj, // item => {...} function\n_ref7) {\n  var _ref7$createObj = _ref7.createObj,\n      createObj = _ref7$createObj === void 0 ? function (d) {\n    return {};\n  } : _ref7$createObj,\n      _ref7$updateObj = _ref7.updateObj,\n      updateObj = _ref7$updateObj === void 0 ? function (obj, d) {} : _ref7$updateObj,\n      _ref7$exitObj = _ref7.exitObj,\n      exitObj = _ref7$exitObj === void 0 ? function (obj) {} : _ref7$exitObj,\n      _ref7$objBindAttr = _ref7.objBindAttr,\n      objBindAttr = _ref7$objBindAttr === void 0 ? '__obj' : _ref7$objBindAttr,\n      _ref7$dataBindAttr = _ref7.dataBindAttr,\n      dataBindAttr = _ref7$dataBindAttr === void 0 ? '__data' : _ref7$dataBindAttr,\n      dataDiffOptions = _objectWithoutProperties(_ref7, [\"createObj\", \"updateObj\", \"exitObj\", \"objBindAttr\", \"dataBindAttr\"]);\n\n  var _dataBindDiff = dataBindDiff(data, existingObjs, _objectSpread2({\n    objBindAttr: objBindAttr,\n    dataBindAttr: dataBindAttr\n  }, dataDiffOptions)),\n      enter = _dataBindDiff.enter,\n      update = _dataBindDiff.update,\n      exit = _dataBindDiff.exit; // Remove exiting points\n\n\n  exit.forEach(function (d) {\n    var obj = d[objBindAttr];\n    delete d[objBindAttr]; // unbind obj\n\n    exitObj(obj);\n    removeObj(obj);\n  });\n  var newObjs = createObjs(enter);\n  var pointsData = [].concat(_toConsumableArray(enter), _toConsumableArray(update));\n  updateObjs(pointsData); // Add new points\n\n  newObjs.forEach(appendObj); //\n\n  function createObjs(data) {\n    var newObjs = [];\n    data.forEach(function (d) {\n      var obj = createObj(d);\n\n      if (obj) {\n        obj[dataBindAttr] = d;\n        d[objBindAttr] = obj;\n        newObjs.push(obj);\n      }\n    });\n    return newObjs;\n  }\n\n  function updateObjs(data) {\n    data.forEach(function (d) {\n      var obj = d[objBindAttr];\n\n      if (obj) {\n        obj[dataBindAttr] = d;\n        updateObj(obj, d);\n      }\n    });\n  }\n}\n\nexport default viewDigest;","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0:\n      break;\n\n    case 1:\n      this.range(domain);\n      break;\n\n    default:\n      this.range(range).domain(domain);\n      break;\n  }\n\n  return this;\n}\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0:\n      break;\n\n    case 1:\n      {\n        if (typeof domain === \"function\") this.interpolator(domain);else this.range(domain);\n        break;\n      }\n\n    default:\n      {\n        this.domain(domain);\n        if (typeof interpolator === \"function\") this.interpolator(interpolator);else this.range(interpolator);\n        break;\n      }\n  }\n\n  return this;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { initRange } from \"./init.js\";\nexport var implicit = Symbol(\"implicit\");\nexport default function ordinal() {\n  var index = new Map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\",\n        i = index.get(key);\n\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function (_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new Map();\n\n    var _iterator = _createForOfIteratorHelper(_),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n        var key = value + \"\";\n        if (index.has(key)) continue;\n        index.set(key, domain.push(value));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return scale;\n  };\n\n  scale.range = function (_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function (_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function () {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n  return scale;\n}","import { Group, Mesh, MeshLambertMaterial, Color, BufferGeometry, BufferAttribute, Matrix4, Vector3, SphereBufferGeometry, CylinderBufferGeometry, TubeBufferGeometry, ConeBufferGeometry, Line, LineBasicMaterial, QuadraticBezierCurve3, CubicBezierCurve3, Box3 } from 'three';\nimport { forceSimulation, forceLink, forceManyBody, forceCenter, forceRadial } from 'd3-force-3d';\nimport graph from 'ngraph.graph';\nimport forcelayout from 'ngraph.forcelayout';\nimport forcelayout3d from 'ngraph.forcelayout3d';\nimport Kapsule from 'kapsule';\nimport accessorFn from 'accessor-fn';\nimport { min, max } from 'd3-array';\nimport dataJoint from 'data-joint';\nimport { scaleOrdinal } from 'd3-scale';\nimport { schemePaired } from 'd3-scale-chromatic';\nimport tinyColor from 'tinycolor2';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar materialDispose = function materialDispose(material) {\n  if (material instanceof Array) {\n    material.forEach(materialDispose);\n  } else {\n    if (material.map) {\n      material.map.dispose();\n    }\n\n    material.dispose();\n  }\n};\n\nvar deallocate = function deallocate(obj) {\n  if (obj.geometry) {\n    obj.geometry.dispose();\n  }\n\n  if (obj.material) {\n    materialDispose(obj.material);\n  }\n\n  if (obj.texture) {\n    obj.texture.dispose();\n  }\n\n  if (obj.children) {\n    obj.children.forEach(deallocate);\n  }\n};\n\nvar emptyObject = function emptyObject(obj) {\n  while (obj.children.length) {\n    var childObj = obj.children[0];\n    obj.remove(childObj);\n    deallocate(childObj);\n  }\n};\n\nfunction threeDigest(data, scene) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var _ref$objFilter = _ref.objFilter,\n      objFilter = _ref$objFilter === void 0 ? function () {\n    return true;\n  } : _ref$objFilter,\n      options = _objectWithoutProperties(_ref, [\"objFilter\"]);\n\n  return dataJoint(data, scene.children.filter(objFilter), function (obj) {\n    return scene.add(obj);\n  }, function (obj) {\n    scene.remove(obj);\n    emptyObject(obj);\n  }, _objectSpread2({\n    objBindAttr: '__threeObj'\n  }, options));\n}\n\nvar colorStr2Hex = function colorStr2Hex(str) {\n  return isNaN(str) ? parseInt(tinyColor(str).toHex(), 16) : str;\n};\n\nvar colorAlpha = function colorAlpha(str) {\n  return isNaN(str) ? tinyColor(str).getAlpha() : 1;\n};\n\nvar autoColorScale = scaleOrdinal(schemePaired); // Autoset attribute colorField by colorByAccessor property\n// If an object has already a color, don't set it\n// Objects can be nodes or links\n\nfunction autoColorObjects(objects, colorByAccessor, colorField) {\n  if (!colorByAccessor || typeof colorField !== 'string') return;\n  objects.filter(function (obj) {\n    return !obj[colorField];\n  }).forEach(function (obj) {\n    obj[colorField] = autoColorScale(colorByAccessor(obj));\n  });\n}\n\nfunction getDagDepths(_ref, idAccessor) {\n  var nodes = _ref.nodes,\n      links = _ref.links;\n\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref2$nodeFilter = _ref2.nodeFilter,\n      nodeFilter = _ref2$nodeFilter === void 0 ? function () {\n    return true;\n  } : _ref2$nodeFilter,\n      _ref2$onLoopError = _ref2.onLoopError,\n      onLoopError = _ref2$onLoopError === void 0 ? function (loopIds) {\n    throw \"Invalid DAG structure! Found cycle in node path: \".concat(loopIds.join(' -> '), \".\");\n  } : _ref2$onLoopError; // linked graph\n\n\n  var graph = {};\n  nodes.forEach(function (node) {\n    return graph[idAccessor(node)] = {\n      data: node,\n      out: [],\n      depth: -1,\n      skip: !nodeFilter(node)\n    };\n  });\n  links.forEach(function (_ref3) {\n    var source = _ref3.source,\n        target = _ref3.target;\n    var sourceId = getNodeId(source);\n    var targetId = getNodeId(target);\n    if (!graph.hasOwnProperty(sourceId)) throw \"Missing source node with id: \".concat(sourceId);\n    if (!graph.hasOwnProperty(targetId)) throw \"Missing target node with id: \".concat(targetId);\n    var sourceNode = graph[sourceId];\n    var targetNode = graph[targetId];\n    sourceNode.out.push(targetNode);\n\n    function getNodeId(node) {\n      return _typeof(node) === 'object' ? idAccessor(node) : node;\n    }\n  });\n  var foundLoops = [];\n  traverse(Object.values(graph));\n  var nodeDepths = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(graph).filter(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        node = _ref5[1];\n\n    return !node.skip;\n  }).map(function (_ref6) {\n    var _ref7 = _slicedToArray(_ref6, 2),\n        id = _ref7[0],\n        node = _ref7[1];\n\n    return _defineProperty({}, id, node.depth);\n  }))));\n  return nodeDepths;\n\n  function traverse(nodes) {\n    var nodeStack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var currentDepth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      var node = nodes[i];\n\n      if (nodeStack.indexOf(node) !== -1) {\n        var _ret = function () {\n          var loop = [].concat(_toConsumableArray(nodeStack.slice(nodeStack.indexOf(node))), [node]).map(function (d) {\n            return idAccessor(d.data);\n          });\n\n          if (!foundLoops.some(function (foundLoop) {\n            return foundLoop.length === loop.length && foundLoop.every(function (id, idx) {\n              return id === loop[idx];\n            });\n          })) {\n            foundLoops.push(loop);\n            onLoopError(loop);\n          }\n\n          return \"continue\";\n        }();\n\n        if (_ret === \"continue\") continue;\n      }\n\n      if (currentDepth > node.depth) {\n        // Don't unnecessarily revisit chunks of the graph\n        node.depth = currentDepth;\n        traverse(node.out, [].concat(_toConsumableArray(nodeStack), [node]), currentDepth + (node.skip ? 0 : 1));\n      }\n    }\n  }\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  Group: Group,\n  Mesh: Mesh,\n  MeshLambertMaterial: MeshLambertMaterial,\n  Color: Color,\n  BufferGeometry: BufferGeometry,\n  BufferAttribute: BufferAttribute,\n  Matrix4: Matrix4,\n  Vector3: Vector3,\n  SphereBufferGeometry: SphereBufferGeometry,\n  CylinderBufferGeometry: CylinderBufferGeometry,\n  TubeBufferGeometry: TubeBufferGeometry,\n  ConeBufferGeometry: ConeBufferGeometry,\n  Line: Line,\n  LineBasicMaterial: LineBasicMaterial,\n  QuadraticBezierCurve3: QuadraticBezierCurve3,\n  CubicBezierCurve3: CubicBezierCurve3,\n  Box3: Box3\n};\nvar ngraph = {\n  graph: graph,\n  forcelayout: forcelayout,\n  forcelayout3d: forcelayout3d\n};\nvar DAG_LEVEL_NODE_RATIO = 2; // support multiple method names for backwards threejs compatibility\n\nvar setAttributeFn = new three.BufferGeometry().setAttribute ? 'setAttribute' : 'addAttribute';\nvar applyMatrix4Fn = new three.BufferGeometry().applyMatrix4 ? 'applyMatrix4' : 'applyMatrix';\nvar ForceGraph = Kapsule({\n  props: {\n    jsonUrl: {\n      onChange: function onChange(jsonUrl, state) {\n        var _this = this;\n\n        if (jsonUrl && !state.fetchingJson) {\n          // Load data asynchronously\n          state.fetchingJson = true;\n          state.onLoading();\n          fetch(jsonUrl).then(function (r) {\n            return r.json();\n          }).then(function (json) {\n            state.fetchingJson = false;\n            state.onFinishLoading(json);\n\n            _this.graphData(json);\n          });\n        }\n      },\n      triggerUpdate: false\n    },\n    graphData: {\n      \"default\": {\n        nodes: [],\n        links: []\n      },\n      onChange: function onChange(graphData, state) {\n        if (graphData.nodes.length || graphData.links.length) {\n          console.info('force-graph loading', graphData.nodes.length + ' nodes', graphData.links.length + ' links');\n        }\n\n        state.engineRunning = false; // Pause simulation immediately\n      }\n    },\n    numDimensions: {\n      \"default\": 3,\n      onChange: function onChange(numDim, state) {\n        var chargeForce = state.d3ForceLayout.force('charge'); // Increase repulsion on 3D mode for improved spatial separation\n\n        if (chargeForce) {\n          chargeForce.strength(numDim > 2 ? -60 : -30);\n        }\n\n        if (numDim < 3) {\n          eraseDimension(state.graphData.nodes, 'z');\n        }\n\n        if (numDim < 2) {\n          eraseDimension(state.graphData.nodes, 'y');\n        }\n\n        function eraseDimension(nodes, dim) {\n          nodes.forEach(function (d) {\n            delete d[dim]; // position\n\n            delete d[\"v\".concat(dim)]; // velocity\n          });\n        }\n      }\n    },\n    dagMode: {\n      onChange: function onChange(dagMode, state) {\n        // td, bu, lr, rl, zin, zout, radialin, radialout\n        !dagMode && state.forceEngine === 'd3' && (state.graphData.nodes || []).forEach(function (n) {\n          return n.fx = n.fy = n.fz = undefined;\n        }); // unfix nodes when disabling dag mode\n      }\n    },\n    dagLevelDistance: {},\n    dagNodeFilter: {\n      \"default\": function _default(node) {\n        return true;\n      }\n    },\n    onDagError: {\n      triggerUpdate: false\n    },\n    nodeRelSize: {\n      \"default\": 4\n    },\n    // volume per val unit\n    nodeId: {\n      \"default\": 'id'\n    },\n    nodeVal: {\n      \"default\": 'val'\n    },\n    nodeResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the sphere's circumference\n    nodeColor: {\n      \"default\": 'color'\n    },\n    nodeAutoColorBy: {},\n    nodeOpacity: {\n      \"default\": 0.75\n    },\n    nodeVisibility: {\n      \"default\": true\n    },\n    nodeThreeObject: {},\n    nodeThreeObjectExtend: {\n      \"default\": false\n    },\n    linkSource: {\n      \"default\": 'source'\n    },\n    linkTarget: {\n      \"default\": 'target'\n    },\n    linkVisibility: {\n      \"default\": true\n    },\n    linkColor: {\n      \"default\": 'color'\n    },\n    linkAutoColorBy: {},\n    linkOpacity: {\n      \"default\": 0.2\n    },\n    linkWidth: {},\n    // Rounded to nearest decimal. For falsy values use dimensionless line with 1px regardless of distance.\n    linkResolution: {\n      \"default\": 6\n    },\n    // how many radial segments in each line tube's geometry\n    linkCurvature: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // line curvature radius (0: straight, 1: semi-circle)\n    linkCurveRotation: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // line curve rotation along the line axis (0: interection with XY plane, PI: upside down)\n    linkMaterial: {},\n    linkThreeObject: {},\n    linkThreeObjectExtend: {\n      \"default\": false\n    },\n    linkPositionUpdate: {\n      triggerUpdate: false\n    },\n    // custom function to call for updating the link's position. Signature: (threeObj, { start: { x, y, z},  end: { x, y, z }}, link). If the function returns a truthy value, the regular link position update will not run.\n    linkDirectionalArrowLength: {\n      \"default\": 0\n    },\n    linkDirectionalArrowColor: {},\n    linkDirectionalArrowRelPos: {\n      \"default\": 0.5,\n      triggerUpdate: false\n    },\n    // value between 0<>1 indicating the relative pos along the (exposed) line\n    linkDirectionalArrowResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the arrow's conic circumference\n    linkDirectionalParticles: {\n      \"default\": 0\n    },\n    // animate photons travelling in the link direction\n    linkDirectionalParticleSpeed: {\n      \"default\": 0.01,\n      triggerUpdate: false\n    },\n    // in link length ratio per frame\n    linkDirectionalParticleWidth: {\n      \"default\": 0.5\n    },\n    linkDirectionalParticleColor: {},\n    linkDirectionalParticleResolution: {\n      \"default\": 4\n    },\n    // how many slice segments in the particle sphere's circumference\n    forceEngine: {\n      \"default\": 'd3'\n    },\n    // d3 or ngraph\n    d3AlphaMin: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    d3AlphaDecay: {\n      \"default\": 0.0228,\n      triggerUpdate: false,\n      onChange: function onChange(alphaDecay, state) {\n        state.d3ForceLayout.alphaDecay(alphaDecay);\n      }\n    },\n    d3AlphaTarget: {\n      \"default\": 0,\n      triggerUpdate: false,\n      onChange: function onChange(alphaTarget, state) {\n        state.d3ForceLayout.alphaTarget(alphaTarget);\n      }\n    },\n    d3VelocityDecay: {\n      \"default\": 0.4,\n      triggerUpdate: false,\n      onChange: function onChange(velocityDecay, state) {\n        state.d3ForceLayout.velocityDecay(velocityDecay);\n      }\n    },\n    ngraphPhysics: {},\n    warmupTicks: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // how many times to tick the force engine at init before starting to render\n    cooldownTicks: {\n      \"default\": Infinity,\n      triggerUpdate: false\n    },\n    cooldownTime: {\n      \"default\": 15000,\n      triggerUpdate: false\n    },\n    // ms\n    onLoading: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onFinishLoading: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onUpdate: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onFinishUpdate: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onEngineTick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onEngineStop: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    refresh: function refresh(state) {\n      state._flushObjects = true;\n\n      state._rerender();\n\n      return this;\n    },\n    // Expose d3 forces for external manipulation\n    d3Force: function d3Force(state, forceName, forceFn) {\n      if (forceFn === undefined) {\n        return state.d3ForceLayout.force(forceName); // Force getter\n      }\n\n      state.d3ForceLayout.force(forceName, forceFn); // Force setter\n\n      return this;\n    },\n    d3ReheatSimulation: function d3ReheatSimulation(state) {\n      state.d3ForceLayout.alpha(1);\n      this.resetCountdown();\n      return this;\n    },\n    // reset cooldown state\n    resetCountdown: function resetCountdown(state) {\n      state.cntTicks = 0;\n      state.startTickTime = new Date();\n      state.engineRunning = true;\n      return this;\n    },\n    tickFrame: function tickFrame(state) {\n      var isD3Sim = state.forceEngine !== 'ngraph';\n\n      if (state.engineRunning) {\n        layoutTick();\n      }\n\n      updateArrows();\n      updatePhotons();\n      return this; //\n\n      function layoutTick() {\n        if (++state.cntTicks > state.cooldownTicks || new Date() - state.startTickTime > state.cooldownTime || isD3Sim && state.d3AlphaMin > 0 && state.d3ForceLayout.alpha() < state.d3AlphaMin) {\n          state.engineRunning = false; // Stop ticking graph\n\n          state.onEngineStop();\n        } else {\n          state.layout[isD3Sim ? 'tick' : 'step'](); // Tick it\n\n          state.onEngineTick();\n        } // Update nodes position\n\n\n        state.graphData.nodes.forEach(function (node) {\n          var obj = node.__threeObj;\n          if (!obj) return;\n          var pos = isD3Sim ? node : state.layout.getNodePosition(node[state.nodeId]);\n          obj.position.x = pos.x;\n          obj.position.y = pos.y || 0;\n          obj.position.z = pos.z || 0;\n        }); // Update links position\n\n        var linkWidthAccessor = accessorFn(state.linkWidth);\n        var linkCurvatureAccessor = accessorFn(state.linkCurvature);\n        var linkCurveRotationAccessor = accessorFn(state.linkCurveRotation);\n        var linkThreeObjectExtendAccessor = accessorFn(state.linkThreeObjectExtend);\n        state.graphData.links.forEach(function (link) {\n          var lineObj = link.__lineObj;\n          if (!lineObj) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          calcLinkCurve(link); // calculate link curve for all links, including custom replaced, so it can be used in directional functionality\n\n          var extendedObj = linkThreeObjectExtendAccessor(link);\n\n          if (state.linkPositionUpdate && state.linkPositionUpdate(extendedObj ? lineObj.children[1] : lineObj, // pass child custom object if extending the default\n          {\n            start: {\n              x: start.x,\n              y: start.y,\n              z: start.z\n            },\n            end: {\n              x: end.x,\n              y: end.y,\n              z: end.z\n            }\n          }, link) && !extendedObj) {\n            // exit if successfully custom updated position of non-extended obj\n            return;\n          }\n\n          var curveResolution = 30; // # line segments\n\n          var curve = link.__curve; // select default line obj if it's an extended group\n\n          var line = lineObj.children.length ? lineObj.children[0] : lineObj;\n\n          if (line.type === 'Line') {\n            // Update line geometry\n            if (!curve) {\n              // straight line\n              var linePos = line.geometry.getAttribute('position');\n\n              if (!linePos || !linePos.array || linePos.array.length !== 6) {\n                line.geometry[setAttributeFn]('position', linePos = new three.BufferAttribute(new Float32Array(2 * 3), 3));\n              }\n\n              linePos.array[0] = start.x;\n              linePos.array[1] = start.y || 0;\n              linePos.array[2] = start.z || 0;\n              linePos.array[3] = end.x;\n              linePos.array[4] = end.y || 0;\n              linePos.array[5] = end.z || 0;\n              linePos.needsUpdate = true;\n            } else {\n              // bezier curve line\n              line.geometry.setFromPoints(curve.getPoints(curveResolution));\n            }\n\n            line.geometry.computeBoundingSphere();\n          } else if (line.type === 'Mesh') {\n            // Update cylinder geometry\n            if (!curve) {\n              // straight tube\n              if (line.geometry.type !== 'CylinderBufferGeometry') {\n                var linkWidth = Math.ceil(linkWidthAccessor(link) * 10) / 10;\n                var r = linkWidth / 2;\n                var geometry = new three.CylinderBufferGeometry(r, r, 1, state.linkResolution, 1, false);\n                geometry[applyMatrix4Fn](new three.Matrix4().makeTranslation(0, 1 / 2, 0));\n                geometry[applyMatrix4Fn](new three.Matrix4().makeRotationX(Math.PI / 2));\n                line.geometry.dispose();\n                line.geometry = geometry;\n              }\n\n              var vStart = new three.Vector3(start.x, start.y || 0, start.z || 0);\n              var vEnd = new three.Vector3(end.x, end.y || 0, end.z || 0);\n              var distance = vStart.distanceTo(vEnd);\n              line.position.x = vStart.x;\n              line.position.y = vStart.y;\n              line.position.z = vStart.z;\n              line.scale.z = distance;\n              line.parent.localToWorld(vEnd); // lookAt requires world coords\n\n              line.lookAt(vEnd);\n            } else {\n              // curved tube\n              if (line.geometry.type !== 'TubeBufferGeometry') {\n                // reset object positioning\n                line.position.set(0, 0, 0);\n                line.rotation.set(0, 0, 0);\n                line.scale.set(1, 1, 1);\n              }\n\n              var _linkWidth = Math.ceil(linkWidthAccessor(link) * 10) / 10;\n\n              var _r = _linkWidth / 2;\n\n              var _geometry = new three.TubeBufferGeometry(curve, curveResolution, _r, state.linkResolution, false);\n\n              line.geometry.dispose();\n              line.geometry = _geometry;\n            }\n          }\n        }); //\n\n        function calcLinkCurve(link) {\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var curvature = linkCurvatureAccessor(link);\n\n          if (!curvature) {\n            link.__curve = null; // Straight line\n          } else {\n            // bezier curve line (only for line types)\n            var vStart = new three.Vector3(start.x, start.y || 0, start.z || 0);\n            var vEnd = new three.Vector3(end.x, end.y || 0, end.z || 0);\n            var l = vStart.distanceTo(vEnd); // line length\n\n            var curve;\n            var curveRotation = linkCurveRotationAccessor(link);\n\n            if (l > 0) {\n              var dx = end.x - start.x;\n              var dy = end.y - start.y || 0;\n              var vLine = new three.Vector3().subVectors(vEnd, vStart);\n              var cp = vLine.clone().multiplyScalar(curvature).cross(dx !== 0 || dy !== 0 ? new three.Vector3(0, 0, 1) : new three.Vector3(0, 1, 0)) // avoid cross-product of parallel vectors (prefer Z, fallback to Y)\n              .applyAxisAngle(vLine.normalize(), curveRotation) // rotate along line axis according to linkCurveRotation\n              .add(new three.Vector3().addVectors(vStart, vEnd).divideScalar(2));\n              curve = new three.QuadraticBezierCurve3(vStart, cp, vEnd);\n            } else {\n              // Same point, draw a loop\n              var d = curvature * 70;\n              var endAngle = -curveRotation; // Rotate clockwise (from Z angle perspective)\n\n              var startAngle = endAngle + Math.PI / 2;\n              curve = new three.CubicBezierCurve3(vStart, new three.Vector3(d * Math.cos(startAngle), d * Math.sin(startAngle), 0).add(vStart), new three.Vector3(d * Math.cos(endAngle), d * Math.sin(endAngle), 0).add(vStart), vEnd);\n            }\n\n            link.__curve = curve;\n          }\n        }\n      }\n\n      function updateArrows() {\n        // update link arrow position\n        var arrowRelPosAccessor = accessorFn(state.linkDirectionalArrowRelPos);\n        var arrowLengthAccessor = accessorFn(state.linkDirectionalArrowLength);\n        var nodeValAccessor = accessorFn(state.nodeVal);\n        state.graphData.links.forEach(function (link) {\n          var arrowObj = link.__arrowObj;\n          if (!arrowObj) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var startR = Math.sqrt(Math.max(0, nodeValAccessor(start) || 1)) * state.nodeRelSize;\n          var endR = Math.sqrt(Math.max(0, nodeValAccessor(end) || 1)) * state.nodeRelSize;\n          var arrowLength = arrowLengthAccessor(link);\n          var arrowRelPos = arrowRelPosAccessor(link);\n          var getPosAlongLine = link.__curve ? function (t) {\n            return link.__curve.getPoint(t);\n          } // interpolate along bezier curve\n          : function (t) {\n            // straight line: interpolate linearly\n            var iplt = function iplt(dim, start, end, t) {\n              return start[dim] + (end[dim] - start[dim]) * t || 0;\n            };\n\n            return {\n              x: iplt('x', start, end, t),\n              y: iplt('y', start, end, t),\n              z: iplt('z', start, end, t)\n            };\n          };\n          var lineLen = link.__curve ? link.__curve.getLength() : Math.sqrt(['x', 'y', 'z'].map(function (dim) {\n            return Math.pow((end[dim] || 0) - (start[dim] || 0), 2);\n          }).reduce(function (acc, v) {\n            return acc + v;\n          }, 0));\n          var posAlongLine = startR + arrowLength + (lineLen - startR - endR - arrowLength) * arrowRelPos;\n          var arrowHead = getPosAlongLine(posAlongLine / lineLen);\n          var arrowTail = getPosAlongLine((posAlongLine - arrowLength) / lineLen);\n          ['x', 'y', 'z'].forEach(function (dim) {\n            return arrowObj.position[dim] = arrowTail[dim];\n          });\n\n          var headVec = _construct(three.Vector3, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n            return arrowHead[c];\n          })));\n\n          arrowObj.parent.localToWorld(headVec); // lookAt requires world coords\n\n          arrowObj.lookAt(headVec);\n        });\n      }\n\n      function updatePhotons() {\n        // update link particle positions\n        var particleSpeedAccessor = accessorFn(state.linkDirectionalParticleSpeed);\n        state.graphData.links.forEach(function (link) {\n          var cyclePhotons = link.__photonsObj && link.__photonsObj.children;\n          var singleHopPhotons = link.__singleHopPhotonsObj && link.__singleHopPhotonsObj.children;\n          if ((!singleHopPhotons || !singleHopPhotons.length) && (!cyclePhotons || !cyclePhotons.length)) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var particleSpeed = particleSpeedAccessor(link);\n          var getPhotonPos = link.__curve ? function (t) {\n            return link.__curve.getPoint(t);\n          } // interpolate along bezier curve\n          : function (t) {\n            // straight line: interpolate linearly\n            var iplt = function iplt(dim, start, end, t) {\n              return start[dim] + (end[dim] - start[dim]) * t || 0;\n            };\n\n            return {\n              x: iplt('x', start, end, t),\n              y: iplt('y', start, end, t),\n              z: iplt('z', start, end, t)\n            };\n          };\n          var photons = [].concat(_toConsumableArray(cyclePhotons || []), _toConsumableArray(singleHopPhotons || []));\n          photons.forEach(function (photon, idx) {\n            var singleHop = photon.parent.__linkThreeObjType === 'singleHopPhotons';\n\n            if (!photon.hasOwnProperty('__progressRatio')) {\n              photon.__progressRatio = singleHop ? 0 : idx / cyclePhotons.length;\n            }\n\n            photon.__progressRatio += particleSpeed;\n\n            if (photon.__progressRatio >= 1) {\n              if (!singleHop) {\n                photon.__progressRatio = photon.__progressRatio % 1;\n              } else {\n                // remove particle\n                photon.parent.remove(photon);\n                emptyObject(photon);\n                return;\n              }\n            }\n\n            var photonPosRatio = photon.__progressRatio;\n            var pos = getPhotonPos(photonPosRatio);\n            ['x', 'y', 'z'].forEach(function (dim) {\n              return photon.position[dim] = pos[dim];\n            });\n          });\n        });\n      }\n    },\n    emitParticle: function emitParticle(state, link) {\n      if (link) {\n        if (!link.__singleHopPhotonsObj) {\n          var obj = new three.Group();\n          obj.__linkThreeObjType = 'singleHopPhotons';\n          link.__singleHopPhotonsObj = obj;\n          state.graphScene.add(obj);\n        }\n\n        var particleWidthAccessor = accessorFn(state.linkDirectionalParticleWidth);\n        var photonR = Math.ceil(particleWidthAccessor(link) * 10) / 10 / 2;\n        var numSegments = state.linkDirectionalParticleResolution;\n        var particleGeometry = new three.SphereBufferGeometry(photonR, numSegments, numSegments);\n        var linkColorAccessor = accessorFn(state.linkColor);\n        var particleColorAccessor = accessorFn(state.linkDirectionalParticleColor);\n        var photonColor = particleColorAccessor(link) || linkColorAccessor(link) || '#f0f0f0';\n        var materialColor = new three.Color(colorStr2Hex(photonColor));\n        var opacity = state.linkOpacity * 3;\n        var particleMaterial = new three.MeshLambertMaterial({\n          color: materialColor,\n          transparent: true,\n          opacity: opacity\n        }); // add a single hop particle\n\n        link.__singleHopPhotonsObj.add(new three.Mesh(particleGeometry, particleMaterial));\n      }\n\n      return this;\n    },\n    getGraphBbox: function getGraphBbox(state) {\n      var nodeFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      if (!state.initialised) return null; // recursively collect all nested geometries bboxes\n\n      var bboxes = function getBboxes(obj) {\n        var bboxes = [];\n\n        if (obj.geometry) {\n          obj.geometry.computeBoundingBox();\n          var box = new three.Box3();\n          box.copy(obj.geometry.boundingBox).applyMatrix4(obj.matrixWorld);\n          bboxes.push(box);\n        }\n\n        return bboxes.concat.apply(bboxes, _toConsumableArray((obj.children || []).filter(function (obj) {\n          return !obj.hasOwnProperty('__graphObjType') || obj.__graphObjType === 'node' && nodeFilter(obj.__data);\n        } // exclude filtered out nodes\n        ).map(getBboxes)));\n      }(state.graphScene);\n\n      if (!bboxes.length) return null; // extract global x,y,z min/max\n\n      return Object.assign.apply(Object, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n        return _defineProperty({}, c, [min(bboxes, function (bb) {\n          return bb.min[c];\n        }), max(bboxes, function (bb) {\n          return bb.max[c];\n        })]);\n      })));\n    }\n  },\n  stateInit: function stateInit() {\n    return {\n      d3ForceLayout: forceSimulation().force('link', forceLink()).force('charge', forceManyBody()).force('center', forceCenter()).force('dagRadial', null).stop(),\n      engineRunning: false\n    };\n  },\n  init: function init(threeObj, state) {\n    // Main three object to manipulate\n    state.graphScene = threeObj;\n  },\n  update: function update(state, changedProps) {\n    var hasAnyPropChanged = function hasAnyPropChanged(propList) {\n      return propList.some(function (p) {\n        return changedProps.hasOwnProperty(p);\n      });\n    };\n\n    state.engineRunning = false; // pause simulation\n\n    state.onUpdate();\n\n    if (state.nodeAutoColorBy !== null && hasAnyPropChanged(['nodeAutoColorBy', 'graphData', 'nodeColor'])) {\n      // Auto add color to uncolored nodes\n      autoColorObjects(state.graphData.nodes, accessorFn(state.nodeAutoColorBy), state.nodeColor);\n    }\n\n    if (state.linkAutoColorBy !== null && hasAnyPropChanged(['linkAutoColorBy', 'graphData', 'linkColor'])) {\n      // Auto add color to uncolored links\n      autoColorObjects(state.graphData.links, accessorFn(state.linkAutoColorBy), state.linkColor);\n    } // Digest nodes WebGL objects\n\n\n    if (state._flushObjects || hasAnyPropChanged(['graphData', 'nodeThreeObject', 'nodeThreeObjectExtend', 'nodeVal', 'nodeColor', 'nodeVisibility', 'nodeRelSize', 'nodeResolution', 'nodeOpacity'])) {\n      var customObjectAccessor = accessorFn(state.nodeThreeObject);\n      var customObjectExtendAccessor = accessorFn(state.nodeThreeObjectExtend);\n      var valAccessor = accessorFn(state.nodeVal);\n      var colorAccessor = accessorFn(state.nodeColor);\n      var visibilityAccessor = accessorFn(state.nodeVisibility);\n      var sphereGeometries = {}; // indexed by node value\n\n      var sphereMaterials = {}; // indexed by color\n\n      threeDigest(state.graphData.nodes.filter(visibilityAccessor), state.graphScene, {\n        purge: state._flushObjects || hasAnyPropChanged([// recreate objects if any of these props have changed\n        'nodeThreeObject', 'nodeThreeObjectExtend']),\n        objFilter: function objFilter(obj) {\n          return obj.__graphObjType === 'node';\n        },\n        createObj: function createObj(node) {\n          var customObj = customObjectAccessor(node);\n          var extendObj = customObjectExtendAccessor(node);\n\n          if (customObj && state.nodeThreeObject === customObj) {\n            // clone object if it's a shared object among all nodes\n            customObj = customObj.clone();\n          }\n\n          var obj;\n\n          if (customObj && !extendObj) {\n            obj = customObj;\n          } else {\n            // Add default object (sphere mesh)\n            obj = new three.Mesh();\n            obj.__graphDefaultObj = true;\n\n            if (customObj && extendObj) {\n              obj.add(customObj); // extend default with custom\n            }\n          }\n\n          obj.__graphObjType = 'node'; // Add object type\n\n          return obj;\n        },\n        updateObj: function updateObj(obj, node) {\n          if (obj.__graphDefaultObj) {\n            // bypass internal updates for custom node objects\n            var val = valAccessor(node) || 1;\n            var radius = Math.cbrt(val) * state.nodeRelSize;\n            var numSegments = state.nodeResolution;\n\n            if (obj.geometry.type !== 'SphereBufferGeometry' || obj.geometry.parameters.radius !== radius || obj.geometry.parameters.widthSegments !== numSegments) {\n              if (!sphereGeometries.hasOwnProperty(val)) {\n                sphereGeometries[val] = new three.SphereBufferGeometry(radius, numSegments, numSegments);\n              }\n\n              obj.geometry.dispose();\n              obj.geometry = sphereGeometries[val];\n            }\n\n            var color = colorAccessor(node);\n            var materialColor = new three.Color(colorStr2Hex(color || '#ffffaa'));\n            var opacity = state.nodeOpacity * colorAlpha(color);\n\n            if (obj.material.type !== 'MeshLambertMaterial' || !obj.material.color.equals(materialColor) || obj.material.opacity !== opacity) {\n              if (!sphereMaterials.hasOwnProperty(color)) {\n                sphereMaterials[color] = new three.MeshLambertMaterial({\n                  color: materialColor,\n                  transparent: true,\n                  opacity: opacity\n                });\n              }\n\n              obj.material.dispose();\n              obj.material = sphereMaterials[color];\n            }\n          }\n        }\n      });\n    } // Digest links WebGL objects\n\n\n    if (state._flushObjects || hasAnyPropChanged(['graphData', 'linkThreeObject', 'linkThreeObjectExtend', 'linkMaterial', 'linkColor', 'linkWidth', 'linkVisibility', 'linkResolution', 'linkOpacity', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution'])) {\n      var _customObjectAccessor = accessorFn(state.linkThreeObject);\n\n      var _customObjectExtendAccessor = accessorFn(state.linkThreeObjectExtend);\n\n      var customMaterialAccessor = accessorFn(state.linkMaterial);\n\n      var _visibilityAccessor = accessorFn(state.linkVisibility);\n\n      var _colorAccessor = accessorFn(state.linkColor);\n\n      var widthAccessor = accessorFn(state.linkWidth);\n      var cylinderGeometries = {}; // indexed by link width\n\n      var lambertLineMaterials = {}; // for cylinder objects, indexed by link color\n\n      var basicLineMaterials = {}; // for line objects, indexed by link color\n\n      var visibleLinks = state.graphData.links.filter(_visibilityAccessor); // lines digest cycle\n\n      threeDigest(visibleLinks, state.graphScene, {\n        objBindAttr: '__lineObj',\n        purge: state._flushObjects || hasAnyPropChanged([// recreate objects if any of these props have changed\n        'linkThreeObject', 'linkThreeObjectExtend', 'linkWidth']),\n        objFilter: function objFilter(obj) {\n          return obj.__graphObjType === 'link';\n        },\n        createObj: function createObj(link) {\n          var customObj = _customObjectAccessor(link);\n\n          var extendObj = _customObjectExtendAccessor(link);\n\n          if (customObj && state.linkThreeObject === customObj) {\n            // clone object if it's a shared object among all links\n            customObj = customObj.clone();\n          }\n\n          var defaultObj;\n\n          if (!customObj || extendObj) {\n            // construct default line obj\n            var useCylinder = !!widthAccessor(link);\n\n            if (useCylinder) {\n              defaultObj = new three.Mesh();\n            } else {\n              // Use plain line (constant width)\n              var lineGeometry = new three.BufferGeometry();\n              lineGeometry[setAttributeFn]('position', new three.BufferAttribute(new Float32Array(2 * 3), 3));\n              defaultObj = new three.Line(lineGeometry);\n            }\n          }\n\n          var obj;\n\n          if (!customObj) {\n            obj = defaultObj;\n            obj.__graphDefaultObj = true;\n          } else {\n            if (!extendObj) {\n              // use custom object\n              obj = customObj;\n            } else {\n              // extend default with custom in a group\n              obj = new three.Group();\n              obj.__graphDefaultObj = true;\n              obj.add(defaultObj);\n              obj.add(customObj);\n            }\n          }\n\n          obj.renderOrder = 10; // Prevent visual glitches of dark lines on top of nodes by rendering them last\n\n          obj.__graphObjType = 'link'; // Add object type\n\n          return obj;\n        },\n        updateObj: function updateObj(updObj, link) {\n          if (updObj.__graphDefaultObj) {\n            // bypass internal updates for custom link objects\n            // select default object if it's an extended group\n            var obj = updObj.children.length ? updObj.children[0] : updObj;\n            var linkWidth = Math.ceil(widthAccessor(link) * 10) / 10;\n            var useCylinder = !!linkWidth;\n\n            if (useCylinder) {\n              var r = linkWidth / 2;\n              var numSegments = state.linkResolution;\n\n              if (obj.geometry.type !== 'CylinderBufferGeometry' || obj.geometry.parameters.radiusTop !== r || obj.geometry.parameters.radialSegments !== numSegments) {\n                if (!cylinderGeometries.hasOwnProperty(linkWidth)) {\n                  var geometry = new three.CylinderBufferGeometry(r, r, 1, numSegments, 1, false);\n                  geometry[applyMatrix4Fn](new three.Matrix4().makeTranslation(0, 1 / 2, 0));\n                  geometry[applyMatrix4Fn](new three.Matrix4().makeRotationX(Math.PI / 2));\n                  cylinderGeometries[linkWidth] = geometry;\n                }\n\n                obj.geometry.dispose();\n                obj.geometry = cylinderGeometries[linkWidth];\n              }\n            }\n\n            var customMaterial = customMaterialAccessor(link);\n\n            if (customMaterial) {\n              obj.material = customMaterial;\n            } else {\n              var color = _colorAccessor(link);\n\n              var materialColor = new three.Color(colorStr2Hex(color || '#f0f0f0'));\n              var opacity = state.linkOpacity * colorAlpha(color);\n              var materialType = useCylinder ? 'MeshLambertMaterial' : 'LineBasicMaterial';\n\n              if (obj.material.type !== materialType || !obj.material.color.equals(materialColor) || obj.material.opacity !== opacity) {\n                var lineMaterials = useCylinder ? lambertLineMaterials : basicLineMaterials;\n\n                if (!lineMaterials.hasOwnProperty(color)) {\n                  lineMaterials[color] = new three[materialType]({\n                    color: materialColor,\n                    transparent: opacity < 1,\n                    opacity: opacity,\n                    depthWrite: opacity >= 1 // Prevent transparency issues\n\n                  });\n                }\n\n                obj.material.dispose();\n                obj.material = lineMaterials[color];\n              }\n            }\n          }\n        }\n      }); // Arrows digest cycle\n\n      if (state.linkDirectionalArrowLength || changedProps.hasOwnProperty('linkDirectionalArrowLength')) {\n        var arrowLengthAccessor = accessorFn(state.linkDirectionalArrowLength);\n        var arrowColorAccessor = accessorFn(state.linkDirectionalArrowColor);\n        threeDigest(visibleLinks.filter(arrowLengthAccessor), state.graphScene, {\n          objBindAttr: '__arrowObj',\n          objFilter: function objFilter(obj) {\n            return obj.__linkThreeObjType === 'arrow';\n          },\n          createObj: function createObj() {\n            var obj = new three.Mesh(undefined, new three.MeshLambertMaterial({\n              transparent: true\n            }));\n            obj.__linkThreeObjType = 'arrow'; // Add object type\n\n            return obj;\n          },\n          updateObj: function updateObj(obj, link) {\n            var arrowLength = arrowLengthAccessor(link);\n            var numSegments = state.linkDirectionalArrowResolution;\n\n            if (obj.geometry.type !== 'ConeBufferGeometry' || obj.geometry.parameters.height !== arrowLength || obj.geometry.parameters.radialSegments !== numSegments) {\n              var coneGeometry = new three.ConeBufferGeometry(arrowLength * 0.25, arrowLength, numSegments); // Correct orientation\n\n              coneGeometry.translate(0, arrowLength / 2, 0);\n              coneGeometry.rotateX(Math.PI / 2);\n              obj.geometry.dispose();\n              obj.geometry = coneGeometry;\n            }\n\n            obj.material.color = new three.Color(arrowColorAccessor(link) || _colorAccessor(link) || '#f0f0f0');\n            obj.material.opacity = state.linkOpacity * 3;\n          }\n        });\n      } // Photon particles digest cycle\n\n\n      if (state.linkDirectionalParticles || changedProps.hasOwnProperty('linkDirectionalParticles')) {\n        var particlesAccessor = accessorFn(state.linkDirectionalParticles);\n        var particleWidthAccessor = accessorFn(state.linkDirectionalParticleWidth);\n        var particleColorAccessor = accessorFn(state.linkDirectionalParticleColor);\n        var particleMaterials = {}; // indexed by link color\n\n        var particleGeometries = {}; // indexed by particle width\n\n        threeDigest(visibleLinks.filter(particlesAccessor), state.graphScene, {\n          objBindAttr: '__photonsObj',\n          objFilter: function objFilter(obj) {\n            return obj.__linkThreeObjType === 'photons';\n          },\n          createObj: function createObj() {\n            var obj = new three.Group();\n            obj.__linkThreeObjType = 'photons'; // Add object type\n\n            return obj;\n          },\n          updateObj: function updateObj(obj, link) {\n            var numPhotons = Math.round(Math.abs(particlesAccessor(link)));\n            var curPhoton = !!obj.children.length && obj.children[0];\n            var photonR = Math.ceil(particleWidthAccessor(link) * 10) / 10 / 2;\n            var numSegments = state.linkDirectionalParticleResolution;\n            var particleGeometry;\n\n            if (curPhoton && curPhoton.geometry.parameters.radius === photonR && curPhoton.geometry.parameters.widthSegments === numSegments) {\n              particleGeometry = curPhoton.geometry;\n            } else {\n              if (!particleGeometries.hasOwnProperty(photonR)) {\n                particleGeometries[photonR] = new three.SphereBufferGeometry(photonR, numSegments, numSegments);\n              }\n\n              particleGeometry = particleGeometries[photonR];\n              curPhoton && curPhoton.geometry.dispose();\n            }\n\n            var photonColor = particleColorAccessor(link) || _colorAccessor(link) || '#f0f0f0';\n            var materialColor = new three.Color(colorStr2Hex(photonColor));\n            var opacity = state.linkOpacity * 3;\n            var particleMaterial;\n\n            if (curPhoton && curPhoton.material.color.equals(materialColor) && curPhoton.material.opacity === opacity) {\n              particleMaterial = curPhoton.material;\n            } else {\n              if (!particleMaterials.hasOwnProperty(photonColor)) {\n                particleMaterials[photonColor] = new three.MeshLambertMaterial({\n                  color: materialColor,\n                  transparent: true,\n                  opacity: opacity\n                });\n              }\n\n              particleMaterial = particleMaterials[photonColor];\n              curPhoton && curPhoton.material.dispose();\n            } // digest cycle for each photon\n\n\n            threeDigest(_toConsumableArray(new Array(numPhotons)).map(function (_, idx) {\n              return {\n                idx: idx\n              };\n            }), obj, {\n              idAccessor: function idAccessor(d) {\n                return d.idx;\n              },\n              createObj: function createObj() {\n                return new three.Mesh(particleGeometry, particleMaterial);\n              },\n              updateObj: function updateObj(obj) {\n                obj.geometry = particleGeometry;\n                obj.material = particleMaterial;\n              }\n            });\n          }\n        });\n      }\n    }\n\n    state._flushObjects = false; // reset objects refresh flag\n    // simulation engine\n\n    if (hasAnyPropChanged(['graphData', 'nodeId', 'linkSource', 'linkTarget', 'numDimensions', 'forceEngine', 'dagMode', 'dagNodeFilter', 'dagLevelDistance'])) {\n      state.engineRunning = false; // Pause simulation\n      // parse links\n\n      state.graphData.links.forEach(function (link) {\n        link.source = link[state.linkSource];\n        link.target = link[state.linkTarget];\n      }); // Feed data to force-directed layout\n\n      var isD3Sim = state.forceEngine !== 'ngraph';\n      var layout;\n\n      if (isD3Sim) {\n        // D3-force\n        (layout = state.d3ForceLayout).stop().alpha(1) // re-heat the simulation\n        .numDimensions(state.numDimensions).nodes(state.graphData.nodes); // add links (if link force is still active)\n\n        var linkForce = state.d3ForceLayout.force('link');\n\n        if (linkForce) {\n          linkForce.id(function (d) {\n            return d[state.nodeId];\n          }).links(state.graphData.links);\n        } // setup dag force constraints\n\n\n        var nodeDepths = state.dagMode && getDagDepths(state.graphData, function (node) {\n          return node[state.nodeId];\n        }, {\n          nodeFilter: state.dagNodeFilter,\n          onLoopError: state.onDagError || undefined\n        });\n        var maxDepth = Math.max.apply(Math, _toConsumableArray(Object.values(nodeDepths || [])));\n        var dagLevelDistance = state.dagLevelDistance || state.graphData.nodes.length / (maxDepth || 1) * DAG_LEVEL_NODE_RATIO * (['radialin', 'radialout'].indexOf(state.dagMode) !== -1 ? 0.7 : 1); // Fix nodes to x,y,z for dag mode\n\n        if (state.dagMode) {\n          var getFFn = function getFFn(fix, invert) {\n            return function (node) {\n              return !fix ? undefined : (nodeDepths[node[state.nodeId]] - maxDepth / 2) * dagLevelDistance * (invert ? -1 : 1);\n            };\n          };\n\n          var fxFn = getFFn(['lr', 'rl'].indexOf(state.dagMode) !== -1, state.dagMode === 'rl');\n          var fyFn = getFFn(['td', 'bu'].indexOf(state.dagMode) !== -1, state.dagMode === 'td');\n          var fzFn = getFFn(['zin', 'zout'].indexOf(state.dagMode) !== -1, state.dagMode === 'zout');\n          state.graphData.nodes.filter(state.dagNodeFilter).forEach(function (node) {\n            node.fx = fxFn(node);\n            node.fy = fyFn(node);\n            node.fz = fzFn(node);\n          });\n        } // Use radial force for radial dags\n\n\n        state.d3ForceLayout.force('dagRadial', ['radialin', 'radialout'].indexOf(state.dagMode) !== -1 ? forceRadial(function (node) {\n          var nodeDepth = nodeDepths[node[state.nodeId]] || -1;\n          return (state.dagMode === 'radialin' ? maxDepth - nodeDepth : nodeDepth) * dagLevelDistance;\n        }).strength(function (node) {\n          return state.dagNodeFilter(node) ? 1 : 0;\n        }) : null);\n      } else {\n        // ngraph\n        var _graph = ngraph.graph();\n\n        state.graphData.nodes.forEach(function (node) {\n          _graph.addNode(node[state.nodeId]);\n        });\n        state.graphData.links.forEach(function (link) {\n          _graph.addLink(link.source, link.target);\n        });\n        layout = ngraph['forcelayout' + (state.numDimensions === 2 ? '' : '3d')](_graph, state.ngraphPhysics || undefined);\n        layout.graph = _graph; // Attach graph reference to layout\n      }\n\n      for (var i = 0; i < state.warmupTicks && !(isD3Sim && state.d3AlphaMin > 0 && state.d3ForceLayout.alpha() < state.d3AlphaMin); i++) {\n        layout[isD3Sim ? \"tick\" : \"step\"]();\n      } // Initial ticks before starting to render\n\n\n      state.layout = layout;\n      this.resetCountdown();\n    }\n\n    state.engineRunning = true; // resume simulation\n\n    state.onFinishUpdate();\n  }\n});\n\nfunction fromKapsule(kapsule) {\n  var baseClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Object;\n  var initKapsuleWithSelf = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var FromKapsule = /*#__PURE__*/function (_baseClass) {\n    _inherits(FromKapsule, _baseClass);\n\n    var _super = _createSuper(FromKapsule);\n\n    function FromKapsule() {\n      var _this;\n\n      _classCallCheck(this, FromKapsule);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this.__kapsuleInstance = kapsule().apply(void 0, [].concat(_toConsumableArray(initKapsuleWithSelf ? [_assertThisInitialized(_this)] : []), args));\n      return _this;\n    }\n\n    return FromKapsule;\n  }(baseClass); // attach kapsule props/methods to class prototype\n\n\n  Object.keys(kapsule()).forEach(function (m) {\n    return FromKapsule.prototype[m] = function () {\n      var _this$__kapsuleInstan;\n\n      var returnVal = (_this$__kapsuleInstan = this.__kapsuleInstance)[m].apply(_this$__kapsuleInstan, arguments);\n\n      return returnVal === this.__kapsuleInstance ? this // chain based on this class, not the kapsule obj\n      : returnVal;\n    };\n  });\n  return FromKapsule;\n}\n\nvar three$1 = window.THREE ? window.THREE : {\n  Group: Group\n}; // Prefer consumption from global THREE, if exists\n\nvar threeForcegraph = fromKapsule(ForceGraph, three$1.Group, true);\nexport default threeForcegraph;","/**\n * Flat-shaded ocean primitive.\n *\n * Based on a Codrops tutorial:\n * http://tympanus.net/codrops/2016/04/26/the-aviator-animating-basic-3d-scene-threejs/\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-ocean', {\n  defaultComponents: {\n    ocean: {},\n    rotation: {\n      x: -90,\n      y: 0,\n      z: 0\n    }\n  },\n  mappings: {\n    width: 'ocean.width',\n    depth: 'ocean.depth',\n    density: 'ocean.density',\n    amplitude: 'ocean.amplitude',\n    amplitudeVariance: 'ocean.amplitudeVariance',\n    speed: 'ocean.speed',\n    speedVariance: 'ocean.speedVariance',\n    color: 'ocean.color',\n    opacity: 'ocean.opacity'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('ocean', {\n  schema: {\n    // Dimensions of the ocean area.\n    width: {\n      default: 10,\n      min: 0\n    },\n    depth: {\n      default: 10,\n      min: 0\n    },\n    // Density of waves.\n    density: {\n      default: 10\n    },\n    // Wave amplitude and variance.\n    amplitude: {\n      default: 0.1\n    },\n    amplitudeVariance: {\n      default: 0.3\n    },\n    // Wave speed and variance.\n    speed: {\n      default: 1\n    },\n    speedVariance: {\n      default: 2\n    },\n    // Material.\n    color: {\n      default: '#7AD2F7',\n      type: 'color'\n    },\n    opacity: {\n      default: 0.8\n    }\n  },\n\n  /**\n   * Use play() instead of init(), because component mappings  unavailable as dependencies  are\n   * not guaranteed to have parsed when this component is initialized.\n   */\n  play: function play() {\n    var el = this.el,\n        data = this.data;\n    var material = el.components.material;\n    var geometry = new THREE.PlaneGeometry(data.width, data.depth, data.density, data.density);\n    geometry.mergeVertices();\n    this.waves = [];\n\n    for (var v, i = 0, l = geometry.vertices.length; i < l; i++) {\n      v = geometry.vertices[i];\n      this.waves.push({\n        z: v.z,\n        ang: Math.random() * Math.PI * 2,\n        amp: data.amplitude + Math.random() * data.amplitudeVariance,\n        speed: (data.speed + Math.random() * data.speedVariance) / 1000 // radians / frame\n\n      });\n    }\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial({\n        color: data.color,\n        transparent: data.opacity < 1,\n        opacity: data.opacity,\n        shading: THREE.FlatShading\n      });\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    el.setObject3D('mesh', this.mesh);\n  },\n  remove: function remove() {\n    this.el.removeObject3D('mesh');\n  },\n  tick: function tick(t, dt) {\n    if (!dt) return;\n    var verts = this.mesh.geometry.vertices;\n\n    for (var v, vprops, i = 0; v = verts[i]; i++) {\n      vprops = this.waves[i];\n      v.z = vprops.z + Math.sin(vprops.ang) * vprops.amp;\n      vprops.ang += vprops.speed * dt;\n    }\n\n    this.mesh.geometry.verticesNeedUpdate = true;\n  }\n});","module.exports = InsertStack;\n/**\n * Our implmentation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\n\nfunction InsertStack() {\n  this.stack = [];\n  this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n  isEmpty: function isEmpty() {\n    return this.popIdx === 0;\n  },\n  push: function push(node, body) {\n    var item = this.stack[this.popIdx];\n\n    if (!item) {\n      // we are trying to avoid memory pressue: create new element\n      // only when absolutely necessary\n      this.stack[this.popIdx] = new InsertStackElement(node, body);\n    } else {\n      item.node = node;\n      item.body = body;\n    }\n\n    ++this.popIdx;\n  },\n  pop: function pop() {\n    if (this.popIdx > 0) {\n      return this.stack[--this.popIdx];\n    }\n  },\n  reset: function reset() {\n    this.popIdx = 0;\n  }\n};\n\nfunction InsertStackElement(node, body) {\n  this.node = node; // QuadTree node\n\n  this.body = body; // physical body which needs to be inserted to node\n}","require('./animation-mixer');\n\nrequire('./collada-model-legacy');\n\nrequire('./fbx-model');\n\nrequire('./gltf-model-legacy');\n\nrequire('./object-model');","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar index = function index() {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var keyAccessors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var multiItem = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var flattenKeys = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var keys = (keyAccessors instanceof Array ? keyAccessors.length ? keyAccessors : [undefined] : [keyAccessors]).map(function (key) {\n    return {\n      keyAccessor: key,\n      isProp: !(key instanceof Function)\n    };\n  });\n  var indexedResult = list.reduce(function (res, item) {\n    var iterObj = res;\n    var itemVal = item;\n    keys.forEach(function (_ref, idx) {\n      var keyAccessor = _ref.keyAccessor,\n          isProp = _ref.isProp;\n      var key;\n\n      if (isProp) {\n        var _itemVal = itemVal,\n            propVal = _itemVal[keyAccessor],\n            rest = _objectWithoutProperties(_itemVal, [keyAccessor].map(_toPropertyKey));\n\n        key = propVal;\n        itemVal = rest;\n      } else {\n        key = keyAccessor(itemVal, idx);\n      }\n\n      if (idx + 1 < keys.length) {\n        if (!iterObj.hasOwnProperty(key)) {\n          iterObj[key] = {};\n        }\n\n        iterObj = iterObj[key];\n      } else {\n        // Leaf key\n        if (multiItem) {\n          if (!iterObj.hasOwnProperty(key)) {\n            iterObj[key] = [];\n          }\n\n          iterObj[key].push(itemVal);\n        } else {\n          iterObj[key] = itemVal;\n        }\n      }\n    });\n    return res;\n  }, {});\n\n  if (multiItem instanceof Function) {\n    // Reduce leaf multiple values\n    (function reduce(node) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      if (level === keys.length) {\n        Object.keys(node).forEach(function (k) {\n          return node[k] = multiItem(node[k]);\n        });\n      } else {\n        Object.values(node).forEach(function (child) {\n          return reduce(child, level + 1);\n        });\n      }\n    })(indexedResult); // IIFE\n\n  }\n\n  var result = indexedResult;\n\n  if (flattenKeys) {\n    // flatten into array\n    result = [];\n\n    (function flatten(node) {\n      var accKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (accKeys.length === keys.length) {\n        result.push({\n          keys: accKeys,\n          vals: node\n        });\n      } else {\n        Object.entries(node).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              key = _ref3[0],\n              val = _ref3[1];\n\n          return flatten(val, [].concat(_toConsumableArray(accKeys), [key]));\n        });\n      }\n    })(indexedResult); //IIFE\n\n\n    if (keyAccessors instanceof Array && keyAccessors.length === 0 && result.length === 1) {\n      // clear keys if there's no key accessors (single result)\n      result[0].keys = [];\n    }\n  }\n\n  return result;\n};\n\nexport default index;","var _slicedToArray = require(\"/home/renato/github/renato145.github.io/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _toConsumableArray = require(\"/home/renato/github/renato145.github.io/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\n/*! fromentries. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = function fromEntries(iterable) {\n  return _toConsumableArray(iterable).reduce(function (obj, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        val = _ref2[1];\n\n    obj[key] = val;\n    return obj;\n  }, {});\n};","require('./nav-mesh');\n\nrequire('./nav-agent');\n\nrequire('./system');","THREE.ColladaLoader = require('../../lib/ColladaLoader');\n/**\n * collada-model-legacy\n *\n * Loader for COLLADA (.dae) format.\n */\n\nmodule.exports.Component = AFRAME.registerComponent('collada-model-legacy', {\n  schema: {\n    type: 'asset'\n  },\n  init: function init() {\n    this.model = null;\n    this.loader = new THREE.ColladaLoader();\n  },\n  update: function update() {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n\n    if (!src) {\n      return;\n    }\n\n    this.remove();\n    this.loader.load(src, function (colladaModel) {\n      self.model = colladaModel.scene;\n      self.model.traverse(function (object) {\n        if (object.isMesh) {\n          var material = object.material;\n          if (material.color) rendererSystem.applyColorCorrection(material.color);\n          if (material.map) rendererSystem.applyColorCorrection(material.map);\n          if (material.emissive) rendererSystem.applyColorCorrection(material.emissive);\n          if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n        }\n      });\n      el.setObject3D('mesh', self.model);\n      el.emit('model-loaded', {\n        format: 'collada',\n        model: self.model\n      });\n    });\n  },\n  remove: function remove() {\n    if (!this.model) {\n      return;\n    }\n\n    this.el.removeObject3D('mesh');\n  }\n});","function GamepadButtonEvent(type, index, details) {\n  this.type = type;\n  this.index = index;\n  this.pressed = details.pressed;\n  this.value = details.value;\n}\n\nmodule.exports = GamepadButtonEvent;","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.github.io/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = typeof onFinally == 'function';\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// patch native Promise.prototype for native async functions\nif (!IS_PURE && typeof NativePromise == 'function' && !NativePromise.prototype['finally']) {\n  redefine(NativePromise.prototype, 'finally', getBuiltIn('Promise').prototype['finally']);\n}\n","module.exports = function isSamePosition(point1, point2) {\n  var dx = Math.abs(point1.x - point2.x);\n  var dy = Math.abs(point1.y - point2.y);\n  var dz = Math.abs(point1.z - point2.z);\n  return dx < 1e-8 && dy < 1e-8 && dz < 1e-8;\n};","/**\n * Performs 3d forces integration, using given timestep. Uses Euler method to solve\n * differential equation (http://en.wikipedia.org/wiki/Euler_method ).\n *\n * @returns {Number} squared distance of total position updates.\n */\nmodule.exports = integrate;\n\nfunction integrate(bodies, timeStep) {\n  var dx = 0,\n      tx = 0,\n      dy = 0,\n      ty = 0,\n      dz = 0,\n      tz = 0,\n      i,\n      max = bodies.length;\n\n  for (i = 0; i < max; ++i) {\n    var body = bodies[i],\n        coeff = timeStep / body.mass;\n    body.velocity.x += coeff * body.force.x;\n    body.velocity.y += coeff * body.force.y;\n    body.velocity.z += coeff * body.force.z;\n    var vx = body.velocity.x,\n        vy = body.velocity.y,\n        vz = body.velocity.z,\n        v = Math.sqrt(vx * vx + vy * vy + vz * vz);\n\n    if (v > 1) {\n      body.velocity.x = vx / v;\n      body.velocity.y = vy / v;\n      body.velocity.z = vz / v;\n    }\n\n    dx = timeStep * body.velocity.x;\n    dy = timeStep * body.velocity.y;\n    dz = timeStep * body.velocity.z;\n    body.pos.x += dx;\n    body.pos.y += dy;\n    body.pos.z += dz;\n    tx += Math.abs(dx);\n    ty += Math.abs(dy);\n    tz += Math.abs(dz);\n  }\n\n  return (tx * tx + ty * ty + tz * tz) / bodies.length;\n}","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  }\n\n  ;\n\n  var debounced = function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function () {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  debounced.flush = function () {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n}\n\n; // Adds compatibility for ES modules\n\ndebounce.debounce = debounce;\nmodule.exports = debounce;","var fetchScript = require('../../lib/fetch-script')();\n\nvar LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nvar loadLoader = function () {\n  var promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}();\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\n\n\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {\n    type: 'model'\n  },\n  init: function init() {\n    var _this = this;\n\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(function () {\n      _this.loader = new THREE.GLTFLoader();\n\n      _this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n  update: function update() {\n    var _this2 = this;\n\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n\n    if (!src) {\n      return;\n    }\n\n    this.remove();\n    this.loaderPromise.then(function () {\n      _this2.loader.load(src, function gltfLoaded(gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {\n          format: 'gltf',\n          model: self.model\n        });\n      });\n    });\n  },\n  remove: function remove() {\n    if (!this.model) {\n      return;\n    }\n\n    this.el.removeObject3D('mesh');\n  }\n});","module.exports = require('./lib/bezier');","/**\n * Performs forces integration, using given time step. Uses Euler method to solve\n * differential equation (http://en.wikipedia.org/wiki/Euler_method ).\n *\n * @returns {Number} squared distance of total position updates.\n */\nmodule.exports = integrate;\n\nfunction integrate(bodies, timeStep) {\n  var dx = 0,\n      tx = 0,\n      dy = 0,\n      ty = 0,\n      i,\n      max = bodies.length;\n\n  if (max === 0) {\n    return 0;\n  }\n\n  for (i = 0; i < max; ++i) {\n    var body = bodies[i],\n        coeff = timeStep / body.mass;\n    body.velocity.x += coeff * body.force.x;\n    body.velocity.y += coeff * body.force.y;\n    var vx = body.velocity.x,\n        vy = body.velocity.y,\n        v = Math.sqrt(vx * vx + vy * vy);\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      body.velocity.x = vx / v;\n      body.velocity.y = vy / v;\n    }\n\n    dx = timeStep * body.velocity.x;\n    dy = timeStep * body.velocity.y;\n    body.pos.x += dx;\n    body.pos.y += dy;\n    tx += Math.abs(dx);\n    ty += Math.abs(dy);\n  }\n\n  return (tx * tx + ty * ty) / max;\n}","var e = function e() {};\n\ne.computeCentroids = function (e) {\n  var t, n, r;\n\n  for (t = 0, n = e.faces.length; t < n; t++) {\n    (r = e.faces[t]).centroid = new THREE.Vector3(0, 0, 0), r.centroid.add(e.vertices[r.a]), r.centroid.add(e.vertices[r.b]), r.centroid.add(e.vertices[r.c]), r.centroid.divideScalar(3);\n  }\n}, e.roundNumber = function (e, t) {\n  return Number(e.toFixed(t));\n}, e.sample = function (e) {\n  return e[Math.floor(Math.random() * e.length)];\n}, e.mergeVertexIds = function (e, t) {\n  var n = [];\n  if (e.forEach(function (e) {\n    t.indexOf(e) >= 0 && n.push(e);\n  }), n.length < 2) return [];\n  n.includes(e[0]) && n.includes(e[e.length - 1]) && e.push(e.shift()), n.includes(t[0]) && n.includes(t[t.length - 1]) && t.push(t.shift()), n = [], e.forEach(function (e) {\n    t.includes(e) && n.push(e);\n  });\n\n  for (var r = n[1], o = n[0], i = e.slice(); i[0] !== r;) {\n    i.push(i.shift());\n  }\n\n  for (var s = 0, u = t.slice(); u[0] !== o;) {\n    if (u.push(u.shift()), s++ > 10) throw new Error(\"Unexpected state\");\n  }\n\n  return u.shift(), u.pop(), i = i.concat(u);\n}, e.setPolygonCentroid = function (e, t) {\n  var n = new THREE.Vector3(),\n      r = t.vertices;\n  e.vertexIds.forEach(function (e) {\n    n.add(r[e]);\n  }), n.divideScalar(e.vertexIds.length), e.centroid.copy(n);\n}, e.cleanPolygon = function (e, t) {\n  for (var n = [], r = t.vertices, o = 0; o < e.vertexIds.length; o++) {\n    var i,\n        s,\n        u,\n        c = r[e.vertexIds[o]];\n    0 === o ? (i = e.vertexIds[1], s = e.vertexIds[e.vertexIds.length - 1]) : o === e.vertexIds.length - 1 ? (i = e.vertexIds[0], s = e.vertexIds[e.vertexIds.length - 2]) : (i = e.vertexIds[o + 1], s = e.vertexIds[o - 1]), u = r[s];\n    var h = r[i].clone().sub(c),\n        a = u.clone().sub(c),\n        d = h.angleTo(a);\n\n    if (d > Math.PI - .01 && d < Math.PI + .01) {\n      var f = [];\n      e.neighbours.forEach(function (t) {\n        t.vertexIds.includes(e.vertexIds[o]) || f.push(t);\n      }), e.neighbours = f;\n    } else n.push(e.vertexIds[o]);\n  }\n\n  e.vertexIds = n, this.setPolygonCentroid(e, t);\n}, e.isConvex = function (e, t) {\n  var n = t.vertices;\n  if (e.vertexIds.length < 3) return !1;\n\n  for (var r = !0, o = [], i = 0; i < e.vertexIds.length; i++) {\n    var s,\n        u,\n        c = n[e.vertexIds[i]];\n    0 === i ? (s = n[e.vertexIds[1]], u = n[e.vertexIds[e.vertexIds.length - 1]]) : i === e.vertexIds.length - 1 ? (s = n[e.vertexIds[0]], u = n[e.vertexIds[e.vertexIds.length - 2]]) : (s = n[e.vertexIds[i + 1]], u = n[e.vertexIds[i - 1]]);\n    var h = s.clone().sub(c),\n        a = u.clone().sub(c),\n        d = h.angleTo(a);\n    if (d === Math.PI || 0 === d) return !1;\n    var f = h.cross(a).y;\n    o.push(f);\n  }\n\n  return o.forEach(function (e) {\n    0 === e && (r = !1);\n  }), o.forEach(o[0] > 0 ? function (e) {\n    e < 0 && (r = !1);\n  } : function (e) {\n    e > 0 && (r = !1);\n  }), r;\n}, e.distanceToSquared = function (e, t) {\n  var n = e.x - t.x,\n      r = e.y - t.y,\n      o = e.z - t.z;\n  return n * n + r * r + o * o;\n}, e.isPointInPoly = function (e, t) {\n  for (var n = !1, r = -1, o = e.length, i = o - 1; ++r < o; i = r) {\n    (e[r].z <= t.z && t.z < e[i].z || e[i].z <= t.z && t.z < e[r].z) && t.x < (e[i].x - e[r].x) * (t.z - e[r].z) / (e[i].z - e[r].z) + e[r].x && (n = !n);\n  }\n\n  return n;\n}, e.isVectorInPolygon = function (e, t, n) {\n  var r = 1e5,\n      o = -1e5,\n      i = [];\n  return t.vertexIds.forEach(function (e) {\n    r = Math.min(n[e].y, r), o = Math.max(n[e].y, o), i.push(n[e]);\n  }), !!(e.y < o + .5 && e.y > r - .5 && this.isPointInPoly(i, e));\n}, e.triarea2 = function (e, t, n) {\n  return (n.x - e.x) * (t.z - e.z) - (t.x - e.x) * (n.z - e.z);\n}, e.vequal = function (e, t) {\n  return this.distanceToSquared(e, t) < 1e-5;\n};\n\nvar t = function t(e) {\n  this.content = [], this.scoreFunction = e;\n};\n\nt.prototype.push = function (e) {\n  this.content.push(e), this.sinkDown(this.content.length - 1);\n}, t.prototype.pop = function () {\n  var e = this.content[0],\n      t = this.content.pop();\n  return this.content.length > 0 && (this.content[0] = t, this.bubbleUp(0)), e;\n}, t.prototype.remove = function (e) {\n  var t = this.content.indexOf(e),\n      n = this.content.pop();\n  t !== this.content.length - 1 && (this.content[t] = n, this.scoreFunction(n) < this.scoreFunction(e) ? this.sinkDown(t) : this.bubbleUp(t));\n}, t.prototype.size = function () {\n  return this.content.length;\n}, t.prototype.rescoreElement = function (e) {\n  this.sinkDown(this.content.indexOf(e));\n}, t.prototype.sinkDown = function (e) {\n  for (var t = this.content[e]; e > 0;) {\n    var n = (e + 1 >> 1) - 1,\n        r = this.content[n];\n    if (!(this.scoreFunction(t) < this.scoreFunction(r))) break;\n    this.content[n] = t, this.content[e] = r, e = n;\n  }\n}, t.prototype.bubbleUp = function (e) {\n  for (var t = this.content.length, n = this.content[e], r = this.scoreFunction(n);;) {\n    var o = e + 1 << 1,\n        i = o - 1,\n        s = null,\n        u = void 0;\n    if (i < t) (u = this.scoreFunction(this.content[i])) < r && (s = i);\n    if (o < t) this.scoreFunction(this.content[o]) < (null === s ? r : u) && (s = o);\n    if (null === s) break;\n    this.content[e] = this.content[s], this.content[s] = n, e = s;\n  }\n};\n\nvar n = function n() {};\n\nn.init = function (e) {\n  for (var t = 0; t < e.length; t++) {\n    var n = e[t];\n    n.f = 0, n.g = 0, n.h = 0, n.cost = 1, n.visited = !1, n.closed = !1, n.parent = null;\n  }\n}, n.cleanUp = function (e) {\n  for (var t = 0; t < e.length; t++) {\n    var n = e[t];\n    delete n.f, delete n.g, delete n.h, delete n.cost, delete n.visited, delete n.closed, delete n.parent;\n  }\n}, n.heap = function () {\n  return new t(function (e) {\n    return e.f;\n  });\n}, n.search = function (e, t, n) {\n  this.init(e);\n  var r = this.heap();\n\n  for (r.push(t); r.size() > 0;) {\n    var o = r.pop();\n\n    if (o === n) {\n      for (var i = o, s = []; i.parent;) {\n        s.push(i), i = i.parent;\n      }\n\n      return this.cleanUp(s), s.reverse();\n    }\n\n    o.closed = !0;\n\n    for (var u = this.neighbours(e, o), c = 0, h = u.length; c < h; c++) {\n      var a = u[c];\n\n      if (!a.closed) {\n        var d = o.g + a.cost,\n            f = a.visited;\n\n        if (!f || d < a.g) {\n          if (a.visited = !0, a.parent = o, !a.centroid || !n.centroid) throw new Error(\"Unexpected state\");\n          a.h = a.h || this.heuristic(a.centroid, n.centroid), a.g = d, a.f = a.g + a.h, f ? r.rescoreElement(a) : r.push(a);\n        }\n      }\n    }\n  }\n\n  return [];\n}, n.heuristic = function (t, n) {\n  return e.distanceToSquared(t, n);\n}, n.neighbours = function (e, t) {\n  for (var n = [], r = 0; r < t.neighbours.length; r++) {\n    n.push(e[t.neighbours[r]]);\n  }\n\n  return n;\n};\n\nvar r = 1,\n    o = function o() {};\n\no.buildZone = function (t) {\n  var n = this,\n      r = this._buildNavigationMesh(t),\n      o = {};\n\n  r.vertices.forEach(function (t) {\n    t.x = e.roundNumber(t.x, 2), t.y = e.roundNumber(t.y, 2), t.z = e.roundNumber(t.z, 2);\n  }), o.vertices = r.vertices;\n\n  var i = this._buildPolygonGroups(r);\n\n  o.groups = [];\n\n  var s = function s(e, t) {\n    for (var n = 0; n < e.length; n++) {\n      if (t === e[n]) return n;\n    }\n  };\n\n  return i.forEach(function (t) {\n    var r = [];\n    t.forEach(function (o) {\n      var i = o.neighbours.map(function (e) {\n        return s(t, e);\n      }),\n          u = o.neighbours.map(function (e) {\n        return n._getSharedVerticesInOrder(o, e);\n      });\n      o.centroid.x = e.roundNumber(o.centroid.x, 2), o.centroid.y = e.roundNumber(o.centroid.y, 2), o.centroid.z = e.roundNumber(o.centroid.z, 2), r.push({\n        id: s(t, o),\n        neighbours: i,\n        vertexIds: o.vertexIds,\n        centroid: o.centroid,\n        portals: u\n      });\n    }), o.groups.push(r);\n  }), o;\n}, o._buildNavigationMesh = function (t) {\n  return e.computeCentroids(t), t.mergeVertices(), this._buildPolygonsFromGeometry(t);\n}, o._buildPolygonGroups = function (e) {\n  var t = [],\n      n = 0,\n      r = function r(e) {\n    e.neighbours.forEach(function (t) {\n      void 0 === t.group && (t.group = e.group, r(t));\n    });\n  };\n\n  return e.polygons.forEach(function (e) {\n    void 0 === e.group && (e.group = n++, r(e)), t[e.group] || (t[e.group] = []), t[e.group].push(e);\n  }), t;\n}, o._buildPolygonNeighbours = function (e, t, n) {\n  var r = new Set(),\n      o = n.get(e.vertexIds[0]),\n      i = n.get(e.vertexIds[1]),\n      s = n.get(e.vertexIds[2]);\n  o.forEach(function (e) {\n    (i.has(e) || s.has(e)) && r.add(t.polygons[e]);\n  }), i.forEach(function (e) {\n    s.has(e) && r.add(t.polygons[e]);\n  }), e.neighbours = Array.from(r);\n}, o._buildPolygonsFromGeometry = function (e) {\n  for (var t = this, n = [], o = e.vertices, i = e.faceVertexUvs, s = new Map(), u = 0; u < o.length; u++) {\n    s.set(u, new Set());\n  }\n\n  e.faces.forEach(function (e) {\n    n.push({\n      id: r++,\n      vertexIds: [e.a, e.b, e.c],\n      centroid: e.centroid,\n      normal: e.normal,\n      neighbours: []\n    }), s.get(e.a).add(n.length - 1), s.get(e.b).add(n.length - 1), s.get(e.c).add(n.length - 1);\n  });\n  var c = {\n    polygons: n,\n    vertices: o,\n    faceVertexUvs: i\n  };\n  return n.forEach(function (e) {\n    t._buildPolygonNeighbours(e, c, s);\n  }), c;\n}, o._getSharedVerticesInOrder = function (e, t) {\n  var n = e.vertexIds,\n      r = t.vertexIds,\n      o = new Set();\n  if (n.forEach(function (e) {\n    r.includes(e) && o.add(e);\n  }), o.size < 2) return [];\n  o.has(n[0]) && o.has(n[n.length - 1]) && n.push(n.shift()), o.has(r[0]) && o.has(r[r.length - 1]) && r.push(r.shift());\n  var i = [];\n  return n.forEach(function (e) {\n    r.includes(e) && i.push(e);\n  }), i;\n};\n\nvar i = function i() {\n  this.portals = [];\n};\n\ni.prototype.push = function (e, t) {\n  void 0 === t && (t = e), this.portals.push({\n    left: e,\n    right: t\n  });\n}, i.prototype.stringPull = function () {\n  var t,\n      n,\n      r,\n      o = this.portals,\n      i = [],\n      s = 0,\n      u = 0,\n      c = 0;\n  n = o[0].left, r = o[0].right, i.push(t = o[0].left);\n\n  for (var h = 1; h < o.length; h++) {\n    var a = o[h].left,\n        d = o[h].right;\n\n    if (e.triarea2(t, r, d) <= 0) {\n      if (!(e.vequal(t, r) || e.triarea2(t, n, d) > 0)) {\n        i.push(n), n = t = n, r = t, u = s = u, c = s, h = s;\n        continue;\n      }\n\n      r = d, c = h;\n    }\n\n    if (e.triarea2(t, n, a) >= 0) {\n      if (!(e.vequal(t, n) || e.triarea2(t, r, a) < 0)) {\n        i.push(r), n = t = r, r = t, u = s = c, c = s, h = s;\n        continue;\n      }\n\n      n = a, u = h;\n    }\n  }\n\n  return 0 !== i.length && e.vequal(i[i.length - 1], o[o.length - 1].left) || i.push(o[o.length - 1].left), this.path = i, i;\n};\n\nvar s,\n    u,\n    c,\n    h,\n    a,\n    d,\n    f = function f() {\n  this.zones = {};\n};\n\nf.createZone = function (e) {\n  return o.buildZone(e);\n}, f.prototype.setZoneData = function (e, t) {\n  this.zones[e] = t;\n}, f.prototype.getGroup = function (t, n) {\n  if (!this.zones[t]) return null;\n  var r = null,\n      o = Math.pow(50, 2);\n  return this.zones[t].groups.forEach(function (t, i) {\n    t.forEach(function (t) {\n      var s = e.distanceToSquared(t.centroid, n);\n      s < o && (r = i, o = s);\n    });\n  }), r;\n}, f.prototype.getRandomNode = function (t, n, r, o) {\n  if (!this.zones[t]) return new THREE.Vector3();\n  r = r || null, o = o || 0;\n  var i = [];\n  return this.zones[t].groups[n].forEach(function (t) {\n    r && o ? e.distanceToSquared(r, t.centroid) < o * o && i.push(t.centroid) : i.push(t.centroid);\n  }), e.sample(i) || new THREE.Vector3();\n}, f.prototype.getClosestNode = function (t, n, r, o) {\n  void 0 === o && (o = !1);\n  var i = this.zones[n].vertices,\n      s = null,\n      u = Infinity;\n  return this.zones[n].groups[r].forEach(function (n) {\n    var r = e.distanceToSquared(n.centroid, t);\n    r < u && (!o || e.isVectorInPolygon(t, n, i)) && (s = n, u = r);\n  }), s;\n}, f.prototype.findPath = function (e, t, r, o) {\n  var s = this.zones[r].groups[o],\n      u = this.zones[r].vertices,\n      c = this.getClosestNode(e, r, o),\n      h = this.getClosestNode(t, r, o, !0);\n  if (!c || !h) return null;\n\n  var a = n.search(s, c, h),\n      d = function d(e, t) {\n    for (var n = 0; n < e.neighbours.length; n++) {\n      if (e.neighbours[n] === t.id) return e.portals[n];\n    }\n  },\n      f = new i();\n\n  f.push(e);\n\n  for (var l = 0; l < a.length; l++) {\n    var v = a[l + 1];\n\n    if (v) {\n      var p = d(a[l], v);\n      f.push(u[p[0]], u[p[1]]);\n    }\n  }\n\n  f.push(t), f.stringPull();\n  var g = f.path.map(function (e) {\n    return new THREE.Vector3(e.x, e.y, e.z);\n  });\n  return g.shift(), g;\n}, f.prototype.clampStep = (c = new THREE.Vector3(), h = new THREE.Plane(), a = new THREE.Triangle(), d = new THREE.Vector3(), function (e, t, n, r, o, i) {\n  var f = this.zones[r].vertices,\n      l = this.zones[r].groups[o],\n      v = [n],\n      p = {};\n  p[n.id] = 0, s = void 0, d.set(0, 0, 0), u = Infinity, h.setFromCoplanarPoints(f[n.vertexIds[0]], f[n.vertexIds[1]], f[n.vertexIds[2]]), h.projectPoint(t, c), t.copy(c);\n\n  for (var g = v.pop(); g; g = v.pop()) {\n    a.set(f[g.vertexIds[0]], f[g.vertexIds[1]], f[g.vertexIds[2]]), a.closestPointToPoint(t, c), c.distanceToSquared(t) < u && (s = g, d.copy(c), u = c.distanceToSquared(t));\n    var x = p[g];\n    if (!(x > 2)) for (var I = 0; I < g.neighbours.length; I++) {\n      var b = l[g.neighbours[I]];\n      b.id in p || (v.push(b), p[b.id] = x + 1);\n    }\n  }\n\n  return i.copy(d), s;\n});\nexport { f as Pathfinding };","/**\n * Manages a simulation of physical forces acting on bodies and springs.\n */\nmodule.exports = physicsSimulator;\n\nfunction physicsSimulator(settings) {\n  var Spring = require('./lib/spring');\n\n  var expose = require('ngraph.expose');\n\n  var merge = require('ngraph.merge');\n\n  var eventify = require('ngraph.events');\n\n  settings = merge(settings, {\n    /**\n     * Ideal length for links (springs in physical model).\n     */\n    springLength: 30,\n\n    /**\n     * Hook's law coefficient. 1 - solid spring.\n     */\n    springCoeff: 0.0008,\n\n    /**\n     * Coulomb's law coefficient. It's used to repel nodes thus should be negative\n     * if you make it positive nodes start attract each other :).\n     */\n    gravity: -1.2,\n\n    /**\n     * Theta coefficient from Barnes Hut simulation. Ranged between (0, 1).\n     * The closer it's to 1 the more nodes algorithm will have to go through.\n     * Setting it to one makes Barnes Hut simulation no different from\n     * brute-force forces calculation (each node is considered).\n     */\n    theta: 0.8,\n\n    /**\n     * Drag force coefficient. Used to slow down system, thus should be less than 1.\n     * The closer it is to 0 the less tight system will be.\n     */\n    dragCoeff: 0.02,\n\n    /**\n     * Default time step (dt) for forces integration\n     */\n    timeStep: 20\n  }); // We allow clients to override basic factory methods:\n\n  var createQuadTree = settings.createQuadTree || require('ngraph.quadtreebh');\n\n  var createBounds = settings.createBounds || require('./lib/bounds');\n\n  var createDragForce = settings.createDragForce || require('./lib/dragForce');\n\n  var createSpringForce = settings.createSpringForce || require('./lib/springForce');\n\n  var integrate = settings.integrator || require('./lib/eulerIntegrator');\n\n  var createBody = settings.createBody || require('./lib/createBody');\n\n  var bodies = [],\n      // Bodies in this simulation.\n  springs = [],\n      // Springs in this simulation.\n  quadTree = createQuadTree(settings),\n      bounds = createBounds(bodies, settings),\n      springForce = createSpringForce(settings),\n      dragForce = createDragForce(settings);\n  var bboxNeedsUpdate = true;\n  var totalMovement = 0; // how much movement we made on last step\n\n  var publicApi = {\n    /**\n     * Array of bodies, registered with current simulator\n     *\n     * Note: To add new body, use addBody() method. This property is only\n     * exposed for testing/performance purposes.\n     */\n    bodies: bodies,\n    quadTree: quadTree,\n\n    /**\n     * Array of springs, registered with current simulator\n     *\n     * Note: To add new spring, use addSpring() method. This property is only\n     * exposed for testing/performance purposes.\n     */\n    springs: springs,\n\n    /**\n     * Returns settings with which current simulator was initialized\n     */\n    settings: settings,\n\n    /**\n     * Performs one step of force simulation.\n     *\n     * @returns {boolean} true if system is considered stable; False otherwise.\n     */\n    step: function step() {\n      accumulateForces();\n      var movement = integrate(bodies, settings.timeStep);\n      bounds.update();\n      return movement;\n    },\n\n    /**\n     * Adds body to the system\n     *\n     * @param {ngraph.physics.primitives.Body} body physical body\n     *\n     * @returns {ngraph.physics.primitives.Body} added body\n     */\n    addBody: function addBody(body) {\n      if (!body) {\n        throw new Error('Body is required');\n      }\n\n      bodies.push(body);\n      return body;\n    },\n\n    /**\n     * Adds body to the system at given position\n     *\n     * @param {Object} pos position of a body\n     *\n     * @returns {ngraph.physics.primitives.Body} added body\n     */\n    addBodyAt: function addBodyAt(pos) {\n      if (!pos) {\n        throw new Error('Body position is required');\n      }\n\n      var body = createBody(pos);\n      bodies.push(body);\n      return body;\n    },\n\n    /**\n     * Removes body from the system\n     *\n     * @param {ngraph.physics.primitives.Body} body to remove\n     *\n     * @returns {Boolean} true if body found and removed. falsy otherwise;\n     */\n    removeBody: function removeBody(body) {\n      if (!body) {\n        return;\n      }\n\n      var idx = bodies.indexOf(body);\n\n      if (idx < 0) {\n        return;\n      }\n\n      bodies.splice(idx, 1);\n\n      if (bodies.length === 0) {\n        bounds.reset();\n      }\n\n      return true;\n    },\n\n    /**\n     * Adds a spring to this simulation.\n     *\n     * @returns {Object} - a handle for a spring. If you want to later remove\n     * spring pass it to removeSpring() method.\n     */\n    addSpring: function addSpring(body1, body2, springLength, springCoefficient) {\n      if (!body1 || !body2) {\n        throw new Error('Cannot add null spring to force simulator');\n      }\n\n      if (typeof springLength !== 'number') {\n        springLength = -1; // assume global configuration\n      }\n\n      var spring = new Spring(body1, body2, springLength, springCoefficient >= 0 ? springCoefficient : -1);\n      springs.push(spring); // TODO: could mark simulator as dirty.\n\n      return spring;\n    },\n\n    /**\n     * Returns amount of movement performed on last step() call\n     */\n    getTotalMovement: function getTotalMovement() {\n      return totalMovement;\n    },\n\n    /**\n     * Removes spring from the system\n     *\n     * @param {Object} spring to remove. Spring is an object returned by addSpring\n     *\n     * @returns {Boolean} true if spring found and removed. falsy otherwise;\n     */\n    removeSpring: function removeSpring(spring) {\n      if (!spring) {\n        return;\n      }\n\n      var idx = springs.indexOf(spring);\n\n      if (idx > -1) {\n        springs.splice(idx, 1);\n        return true;\n      }\n    },\n    getBestNewBodyPosition: function getBestNewBodyPosition(neighbors) {\n      return bounds.getBestNewPosition(neighbors);\n    },\n\n    /**\n     * Returns bounding box which covers all bodies\n     */\n    getBBox: function getBBox() {\n      if (bboxNeedsUpdate) {\n        bounds.update();\n        bboxNeedsUpdate = false;\n      }\n\n      return bounds.box;\n    },\n    invalidateBBox: function invalidateBBox() {\n      bboxNeedsUpdate = true;\n    },\n    gravity: function gravity(value) {\n      if (value !== undefined) {\n        settings.gravity = value;\n        quadTree.options({\n          gravity: value\n        });\n        return this;\n      } else {\n        return settings.gravity;\n      }\n    },\n    theta: function theta(value) {\n      if (value !== undefined) {\n        settings.theta = value;\n        quadTree.options({\n          theta: value\n        });\n        return this;\n      } else {\n        return settings.theta;\n      }\n    }\n  }; // allow settings modification via public API:\n\n  expose(settings, publicApi);\n  eventify(publicApi);\n  return publicApi;\n\n  function accumulateForces() {\n    // Accumulate forces acting on bodies.\n    var body,\n        i = bodies.length;\n\n    if (i) {\n      // only add bodies if there the array is not empty:\n      quadTree.insertBodies(bodies); // performance: O(n * log n)\n\n      while (i--) {\n        body = bodies[i]; // If body is pinned there is no point updating its forces - it should\n        // never move:\n\n        if (!body.isPinned) {\n          body.force.reset();\n          quadTree.updateBodyForce(body);\n          dragForce.update(body);\n        }\n      }\n    }\n\n    i = springs.length;\n\n    while (i--) {\n      springForce.update(springs[i]);\n    }\n  }\n}\n\n;","import colors from \"../colors.js\";\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");","export default function (specifier) {\n  var n = specifier.length / 6 | 0,\n      colors = new Array(n),\n      i = 0;\n\n  while (i < n) {\n    colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  }\n\n  return colors;\n}","module.exports = function isSamePosition(point1, point2) {\n  var dx = Math.abs(point1.x - point2.x);\n  var dy = Math.abs(point1.y - point2.y);\n  return dx < 1e-8 && dy < 1e-8;\n};","/**\n * 3dof (Gear VR, Daydream) controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('trackpad-controls', {\n  schema: {\n    enabled: {\n      default: true\n    },\n    enableNegX: {\n      default: true\n    },\n    enablePosX: {\n      default: true\n    },\n    enableNegZ: {\n      default: true\n    },\n    enablePosZ: {\n      default: true\n    },\n    mode: {\n      default: 'touch',\n      oneOf: ['swipe', 'touch', 'press']\n    }\n  },\n  init: function init() {\n    this.dVelocity = new THREE.Vector3();\n    this.zVel = 0;\n    this.xVel = 0;\n    this.bindMethods();\n  },\n  play: function play() {\n    this.addEventListeners();\n  },\n  pause: function pause() {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  addEventListeners: function addEventListeners() {\n    var data = this.data;\n    var sceneEl = this.el.sceneEl;\n    sceneEl.addEventListener('axismove', this.onAxisMove);\n\n    switch (data.mode) {\n      case 'swipe':\n      case 'touch':\n        sceneEl.addEventListener('trackpadtouchstart', this.onTouchStart);\n        sceneEl.addEventListener('trackpadtouchend', this.onTouchEnd);\n        break;\n\n      case 'press':\n        sceneEl.addEventListener('trackpaddown', this.onTouchStart);\n        sceneEl.addEventListener('trackpadup', this.onTouchEnd);\n        break;\n    }\n  },\n  removeEventListeners: function removeEventListeners() {\n    var sceneEl = this.el.sceneEl;\n    sceneEl.removeEventListener('axismove', this.onAxisMove);\n    sceneEl.removeEventListener('trackpadtouchstart', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadtouchend', this.onTouchEnd);\n    sceneEl.removeEventListener('trackpaddown', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadup', this.onTouchEnd);\n  },\n  isVelocityActive: function isVelocityActive() {\n    return this.data.enabled && this.isMoving;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    this.dVelocity.z = this.isMoving ? -this.zVel : 1;\n    this.dVelocity.x = this.isMoving ? this.xVel : 1;\n    return this.dVelocity.clone();\n  },\n  bindMethods: function bindMethods() {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onAxisMove = this.onAxisMove.bind(this);\n  },\n  onTouchStart: function onTouchStart(e) {\n    switch (this.data.mode) {\n      case 'swipe':\n        this.canRecordAxis = true;\n        this.startingAxisData = [];\n        break;\n\n      case 'touch':\n        this.isMoving = true;\n        break;\n\n      case 'press':\n        this.isMoving = true;\n        break;\n    }\n\n    e.preventDefault();\n  },\n  onTouchEnd: function onTouchEnd(e) {\n    if (this.data.mode == 'swipe') {\n      this.startingAxisData = [];\n    }\n\n    this.isMoving = false;\n    e.preventDefault();\n  },\n  onAxisMove: function onAxisMove(e) {\n    switch (this.data.mode) {\n      case 'swipe':\n        return this.handleSwipeAxis(e);\n\n      case 'touch':\n      case 'press':\n        return this.handleTouchAxis(e);\n    }\n  },\n  handleSwipeAxis: function handleSwipeAxis(e) {\n    var data = this.data;\n    var axisData = e.detail.axis;\n\n    if (this.startingAxisData.length === 0 && this.canRecordAxis) {\n      this.canRecordAxis = false;\n      this.startingAxisData[0] = axisData[0];\n      this.startingAxisData[1] = axisData[1];\n    }\n\n    if (this.startingAxisData.length > 0) {\n      var velX = 0;\n      var velZ = 0;\n\n      if (data.enableNegX && axisData[0] < this.startingAxisData[0]) {\n        velX = -1;\n      }\n\n      if (data.enablePosX && axisData[0] > this.startingAxisData[0]) {\n        velX = 1;\n      }\n\n      if (data.enablePosZ && axisData[1] > this.startingAxisData[1]) {\n        velZ = -1;\n      }\n\n      if (data.enableNegZ && axisData[1] < this.startingAxisData[1]) {\n        velZ = 1;\n      }\n\n      var absChangeZ = Math.abs(this.startingAxisData[1] - axisData[1]);\n      var absChangeX = Math.abs(this.startingAxisData[0] - axisData[0]);\n\n      if (absChangeX > absChangeZ) {\n        this.zVel = 0;\n        this.xVel = velX;\n        this.isMoving = true;\n      } else {\n        this.xVel = 0;\n        this.zVel = velZ;\n        this.isMoving = true;\n      }\n    }\n  },\n  handleTouchAxis: function handleTouchAxis(e) {\n    var data = this.data;\n    var axisData = e.detail.axis;\n    var velX = 0;\n    var velZ = 0;\n\n    if (data.enableNegX && axisData[0] < 0) {\n      velX = -1;\n    }\n\n    if (data.enablePosX && axisData[0] > 0) {\n      velX = 1;\n    }\n\n    if (data.enablePosZ && axisData[1] > 0) {\n      velZ = -1;\n    }\n\n    if (data.enableNegZ && axisData[1] < 0) {\n      velZ = 1;\n    }\n\n    if (Math.abs(axisData[0]) > Math.abs(axisData[1])) {\n      this.zVel = 0;\n      this.xVel = velX;\n    } else {\n      this.xVel = 0;\n      this.zVel = velZ;\n    }\n  }\n});","var vg = module.exports = {\n  VERSION: \"0.1.1\",\n  PI: Math.PI,\n  TAU: 2 * Math.PI,\n  DEG_TO_RAD: .0174532925,\n  RAD_TO_DEG: 57.2957795,\n  SQRT3: Math.sqrt(3),\n  TILE: \"tile\",\n  ENT: \"entity\",\n  STR: \"structure\",\n  HEX: \"hex\",\n  SQR: \"square\",\n  ABS: \"abstract\"\n};\nvg.Board = function (e, t) {\n  if (!e) throw new Error(\"You must pass in a grid system for the board to use.\");\n  this.tiles = [], this.tileGroup = null, this.group = new THREE.Object3D(), this.grid = null, this.overlay = null, this.finder = new vg.AStarFinder(t), vg.Loader.init(), this.setGrid(e);\n}, vg.Board.prototype = {\n  setEntityOnTile: function setEntityOnTile(e, t) {\n    var i = this.grid.cellToPixel(t.cell);\n    e.position.copy(i), e.position.y += e.heightOffset || 0, e.tile && (e.tile.entity = null), e.tile = t, t.entity = e;\n  },\n  addTile: function addTile(e) {\n    var t = this.tiles.indexOf(e);\n    -1 === t && (this.tiles.push(e), this.snapTileToGrid(e), e.position.y = 0, this.tileGroup.add(e.mesh), this.grid.add(e.cell), e.cell.tile = e);\n  },\n  removeTile: function removeTile(e) {\n    if (e) {\n      var t = this.tiles.indexOf(e);\n      this.grid.remove(e.cell), -1 !== t && this.tiles.splice(t, 1), e.dispose();\n    }\n  },\n  removeAllTiles: function removeAllTiles() {\n    if (this.tileGroup) for (var e = this.tileGroup.children, t = 0; t < e.length; t++) {\n      this.tileGroup.remove(e[t]);\n    }\n  },\n  getTileAtCell: function getTileAtCell(e) {\n    var t = this.grid.cellToHash(e);\n    return e.tile || (\"undefined\" != typeof this.grid.cells[t] ? this.grid.cells[t].tile : null);\n  },\n  snapToGrid: function snapToGrid(e) {\n    var t = this.grid.pixelToCell(e);\n    e.copy(this.grid.cellToPixel(t));\n  },\n  snapTileToGrid: function snapTileToGrid(e) {\n    if (e.cell) e.position.copy(this.grid.cellToPixel(e.cell));else {\n      var t = this.grid.pixelToCell(e.position);\n      e.position.copy(this.grid.cellToPixel(t));\n    }\n    return e;\n  },\n  getRandomTile: function getRandomTile() {\n    var e = vg.Tools.randomInt(0, this.tiles.length - 1);\n    return this.tiles[e];\n  },\n  findPath: function findPath(e, t, i) {\n    return this.finder.findPath(e.cell, t.cell, i, this.grid);\n  },\n  setGrid: function setGrid(e) {\n    this.group.remove(this.tileGroup), this.grid && e !== this.grid && (this.removeAllTiles(), this.tiles.forEach(function (e) {\n      this.grid.remove(e.cell), e.dispose();\n    }), this.grid.dispose()), this.grid = e, this.tiles = [], this.tileGroup = new THREE.Object3D(), this.group.add(this.tileGroup);\n  },\n  generateOverlay: function generateOverlay(e) {\n    var t = new THREE.LineBasicMaterial({\n      color: 0,\n      opacity: .3\n    });\n    this.overlay && this.group.remove(this.overlay), this.overlay = new THREE.Object3D(), this.grid.generateOverlay(e, this.overlay, t), this.group.add(this.overlay);\n  },\n  generateTilemap: function generateTilemap(e) {\n    this.reset();\n    var t = this.grid.generateTiles(e);\n    this.tiles = t, this.tileGroup = new THREE.Object3D();\n\n    for (var i = 0; i < t.length; i++) {\n      this.tileGroup.add(t[i].mesh);\n    }\n\n    this.group.add(this.tileGroup);\n  },\n  reset: function reset() {\n    this.removeAllTiles(), this.tileGroup && this.group.remove(this.tileGroup);\n  }\n}, vg.Board.prototype.constructor = vg.Board, vg.Cell = function (e, t, i, s) {\n  this.q = e || 0, this.r = t || 0, this.s = i || 0, this.h = s || 1, this.tile = null, this.userData = {}, this.walkable = !0, this._calcCost = 0, this._priority = 0, this._visited = !1, this._parent = null, this.uniqueID = vg.LinkedList.generateID();\n}, vg.Cell.prototype = {\n  set: function set(e, t, i) {\n    return this.q = e, this.r = t, this.s = i, this;\n  },\n  copy: function copy(e) {\n    return this.q = e.q, this.r = e.r, this.s = e.s, this.h = e.h, this.tile = e.tile || null, this.userData = e.userData || {}, this.walkable = e.walkable, this;\n  },\n  add: function add(e) {\n    return this.q += e.q, this.r += e.r, this.s += e.s, this;\n  },\n  equals: function equals(e) {\n    return this.q === e.q && this.r === e.r && this.s === e.s;\n  }\n}, vg.Cell.prototype.constructor = vg.Cell, vg.HexGrid = function (e) {\n  e = e || {}, this.type = vg.HEX, this.size = 5, this.cellSize = \"undefined\" == typeof e.cellSize ? 10 : e.cellSize, this.cells = {}, this.numCells = 0, this.extrudeSettings = null, this.autogenerated = !1;\n  var t,\n      i = [];\n\n  for (t = 0; 6 > t; t++) {\n    i.push(this._createVertex(t));\n  }\n\n  for (this.cellShape = new THREE.Shape(), this.cellShape.moveTo(i[0].x, i[0].y), t = 1; 6 > t; t++) {\n    this.cellShape.lineTo(i[t].x, i[t].y);\n  }\n\n  this.cellShape.lineTo(i[0].x, i[0].y), this.cellShape.autoClose = !0, this.cellGeo = new THREE.Geometry(), this.cellGeo.vertices = i, this.cellGeo.verticesNeedUpdate = !0, this.cellShapeGeo = new THREE.ShapeGeometry(this.cellShape), this._cellWidth = 2 * this.cellSize, this._cellLength = .5 * vg.SQRT3 * this._cellWidth, this._hashDelimeter = \".\", this._directions = [new vg.Cell(1, -1, 0), new vg.Cell(1, 0, -1), new vg.Cell(0, 1, -1), new vg.Cell(-1, 1, 0), new vg.Cell(-1, 0, 1), new vg.Cell(0, -1, 1)], this._diagonals = [new vg.Cell(2, -1, -1), new vg.Cell(1, 1, -2), new vg.Cell(-1, 2, -1), new vg.Cell(-2, 1, 1), new vg.Cell(-1, -1, 2), new vg.Cell(1, -2, 1)], this._list = [], this._vec3 = new THREE.Vector3(), this._cel = new vg.Cell(), this._conversionVec = new THREE.Vector3(), this._geoCache = [], this._matCache = [];\n}, vg.HexGrid.TWO_THIRDS = 2 / 3, vg.HexGrid.prototype = {\n  cellToPixel: function cellToPixel(e) {\n    return this._vec3.x = e.q * this._cellWidth * .75, this._vec3.y = e.h, this._vec3.z = -((e.s - e.r) * this._cellLength * .5), this._vec3;\n  },\n  pixelToCell: function pixelToCell(e) {\n    var t = e.x * (vg.HexGrid.TWO_THIRDS / this.cellSize),\n        i = (-e.x / 3 + vg.SQRT3 / 3 * e.z) / this.cellSize;\n    return this._cel.set(t, i, -t - i), this._cubeRound(this._cel);\n  },\n  getCellAt: function getCellAt(e) {\n    var t = e.x * (vg.HexGrid.TWO_THIRDS / this.cellSize),\n        i = (-e.x / 3 + vg.SQRT3 / 3 * e.z) / this.cellSize;\n    return this._cel.set(t, i, -t - i), this._cubeRound(this._cel), this.cells[this.cellToHash(this._cel)];\n  },\n  getNeighbors: function getNeighbors(e, t, i) {\n    var s,\n        n,\n        l = this._directions.length;\n\n    for (this._list.length = 0, s = 0; l > s; s++) {\n      this._cel.copy(e), this._cel.add(this._directions[s]), n = this.cells[this.cellToHash(this._cel)], !n || i && !i(e, n) || this._list.push(n);\n    }\n\n    if (t) for (s = 0; l > s; s++) {\n      this._cel.copy(e), this._cel.add(this._diagonals[s]), n = this.cells[this.cellToHash(this._cel)], !n || i && !i(e, n) || this._list.push(n);\n    }\n    return this._list;\n  },\n  getRandomCell: function getRandomCell() {\n    var e,\n        t = 0,\n        i = vg.Tools.randomInt(0, this.numCells);\n\n    for (e in this.cells) {\n      if (t === i) return this.cells[e];\n      t++;\n    }\n\n    return this.cells[e];\n  },\n  cellToHash: function cellToHash(e) {\n    return e.q + this._hashDelimeter + e.r + this._hashDelimeter + e.s;\n  },\n  distance: function distance(e, t) {\n    var i = Math.max(Math.abs(e.q - t.q), Math.abs(e.r - t.r), Math.abs(e.s - t.s));\n    return i += t.h - e.h;\n  },\n  clearPath: function clearPath() {\n    var e, t;\n\n    for (e in this.cells) {\n      t = this.cells[e], t._calcCost = 0, t._priority = 0, t._parent = null, t._visited = !1;\n    }\n  },\n  traverse: function traverse(e) {\n    var t;\n\n    for (t in this.cells) {\n      e(this.cells[t]);\n    }\n  },\n  generateTile: function generateTile(e, t, i) {\n    var s = Math.abs(e.h);\n    1 > s && (s = 1);\n    var n = this._geoCache[s];\n    n || (this.extrudeSettings.amount = s, n = new THREE.ExtrudeGeometry(this.cellShape, this.extrudeSettings), this._geoCache[s] = n);\n    var l = new vg.Tile({\n      size: this.cellSize,\n      scale: t,\n      cell: e,\n      geometry: n,\n      material: i\n    });\n    return e.tile = l, l;\n  },\n  generateTiles: function generateTiles(e) {\n    e = e || {};\n    var t = [],\n        i = {\n      tileScale: .95,\n      cellSize: this.cellSize,\n      material: null,\n      extrudeSettings: {\n        amount: 1,\n        bevelEnabled: !0,\n        bevelSegments: 1,\n        steps: 1,\n        bevelSize: .5,\n        bevelThickness: .5\n      }\n    };\n    i = vg.Tools.merge(i, e), this.cellSize = i.cellSize, this._cellWidth = 2 * this.cellSize, this._cellLength = .5 * vg.SQRT3 * this._cellWidth, this.autogenerated = !0, this.extrudeSettings = i.extrudeSettings;\n    var s, n, l;\n\n    for (s in this.cells) {\n      l = this.cells[s], n = this.generateTile(l, i.tileScale, i.material), n.position.copy(this.cellToPixel(l)), n.position.y = 0, t.push(n);\n    }\n\n    return t;\n  },\n  generateTilePoly: function generateTilePoly(e) {\n    e || (e = new THREE.MeshBasicMaterial({\n      color: 2405631\n    }));\n    var t = new THREE.Mesh(this.cellShapeGeo, e);\n    return this._vec3.set(1, 0, 0), t.rotateOnAxis(this._vec3, vg.PI / 2), t;\n  },\n  generate: function generate(e) {\n    e = e || {}, this.size = \"undefined\" == typeof e.size ? this.size : e.size;\n    var t, i, s, n;\n\n    for (t = -this.size; t < this.size + 1; t++) {\n      for (i = -this.size; i < this.size + 1; i++) {\n        s = -t - i, Math.abs(t) <= this.size && Math.abs(i) <= this.size && Math.abs(s) <= this.size && (n = new vg.Cell(t, i, s), this.add(n));\n      }\n    }\n  },\n  generateOverlay: function generateOverlay(e, t, i) {\n    var s,\n        n,\n        l,\n        r = this.cellShape.createPointsGeometry();\n\n    for (s = -e; e + 1 > s; s++) {\n      for (n = -e; e + 1 > n; n++) {\n        if (l = -s - n, Math.abs(s) <= e && Math.abs(n) <= e && Math.abs(l) <= e) {\n          this._cel.set(s, n, l);\n\n          var h = new THREE.Line(r, i);\n          h.position.copy(this.cellToPixel(this._cel)), h.rotation.x = 90 * vg.DEG_TO_RAD, t.add(h);\n        }\n      }\n    }\n  },\n  add: function add(e) {\n    var t = this.cellToHash(e);\n    if (!this.cells[t]) return this.cells[t] = e, this.numCells++, e;\n  },\n  remove: function remove(e) {\n    var t = this.cellToHash(e);\n    this.cells[t] && (delete this.cells[t], this.numCells--);\n  },\n  dispose: function dispose() {\n    this.cells = null, this.numCells = 0, this.cellShape = null, this.cellGeo.dispose(), this.cellGeo = null, this.cellShapeGeo.dispose(), this.cellShapeGeo = null, this._list = null, this._vec3 = null, this._conversionVec = null, this._geoCache = null, this._matCache = null;\n  },\n  load: function load(e, t, i) {\n    var s = this;\n    vg.Tools.getJSON({\n      url: e,\n      callback: function callback(e) {\n        s.fromJSON(e), t.call(i || null, e);\n      },\n      cache: !1,\n      scope: s\n    });\n  },\n  fromJSON: function fromJSON(e) {\n    var t,\n        i,\n        s = e.cells;\n\n    for (this.cells = {}, this.numCells = 0, this.size = e.size, this.cellSize = e.cellSize, this._cellWidth = 2 * this.cellSize, this._cellLength = .5 * vg.SQRT3 * this._cellWidth, this.extrudeSettings = e.extrudeSettings, this.autogenerated = e.autogenerated, t = 0; t < s.length; t++) {\n      i = new vg.Cell(), i.copy(s[t]), this.add(i);\n    }\n  },\n  toJSON: function toJSON() {\n    var e,\n        t,\n        i = {\n      size: this.size,\n      cellSize: this.cellSize,\n      extrudeSettings: this.extrudeSettings,\n      autogenerated: this.autogenerated\n    },\n        s = [];\n\n    for (t in this.cells) {\n      e = this.cells[t], s.push({\n        q: e.q,\n        r: e.r,\n        s: e.s,\n        h: e.h,\n        walkable: e.walkable,\n        userData: e.userData\n      });\n    }\n\n    return i.cells = s, i;\n  },\n  _createVertex: function _createVertex(e) {\n    var t = vg.TAU / 6 * e;\n    return new THREE.Vector3(this.cellSize * Math.cos(t), this.cellSize * Math.sin(t), 0);\n  },\n  _cubeRound: function _cubeRound(e) {\n    var t = Math.round(e.q),\n        i = Math.round(e.r),\n        s = Math.round(e.s),\n        n = Math.abs(t - e.q),\n        l = Math.abs(i - e.r),\n        r = Math.abs(s - e.s);\n    return n > l && n > r ? t = -i - s : l > r ? i = -t - s : s = -t - i, this._cel.set(t, i, s);\n  }\n}, vg.HexGrid.prototype.constructor = vg.HexGrid, vg.SqrGrid = function (e) {\n  e = e || {}, this.type = vg.SQR, this.size = 5, this.cellSize = \"undefined\" == typeof e.cellSize ? 10 : e.cellSize, this.cells = {}, this.numCells = 0, this.extrudeSettings = null, this.autogenerated = !1;\n  var t = [];\n  t.push(new THREE.Vector3()), t.push(new THREE.Vector3(-this.cellSize, this.cellSize)), t.push(new THREE.Vector3(this.cellSize, this.cellSize)), t.push(new THREE.Vector3(this.cellSize, -this.cellSize)), this.cellShape = new THREE.Shape(), this.cellShape.moveTo(-this.cellSize, -this.cellSize), this.cellShape.lineTo(-this.cellSize, this.cellSize), this.cellShape.lineTo(this.cellSize, this.cellSize), this.cellShape.lineTo(this.cellSize, -this.cellSize), this.cellShape.lineTo(-this.cellSize, -this.cellSize), this.cellGeo = new THREE.Geometry(), this.cellGeo.vertices = t, this.cellGeo.verticesNeedUpdate = !0, this.cellShapeGeo = new THREE.ShapeGeometry(this.cellShape), this._fullCellSize = 2 * this.cellSize, this._hashDelimeter = \".\", this._directions = [new vg.Cell(1, 0, 0), new vg.Cell(0, -1, 0), new vg.Cell(-1, 0, 0), new vg.Cell(0, 1, 0)], this._diagonals = [new vg.Cell(-1, -1, 0), new vg.Cell(-1, 1, 0), new vg.Cell(1, 1, 0), new vg.Cell(1, -1, 0)], this._list = [], this._vec3 = new THREE.Vector3(), this._cel = new vg.Cell(), this._conversionVec = new THREE.Vector3(), this._geoCache = [], this._matCache = [];\n}, vg.SqrGrid.prototype = {\n  cellToPixel: function cellToPixel(e) {\n    return this._vec3.x = e.q * this._fullCellSize, this._vec3.y = e.h, this._vec3.z = e.r * this._fullCellSize, this._vec3;\n  },\n  pixelToCell: function pixelToCell(e) {\n    var t = Math.round(e.x / this._fullCellSize),\n        i = Math.round(e.z / this._fullCellSize);\n    return this._cel.set(t, i, 0);\n  },\n  getCellAt: function getCellAt(e) {\n    var t = Math.round(e.x / this._fullCellSize),\n        i = Math.round(e.z / this._fullCellSize);\n    return this._cel.set(t, i), this.cells[this.cellToHash(this._cel)];\n  },\n  getNeighbors: function getNeighbors(e, t, i) {\n    var s,\n        n,\n        l = this._directions.length;\n\n    for (this._list.length = 0, s = 0; l > s; s++) {\n      this._cel.copy(e), this._cel.add(this._directions[s]), n = this.cells[this.cellToHash(this._cel)], !n || i && !i(e, n) || this._list.push(n);\n    }\n\n    if (t) for (s = 0; l > s; s++) {\n      this._cel.copy(e), this._cel.add(this._diagonals[s]), n = this.cells[this.cellToHash(this._cel)], !n || i && !i(e, n) || this._list.push(n);\n    }\n    return this._list;\n  },\n  getRandomCell: function getRandomCell() {\n    var e,\n        t = 0,\n        i = vg.Tools.randomInt(0, this.numCells);\n\n    for (e in this.cells) {\n      if (t === i) return this.cells[e];\n      t++;\n    }\n\n    return this.cells[e];\n  },\n  cellToHash: function cellToHash(e) {\n    return e.q + this._hashDelimeter + e.r;\n  },\n  distance: function distance(e, t) {\n    var i = Math.max(Math.abs(e.q - t.q), Math.abs(e.r - t.r));\n    return i += t.h - e.h;\n  },\n  clearPath: function clearPath() {\n    var e, t;\n\n    for (e in this.cells) {\n      t = this.cells[e], t._calcCost = 0, t._priority = 0, t._parent = null, t._visited = !1;\n    }\n  },\n  traverse: function traverse(e) {\n    var t;\n\n    for (t in this.cells) {\n      e(this.cells[t]);\n    }\n  },\n  generateTile: function generateTile(e, t, i) {\n    var s = Math.abs(e.h);\n    1 > s && (s = 1);\n    var n = this._geoCache[s];\n    n || (this.extrudeSettings.amount = s, n = new THREE.ExtrudeGeometry(this.cellShape, this.extrudeSettings), this._geoCache[s] = n);\n    var l = new vg.Tile({\n      size: this.cellSize,\n      scale: t,\n      cell: e,\n      geometry: n,\n      material: i\n    });\n    return e.tile = l, l;\n  },\n  generateTiles: function generateTiles(e) {\n    e = e || {};\n    var t = [],\n        i = {\n      tileScale: .95,\n      cellSize: this.cellSize,\n      material: null,\n      extrudeSettings: {\n        amount: 1,\n        bevelEnabled: !0,\n        bevelSegments: 1,\n        steps: 1,\n        bevelSize: .5,\n        bevelThickness: .5\n      }\n    };\n    i = vg.Tools.merge(i, e), this.cellSize = i.cellSize, this._fullCellSize = 2 * this.cellSize, this.autogenerated = !0, this.extrudeSettings = i.extrudeSettings;\n    var s, n, l;\n\n    for (s in this.cells) {\n      l = this.cells[s], n = this.generateTile(l, i.tileScale, i.material), n.position.copy(this.cellToPixel(l)), n.position.y = 0, t.push(n);\n    }\n\n    return t;\n  },\n  generateTilePoly: function generateTilePoly(e) {\n    e || (e = new THREE.MeshBasicMaterial({\n      color: 2405631\n    }));\n    var t = new THREE.Mesh(this.cellShapeGeo, e);\n    return this._vec3.set(1, 0, 0), t.rotateOnAxis(this._vec3, vg.PI / 2), t;\n  },\n  generate: function generate(e) {\n    e = e || {}, this.size = \"undefined\" == typeof e.size ? this.size : e.size;\n    var t,\n        i,\n        s,\n        n = Math.ceil(this.size / 2);\n\n    for (t = -n; n > t; t++) {\n      for (i = -n; n > i; i++) {\n        s = new vg.Cell(t, i + 1), this.add(s);\n      }\n    }\n  },\n  generateOverlay: function generateOverlay(e, t, i) {\n    var s,\n        n,\n        l = Math.ceil(e / 2);\n\n    for (s = -l; l > s; s++) {\n      for (n = -l; l > n; n++) {\n        this._cel.set(s, n);\n\n        var r = new THREE.Line(this.cellGeo, i);\n        r.position.copy(this.cellToPixel(this._cel)), r.rotation.x = 90 * vg.DEG_TO_RAD, t.add(r);\n      }\n    }\n  },\n  add: function add(e) {\n    var t = this.cellToHash(e);\n    if (!this.cells[t]) return this.cells[t] = e, this.numCells++, e;\n  },\n  remove: function remove(e) {\n    var t = this.cellToHash(e);\n    this.cells[t] && (delete this.cells[t], this.numCells--);\n  },\n  dispose: function dispose() {\n    this.cells = null, this.numCells = 0, this.cellShape = null, this.cellGeo.dispose(), this.cellGeo = null, this.cellShapeGeo.dispose(), this.cellShapeGeo = null, this._list = null, this._vec3 = null, this._conversionVec = null, this._geoCache = null, this._matCache = null;\n  },\n  load: function load(e, t, i) {\n    vg.Tools.getJSON({\n      url: e,\n      callback: function callback(e) {\n        this.fromJSON(e), t.call(i || null, e);\n      },\n      cache: !1,\n      scope: this\n    });\n  },\n  fromJSON: function fromJSON(e) {\n    var t,\n        i,\n        s = e.cells;\n\n    for (this.cells = {}, this.numCells = 0, this.size = e.size, this.cellSize = e.cellSize, this._fullCellSize = 2 * this.cellSize, this.extrudeSettings = e.extrudeSettings, this.autogenerated = e.autogenerated, t = 0; t < s.length; t++) {\n      i = new vg.Cell(), i.copy(s[t]), this.add(i);\n    }\n  },\n  toJSON: function toJSON() {\n    var e,\n        t,\n        i = {\n      size: this.size,\n      cellSize: this.cellSize,\n      extrudeSettings: this.extrudeSettings,\n      autogenerated: this.autogenerated\n    },\n        s = [];\n\n    for (t in this.cells) {\n      e = this.cells[t], s.push({\n        q: e.q,\n        r: e.r,\n        s: e.s,\n        h: e.h,\n        walkable: e.walkable,\n        userData: e.userData\n      });\n    }\n\n    return i.cells = s, i;\n  }\n}, vg.SqrGrid.prototype.constructor = vg.SqrGrid, vg.Tile = function (e) {\n  e = e || {};\n  var t = {\n    cell: null,\n    geometry: null,\n    material: null\n  };\n  if (t = vg.Tools.merge(t, e), !t.cell || !t.geometry) throw new Error(\"Missing vg.Tile configuration\");\n  this.cell = t.cell, this.cell.tile && this.cell.tile !== this && this.cell.tile.dispose(), this.cell.tile = this, this.uniqueID = vg.Tools.generateID(), this.geometry = t.geometry, this.material = t.material, this.material || (this.material = new THREE.MeshPhongMaterial({\n    color: vg.Tools.randomizeRGB(\"30, 30, 30\", 13)\n  })), this.objectType = vg.TILE, this.entity = null, this.userData = {}, this.selected = !1, this.highlight = \"0x0084cc\", this.mesh = new THREE.Mesh(this.geometry, this.material), this.mesh.userData.structure = this, this.position = this.mesh.position, this.rotation = this.mesh.rotation, this.rotation.x = -90 * vg.DEG_TO_RAD, this.mesh.scale.set(t.scale, t.scale, 1), this.material.emissive ? this._emissive = this.material.emissive.getHex() : this._emissive = null;\n}, vg.Tile.prototype = {\n  select: function select() {\n    return this.material.emissive && this.material.emissive.setHex(this.highlight), this.selected = !0, this;\n  },\n  deselect: function deselect() {\n    return null !== this._emissive && this.material.emissive && this.material.emissive.setHex(this._emissive), this.selected = !1, this;\n  },\n  toggle: function toggle() {\n    return this.selected ? this.deselect() : this.select(), this;\n  },\n  dispose: function dispose() {\n    this.cell && this.cell.tile && (this.cell.tile = null), this.cell = null, this.position = null, this.rotation = null, this.mesh.parent && this.mesh.parent.remove(this.mesh), this.mesh.userData.structure = null, this.mesh = null, this.material = null, this.userData = null, this.entity = null, this.geometry = null, this._emissive = null;\n  }\n}, vg.Tile.prototype.constructor = vg.Tile, function () {\n  var e = function e() {\n    this.obj = null, this.next = null, this.prev = null, this.free = !0;\n  },\n      t = function t() {\n    this.first = null, this.last = null, this.length = 0, this.objToNodeMap = {}, this.uniqueID = Date.now() + \"\" + Math.floor(1e3 * Math.random()), this.sortArray = [];\n  };\n\n  t.generateID = function () {\n    return Math.random().toString(36).slice(2) + Date.now();\n  }, t.prototype = {\n    getNode: function getNode(e) {\n      return this.objToNodeMap[e.uniqueID];\n    },\n    addNode: function addNode(i) {\n      var s = new e();\n      if (!i.uniqueID) try {\n        i.uniqueID = t.generateID();\n      } catch (n) {\n        return console.error(\"[LinkedList.addNode] obj passed is immutable: cannot attach necessary identifier\"), null;\n      }\n      return s.obj = i, s.free = !1, this.objToNodeMap[i.uniqueID] = s, s;\n    },\n    swapObjects: function swapObjects(e, t) {\n      this.objToNodeMap[e.obj.uniqueID] = null, this.objToNodeMap[t.uniqueID] = e, e.obj = t;\n    },\n    add: function add(e) {\n      var t = this.objToNodeMap[e.uniqueID];\n\n      if (t) {\n        if (t.free === !1) return;\n        t.obj = e, t.free = !1, t.next = null, t.prev = null;\n      } else t = this.addNode(e);\n\n      if (this.first) {\n        if (!this.last) throw new Error(\"[LinkedList.add] No last in the list -- that shouldn't happen here\");\n        this.last.next = t, t.prev = this.last, this.last = t, t.next = null;\n      } else this.first = t, this.last = t, t.next = null, t.prev = null;\n\n      this.length++, this.showDebug && this.dump(\"after add\");\n    },\n    has: function has(e) {\n      return !!this.objToNodeMap[e.uniqueID];\n    },\n    moveUp: function moveUp(e) {\n      this.dump(\"before move up\");\n      var t = this.getNode(e);\n      if (!t) throw \"Oops, trying to move an object that isn't in the list\";\n\n      if (t.prev) {\n        var i = t.prev,\n            s = i.prev;\n        t == this.last && (this.last = i);\n        var n = t.next;\n        s && (s.next = t), t.next = i, t.prev = i.prev, i.next = n, i.prev = t, this.first == i && (this.first = t);\n      }\n    },\n    moveDown: function moveDown(e) {\n      var t = this.getNode(e);\n      if (!t) throw \"Oops, trying to move an object that isn't in the list\";\n\n      if (t.next) {\n        var i = t.next;\n        this.moveUp(i.obj), this.last == i && (this.last = t);\n      }\n    },\n    sort: function sort(e) {\n      var t,\n          i,\n          s = this.sortArray,\n          n = this.first;\n\n      for (s.length = 0; n;) {\n        s.push(n.obj), n = n.next;\n      }\n\n      for (this.clear(), s.sort(e), i = s.length, t = 0; i > t; t++) {\n        this.add(s[t]);\n      }\n    },\n    remove: function remove(e) {\n      var t = this.getNode(e);\n      return !t || t.free ? !1 : (t.prev && (t.prev.next = t.next), t.next && (t.next.prev = t.prev), t.prev || (this.first = t.next), t.next || (this.last = t.prev), t.free = !0, t.prev = null, t.next = null, this.length--, !0);\n    },\n    shift: function shift() {\n      var e = this.first;\n      return 0 === this.length ? null : (e.prev && (e.prev.next = e.next), e.next && (e.next.prev = e.prev), this.first = e.next, e.next || (this.last = null), e.free = !0, e.prev = null, e.next = null, this.length--, e.obj);\n    },\n    pop: function pop() {\n      var e = this.last;\n      return 0 === this.length ? null : (e.prev && (e.prev.next = e.next), e.next && (e.next.prev = e.prev), this.last = e.prev, e.prev || (this.first = null), e.free = !0, e.prev = null, e.next = null, this.length--, e.obj);\n    },\n    concat: function concat(e) {\n      for (var t = e.first; t;) {\n        this.add(t.obj), t = t.next;\n      }\n    },\n    clear: function clear() {\n      for (var e = this.first; e;) {\n        e.free = !0, e = e.next;\n      }\n\n      this.first = null, this.length = 0;\n    },\n    dispose: function dispose() {\n      for (var e = this.first; e;) {\n        e.obj = null, e = e.next;\n      }\n\n      this.first = null, this.objToNodeMap = null;\n    },\n    dump: function dump(e) {\n      console.log(\"====================\" + e + \"=====================\");\n\n      for (var t = this.first; t;) {\n        console.log(\"{\" + t.obj.toString() + \"} previous=\" + (t.prev ? t.prev.obj : \"NULL\")), t = t.next();\n      }\n\n      console.log(\"===================================\"), console.log(\"Last: {\" + (this.last ? this.last.obj : \"NULL\") + \"} First: {\" + (this.first ? this.first.obj : \"NULL\") + \"}\");\n    }\n  }, t.prototype.constructor = t, vg.LinkedList = t;\n}(), function () {\n  var e = function e(_e, t, i, s, n) {\n    this._listener = t, this.isOnce = i, this.context = s, this.signal = _e, this._priority = n || 0;\n  };\n\n  e.prototype = {\n    active: !0,\n    params: null,\n    execute: function execute(e) {\n      var t, i;\n      return this.active && this._listener && (i = this.params ? this.params.concat(e) : e, t = this._listener.apply(this.context, i), this.isOnce && this.detach()), t;\n    },\n    detach: function detach() {\n      return this.isBound() ? this.signal.remove(this._listener, this.context) : null;\n    },\n    isBound: function isBound() {\n      return !!this.signal && !!this._listener;\n    },\n    _destroy: function _destroy() {\n      delete this.signal, delete this._listener, delete this.context;\n    },\n    toString: function toString() {\n      return \"[SignalBinding isOnce:\" + this.isOnce + \", isBound:\" + this.isBound() + \", active:\" + this.active + \"]\";\n    }\n  }, e.prototype.constructor = e;\n\n  var t = function t() {\n    this._bindings = [], this._prevParams = null;\n    var e = this;\n\n    this.dispatch = function () {\n      t.prototype.dispatch.apply(e, arguments);\n    };\n  };\n\n  t.prototype = {\n    memorize: !1,\n    _shouldPropagate: !0,\n    active: !0,\n    validateListener: function validateListener(e, t) {\n      if (\"function\" != typeof e) throw new Error(\"Signal: listener is a required param of {fn}() and should be a Function.\".replace(\"{fn}\", t));\n    },\n    _registerListener: function _registerListener(t, i, s, n) {\n      var l,\n          r = this._indexOfListener(t, s);\n\n      if (-1 !== r) {\n        if (l = this._bindings[r], l.isOnce !== i) throw new Error(\"You cannot add\" + (i ? \"\" : \"Once\") + \"() then add\" + (i ? \"Once\" : \"\") + \"() the same listener without removing the relationship first.\");\n      } else l = new e(this, t, i, s, n), this._addBinding(l);\n\n      return this.memorize && this._prevParams && l.execute(this._prevParams), l;\n    },\n    _addBinding: function _addBinding(e) {\n      var t = this._bindings.length;\n\n      do {\n        t--;\n      } while (this._bindings[t] && e._priority <= this._bindings[t]._priority);\n\n      this._bindings.splice(t + 1, 0, e);\n    },\n    _indexOfListener: function _indexOfListener(e, t) {\n      for (var i, s = this._bindings.length; s--;) {\n        if (i = this._bindings[s], i._listener === e && i.context === t) return s;\n      }\n\n      return -1;\n    },\n    has: function has(e, t) {\n      return -1 !== this._indexOfListener(e, t);\n    },\n    add: function add(e, t, i) {\n      return this.validateListener(e, \"add\"), this._registerListener(e, !1, t, i);\n    },\n    addOnce: function addOnce(e, t, i) {\n      return this.validateListener(e, \"addOnce\"), this._registerListener(e, !0, t, i);\n    },\n    remove: function remove(e, t) {\n      this.validateListener(e, \"remove\");\n\n      var i = this._indexOfListener(e, t);\n\n      return -1 !== i && (this._bindings[i]._destroy(), this._bindings.splice(i, 1)), e;\n    },\n    removeAll: function removeAll(e) {\n      \"undefined\" == typeof e && (e = null);\n\n      for (var t = this._bindings.length; t--;) {\n        e ? this._bindings[t].context === e && (this._bindings[t]._destroy(), this._bindings.splice(t, 1)) : this._bindings[t]._destroy();\n      }\n\n      e || (this._bindings.length = 0);\n    },\n    getNumListeners: function getNumListeners() {\n      return this._bindings.length;\n    },\n    halt: function halt() {\n      this._shouldPropagate = !1;\n    },\n    dispatch: function dispatch() {\n      if (this.active) {\n        var e,\n            t = Array.prototype.slice.call(arguments),\n            i = this._bindings.length;\n\n        if (this.memorize && (this._prevParams = t), i) {\n          e = this._bindings.slice(), this._shouldPropagate = !0;\n\n          do {\n            i--;\n          } while (e[i] && this._shouldPropagate && e[i].execute(t) !== !1);\n        }\n      }\n    },\n    forget: function forget() {\n      this._prevParams = null;\n    },\n    dispose: function dispose() {\n      this.removeAll(), delete this._bindings, delete this._prevParams;\n    },\n    toString: function toString() {\n      return \"[Signal active:\" + this.active + \" numListeners:\" + this.getNumListeners() + \"]\";\n    }\n  }, t.prototype.constructor = t, vg.Signal = t;\n}(), vg.AStarFinder = function (e) {\n  e = e || {};\n  var t = {\n    allowDiagonal: !1,\n    heuristicFilter: null\n  };\n  t = vg.Tools.merge(t, e), this.allowDiagonal = t.allowDiagonal, this.heuristicFilter = t.heuristicFilter, this.list = new vg.LinkedList();\n}, vg.AStarFinder.prototype = {\n  findPath: function findPath(e, t, i, s) {\n    var n, l, r, h, o, a;\n\n    for (i = i || this.heuristicFilter, s.clearPath(), this.list.clear(), this.list.add(e); this.list.length > 0;) {\n      if (this.list.sort(this.compare), n = this.list.shift(), n._visited = !0, n === t) return vg.PathUtil.backtrace(t);\n\n      for (r = s.getNeighbors(n, this.allowDiagonal, i), o = 0, a = r.length; a > o; o++) {\n        if (h = r[o], h.walkable && (l = n._calcCost + s.distance(n, h), !h._visited || l < h._calcCost)) {\n          if (h._visited = !0, h._parent = n, h._calcCost = l, h._priority = l + s.distance(t, h), h === t) return vg.PathUtil.backtrace(t);\n          this.list.add(h);\n        }\n      }\n    }\n\n    return null;\n  },\n  compare: function compare(e, t) {\n    return e._priority - t._priority;\n  }\n}, vg.AStarFinder.prototype.constructor = vg.AStarFinder, vg.PathUtil = {\n  backtrace: function backtrace(e) {\n    for (var t = [e]; e._parent;) {\n      e = e._parent, t.push(e);\n    }\n\n    return t.reverse();\n  },\n  biBacktrace: function biBacktrace(e, t) {\n    var i = this.backtrace(e),\n        s = this.backtrace(t);\n    return i.concat(s.reverse());\n  },\n  pathLength: function pathLength(e) {\n    var t,\n        i,\n        s,\n        n,\n        l,\n        r = 0;\n\n    for (t = 1; t < e.length; ++t) {\n      i = e[t - 1], s = e[t], n = i[0] - s[0], l = i[1] - s[1], r += Math.sqrt(n * n + l * l);\n    }\n\n    return r;\n  },\n  interpolate: function interpolate(e, t, i, s) {\n    var n,\n        l,\n        r,\n        h,\n        o,\n        a,\n        c = Math.abs,\n        u = [];\n\n    for (r = c(i - e), h = c(s - t), n = i > e ? 1 : -1, l = s > t ? 1 : -1, o = r - h; e !== i || t !== s;) {\n      u.push([e, t]), a = 2 * o, a > -h && (o -= h, e += n), r > a && (o += r, t += l);\n    }\n\n    return u;\n  },\n  expandPath: function expandPath(e) {\n    var t,\n        i,\n        s,\n        n,\n        l,\n        r,\n        h = [],\n        o = e.length;\n    if (2 > o) return h;\n\n    for (l = 0; o - 1 > l; ++l) {\n      for (t = e[l], i = e[l + 1], s = this.interpolate(t[0], t[1], i[0], i[1]), n = s.length, r = 0; n - 1 > r; ++r) {\n        h.push(s[r]);\n      }\n    }\n\n    return h.push(e[o - 1]), h;\n  },\n  smoothenPath: function smoothenPath(e, t) {\n    var i,\n        s,\n        n,\n        l,\n        r,\n        h,\n        o,\n        a,\n        c,\n        u,\n        d,\n        g,\n        p = t.length,\n        v = t[0][0],\n        f = t[0][1],\n        m = t[p - 1][0],\n        _ = t[p - 1][1];\n\n    for (i = v, s = f, r = [[i, s]], o = 2; p > o; ++o) {\n      for (c = t[o], n = c[0], l = c[1], u = this.interpolate(i, s, n, l), g = !1, a = 1; a < u.length; ++a) {\n        if (d = u[a], !e.isWalkableAt(d[0], d[1])) {\n          g = !0;\n          break;\n        }\n      }\n\n      g && (h = t[o - 1], r.push(h), i = h[0], s = h[1]);\n    }\n\n    return r.push([m, _]), r;\n  },\n  compressPath: function compressPath(e) {\n    if (e.length < 3) return e;\n    var t,\n        i,\n        s,\n        n,\n        l,\n        r,\n        h = [],\n        o = e[0][0],\n        a = e[0][1],\n        c = e[1][0],\n        u = e[1][1],\n        d = c - o,\n        g = u - a;\n\n    for (l = Math.sqrt(d * d + g * g), d /= l, g /= l, h.push([o, a]), r = 2; r < e.length; r++) {\n      t = c, i = u, s = d, n = g, c = e[r][0], u = e[r][1], d = c - t, g = u - i, l = Math.sqrt(d * d + g * g), d /= l, g /= l, (d !== s || g !== n) && h.push([t, i]);\n    }\n\n    return h.push([c, u]), h;\n  }\n}, vg.Loader = {\n  manager: null,\n  imageLoader: null,\n  crossOrigin: !1,\n  init: function init(e) {\n    this.crossOrigin = e || !1, this.manager = new THREE.LoadingManager(function () {}, function () {}, function () {\n      console.warn(\"Error loading images\");\n    }), this.imageLoader = new THREE.ImageLoader(this.manager), this.imageLoader.crossOrigin = e;\n  },\n  loadTexture: function loadTexture(e, t, i, s) {\n    var n = new THREE.Texture(null, t);\n    return this.imageLoader.load(e, function (e) {\n      n.image = e, n.needsUpdate = !0, i && i(n);\n    }, null, function (e) {\n      s && s(e);\n    }), n.sourceFile = e, n;\n  }\n}, vg.MouseCaster = function (e, t, i) {\n  this.down = !1, this.rightDown = !1, this.pickedObject = null, this.selectedObject = null, this.allHits = null, this.active = !0, this.shift = !1, this.ctrl = !1, this.wheel = 0, this.position = new THREE.Vector3(), this.screenPosition = new THREE.Vector2(), this.signal = new vg.Signal(), this.group = e, this._camera = t, this._raycaster = new THREE.Raycaster(), this._preventDefault = !1, i = i || document, i.addEventListener(\"mousemove\", this._onDocumentMouseMove.bind(this), !1), i.addEventListener(\"mousedown\", this._onDocumentMouseDown.bind(this), !1), i.addEventListener(\"mouseup\", this._onDocumentMouseUp.bind(this), !1), i.addEventListener(\"mousewheel\", this._onMouseWheel.bind(this), !1), i.addEventListener(\"DOMMouseScroll\", this._onMouseWheel.bind(this), !1);\n}, vg.MouseCaster.OVER = \"over\", vg.MouseCaster.OUT = \"out\", vg.MouseCaster.DOWN = \"down\", vg.MouseCaster.UP = \"up\", vg.MouseCaster.CLICK = \"click\", vg.MouseCaster.WHEEL = \"wheel\", vg.MouseCaster.prototype = {\n  update: function update() {\n    if (this.active) {\n      this._raycaster.setFromCamera(this.screenPosition, this._camera);\n\n      var e,\n          t,\n          i = this._raycaster.intersectObject(this.group, !0);\n\n      i.length > 0 ? (e = i[0], t = e.object.userData.structure, this.pickedObject != t && (this.pickedObject && this.signal.dispatch(vg.MouseCaster.OUT, this.pickedObject), this.pickedObject = t, this.selectedObject = null, this.signal.dispatch(vg.MouseCaster.OVER, this.pickedObject)), this.position.copy(e.point), this.screenPosition.z = e.distance) : (this.pickedObject && this.signal.dispatch(vg.MouseCaster.OUT, this.pickedObject), this.pickedObject = null, this.selectedObject = null), this.allHits = i;\n    }\n  },\n  preventDefault: function preventDefault() {\n    this._preventDefault = !0;\n  },\n  _onDocumentMouseDown: function _onDocumentMouseDown(e) {\n    return e = e || window.event, e.preventDefault(), this._preventDefault ? (this._preventDefault = !1, !1) : (this.pickedObject && (this.selectedObject = this.pickedObject), this.shift = e.shiftKey, this.ctrl = e.ctrlKey, this.down = 1 === e.which, this.rightDown = 3 === e.which, void this.signal.dispatch(vg.MouseCaster.DOWN, this.pickedObject));\n  },\n  _onDocumentMouseUp: function _onDocumentMouseUp(e) {\n    return e.preventDefault(), this._preventDefault ? (this._preventDefault = !1, !1) : (this.shift = e.shiftKey, this.ctrl = e.ctrlKey, this.signal.dispatch(vg.MouseCaster.UP, this.pickedObject), this.selectedObject && this.pickedObject && this.selectedObject.uniqueID === this.pickedObject.uniqueID && this.signal.dispatch(vg.MouseCaster.CLICK, this.pickedObject), this.down = 1 === e.which ? !1 : this.down, void (this.rightDown = 3 === e.which ? !1 : this.rightDown));\n  },\n  _onDocumentMouseMove: function _onDocumentMouseMove(e) {\n    e.preventDefault(), this.screenPosition.x = e.clientX / window.innerWidth * 2 - 1, this.screenPosition.y = 2 * -(e.clientY / window.innerHeight) + 1;\n  },\n  _onMouseWheel: function _onMouseWheel(e) {\n    if (this.active) {\n      e.preventDefault(), e.stopPropagation();\n      var t = 0;\n      void 0 !== e.wheelDelta ? t = e.wheelDelta : void 0 !== e.detail && (t = -e.detail), t > 0 ? this.wheel++ : this.wheel--, this.signal.dispatch(vg.MouseCaster.WHEEL, this.wheel);\n    }\n  }\n}, vg.MouseCaster.prototype.constructor = vg.MouseCaster, vg.Scene = function (e, t) {\n  var i = {\n    element: document.body,\n    alpha: !0,\n    antialias: !0,\n    clearColor: \"#fff\",\n    sortObjects: !1,\n    fog: null,\n    light: new THREE.DirectionalLight(16777215),\n    lightPosition: null,\n    cameraType: \"PerspectiveCamera\",\n    cameraPosition: null,\n    orthoZoom: 4\n  },\n      s = {\n    minDistance: 100,\n    maxDistance: 1e3,\n    zoomSpeed: 2,\n    noZoom: !1\n  };\n\n  if (i = vg.Tools.merge(i, e), \"boolean\" != typeof t && (s = vg.Tools.merge(s, t)), this.renderer = new THREE.WebGLRenderer({\n    alpha: i.alpha,\n    antialias: i.antialias\n  }), this.renderer.setClearColor(i.clearColor, 0), this.renderer.sortObjects = i.sortObjects, this.width = window.innerWidth, this.height = window.innerHeight, this.orthoZoom = i.orthoZoom, this.container = new THREE.Scene(), this.container.fog = i.fog, this.container.add(new THREE.AmbientLight(14540253)), i.lightPosition || i.light.position.set(-1, 1, -1).normalize(), this.container.add(i.light), \"OrthographicCamera\" === i.cameraType) {\n    var n = window.innerWidth / this.orthoZoom,\n        l = window.innerHeight / this.orthoZoom;\n    this.camera = new THREE.OrthographicCamera(n / -2, n / 2, l / 2, l / -2, 1, 5e3);\n  } else this.camera = new THREE.PerspectiveCamera(50, this.width / this.height, 1, 5e3);\n\n  this.contolled = !!t, this.contolled && (this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement), this.controls.minDistance = s.minDistance, this.controls.maxDistance = s.maxDistance, this.controls.zoomSpeed = s.zoomSpeed, this.controls.noZoom = s.noZoom), i.cameraPosition && this.camera.position.copy(i.cameraPosition), window.addEventListener(\"resize\", function () {\n    if (this.width = window.innerWidth, this.height = window.innerHeight, \"OrthographicCamera\" === this.camera.type) {\n      var e = this.width / this.orthoZoom,\n          t = this.height / this.orthoZoom;\n      this.camera.left = e / -2, this.camera.right = e / 2, this.camera.top = t / 2, this.camera.bottom = t / -2;\n    } else this.camera.aspect = this.width / this.height;\n\n    this.camera.updateProjectionMatrix(), this.renderer.setSize(this.width, this.height);\n  }.bind(this), !1), this.attachTo(i.element);\n}, vg.Scene.prototype = {\n  attachTo: function attachTo(e) {\n    e.style.width = this.width + \"px\", e.style.height = this.height + \"px\", this.renderer.setPixelRatio(window.devicePixelRatio), this.renderer.setSize(this.width, this.height), e.appendChild(this.renderer.domElement);\n  },\n  add: function add(e) {\n    this.container.add(e);\n  },\n  remove: function remove(e) {\n    this.container.remove(e);\n  },\n  render: function render() {\n    this.contolled && this.controls.update(), this.renderer.render(this.container, this.camera);\n  },\n  updateOrthoZoom: function updateOrthoZoom() {\n    if (this.orthoZoom <= 0) return void (this.orthoZoom = 0);\n    var e = this.width / this.orthoZoom,\n        t = this.height / this.orthoZoom;\n    this.camera.left = e / -2, this.camera.right = e / 2, this.camera.top = t / 2, this.camera.bottom = t / -2, this.camera.updateProjectionMatrix();\n  },\n  focusOn: function focusOn(e) {\n    this.camera.lookAt(e.position);\n  }\n}, vg.Scene.prototype.constructor = vg.Scene, vg.SelectionManager = function (e) {\n  this.mouse = e, this.onSelect = new vg.Signal(), this.onDeselect = new vg.Signal(), this.selected = null, this.toggleSelection = !1, this.mouse.signal.add(this.onMouse, this);\n}, vg.SelectionManager.prototype = {\n  select: function select(e, t) {\n    e && (t = t || !0, this.selected !== e && this.clearSelection(t), e.selected ? this.toggleSelection && (t && this.onDeselect.dispatch(e), e.deselect()) : e.select(), this.selected = e, t && this.onSelect.dispatch(e));\n  },\n  clearSelection: function clearSelection(e) {\n    e = e || !0, this.selected && (e && this.onDeselect.dispatch(this.selected), this.selected.deselect()), this.selected = null;\n  },\n  onMouse: function onMouse(e, t) {\n    switch (e) {\n      case vg.MouseCaster.DOWN:\n        t || this.clearSelection();\n        break;\n\n      case vg.MouseCaster.CLICK:\n        this.select(t);\n    }\n  }\n}, vg.SelectionManager.prototype.constructor = vg.SelectionManager, vg.Tools = {\n  clamp: function clamp(e, t, i) {\n    return Math.max(t, Math.min(i, e));\n  },\n  sign: function sign(e) {\n    return e && e / Math.abs(e);\n  },\n  random: function random(e, t) {\n    return 1 === arguments.length ? Math.random() * e - .5 * e : Math.random() * (t - e) + e;\n  },\n  randomInt: function randomInt(e, t) {\n    return 1 === arguments.length ? Math.random() * e - .5 * e | 0 : Math.random() * (t - e + 1) + e | 0;\n  },\n  normalize: function normalize(e, t, i) {\n    return (e - t) / (i - t);\n  },\n  getShortRotation: function getShortRotation(e) {\n    return e %= this.TAU, e > this.PI ? e -= this.TAU : e < -this.PI && (e += this.TAU), e;\n  },\n  generateID: function generateID() {\n    return Math.random().toString(36).slice(2) + Date.now();\n  },\n  isPlainObject: function isPlainObject(e) {\n    if (\"object\" != typeof e || e.nodeType || e === e.window) return !1;\n\n    try {\n      if (e.constructor && !Object.prototype.hasOwnProperty.call(e.constructor.prototype, \"isPrototypeOf\")) return !1;\n    } catch (t) {\n      return !1;\n    }\n\n    return !0;\n  },\n  merge: function merge(e, t) {\n    var i = this,\n        s = Array.isArray(t),\n        n = s && [] || {};\n    return s ? (e = e || [], n = n.concat(e), t.forEach(function (t, s) {\n      \"undefined\" == typeof n[s] ? n[s] = t : i.isPlainObject(t) ? n[s] = i.merge(e[s], t) : -1 === e.indexOf(t) && n.push(t);\n    }), n) : (e && i.isPlainObject(e) && Object.keys(e).forEach(function (t) {\n      n[t] = e[t];\n    }), Object.keys(t).forEach(function (s) {\n      t[s] && i.isPlainObject(t[s]) && e[s] ? n[s] = i.merge(e[s], t[s]) : n[s] = t[s];\n    }), n);\n  },\n  now: function now() {\n    return window.nwf ? window.nwf.system.Performance.elapsedTime : window.performance.now();\n  },\n  empty: function empty(e) {\n    for (; e.lastChild;) {\n      e.removeChild(e.lastChild);\n    }\n  },\n  radixSort: function radixSort(e, t, i, s) {\n    if (t = t || 0, i = i || e.length, s = s || 31, !(t >= i - 1 || 0 > s)) {\n      for (var n = t, l = i, r = 1 << s; l > n;) {\n        if (e[n] & r) {\n          --l;\n          var h = e[n];\n          e[n] = e[l], e[l] = h;\n        } else ++n;\n      }\n\n      this.radixSort(e, t, l, s - 1), this.radixSort(e, l, i, s - 1);\n    }\n  },\n  randomizeRGB: function randomizeRGB(e, t) {\n    var i,\n        s,\n        n = e.split(\",\"),\n        l = \"rgb(\";\n\n    for (t = this.randomInt(t), i = 0; 3 > i; i++) {\n      s = parseInt(n[i]) + t, 0 > s ? s = 0 : s > 255 && (s = 255), l += s + \",\";\n    }\n\n    return l = l.substring(0, l.length - 1), l += \")\";\n  },\n  getJSON: function getJSON(e) {\n    var t = new XMLHttpRequest(),\n        i = \"undefined\" == typeof e.cache ? !1 : e.cache,\n        s = i ? e.url : e.url + \"?t=\" + Math.floor(1e4 * Math.random()) + Date.now();\n    t.onreadystatechange = function () {\n      if (200 === this.status) {\n        var t = null;\n\n        try {\n          t = JSON.parse(this.responseText);\n        } catch (i) {\n          return;\n        }\n\n        return void e.callback.call(e.scope || null, t);\n      }\n\n      0 !== this.status && console.warn(\"[Tools.getJSON] Error: \" + this.status + \" (\" + this.statusText + \") :: \" + e.url);\n    }, t.open(\"GET\", s, !0), t.setRequestHeader(\"Accept\", \"application/json\"), t.setRequestHeader(\"Content-Type\", \"application/json\"), t.send(\"\");\n  }\n};","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n"],"sourceRoot":""}