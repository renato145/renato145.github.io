{"version":3,"sources":["webpack://renato-hermoza/./src/components/GithubPreview.tsx","webpack://renato-hermoza/./src/components/Experiments.tsx","webpack://renato-hermoza/./src/components/LinkButton.tsx","webpack://renato-hermoza/./src/hooks/useGitRepos.tsx","webpack://renato-hermoza/./src/hooks/useIntersectionObserver.tsx","webpack://renato-hermoza/./src/pages/experiments.tsx"],"names":["GithubPreview","data","props","homepageUrl","url","imgUrl","name","tags","description","updatedAt","className","href","target","rel","src","alt","formatRelativeDate","Date","TagList","linkClassName","Experiments","title","showLimit","showLoadMore","loadMoreText","autoLoadMore","tag","gitRepos","useGitRepos","useState","limit","setLimit","visibleRepos","slice","length","increaseLimit","useCallback","ref","useRef","useIntersectionObserver","onIntersect","enabled","map","repo","i","key","LinkButton","onClick","children","useStaticQuery","allRepos","github","repositoryOwner","repositories","nodes","allGitReposJson","useMemo","forEach","d","indexOf","repoInfo","find","o","Object","assign","titleCase","singleSpace","unCamelCase","replace","formatName","push","root","rootMargin","threshold","useEffect","observer","IntersectionObserver","entries","entry","isIntersecting","el","current","observe","unobserve","location","headerConfig"],"mappings":"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","file":"component---src-pages-experiments-tsx-2e12400bbe961c127a02.js","sourcesContent":["import React, { HTMLProps } from 'react';\nimport { TagList } from './TagList';\nimport { RepoInfo } from './Types';\nimport { formatRelativeDate } from '../utils';\n\ninterface Props extends Omit<HTMLProps<HTMLDivElement>, 'data'> {\n  data: RepoInfo;\n}\n\nexport const GithubPreview: React.FC<Props> = ({ data, ...props }) => {\n  const { homepageUrl, url, imgUrl, name, tags, description, updatedAt } = data;\n\n  return (\n    <div {...props}>\n      <div className=\"w-full p-1 transition duration-150 rounded border shadow-sm hover:shadow-md\">\n        {imgUrl && (\n          <a href={homepageUrl || url} target=\"_black\" rel=\"noopener\">\n            <img className=\"\" src={imgUrl} alt={name} />\n          </a>\n        )}\n\n        <div className=\"mt-0 px-3 pb-2\">\n          <div>\n            {updatedAt && (\n              <small className=\"text-gray-600\">\n                Last updated:{' '}\n                {formatRelativeDate(new Date(updatedAt), 'dd/MM/yyyy')}\n              </small>\n            )}\n          </div>\n          <div className=\"text-xl font-semibold\">{name}</div>\n          <TagList linkClassName=\"text-xs\" tags={tags} />\n          <div className=\"mt-1\">{description}</div>\n          <div className=\"mt-4 flex flex-wrap justify-between\">\n            {url && (\n              <a href={url} target=\"_black\" rel=\"noopener\">\n                Go to code\n              </a>\n            )}\n            {homepageUrl && (\n              <a href={homepageUrl} target=\"_black\" rel=\"noopener\">\n                View\n              </a>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { HTMLProps, useCallback, useRef, useState } from 'react';\nimport { GithubPreview } from './GithubPreview';\nimport { LinkButton } from './LinkButton';\nimport { useGitRepos } from '../hooks/useGitRepos';\nimport { useIntersectionObserver } from '../hooks/useIntersectionObserver';\n\ninterface Props extends Omit<HTMLProps<HTMLDivElement>, 'title'> {\n  title?: boolean;\n  showLimit?: number;\n  showLoadMore?: boolean;\n  loadMoreText?: string;\n  autoLoadMore?: boolean;\n  tag?: string;\n}\n\nexport const Experiments: React.FC<Props> = ({\n  title = false,\n  showLimit = 6,\n  showLoadMore = true,\n  loadMoreText = 'Load more',\n  autoLoadMore = true,\n  tag,\n  ...props\n}) => {\n  const gitRepos = useGitRepos({ tag });\n  const [limit, setLimit] = useState(showLimit);\n  const visibleRepos = gitRepos.slice(0, limit || gitRepos.length);\n  const increaseLimit = useCallback(() => {\n    if (limit < gitRepos.length) setLimit((limit) => limit + showLimit);\n  }, [limit, gitRepos.length, showLimit]);\n  const ref = useRef<HTMLDivElement>(null);\n  useIntersectionObserver({\n    target: ref,\n    onIntersect: increaseLimit,\n    enabled: autoLoadMore,\n  });\n\n  return (\n    <div {...props}>\n      {title && <h2 className=\"font-medium\">Experiments</h2>}\n      <div className=\"mt-2 grid md:grid-cols-2 xl:grid-cols-3 gap-4\">\n        {visibleRepos.map((repo, i) => (\n          <GithubPreview key={i} data={repo} className=\"flex\" />\n        ))}\n      </div>\n      {showLoadMore && visibleRepos.length < gitRepos.length && (\n        <div ref={ref} className=\"mr-4 text-right\">\n          <LinkButton onClick={increaseLimit}>{loadMoreText}</LinkButton>\n        </div>\n      )}\n      {gitRepos.length === 0 && <div>...</div>}\n    </div>\n  );\n};\n","import React, { HTMLProps } from 'react';\n\ninterface Props extends Omit<HTMLProps<HTMLButtonElement>, \"className\" | \"type\"> {};\n\nexport const LinkButton: React.FC<Props> = ({ children, ...props }) => (\n  <button\n    className=\"p-0 bg-opacity-0 hover:bg-opacity-0 active:bg-opacity-0 focus:shadow-none text-blue-600 hover:text-blue-800\"\n    {...props}\n  >\n    {children}\n  </button>\n);\n","import { graphql, useStaticQuery } from 'gatsby';\nimport { useMemo } from 'react';\nimport { unCamelCase, singleSpace, titleCase } from '../utils';\nimport { GraphqlGithubAll, RepoInfo } from '../components/Types';\n\nconst formatName: (string) => string  = (name) =>\n  titleCase(singleSpace(unCamelCase(name.replace(/[-_]/g, ' '))));\n\ninterface Props {\n  tag?: string;\n  name?: string;\n};\n\nexport const useGitRepos = ({ tag, name }: Props) => {\n  const data = useStaticQuery<GraphqlGithubAll>(\n    graphql`\n      query {\n        allGitReposJson {\n          nodes {\n            name\n            showName\n            tags\n          }\n        }\n        github {\n          repositoryOwner(login: \"renato145\") {\n            repositories(\n              last: 100\n              orderBy: { field: UPDATED_AT, direction: ASC }\n            ) {\n              nodes {\n                name\n                homepageUrl\n                url\n                updatedAt\n                openGraphImageUrl\n                description\n              }\n            }\n          }\n        }\n      }\n    `\n  );\n  const allRepos = data.github.repositoryOwner.repositories.nodes;\n  const gitRepos = data.allGitReposJson.nodes;\n\n  const repos: RepoInfo[] = useMemo(() => {\n    let data: any = [];\n    gitRepos.forEach((d) => {\n      if (name && d.name !== name) return;\n      if (tag && d.tags.indexOf(tag) === -1) return;\n      const repoInfo = { ...allRepos.find((o) => o.name === d.name) };\n      const repo = Object.assign(repoInfo, d);\n      const url = repo['openGraphImageUrl'];\n      if (url.indexOf('https://repository-images') > -1) repo['imgUrl'] = url;\n      repo['name'] = repo['showName']\n        ? repo['showName']\n        : formatName(repo['name']);\n      data.push(repo);\n    });\n\n    return data;\n  }, [allRepos, gitRepos, tag, name]);\n\n  return repos;\n};\n","import React from 'react';\nimport { useEffect } from 'react';\n\ninterface Props extends IntersectionObserverInit {\n  target: React.RefObject<HTMLElement>;\n  onIntersect: () => void;\n  enabled?: boolean;\n}\n\nexport const useIntersectionObserver: (props: Props) => void = ({\n  target,\n  onIntersect,\n  enabled = true,\n  root,\n  rootMargin = '0px',\n  threshold = 1.0,\n}) => {\n  useEffect(() => {\n    if (!enabled) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => entry.isIntersecting && onIntersect());\n      },\n      {\n        root,\n        rootMargin,\n        threshold,\n      }\n    );\n\n    const el = target && target.current;\n    if (!el) return;\n\n    observer.observe(el);\n\n    return () => observer.unobserve(el);\n  }, [target.current, enabled]);\n};\n","import React from 'react';\nimport { Layout } from '../components/Layout';\nimport { Experiments } from '../components/Experiments';\nimport { PageProps } from 'gatsby';\n\nconst ExperimentIndex: React.FC<PageProps> = ({ location }) => {\n  const title = 'Experiments';\n\n  return (\n    <Layout\n      location={location}\n      title={title}\n      description='Playground, experiments, random codes...'\n      headerConfig={{ title }}\n    >\n      <Experiments showLimit={9} />\n    </Layout>\n  );\n};\n\nexport default ExperimentIndex;\n"],"sourceRoot":""}