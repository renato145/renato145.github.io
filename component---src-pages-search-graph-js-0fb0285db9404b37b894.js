/*! For license information please see component---src-pages-search-graph-js-0fb0285db9404b37b894.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"++j6":function(e,t){e.exports=AFRAME.registerComponent("touch-controls",{schema:{enabled:{default:!0},reverseEnabled:{default:!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods(),this.direction=0},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){var e=this.el.sceneEl,t=e.canvas;t?(t.addEventListener("touchstart",this.onTouchStart),t.addEventListener("touchend",this.onTouchEnd)):e.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var e=this.el.sceneEl&&this.el.sceneEl.canvas;e&&(e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchend",this.onTouchEnd))},isVelocityActive:function(){return this.data.enabled&&!!this.direction},getVelocityDelta:function(){return this.dVelocity.z=this.direction,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)},onTouchStart:function(e){this.direction=-1,this.data.reverseEnabled&&2===e.touches.length&&(this.direction=1),e.preventDefault()},onTouchEnd:function(e){this.direction=0,e.preventDefault()}})},"+LDG":function(e,t,n){"use strict";n.r(t);t.default=function(e){return e instanceof Function?e:"string"==typeof e?function(t){return t[e]}:function(t){return e}}},"+YAX":function(e,t,n){var r=n("2nzh"),i=n("1PpB"),o=n("BI4e"),a=n("cqv3");e.exports=function(e){return r(e)||i(e)||o(e)||a()}},"/qmn":function(e,t,n){var r=n("2oRo");e.exports=r.Promise},"1PpB":function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},"1gda":function(e,t){e.exports=THREE.ColladaLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=void 0===i.path?THREE.LoaderUtils.extractUrlBase(e):i.path,a=new THREE.FileLoader(i.manager);a.setPath(i.path),a.load(e,(function(e){t(i.parse(e,o))}),n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},options:{set convertUpAxis(e){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){function n(e,t){for(var n=[],r=e.childNodes,i=0,o=r.length;i<o;i++){var a=r[i];a.nodeName===t&&n.push(a)}return n}function r(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=t[r];return n}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=parseFloat(t[r]);return n}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=parseInt(t[r]);return n}function a(e){return e.substring(1)}function s(e){return 0===Object.keys(e).length}function c(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function l(e){return void 0!==e?e.textContent:"Y_UP"}function u(e,t,r,i){var o=n(e,t)[0];if(void 0!==o)for(var a=n(o,r),s=0;s<a.length;s++)i(a[s])}function h(e,t){for(var n in e){e[n].build=t(e[n])}}function d(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function f(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var o=a(i.getAttribute("source")),s=i.getAttribute("semantic");t.inputs[s]=o}}return t}function p(e){var t={},n=e.getAttribute("target").split("/"),r=n.shift(),i=n.shift(),o=-1!==i.indexOf("("),s=-1!==i.indexOf(".");if(s)n=i.split("."),i=n.shift(),t.member=n.shift();else if(o){var c=i.split("(");i=c.shift();for(var l=0;l<c.length;l++)c[l]=parseInt(c[l].replace(/\)/,""));t.indices=c}return t.id=r,t.sid=i,t.arraySyntax=o,t.memberSyntax=s,t.sampler=a(e.getAttribute("source")),t}function v(e){var t=[],n=e.channels,r=e.samplers,i=e.sources;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o],s=r[a.sampler],c=s.inputs.INPUT,l=s.inputs.OUTPUT;x(m(a,i[c],i[l]),t)}return t}function g(e){return d(Ke.animations[e],v)}function m(e,t,n){var r,i,o,a,s,c,l=Ke.nodes[e.id],u=Ne(l.id),h=l.transforms[e.sid],d=l.matrix.clone().transpose(),f={};switch(h){case"matrix":for(o=0,a=t.array.length;o<a;o++)if(r=t.array[o],i=o*n.stride,void 0===f[r]&&(f[r]={}),!0===e.arraySyntax){var p=n.array[i],v=e.indices[0]+4*e.indices[1];f[r][v]=p}else for(s=0,c=n.stride;s<c;s++)f[r][s]=n.array[i+s];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',h)}var g=function(e,t){var n=[];for(var r in e)n.push({time:parseFloat(r),value:e[r]});n.sort((function(e,t){return e.time-t.time}));for(var i=0;i<16;i++)E(n,i,t.elements[i]);return n}(f,d);return{name:u.uuid,keyframes:g}}var y=new THREE.Vector3,b=new THREE.Vector3,w=new THREE.Quaternion;function x(e,t){for(var n=e.keyframes,r=e.name,i=[],o=[],a=[],s=[],c=0,l=n.length;c<l;c++){var u=n[c],h=u.time,d=u.value;_e.fromArray(d).transpose(),_e.decompose(y,w,b),i.push(h),o.push(y.x,y.y,y.z),a.push(w.x,w.y,w.z,w.w),s.push(b.x,b.y,b.z)}return o.length>0&&t.push(new THREE.VectorKeyframeTrack(r+".position",i,o)),a.length>0&&t.push(new THREE.QuaternionKeyframeTrack(r+".quaternion",i,a)),s.length>0&&t.push(new THREE.VectorKeyframeTrack(r+".scale",i,s)),t}function E(e,t,n){var r,i,o,a=!0;for(i=0,o=e.length;i<o;i++)void 0===(r=e[i]).value[t]?r.value[t]=null:a=!1;if(!0===a)for(i=0,o=e.length;i<o;i++)(r=e[i]).value[t]=n;else!function(e,t){for(var n,r,i=0,o=e.length;i<o;i++){var a=e[i];if(null===a.value[t]){if(n=k(e,i,t),r=_(e,i,t),null===n){a.value[t]=r.value[t];continue}if(null===r){a.value[t]=n.value[t];continue}T(a,n,r,t)}}}(e,t)}function k(e,t,n){for(;t>=0;){var r=e[t];if(null!==r.value[n])return r;t--}return null}function _(e,t,n){for(;t<e.length;){var r=e[t];if(null!==r.value[n])return r;t++}return null}function T(e,t,n,r){n.time-t.time!=0?e.value[r]=(e.time-t.time)*(n.value[r]-t.value[r])/(n.time-t.time)+t.value[r]:e.value[r]=t.value[r]}function O(e){for(var t=[],n=e.name,r=e.end-e.start||-1,i=e.animations,o=0,a=i.length;o<a;o++)for(var s=g(i[o]),c=0,l=s.length;c<l;c++)t.push(s[c]);return new THREE.AnimationClip(n,r,t)}function A(e){return d(Ke.clips[e],O)}function C(e){for(var t={sources:{}},n=0,r=e.childNodes.length;n<r;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=i(o.textContent);break;case"source":var a=o.getAttribute("id");t.sources[a]=ie(o);break;case"joints":t.joints=S(o);break;case"vertex_weights":t.vertexWeights=j(o)}}return t}function S(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var o=i.getAttribute("semantic"),s=a(i.getAttribute("source"));t.inputs[o]=s}}return t}function j(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var s=i.getAttribute("semantic"),c=a(i.getAttribute("source")),l=parseInt(i.getAttribute("offset"));t.inputs[s]={id:c,offset:l};break;case"vcount":t.vcount=o(i.textContent);break;case"v":t.v=o(i.textContent)}}return t}function R(e){var t={id:e.id},n=Ke.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){var t,n,r,i={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},o=e.sources,a=e.vertexWeights,s=a.vcount,c=a.v,l=a.inputs.JOINT.offset,u=a.inputs.WEIGHT.offset,h=e.sources[e.joints.inputs.JOINT],d=e.sources[e.joints.inputs.INV_BIND_MATRIX],f=o[a.inputs.WEIGHT.id].array,p=0;for(t=0,r=s.length;t<r;t++){var v=s[t],g=[];for(n=0;n<v;n++){var m=c[p+l],y=c[p+u],b=f[y];g.push({index:m,weight:b}),p+=2}for(g.sort(k),n=0;n<4;n++){var w=g[n];void 0!==w?(i.indices.array.push(w.index),i.weights.array.push(w.weight)):(i.indices.array.push(0),i.weights.array.push(0))}}e.bindShapeMatrix?i.bindMatrix=(new THREE.Matrix4).fromArray(e.bindShapeMatrix).transpose():i.bindMatrix=(new THREE.Matrix4).identity();for(t=0,r=h.array.length;t<r;t++){var x=h.array[t],E=(new THREE.Matrix4).fromArray(d.array,t*d.stride).transpose();i.joints.push({name:x,boneInverse:E})}return i;function k(e,t){return t.weight-e.weight}}(e.skin),n.sources.skinIndices=t.skin.indices,n.sources.skinWeights=t.skin.weights),t}function M(e){return void 0!==e.build?e.build:e.init_from}function D(e){var t=Ke.images[e];return void 0!==t?d(t,M):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function P(e){for(var t={surfaces:{},samplers:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"newparam":N(i,t);break;case"technique":t.technique=z(i);break;case"extra":t.extra=G(i)}}return t}function N(e,t){for(var n=e.getAttribute("sid"),r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"surface":t.surfaces[n]=L(o);break;case"sampler2D":t.samplers[n]=I(o)}}}function L(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"init_from":t.init_from=i.textContent}}return t}function I(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"source":t.source=i.textContent}}return t}function z(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=i.nodeName,t.parameters=H(i)}}return t}function H(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[i.nodeName]=F(i);break;case"transparent":t[i.nodeName]={opaque:i.getAttribute("opaque"),data:F(i)}}}return t}function F(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"color":t[o.nodeName]=i(o.textContent);break;case"float":t[o.nodeName]=parseFloat(o.textContent);break;case"texture":t[o.nodeName]={id:o.getAttribute("texture"),extra:B(o)}}}return t}function B(e){for(var t={technique:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"extra":U(i,t)}}return t}function U(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"technique":V(i,t)}}}function V(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[i.nodeName]=parseFloat(i.textContent);break;case"wrapU":case"wrapV":"TRUE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=1:"FALSE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=0:t.technique[i.nodeName]=parseInt(i.textContent)}}}function G(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"technique":t.technique=q(i)}}return t}function q(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"double_sided":t[i.nodeName]=parseInt(i.textContent)}}return t}function K(e){return e}function W(e){var t,n,r=(t=e.url,d(Ke.effects[t],K)),i=r.profile.technique,o=r.profile.extra;switch(i.type){case"phong":case"blinn":n=new THREE.MeshPhongMaterial;break;case"lambert":n=new THREE.MeshLambertMaterial;break;default:n=new THREE.MeshBasicMaterial}function a(e){var t=r.profile.samplers[e.id],n=null;void 0!==t?n=D(r.profile.surfaces[t.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),n=D(e.id));if(null!==n){var i=function(e){var t,n=e.slice(2+(e.lastIndexOf(".")-1>>>0));switch(n=n.toLowerCase()){case"tga":t=Fe;break;default:t=Ue}return t}(n);if(void 0!==i){var o=i.load(n),a=e.extra;if(void 0!==a&&void 0!==a.technique&&!1===s(a.technique)){var c=a.technique;o.wrapS=c.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,o.wrapT=c.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,o.offset.set(c.offsetU||0,c.offsetV||0),o.repeat.set(c.repeatU||1,c.repeatV||1)}else o.wrapS=THREE.RepeatWrapping,o.wrapT=THREE.RepeatWrapping;return o}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",n),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}n.name=e.name;var c=i.parameters;for(var l in c){var u=c[l];switch(l){case"diffuse":u.color&&n.color.fromArray(u.color),u.texture&&(n.map=a(u.texture));break;case"specular":u.color&&n.specular&&n.specular.fromArray(u.color),u.texture&&(n.specularMap=a(u.texture));break;case"bump":u.texture&&(n.normalMap=a(u.texture));break;case"ambient":u.texture&&(n.lightMap=a(u.texture));break;case"shininess":u.float&&n.shininess&&(n.shininess=u.float);break;case"emission":u.color&&n.emissive&&n.emissive.fromArray(u.color),u.texture&&(n.emissiveMap=a(u.texture))}}var h=c.transparent,f=c.transparency;if(void 0===f&&h&&(f={float:1}),void 0===h&&f&&(h={opaque:"A_ONE",data:{color:[1,1,1,1]}}),h&&f)if(h.data.texture)n.transparent=!0;else{var p=h.data.color;switch(h.opaque){case"A_ONE":n.opacity=p[3]*f.float;break;case"RGB_ZERO":n.opacity=1-p[0]*f.float;break;case"A_ZERO":n.opacity=1-p[3]*f.float;break;case"RGB_ONE":n.opacity=p[0]*f.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',h.opaque)}n.opacity<1&&(n.transparent=!0)}return void 0!==o&&void 0!==o.technique&&1===o.technique.double_sided&&(n.side=THREE.DoubleSide),n}function X(e){return d(Ke.materials[e],W)}function Y(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"technique_common":return Z(n)}}return{}}function Z(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"perspective":case"orthographic":t.technique=r.nodeName,t.parameters=Q(r)}}return t}function Q(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[r.nodeName]=parseFloat(r.textContent)}}return t}function J(e){var t;switch(e.optics.technique){case"perspective":t=new THREE.PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var n=e.optics.parameters.ymag,r=e.optics.parameters.xmag,i=e.optics.parameters.aspect_ratio;r=void 0===r?n*i:r,n=void 0===n?r/i:n,r*=.5,n*=.5,t=new THREE.OrthographicCamera(-r,r,n,-n,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new THREE.PerspectiveCamera}return t.name=e.name,t}function $(e){var t=Ke.cameras[e];return void 0!==t?d(t,J):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ee(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=i.nodeName,t.parameters=te(i)}}return t}function te(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"color":var a=i(o.textContent);t.color=(new THREE.Color).fromArray(a);break;case"falloff_angle":t.falloffAngle=parseFloat(o.textContent);break;case"quadratic_attenuation":var s=parseFloat(o.textContent);t.distance=s?Math.sqrt(1/s):0}}return t}function ne(e){var t;switch(e.technique){case"directional":t=new THREE.DirectionalLight;break;case"point":t=new THREE.PointLight;break;case"spot":t=new THREE.SpotLight;break;case"ambient":t=new THREE.AmbientLight}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function re(e){var t=Ke.lights[e];return void 0!==t?d(t,ne):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function ie(e){for(var t={array:[],stride:3},o=0;o<e.childNodes.length;o++){var a=e.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"float_array":t.array=i(a.textContent);break;case"Name_array":t.array=r(a.textContent);break;case"technique_common":var s=n(a,"accessor")[0];void 0!==s&&(t.stride=parseInt(s.getAttribute("stride")))}}return t}function oe(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];1===r.nodeType&&(t[r.getAttribute("semantic")]=a(r.getAttribute("source")))}return t}function ae(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var s=a(i.getAttribute("source")),c=i.getAttribute("semantic"),l=parseInt(i.getAttribute("offset")),u=parseInt(i.getAttribute("set")),h=u>0?c+u:c;t.inputs[h]={id:s,offset:l},t.stride=Math.max(t.stride,l+1),"TEXCOORD"===c&&(t.hasUV=!0);break;case"vcount":t.vcount=o(i.textContent);break;case"p":t.p=o(i.textContent)}}return t}function se(e){for(var t=0,n=0,r=e.length;n<r;n++){!0===e[n].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function ce(e){var t={},n=e.sources,r=e.vertices,i=e.primitives;if(0===i.length)return{};var o=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];void 0===t[r.type]&&(t[r.type]=[]),t[r.type].push(r)}return t}(i);for(var a in o){var s=o[a];se(s),t[a]=le(s,n,r)}return t}function le(e,t,n){for(var r={},i={array:[],stride:0},o={array:[],stride:0},a={array:[],stride:0},s={array:[],stride:0},c={array:[],stride:0},l=[],u=4,h=[],d=4,f=new THREE.BufferGeometry,p=[],v=0,g=0;g<e.length;g++){var m=e[g],y=m.inputs,b=0;switch(m.type){case"lines":case"linestrips":b=2*m.count;break;case"triangles":b=3*m.count;break;case"polylist":for(var w=0;w<m.count;w++){var x=m.vcount[w];switch(x){case 3:b+=3;break;case 4:b+=6;break;default:b+=3*(x-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",m.type)}for(var E in f.addGroup(v,b,g),v+=b,m.material&&p.push(m.material),y){var k=y[E];switch(E){case"VERTEX":for(var _ in n){var T=n[_];switch(_){case"POSITION":var O=i.array.length;if(ue(m,t[T],k.offset,i.array),i.stride=t[T].stride,t.skinWeights&&t.skinIndices&&(ue(m,t.skinIndices,k.offset,l),ue(m,t.skinWeights,k.offset,h)),!1===m.hasUV&&!0===e.uvsNeedsFix){b=(i.array.length-O)/i.stride;for(var A=0;A<b;A++)a.array.push(0,0)}break;case"NORMAL":ue(m,t[T],k.offset,o.array),o.stride=t[T].stride;break;case"COLOR":ue(m,t[T],k.offset,c.array),c.stride=t[T].stride;break;case"TEXCOORD":ue(m,t[T],k.offset,a.array),a.stride=t[T].stride;break;case"TEXCOORD1":ue(m,t[T],k.offset,s.array),a.stride=t[T].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',_)}}break;case"NORMAL":ue(m,t[k.id],k.offset,o.array),o.stride=t[k.id].stride;break;case"COLOR":ue(m,t[k.id],k.offset,c.array),c.stride=t[k.id].stride;break;case"TEXCOORD":ue(m,t[k.id],k.offset,a.array),a.stride=t[k.id].stride;break;case"TEXCOORD1":ue(m,t[k.id],k.offset,s.array),s.stride=t[k.id].stride}}}return i.array.length>0&&f.addAttribute("position",new THREE.Float32BufferAttribute(i.array,i.stride)),o.array.length>0&&f.addAttribute("normal",new THREE.Float32BufferAttribute(o.array,o.stride)),c.array.length>0&&f.addAttribute("color",new THREE.Float32BufferAttribute(c.array,c.stride)),a.array.length>0&&f.addAttribute("uv",new THREE.Float32BufferAttribute(a.array,a.stride)),s.array.length>0&&f.addAttribute("uv2",new THREE.Float32BufferAttribute(s.array,s.stride)),l.length>0&&f.addAttribute("skinIndex",new THREE.Float32BufferAttribute(l,u)),h.length>0&&f.addAttribute("skinWeight",new THREE.Float32BufferAttribute(h,d)),r.data=f,r.type=e[0].type,r.materialKeys=p,r}function ue(e,t,n,r){var i=e.p,o=e.stride,a=e.vcount;function s(e){for(var t=i[e+n]*l,o=t+l;t<o;t++)r.push(c[t])}var c=t.array,l=t.stride;if(void 0!==e.vcount)for(var u=0,h=0,d=a.length;h<d;h++){var f=a[h];if(4===f){var p=u+1*o,v=u+2*o,g=u+3*o;s(u+0*o),s(p),s(g),s(p),s(v),s(g)}else if(3===f){p=u+1*o,v=u+2*o;s(u+0*o),s(p),s(v)}else if(f>4)for(var m=1,y=f-2;m<=y;m++){p=u+o*m,v=u+o*(m+1);s(u+0*o),s(p),s(v)}u+=o*f}else for(h=0,d=i.length;h<d;h+=o)s(h)}function he(e){return d(Ke.geometries[e],ce)}function de(e){return void 0!==e.build?e.build:e}function fe(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"joint":t.joints[r.getAttribute("sid")]=pe(r);break;case"link":t.links.push(ge(r))}}}function pe(e){for(var t,n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"prismatic":case"revolute":t=ve(r)}}return t}function ve(e,t){t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":var o=i(r.textContent);t.axis.fromArray(o);break;case"limits":var a=r.getElementsByTagName("max")[0],s=r.getElementsByTagName("min")[0];t.limits.max=parseFloat(a.textContent),t.limits.min=parseFloat(s.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function ge(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"attachment_full":t.attachments.push(me(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(ye(r))}}return t}function me(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"link":t.links.push(ge(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(ye(r))}}return t}function ye(e){var t={type:e.nodeName},n=i(e.textContent);switch(t.type){case"matrix":t.obj=new THREE.Matrix4,t.obj.fromArray(n).transpose();break;case"translate":t.obj=new THREE.Vector3,t.obj.fromArray(n);break;case"rotate":t.obj=new THREE.Vector3,t.obj.fromArray(n),t.angle=THREE.Math.degToRad(n[3])}return t}function be(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":we(r,t)}}}function we(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"inertia":t.inertia=i(r.textContent);break;case"mass":t.mass=i(r.textContent)[0]}}}function xe(e){for(var t={target:e.getAttribute("target").split("/").pop()},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":var i=r.getElementsByTagName("param")[0];t.axis=i.textContent;var o=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=o.substr(0,o.length-1)}}return t}function Ee(e){return void 0!==e.build?e.build:e}function ke(e){for(var t=[],n=ze.querySelector('[id="'+e.id+'"]'),r=0;r<n.childNodes.length;r++){var o=n.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"matrix":var a=i(o.textContent),s=(new THREE.Matrix4).fromArray(a).transpose();t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:s});break;case"translate":case"scale":a=i(o.textContent);var c=(new THREE.Vector3).fromArray(a);t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:c});break;case"rotate":a=i(o.textContent),c=(new THREE.Vector3).fromArray(a);var l=THREE.Math.degToRad(a[3]);t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:c,angle:l})}}return t}var _e=new THREE.Matrix4,Te=new THREE.Vector3;function Oe(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"node":t.nodes.push(r.getAttribute("id")),Oe(r);break;case"instance_camera":t.instanceCameras.push(a(r.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Ae(r));break;case"instance_light":t.instanceLights.push(a(r.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Ae(r));break;case"instance_node":t.instanceNodes.push(a(r.getAttribute("url")));break;case"matrix":var o=i(r.textContent);t.matrix.multiply(_e.fromArray(o).transpose()),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"translate":o=i(r.textContent);Te.fromArray(o),t.matrix.multiply(_e.makeTranslation(Te.x,Te.y,Te.z)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"rotate":o=i(r.textContent);var s=THREE.Math.degToRad(o[3]);t.matrix.multiply(_e.makeRotationAxis(Te.fromArray(o),s)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"scale":o=i(r.textContent);t.matrix.scale(Te.fromArray(o)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"extra":break;default:console.log(r)}}return Pe(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):Ke.nodes[t.id]=t,t}function Ae(e){for(var t={id:a(e.getAttribute("url")),materials:{},skeletons:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"bind_material":for(var i=r.getElementsByTagName("instance_material"),o=0;o<i.length;o++){var s=i[o],c=s.getAttribute("symbol"),l=s.getAttribute("target");t.materials[c]=a(l)}break;case"skeleton":t.skeletons.push(a(r.textContent))}}return t}function Ce(e,t){var n,r,i,o=[],a=[];for(n=0;n<e.length;n++){var s=e[n];if(Pe(s))Se(Ne(s),t,o);else if(i=s,void 0!==Ke.visualScenes[i])for(var c=Ke.visualScenes[s].children,l=0;l<c.length;l++){var u=c[l];if("JOINT"===u.type)Se(Ne(u.id),t,o)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",s)}for(n=0;n<t.length;n++)for(l=0;l<o.length;l++)if((r=o[l]).bone.name===t[n].name){a[n]=r,r.processed=!0;break}for(n=0;n<o.length;n++)!1===(r=o[n]).processed&&(a.push(r),r.processed=!0);var h=[],d=[];for(n=0;n<a.length;n++)r=a[n],h.push(r.bone),d.push(r.boneInverse);return new THREE.Skeleton(h,d)}function Se(e,t,n){e.traverse((function(e){if(!0===e.isBone){for(var r,i=0;i<t.length;i++){var o=t[i];if(o.name===e.name){r=o.boneInverse;break}}void 0===r&&(r=new THREE.Matrix4),n.push({bone:e,boneInverse:r,processed:!1})}}))}function je(e){for(var t,n=[],r=e.matrix,i=e.nodes,o=e.type,a=e.instanceCameras,s=e.instanceControllers,c=e.instanceLights,l=e.instanceGeometries,u=e.instanceNodes,h=0,f=i.length;h<f;h++)n.push(Ne(i[h]));for(h=0,f=a.length;h<f;h++){var p=$(a[h]);null!==p&&n.push(p.clone())}for(h=0,f=s.length;h<f;h++)for(var v=s[h],g=(t=v.id,d(Ke.controllers[t],R)),m=De(he(g.id),v.materials),y=Ce(v.skeletons,g.skin.joints),b=0,w=m.length;b<w;b++){var x;(x=m[b]).isSkinnedMesh&&(x.bind(y,g.skin.bindMatrix),x.normalizeSkinWeights()),n.push(x)}for(h=0,f=c.length;h<f;h++){var E=re(c[h]);null!==E&&n.push(E.clone())}for(h=0,f=l.length;h<f;h++)for(b=0,w=(m=De(he((v=l[h]).id),v.materials)).length;b<w;b++)n.push(m[b]);for(h=0,f=u.length;h<f;h++)n.push(Ne(u[h]).clone());if(0===i.length&&1===n.length)x=n[0];else{x="JOINT"===o?new THREE.Bone:new THREE.Group;for(h=0;h<n.length;h++)x.add(n[h])}return""===x.name&&(x.name="JOINT"===o?e.sid:e.name),x.matrix.copy(r),x.matrix.decompose(x.position,x.quaternion,x.scale),x}var Re=new THREE.MeshBasicMaterial({color:16711935});function Me(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=t[e[r]];void 0===o?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[r]),n.push(Re)):n.push(X(o))}return n}function De(e,t){var n=[];for(var r in e){var i=e[r],o=Me(i.materialKeys,t);0===o.length&&("lines"===r||"linestrips"===r?o.push(new THREE.LineBasicMaterial):o.push(new THREE.MeshPhongMaterial));var a=void 0!==i.data.attributes.skinIndex;if(a)for(var s=0,c=o.length;s<c;s++)o[s].skinning=!0;var l,u=1===o.length?o[0]:o;switch(r){case"lines":l=new THREE.LineSegments(i.data,u);break;case"linestrips":l=new THREE.Line(i.data,u);break;case"triangles":case"polylist":l=a?new THREE.SkinnedMesh(i.data,u):new THREE.Mesh(i.data,u)}n.push(l)}return n}function Pe(e){return void 0!==Ke.nodes[e]}function Ne(e){return d(Ke.nodes[e],je)}function Le(e){var t=new THREE.Group;t.name=e.name;for(var n=e.children,r=0;r<n.length;r++){var i=n[r];t.add(Ne(i.id))}return t}function Ie(e){return d(Ke.visualScenes[e],Le)}if(0===e.length)return{scene:new THREE.Scene};var ze=n((new DOMParser).parseFromString(e,"application/xml"),"COLLADA")[0],He=ze.getAttribute("version");console.log("THREE.ColladaLoader: File version",He);var Fe,Be=function(e){return{unit:c(n(e,"unit")[0]),upAxis:l(n(e,"up_axis")[0])}}(n(ze,"asset")[0]),Ue=new THREE.TextureLoader(this.manager);Ue.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),THREE.TGALoader&&(Fe=new THREE.TGALoader(this.manager)).setPath(this.resourcePath||t);var Ve=[],Ge={},qe=0,Ke={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};u(ze,"library_animations","animation",(function(e){for(var t={sources:{},samplers:{},channels:{}},n=0,r=e.childNodes.length;n<r;n++){var i,o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"source":i=o.getAttribute("id"),t.sources[i]=ie(o);break;case"sampler":i=o.getAttribute("id"),t.samplers[i]=f(o);break;case"channel":i=o.getAttribute("target"),t.channels[i]=p(o);break;default:console.log(o)}}Ke.animations[e.getAttribute("id")]=t})),u(ze,"library_animation_clips","animation_clip",(function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"instance_animation":t.animations.push(a(i.getAttribute("url")))}}Ke.clips[e.getAttribute("id")]=t})),u(ze,"library_controllers","controller",(function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"skin":t.id=a(i.getAttribute("source")),t.skin=C(i);break;case"morph":t.id=a(i.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Ke.controllers[e.getAttribute("id")]=t})),u(ze,"library_images","image",(function(e){var t={init_from:n(e,"init_from")[0].textContent};Ke.images[e.getAttribute("id")]=t})),u(ze,"library_effects","effect",(function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"profile_COMMON":t.profile=P(i)}}Ke.effects[e.getAttribute("id")]=t})),u(ze,"library_materials","material",(function(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"instance_effect":t.url=a(i.getAttribute("url"))}}Ke.materials[e.getAttribute("id")]=t})),u(ze,"library_cameras","camera",(function(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"optics":t.optics=Y(i)}}Ke.cameras[e.getAttribute("id")]=t})),u(ze,"library_lights","light",(function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"technique_common":t=ee(i)}}Ke.lights[e.getAttribute("id")]=t})),u(ze,"library_geometries","geometry",(function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=n(e,"mesh")[0];if(void 0!==r){for(var i=0;i<r.childNodes.length;i++){var o=r.childNodes[i];if(1===o.nodeType){var a=o.getAttribute("id");switch(o.nodeName){case"source":t.sources[a]=ie(o);break;case"vertices":t.vertices=oe(o);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",o.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(ae(o));break;default:console.log(o)}}}Ke.geometries[e.getAttribute("id")]=t}})),u(ze,"library_nodes","node",Oe),u(ze,"library_visual_scenes","visual_scene",(function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),n=0;n<t.length;n++){var r=t[n];!1===r.hasAttribute("id")&&r.setAttribute("id","three_default_"+qe++)}}(e);for(var r=n(e,"node"),i=0;i<r.length;i++)t.children.push(Oe(r[i]));Ke.visualScenes[e.getAttribute("id")]=t})),u(ze,"library_kinematics_models","kinematics_model",(function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":fe(r,t)}}Ke.kinematicsModels[e.getAttribute("id")]=t})),u(ze,"library_physics_models","physics_model",(function(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"rigid_body":t.rigidBodies[r.getAttribute("name")]={},be(r,t.rigidBodies[r.getAttribute("name")])}}Ke.physicsModels[e.getAttribute("id")]=t})),u(ze,"scene","instance_kinematics_scene",(function(e){for(var t={bindJointAxis:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"bind_joint_axis":t.bindJointAxis.push(xe(r))}}Ke.kinematicsScenes[a(e.getAttribute("url"))]=t})),h(Ke.animations,v),h(Ke.clips,O),h(Ke.controllers,R),h(Ke.images,M),h(Ke.effects,K),h(Ke.materials,W),h(Ke.cameras,J),h(Ke.lights,ne),h(Ke.geometries,ce),h(Ke.visualScenes,Le),function(){var e=Ke.clips;if(!0===s(e)){if(!1===s(Ke.animations)){var t=[];for(var n in Ke.animations)for(var r=g(n),i=0,o=r.length;i<o;i++)t.push(r[i]);Ve.push(new THREE.AnimationClip("default",-1,t))}}else for(var n in e)Ve.push(A(n))}(),function(){var e=Object.keys(Ke.kinematicsModels)[0],t=Object.keys(Ke.kinematicsScenes)[0],n=Object.keys(Ke.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var r,i=(r=e,d(Ke.kinematicsModels[r],de)),o=function(e){return d(Ke.kinematicsScenes[e],Ee)}(t),a=Ie(n),s=o.bindJointAxis,c={},l=0,u=s.length;l<u;l++){var h=s[l],f=ze.querySelector('[sid="'+h.target+'"]');if(f){var p=f.parentElement;g(h.jointIndex,p)}}var v=new THREE.Matrix4;Ge={joints:i&&i.joints,getJointValue:function(e){var t=c[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var n=c[e];if(n){var r=n.joint;if(t>r.limits.max||t<r.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+").");else if(r.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var i=n.object,o=r.axis,a=n.transforms;_e.identity();for(var s=0;s<a.length;s++){var l=a[s];if(l.sid&&-1!==l.sid.indexOf(e))switch(r.type){case"revolute":_e.multiply(v.makeRotationAxis(o,THREE.Math.degToRad(t)));break;case"prismatic":_e.multiply(v.makeTranslation(o.x*t,o.y*t,o.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+r.type)}else switch(l.type){case"matrix":_e.multiply(l.obj);break;case"translate":_e.multiply(v.makeTranslation(l.obj.x,l.obj.y,l.obj.z));break;case"scale":_e.scale(l.obj);break;case"rotate":_e.multiply(v.makeRotationAxis(l.obj,l.angle))}}i.matrix.copy(_e),i.matrix.decompose(i.position,i.quaternion,i.scale),c[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function g(e,t){var n=t.getAttribute("name"),r=i.joints[e];a.traverse((function(i){i.name===n&&(c[e]={object:i,transforms:ke(t),joint:r,position:r.zeroPosition})}))}}();var We=function(e){return Ie(a(n(e,"instance_visual_scene")[0].getAttribute("url")))}(n(ze,"scene")[0]);return"Z_UP"===Be.upAxis&&We.quaternion.setFromEuler(new THREE.Euler(-Math.PI/2,0,0)),We.scale.multiplyScalar(Be.unit),{animations:Ve,kinematics:Ge,library:Ke,scene:We}}}},"1lwN":function(e,t,n){e.exports=function(e){var t=i(e);return new Function("bodies","settings","random",t)},e.exports.generateFunctionBody=i;var r=n("KNlp");function i(e){var t=r(e);return"\n  var boundingBox = {\n    ".concat(t("min_{var}: 0, max_{var}: 0,",{indent:4}),"\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ").concat(t("base_{var} = 0",{join:", "}),";\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ").concat(t("base_{var} += neighborPos.{var};",{indent:10}),"\n        }\n\n        ").concat(t("base_{var} /= neighbors.length;",{indent:8}),"\n      } else {\n        ").concat(t("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8}),"\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ").concat(t("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8}),"\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ").concat(t("var max_{var} = Number.MIN_VALUE;",{indent:4}),"\n    ").concat(t("var min_{var} = Number.MAX_VALUE;",{indent:4}),"\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ").concat(t("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6}),"\n      ").concat(t("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6}),"\n    }\n\n    ").concat(t("boundingBox.min_{var} = min_{var};",{indent:4}),"\n    ").concat(t("boundingBox.max_{var} = max_{var};",{indent:4}),"\n  }\n\n  function resetBoundingBox() {\n    ").concat(t("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4}),"\n  }\n")}},"2doD":function(e,t){function n(e){return new r("number"==typeof e?e:+new Date)}function r(e){this.seed=e}function i(e){return Math.sqrt(2*Math.PI/e)*Math.pow(1/Math.E*(e+1/(12*e-1/(10*e))),e)}function o(){var e=this.seed;return e=4294967295&(3042594569^(e=(e=4294967295&((e=(e=4294967295&(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19))+374761393+(e<<5)&4294967295)+3550635116^e<<9))+4251993797+(e<<3)&4294967295)^e>>>16),this.seed=e,(268435455&e)/268435456}e.exports=n,e.exports.random=n,e.exports.randomIterator=function(e,t){var r=t||n();if("function"!=typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(t){var n,i,o;for(n=e.length-1;n>0;--n)i=r.next(n+1),o=e[i],e[i]=e[n],e[n]=o,t(o);e.length&&t(e[0])},shuffle:function(){var t,n,i;for(t=e.length-1;t>0;--t)n=r.next(t+1),i=e[n],e[n]=e[t],e[t]=i;return e}}},r.prototype.next=function(e){return Math.floor(this.nextDouble()*e)},r.prototype.nextDouble=o,r.prototype.uniform=o,r.prototype.gaussian=function(){var e,t,n;do{t=2*this.nextDouble()-1,n=2*this.nextDouble()-1,e=t*t+n*n}while(e>=1||0===e);return t*Math.sqrt(-2*Math.log(e)/e)},r.prototype.levy=function(){var e=Math.pow(i(2.5)*Math.sin(1.5*Math.PI/2)/(1.5*i(1.25)*Math.pow(2,.25)),1/1.5);return this.gaussian()*e/Math.pow(Math.abs(this.gaussian()),1/1.5)}},"2nzh":function(e,t,n){var r=n("DUyk");e.exports=function(e){if(Array.isArray(e))return r(e)}},"3q1R":function(e,t,n){THREE.FBXLoader=n("Gio+"),e.exports=AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){var e=this.data;if(e.src){this.remove();var t=new THREE.FBXLoader;e.crossorigin&&t.setCrossOrigin(e.crossorigin),t.load(e.src,this.load.bind(this))}},load:function(e){this.model=e,this.el.setObject3D("mesh",e),this.el.emit("model-loaded",{format:"fbx",model:e})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},"4/OP":function(e,t){e.exports=AFRAME.registerComponent("object-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){var e,t=this,n=this.data;n.src&&(this.remove(),e=new THREE.ObjectLoader,n.crossorigin&&e.setCrossOrigin(n.crossorigin),e.load(n.src,(function(e){e.traverse((function(e){e instanceof THREE.SkinnedMesh&&e.material&&(e.material.skinning=!!(e.geometry&&e.geometry.bones||[]).length)})),t.load(e)})))},load:function(e){this.model=e,this.el.setObject3D("mesh",e),this.el.emit("model-loaded",{format:"json",model:e})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},"45M5":function(e,t){e.exports=function(e,t,n,r){this.from=e,this.to=t,this.length=n,this.coeff=r}},"53S5":function(e,t){e.exports=AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(e){var t=this.el;this.active&&this.checkpoint!==e&&(this.checkpoint&&t.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=e,this.sync(),this.position.distanceTo(this.targetPosition)<.1?this.checkpoint=null:(t.emit("navigation-start",{checkpoint:e}),"teleport"===this.data.mode&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,t.emit("navigation-end",{checkpoint:e}),t.components["movement-controls"].updateNavLocation())))},isVelocityActive:function(){return!(!this.active||!this.checkpoint)},getVelocity:function(){if(this.active){var e=this.data,t=this.offset,n=this.position,r=this.targetPosition,i=this.checkpoint;return this.sync(),n.distanceTo(r)<.1?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:i}),t.set(0,0,0)):(t.setLength(e.animateSpeed),t)}},sync:function(){var e=this.offset,t=this.position,n=this.targetPosition;t.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(n),n.add(this.checkpoint.components.checkpoint.getOffset()),e.copy(n).sub(t)}})},"5DQk":function(e,t){e.exports=AFRAME.registerPrimitive("a-grid",{defaultComponents:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",height:"geometry.height",src:"material.src"}})},"5paa":function(e,t){e.exports=AFRAME.registerComponent("normal-material",{init:function(){this.material=new THREE.MeshNormalMaterial({flatShading:!0}),this.applyMaterial=this.applyMaterial.bind(this),this.el.addEventListener("object3dset",this.applyMaterial)},remove:function(){this.el.removeEventListener("object3dset",this.applyMaterial)},applyMaterial:function(){var e=this;this.el.object3D.traverse((function(t){t.isMesh&&(t.material=e.material)}))}})},6401:function(e,t,n){var r=n("y3EA"),i=n("7Ohj");e.exports.Primitive=AFRAME.registerPrimitive("a-hexgrid",{defaultComponents:{hexgrid:{}},mappings:{src:"hexgrid.src"}}),e.exports.Component=AFRAME.registerComponent("hexgrid",{dependencies:["material"],schema:{src:{type:"asset"}},init:function(){var e=this,t=this.data;t.src?fetch(t.src).then((function(e){return e.json()})).then((function(t){return e.addMesh(t)})):this.addMesh(i)},addMesh:function(e){var t=new r.HexGrid;t.fromJSON(e);var n=new r.Board(t);n.generateTilemap(),this.el.setObject3D("mesh",n.group),this.addMaterial()},addMaterial:function(){var e=(this.el.components.material||{}).material;e&&this.el.object3D.traverse((function(t){t.isMesh&&(t.material=e)}))},remove:function(){this.el.removeObject3D("mesh")}})},"7Ohj":function(e,t){e.exports={size:5,cellSize:10,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5},autogenerated:!0,cells:[{q:-1,r:0,s:1,h:1,walkable:!0,userData:{}},{q:0,r:-1,s:1,h:1,walkable:!0,userData:{}},{q:0,r:0,s:0,h:1,walkable:!0,userData:{}},{q:1,r:-1,s:0,h:1,walkable:!0,userData:{}},{q:-1,r:1,s:0,h:0,walkable:!0,userData:{}},{q:0,r:1,s:-1,h:0,walkable:!0,userData:{}},{q:1,r:0,s:-1,h:0,walkable:!0,userData:{}}]}},"7ueG":function(e,t,n){"use strict";var r=n("I+eb"),i=n("WKiH").start,o=n("yNLB")("trimStart"),a=o?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},"8GlL":function(e,t,n){"use strict";var r=n("HAuM"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},"8L4W":function(e,t){function n(e){var t=document.getElementById(e),n=t.parentNode;try{n&&n.removeChild(t)}catch(r){}}function r(e,t,r){return new r((function(r,i){var o=t.timeout||5e3,a="script_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),s=function(e,t){var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.id=t,n.src=e,n}(e,a),c=setTimeout((function(){i(new Error("Script request to "+e+" timed out")),n(a)}),o),l=function(e){clearTimeout(e)};s.addEventListener("load",(function(e){r({ok:!0}),l(c),n(a)})),s.addEventListener("error",(function(t){i(new Error("Script request to "+e+" failed "+t)),l(c),n(a)})),function(e){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(s)}))}e.exports=function(e){return e=e||{},function(t,n){return r(t,n=n||{},e.Promise||Promise)}}},"9ifI":function(e,t){e.exports=AFRAME.registerComponent("jump-ability",{dependencies:["velocity"],schema:{on:{default:"keydown:Space gamepadbuttondown:0"},playerHeight:{default:1.764},maxJumps:{default:1},distance:{default:5},debug:{default:!1}},init:function(){this.velocity=0,this.numJumps=0;var e=this.beginJump.bind(this),t=this.data.on.split(" ");this.bindings={};for(var n=0;n<t.length;n++)this.bindings[t[n]]=e,this.el.addEventListener(t[n],e);this.bindings.collide=this.onCollide.bind(this),this.el.addEventListener("collide",this.bindings.collide)},remove:function(){for(var e in this.bindings)this.bindings.hasOwnProperty(e)&&(this.el.removeEventListener(e,this.bindings[e]),delete this.bindings[e]);this.el.removeEventListener("collide",this.bindings.collide),delete this.bindings.collide},beginJump:function(){if(this.numJumps<this.data.maxJumps){var e=this.data,t=Math.sqrt(-2*e.distance*-24.8),n=this.el.getAttribute("velocity");this.el.setAttribute("velocity",{x:n.x,y:t,z:n.z}),this.numJumps++,this.el.emit("jumpstart")}},onCollide:function(){this.numJumps>0&&this.el.emit("jumpend"),this.numJumps=0}})},AMdQ:function(e,t){e.exports=function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}(e);var t=function(e){var t=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=t[n];return o||(o=t[n]=[]),o.push({callback:r,ctx:i}),e},off:function(n,r){if(void 0===n)return t=Object.create(null),e;if(t[n])if("function"!=typeof r)delete t[n];else for(var i=t[n],o=0;o<i.length;++o)i[o].callback===r&&i.splice(o,1);return e},fire:function(n){var r,i=t[n];if(!i)return e;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var a=i[o];a.callback.apply(a.ctx,r)}return e}}}(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}},BaUI:function(e,t){e.exports=Object.assign((function(){}),{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})},CszH:function(e,t,n){var r=n("KNlp");function i(e,t){var n=r(e),i=n("{var}",{join:", "}),o="";return t&&(o="".concat(n("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});"))),"\nfunction Vector(".concat(i,") {\n").concat(o,"\n  if (typeof arguments[0] === 'object') {\n    // could be another vector\n    let v = arguments[0];\n    ").concat(n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4}),"\n    ").concat(n("this.{var} = v.{var};",{indent:4}),"\n  } else {\n    ").concat(n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4}),"\n  }\n}\n\nVector.prototype.reset = function () {\n  ").concat(n("this.{var} = ",{join:""}),"0;\n};\n\nfunction Body(").concat(i,") {\n  this.isPinned = false;\n  this.pos = new Vector(").concat(i,");\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (").concat(i,") {\n  ").concat(n("this.pos.{var} = {var} || 0;",{indent:2}),"\n};\n\nreturn {Body: Body, Vector: Vector};\n")}e.exports=function(e,t){var n=i(e,t);return new Function(n)().Body},e.exports.generateCreateBodyFunctionBody=i},DDQ4:function(e,t,n){var r,i,o=n("BaUI"),a=n("oSbB"),s="left",c="right",l=1,u=2;e.exports=AFRAME.registerComponent("gamepad-controls",{GamepadButton:o,schema:{enabled:{default:!0},camera:{default:"[camera]",type:"selector"},rotationSensitivity:{default:2}},init:function(){var e=this.el.sceneEl;this.system=e.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};var t=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=THREE.Math.degToRad(t.x),this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=THREE.Math.degToRad(t.y),this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,e.addBehavior(this)},update:function(){this.tick()},tick:function(e,t){this.updateButtonState(),this.updateRotation(t)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;var e=this._dpadVector,t=this._moveVector;this.getDpad(e),this.getJoystick(l,t);var n=e.x||t.x,r=e.y||t.y;return Math.abs(n)>.2||Math.abs(r)>.2},getVelocityDelta:function(){var e=this._dpadVector,t=this._moveVector;this.getDpad(e),this.getJoystick(l,t);var n=e.x||t.x,r=e.y||t.y,i=new THREE.Vector3;return Math.abs(n)>.2&&(i.x+=n),Math.abs(r)>.2&&(i.z+=r),i},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;var e=this._lookVector;return this.getJoystick(u,e),Math.abs(e.x)>.2||Math.abs(e.y)>.2},updateRotation:function(e){if(this.isRotationActive()){var t=this.data,n=this.yaw,r=this.pitch,i=t.camera.components["look-controls"],o=i&&i.pitchObject&&i.yawObject;o&&(r.rotation.copy(i.pitchObject.rotation),n.rotation.copy(i.yawObject.rotation));var a=this._lookVector;this.getJoystick(u,a),Math.abs(a.x)<=.2&&(a.x=0),Math.abs(a.y)<=.2&&(a.y=0),a.multiplyScalar(t.rotationSensitivity*e/1e3),n.rotation.y-=a.x,r.rotation.x-=a.y,r.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,r.rotation.x)),t.camera.object3D.rotation.set(r.rotation.x,n.rotation.y,0),o&&(i.pitchObject.rotation.copy(r.rotation),i.yawObject.rotation.copy(n.rotation))}},updateButtonState:function(){var e=this.getGamepad(c);if(this.data.enabled&&e)for(var t=0;t<e.buttons.length;t++)e.buttons[t].pressed&&!this.buttons[t]?this.emit(new a("gamepadbuttondown",t,e.buttons[t])):!e.buttons[t].pressed&&this.buttons[t]&&this.emit(new a("gamepadbuttonup",t,e.buttons[t])),this.buttons[t]=e.buttons[t].pressed;else Object.keys(this.buttons)&&(this.buttons={})},emit:function(e){this.el.emit(e.type,e),this.el.emit(e.type+":"+e.index,new a(e.type,e.index,e))},getGamepad:(r=[],i=[],function(e){var t=this.el.sceneEl.components["proxy-controls"],n=t&&t.isConnected()&&t.getGamepad(0);if(n)return n;r.length=0;for(var o=0;o<this.system.controllers.length;o++){var a=this.system.controllers[o],s=a?a.gamepad:null;if(r.push(s),s&&s.handedness===e)return s}for(var c=navigator.getGamepads?navigator.getGamepads():i,l=0;l<c.length;l++){var u=c[l];if(u&&u.hand===e)return u}return r[0]||c[0]}),getButton:function(e){return this.getGamepad(c).buttons[e]},getAxis:function(e){return this.getGamepad(e>1?c:s).axes[e]},getJoystick:function(e,t){var n=this.getGamepad(e===l?s:c);if("xr-standard"===n.mapping)switch(e){case l:return t.set(n.axes[2],n.axes[3]);case u:return t.set(n.axes[0],n.axes[1])}else switch(e){case l:return t.set(n.axes[0],n.axes[1]);case u:return t.set(n.axes[2],n.axes[3])}throw new Error('Unexpected joystick index "%d".',e)},getDpad:function(e){var t=this.getGamepad(s);return t.buttons[o.DPAD_RIGHT]?e.set((t.buttons[o.DPAD_RIGHT].pressed?1:0)+(t.buttons[o.DPAD_LEFT].pressed?-1:0),(t.buttons[o.DPAD_UP].pressed?-1:0)+(t.buttons[o.DPAD_DOWN].pressed?1:0)):e.set(0,0)},isConnected:function(){var e=this.getGamepad(s);return!(!e||!e.connected)},getID:function(){return this.getGamepad(s).id}})},DHMS:function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},DQrI:function(e,t){e.exports=AFRAME.registerComponent("mesh-smooth",{init:function(){this.el.addEventListener("model-loaded",(function(e){e.detail.model.traverse((function(e){e.isMesh&&e.geometry.computeVertexNormals()}))}))}})},"Dp/p":function(e,t){e.exports.Primitive=AFRAME.registerPrimitive("a-tube",{defaultComponents:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius","radial-segments":"tube.radialSegments",closed:"tube.closed"}}),e.exports.Component=AFRAME.registerComponent("tube",{schema:{path:{default:[]},segments:{default:64},radius:{default:1},radialSegments:{default:8},closed:{default:!1}},init:function(){var e=this.el,t=this.data,n=e.components.material;if(t.path.length){var r=new THREE.CatmullRomCurve3(t.path.map((function(e){return e=e.split(" "),new THREE.Vector3(Number(e[0]),Number(e[1]),Number(e[2]))}))),i=new THREE.TubeGeometry(r,t.segments,t.radius,t.radialSegments,t.closed);n||((n={}).material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(i,n.material),this.el.setObject3D("mesh",this.mesh)}else console.error("[a-tube] `path` property expected but not found.")},update:function(e){Object.keys(e).length&&(this.remove(),this.init())},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}})},EIId:function(e,t){e.exports=AFRAME.registerComponent("nav-mesh",{init:function(){this.system=this.el.sceneEl.systems.nav,this.hasLoadedNavMesh=!1,this.el.addEventListener("object3dset",this.loadNavMesh.bind(this))},play:function(){this.hasLoadedNavMesh||this.loadNavMesh()},loadNavMesh:function(){var e,t=this.el.getObject3D("mesh"),n=this.el.sceneEl.object3D;if(t&&(t.traverse((function(t){t.isMesh&&(e=t)})),e)){var r=e.geometry.isBufferGeometry?(new THREE.Geometry).fromBufferGeometry(e.geometry):e.geometry.clone();n.updateMatrixWorld(),r.applyMatrix(e.matrixWorld),this.system.setNavMeshGeometry(r),this.hasLoadedNavMesh=!0}}})},EYlc:function(e,t,n){n("53S5"),n("DDQ4"),n("hWGv"),n("++j6"),n("h2JL"),n("xlRs")},EyK7:function(e,t,n){var r=n("uTZd").Pathfinding,i=new r,o="level";e.exports=AFRAME.registerSystem("nav",{init:function(){this.navMesh=null,this.agents=new Set},setNavMeshGeometry:function(e){this.navMesh=new THREE.Mesh(e),i.setZoneData(o,r.createZone(e)),Array.from(this.agents).forEach((function(e){return e.updateNavLocation()}))},getNavMesh:function(){return this.navMesh},addAgent:function(e){this.agents.add(e)},removeAgent:function(e){this.agents.delete(e)},getPath:function(e,t,n){return this.navMesh?i.findPath(e,t,o,n):null},getGroup:function(e){return this.navMesh?i.getGroup(o,e):null},getNode:function(e,t){return this.navMesh?i.getClosestNode(e,o,t,!0):null},clampStep:function(e,t,n,r,a){return this.navMesh?r?i.clampStep(e,t,r,o,n,a):(a.copy(t),this.getNode(t,n)):(a.copy(t),null)}})},FI3q:function(e,t,n){e.exports=function(e){"uniqueLinkId"in(e=e||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId);void 0===e.multigraph&&(e.multigraph=!1);if("function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var t=new Map,n=[],l={},u=0,h=e.multigraph?function(e,t,n){var r=c(e,t),i=l.hasOwnProperty(r);if(i||O(e,t)){i||(l[r]=0);var o="@"+ ++l[r];r=c(e+o,t+o)}return new s(e,t,n,r)}:function(e,t,n){var r=c(e,t);return new s(e,t,n,r)},d=[],f=A,p=A,v=A,g=A,m={addNode:w,addLink:function(e,t,r){v();var i=x(e)||w(e),o=x(t)||w(t),s=h(e,t,r);n.push(s),a(i,s),e!==t&&a(o,s);return f(s,"add"),g(),s},removeLink:T,removeNode:E,getNode:x,getNodeCount:k,getLinkCount:_,getLinksCount:_,getNodesCount:k,getLinks:function(e){var t=x(e);return t?t.links:null},forEachNode:j,forEachLinkedNode:function(e,n,r){var i=x(e);if(i&&i.links&&"function"==typeof n)return r?function(e,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(o.fromId===n&&r(t.get(o.toId),o))return!0}}(i.links,e,n):function(e,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=o.fromId===n?o.toId:o.fromId;if(r(t.get(a),o))return!0}}(i.links,e,n)},forEachLink:function(e){var t,r;if("function"==typeof e)for(t=0,r=n.length;t<r;++t)e(n[t])},beginUpdate:v,endUpdate:g,clear:function(){v(),j((function(e){E(e.id)})),g()},hasLink:O,hasNode:x,getLink:O};return r(m),function(){var e=m.on;m.on=function(){return m.beginUpdate=v=C,m.endUpdate=g=S,f=y,p=b,m.on=e,e.apply(m,arguments)}}(),m;function y(e,t){d.push({link:e,changeType:t})}function b(e,t){d.push({node:e,changeType:t})}function w(e,n){if(void 0===e)throw new Error("Invalid node identifier");v();var r=x(e);return r?(r.data=n,p(r,"update")):(r=new o(e,n),p(r,"add")),t.set(e,r),g(),r}function x(e){return t.get(e)}function E(e){var n=x(e);if(!n)return!1;v();var r=n.links;if(r){n.links=null;for(var i=0;i<r.length;++i)T(r[i])}return t.delete(e),p(n,"remove"),g(),!0}function k(){return t.size}function _(){return n.length}function T(e){if(!e)return!1;var t=i(e,n);if(t<0)return!1;v(),n.splice(t,1);var r=x(e.fromId),o=x(e.toId);return r&&(t=i(e,r.links))>=0&&r.links.splice(t,1),o&&(t=i(e,o.links))>=0&&o.links.splice(t,1),f(e,"remove"),g(),!0}function O(e,t){var n,r=x(e);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var i=r.links[n];if(i.fromId===e&&i.toId===t)return i}return null}function A(){}function C(){u+=1}function S(){0===(u-=1)&&d.length>0&&(m.fire("changed",d),d.length=0)}function j(e){if("function"!=typeof e)throw new Error("Function is expected to iterate over graph nodes. You passed "+e);for(var n=t.values(),r=n.next();!r.done;){if(e(r.value))return!0;r=n.next()}}};var r=n("AMdQ");function i(e,t){if(!t)return-1;if(t.indexOf)return t.indexOf(e);var n,r=t.length;for(n=0;n<r;n+=1)if(t[n]===e)return n;return-1}function o(e,t){this.id=e,this.links=null,this.data=t}function a(e,t){e.links?e.links.push(t):e.links=[t]}function s(e,t,n,r){this.fromId=e,this.toId=t,this.data=n,this.id=r}function c(e,t){return e.toString()+"👉 "+t.toString()}},FN59:function(e,t){var n,r,i;e.exports=AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav,this.system.addAgent(this),this.group=null,this.path=[],this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=null,this.path=[]},tick:(n=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3,function(e,t){var o=this.el,a=this.data,s=this.raycaster,c=a.speed*t/1e3;if(a.active){if(!this.path.length){var l=this.el.object3D.position;this.group=this.group||this.system.getGroup(l),this.path=this.system.getPath(l,n.copy(a.destination),this.group)||[],o.emit("navigation-start")}if(!this.path.length)return console.warn("[nav] Unable to find path to %o.",a.destination),this.el.setAttribute("nav-agent",{active:!1}),void o.emit("navigation-end");var u,h=o.object3D.position,d=this.path[0];if(r.subVectors(d,h),r.length()<c){if(this.path.shift(),!this.path.length)return this.el.setAttribute("nav-agent",{active:!1}),void o.emit("navigation-end");i.copy(h),u=this.path[0]}else i.copy(r.setLength(c)).add(h),u=d;u.y=h.y,o.object3D.lookAt(u),s.ray.origin.copy(i),s.ray.origin.y+=1.5,s.ray.direction.y=-1;var f=s.intersectObject(this.system.getNavMesh());f.length?(r.subVectors(f[0].point,h),h.add(r.setLength(c))):h.copy(i)}})})},Gd68:function(e,t){var n,r,i,o;e.exports=AFRAME.registerComponent("kinematic-body",{dependencies:["velocity"],schema:{mass:{default:5},radius:{default:1.3},linearDamping:{default:.05},enableSlopes:{default:!0},enableJumps:{default:!1}},init:function(){this.system=this.el.sceneEl.systems.physics,this.system.addComponent(this);var e=this.el,t=this.data,n=(new CANNON.Vec3).copy(e.object3D.getWorldPosition(new THREE.Vector3));this.body=new CANNON.Body({material:this.system.getMaterial("staticMaterial"),position:n,mass:t.mass,linearDamping:t.linearDamping,fixedRotation:!0}),this.body.addShape(new CANNON.Sphere(t.radius),new CANNON.Vec3(0,t.radius,0)),this.body.el=this.el,this.el.body=this.body,this.system.addBody(this.body),e.hasAttribute("wasd-controls")&&console.warn("[kinematic-body] Not compatible with wasd-controls, use movement-controls.")},remove:function(){this.system.removeBody(this.body),this.system.removeComponent(this),delete this.el.body},beforeStep:function(e,t){if(t){var n=this.el,r=this.data,i=this.body;r.enableJumps||i.velocity.set(0,0,0),i.position.copy(n.getAttribute("position"))}},step:(n=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Vector3,function(e,t){if(t){var a,s,c=this.body,l=this.data,u=-1/0,h=this.system.getContacts();t=Math.min(t,1e3*this.system.data.maxInterval),o.set(0,0,0),n.copy(this.el.getAttribute("velocity")),c.velocity.copy(n);for(var d,f=0;d=h[f];f++)if(d.enabled){if(c.id===d.bi.id)d.ni.negate(i);else{if(c.id!==d.bj.id)continue;i.copy(d.ni)}c.velocity.dot(i)<-1e-6&&i.y<=.5?n.projectOnPlane(i):i.y>.5&&(a=c.id===d.bi.id?Math.abs(d.rj.y+d.bj.position.y):Math.abs(d.ri.y+d.bi.position.y))>u&&(u=a,o.copy(i),s=c.id===d.bi.id?d.bj:d.bi)}r.copy(n).normalize(),s&&(!l.enableJumps||r.y<.5)?(l.enableSlopes?o.y<.999999&&o.copy(this.raycastToGround(s,o)):o.set(0,1,0),n.projectOnPlane(o)):this.system.driver.world&&n.add(this.system.driver.world.gravity.scale(4*t/1e3)),c.velocity.copy(n),this.el.setAttribute("velocity",c.velocity),this.el.setAttribute("position",c.position)}}),raycastToGround:function(e,t){var n,r,i=this.body.position,o=this.body.position.clone();return(n=new CANNON.Ray(i,o))._updateDirection(),n.intersectBody(e),n.hasHit?(r=n.result.hitNormalWorld,Math.abs(r.y)>Math.abs(t.y)?r:t):t}})},"Gio+":function(e,t,n){n("E9XD"),e.exports=THREE.FBXLoader=function(){var e,t,n;function r(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager}function i(e){this.textureLoader=e}function o(){}function a(){}function s(){}function c(){}function l(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function u(){}function h(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function d(e){return e/46186158e3}r.prototype={constructor:r,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=THREE.LoaderUtils.extractUrlBase(e),a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,(function(n){try{var a=i.parse(n,o);t(a)}catch(s){setTimeout((function(){r&&r(s),i.manager.itemError(e)}),0)}}),n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(t,n){if(a="Kaydara FBX Binary  \0",(o=t).byteLength>=a.length&&a===k(o,0,a.length))e=(new c).parse(t);else{var r=k(t);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;for(var r=0;r<t.length;++r){if((o=void 0,o=e[(i=1)-1],e=e.slice(n+i),n++,o)===t[r])return!1}var i,o;return!0}(r))throw new Error("THREE.FBXLoader: Unknown format.");if(h(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+h(r));e=(new s).parse(r)}var o,a;return new i(new THREE.TextureLoader(this.manager).setPath(n).setCrossOrigin(this.crossOrigin)).parse(e)}},i.prototype={constructor:i,parse:function(){t=this.parseConnections();var e=this.parseImages(),r=this.parseTextures(e),i=this.parseMaterials(r),a=this.parseDeformers(),s=(new o).parse(a);return this.parseScene(a,s,i),n},parseConnections:function(){var t=new Map;"Connections"in e&&e.Connections.connections.forEach((function(e){var n=e[0],r=e[1],i=e[2];t.has(n)||t.set(n,{parents:[],children:[]});var o={ID:r,relationship:i};t.get(n).parents.push(o),t.has(r)||t.set(r,{parents:[],children:[]});var a={ID:n,relationship:i};t.get(r).children.push(a)}));return t},parseImages:function(){var t={},n={};if("Video"in e.Objects){var r=e.Objects.Video;for(var i in r){var o=r[i];if(t[l=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var c=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=c}}}}for(var l in t){var u=t[l];void 0!==n[u]?t[l]=n[u]:t[l]=t[l].split("\\").pop()}return t},parseImage:function(e){var t,n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":if("function"!=typeof THREE.TGALoader)return void console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");null===THREE.Loader.Handlers.get(".tga")&&THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"==typeof n)return"data:"+t+";base64,"+n;var o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(t){var n=new Map;if("Texture"in e.Objects){var r=e.Objects.Texture;for(var i in r){var o=this.parseTexture(r[i],t);n.set(parseInt(i),o)}}return n},parseTexture:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var r=e.WrapModeU,i=e.WrapModeV,o=void 0!==r?r.value:0,a=void 0!==i?i.value:0;if(n.wrapS=0===o?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,n.wrapT=0===a?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in e){var s=e.Scaling.value;n.repeat.x=s[0],n.repeat.y=s[1]}return n},loadTexture:function(e,n){var r,i,o=this.textureLoader.path,a=t.get(e.id).children;void 0!==a&&a.length>0&&void 0!==n[a[0].ID]&&(0!==(r=n[a[0].ID]).indexOf("blob:")&&0!==r.indexOf("data:")||this.textureLoader.setPath(void 0));var s=e.FileName.slice(-3).toLowerCase();if("tga"===s){var c=THREE.Loader.Handlers.get(".tga");null===c?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",r),i=new THREE.Texture):i=c.load(r)}else"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",r),i=new THREE.Texture):i=this.textureLoader.load(r);return this.textureLoader.setPath(o),i},parseMaterials:function(t){var n=new Map;if("Material"in e.Objects){var r=e.Objects.Material;for(var i in r){var o=this.parseMaterial(r[i],t);null!==o&&n.set(parseInt(i),o)}}return n},parseMaterial:function(e,n){var r=e.id,i=e.attrName,o=e.ShadingModel;if("object"==typeof o&&(o=o.value),!t.has(r))return null;var a,s=this.parseParameters(e,n,r);switch(o.toLowerCase()){case"phong":a=new THREE.MeshPhongMaterial;break;case"lambert":a=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new THREE.MeshPhongMaterial({color:3342591})}return a.setValues(s),a.name=i,a},parseParameters:function(e,n,r){var i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new THREE.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(i.color=(new THREE.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new THREE.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(i.emissive=(new THREE.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new THREE.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new THREE.Color).fromArray(e.SpecularColor.value));var o=this;return t.get(r).children.forEach((function(e){var t=e.relationship;switch(t){case"Bump":i.bumpMap=o.getTexture(n,e.ID);break;case"DiffuseColor":i.map=o.getTexture(n,e.ID);break;case"DisplacementColor":i.displacementMap=o.getTexture(n,e.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(n,e.ID);break;case"NormalMap":i.normalMap=o.getTexture(n,e.ID);break;case"ReflectionColor":i.envMap=o.getTexture(n,e.ID),i.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":i.specularMap=o.getTexture(n,e.ID);break;case"TransparentColor":i.alphaMap=o.getTexture(n,e.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t)}})),i},getTexture:function(n,r){return"LayeredTexture"in e.Objects&&r in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=t.get(r).children[0].ID),n.get(r)},parseDeformers:function(){var n={},r={};if("Deformer"in e.Objects){var i=e.Objects.Deformer;for(var o in i){var a=i[o],s=t.get(parseInt(o));if("Skin"===a.attrType){var c=this.parseSkeleton(s,i);c.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=s.parents[0].ID,n[o]=c}else if("BlendShape"===a.attrType){var l={id:o};l.rawTargets=this.parseMorphTargets(s,i),l.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[o]=l}}}return{skeletons:n,morphTargets:r}},parseSkeleton:function(e,t){var n=[];return e.children.forEach((function(e){var r=t[e.ID];if("Cluster"===r.attrType){var i={ID:e.ID,indices:[],weights:[],transform:(new THREE.Matrix4).fromArray(r.Transform.a),transformLink:(new THREE.Matrix4).fromArray(r.TransformLink.a),linkMode:r.Mode};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)}})),{rawBones:n,bones:[]}},parseMorphTargets:function(e,n){for(var r=[],i=0;i<e.children.length;i++){if(8===i){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var o=e.children[i],a=n[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;t.get(parseInt(o.ID)).children.forEach((function(e){void 0===e.relationship&&(s.geoID=e.ID)})),r.push(s)}return r},parseScene:function(r,i,o){n=new THREE.Group;var s=this.parseModels(r.skeletons,i,o),c=e.Objects.Model,l=this;s.forEach((function(e){var r=c[e.ID];l.setLookAtProperties(e,r),t.get(e.ID).parents.forEach((function(t){var n=s.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&n.add(e)})),this.bindSkeleton(r.skeletons,i,s),this.createAmbientLight(),this.setupMorphMaterials();var u=(new a).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=u,n=n.children[0]),n.animations=u},parseModels:function(n,r,i){var o=new Map,a=e.Objects.Model;for(var s in a){var c=parseInt(s),l=a[s],u=t.get(c),h=this.buildSkeleton(u,n,c,l.attrName);if(!h){switch(l.attrType){case"Camera":h=this.createCamera(u);break;case"Light":h=this.createLight(u);break;case"Mesh":h=this.createMesh(u,r,i);break;case"NurbsCurve":h=this.createCurve(u,r);break;case"LimbNode":case"Null":default:h=new THREE.Group}h.name=THREE.PropertyBinding.sanitizeNodeName(l.attrName),h.ID=c}this.setModelTransforms(h,l),o.set(c,h)}return o},buildSkeleton:function(e,t,n,r){var i=null;return e.parents.forEach((function(e){for(var o in t){var a=t[o];a.rawBones.forEach((function(t,o){if(t.ID===e.ID){var s=i;(i=new THREE.Bone).matrixWorld.copy(t.transformLink),i.name=THREE.PropertyBinding.sanitizeNodeName(r),i.ID=n,a.bones[o]=i,null!==s&&i.add(s)}}))}})),i},createCamera:function(t){var n,r;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(r=n)})),void 0===r)n=new THREE.Object3D;else{var i=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(i=1);var o=1;void 0!==r.NearPlane&&(o=r.NearPlane.value/1e3);var a=1e3;void 0!==r.FarPlane&&(a=r.FarPlane.value/1e3);var s=window.innerWidth,c=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(s=r.AspectWidth.value,c=r.AspectHeight.value);var l=s/c,u=45;void 0!==r.FieldOfView&&(u=r.FieldOfView.value);var h=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:n=new THREE.PerspectiveCamera(u,l,o,a),null!==h&&n.setFocalLength(h);break;case 1:n=new THREE.OrthographicCamera(-s/2,s/2,c/2,-c/2,o,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),n=new THREE.Object3D}}return n},createLight:function(t){var n,r;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(r=n)})),void 0===r)n=new THREE.Object3D;else{var i;i=void 0===r.LightType?0:r.LightType.value;var o=16777215;void 0!==r.Color&&(o=(new THREE.Color).fromArray(r.Color.value));var a=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(a=0);var s=0;void 0!==r.FarAttenuationEnd&&(s=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value);switch(i){case 0:n=new THREE.PointLight(o,a,s,1);break;case 1:n=new THREE.DirectionalLight(o,a);break;case 2:var c=Math.PI/3;void 0!==r.InnerAngle&&(c=THREE.Math.degToRad(r.InnerAngle.value));var l=0;void 0!==r.OuterAngle&&(l=THREE.Math.degToRad(r.OuterAngle.value),l=Math.max(l,1)),n=new THREE.SpotLight(o,a,s,c,l,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a THREE.PointLight."),n=new THREE.PointLight(o,a)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(e,t,n){var r,i=null,o=null,a=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&a.push(n.get(e.ID))})),a.length>1?o=a:a.length>0?o=a[0]:(o=new THREE.MeshPhongMaterial({color:13421772}),a.push(o)),"color"in i.attributes&&a.forEach((function(e){e.vertexColors=THREE.VertexColors})),i.FBX_Deformer?(a.forEach((function(e){e.skinning=!0})),r=new THREE.SkinnedMesh(i,o)):r=new THREE.Mesh(i,o),r},createCurve:function(e,t){var n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(n,r)},setModelTransforms:function(e,t){var n={};"RotationOrder"in t&&(n.eulerOrder=parseInt(t.RotationOrder.value)),"Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value);var r=w(n);e.applyMatrix(r)},setLookAtProperties:function(r,i){"LookAtProperty"in i&&t.get(r.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var i=e.Objects.Model[t.ID];if("Lcl_Translation"in i){var o=i.Lcl_Translation.value;void 0!==r.target?(r.target.position.fromArray(o),n.add(r.target)):r.lookAt((new THREE.Vector3).fromArray(o))}}}))},bindSkeleton:function(e,n,r){var i=this.parsePoseNodes();for(var o in e){var a=e[o];t.get(parseInt(a.ID)).parents.forEach((function(e){if(n.has(e.ID)){var o=e.ID;t.get(o).parents.forEach((function(e){r.has(e.ID)&&r.get(e.ID).bind(new THREE.Skeleton(a.bones),i[e.ID])}))}}))}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var n=e.Objects.Pose;for(var r in n)if("BindPose"===n[r].attrType){var i=n[r].PoseNode;Array.isArray(i)?i.forEach((function(e){t[e.Node]=(new THREE.Matrix4).fromArray(e.Matrix.a)})):t[i.Node]=(new THREE.Matrix4).fromArray(i.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,r=t[0],i=t[1],o=t[2];if(0!==r||0!==i||0!==o){var a=new THREE.Color(r,i,o);n.add(new THREE.AmbientLight(a,1))}}},setupMorphMaterials:function(){n.traverse((function(e){if(e.isMesh&&(e.geometry.morphAttributes.position||e.geometry.morphAttributes.normal)){var t=e.uuid,r=e.material.uuid,i=!1;n.traverse((function(e){e.isMesh&&e.material.uuid===r&&e.uuid!==t&&(i=!0)})),!0===i&&(e.material=e.material.clone()),e.material.morphTargets=!0}}))}},o.prototype={constructor:o,parse:function(n){var r=new Map;if("Geometry"in e.Objects){var i=e.Objects.Geometry;for(var o in i){var a=t.get(parseInt(o)),s=this.parseGeometry(a,i[o],n);r.set(parseInt(o),s)}}return r},parseGeometry:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,n,r){var i=r.skeletons,o=r.morphTargets,a=t.parents.map((function(t){return e.Objects.Model[t.ID]}));if(0!==a.length){var s=t.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null),c=t.children.reduce((function(e,t){return void 0!==o[t.ID]&&(e=o[t.ID]),e}),null),l=a[0],u={};"RotationOrder"in l&&(u.eulerOrder=l.RotationOrder.value),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);var h=w(u);return this.genGeometry(n,s,c,h)}},genGeometry:function(e,t,n,r){var i=new THREE.BufferGeometry;e.attrName&&(i.name=e.attrName);var o=this.parseGeoNode(e,t),a=this.genBuffers(o),s=new THREE.Float32BufferAttribute(a.vertex,3);if(r.applyToBufferAttribute(s),i.addAttribute("position",s),a.colors.length>0&&i.addAttribute("color",new THREE.Float32BufferAttribute(a.colors,3)),t&&(i.addAttribute("skinIndex",new THREE.Uint16BufferAttribute(a.weightsIndices,4)),i.addAttribute("skinWeight",new THREE.Float32BufferAttribute(a.vertexWeights,4)),i.FBX_Deformer=t),a.normal.length>0){var c=new THREE.Float32BufferAttribute(a.normal,3);(new THREE.Matrix3).getNormalMatrix(r).applyToBufferAttribute(c),i.addAttribute("normal",c)}if(a.uvs.forEach((function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),i.addAttribute(n,new THREE.Float32BufferAttribute(a.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){var l=a.materialIndex[0],u=0;if(a.materialIndex.forEach((function(e,t){e!==l&&(i.addGroup(u,t-u,l),l=e,u=t)})),i.groups.length>0){var h=i.groups[i.groups.length-1],d=h.start+h.count;d!==a.materialIndex.length&&i.addGroup(d,a.materialIndex.length-d,l)}0===i.groups.length&&i.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i},parseGeoNode:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];for(var r=0;e.LayerElementUV[r];)n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,o=[],a=[],s=[],c=[],l=[],u=[],h=this;return e.vertexIndices.forEach((function(d,f){var v=!1;d<0&&(d^=-1,v=!0);var g=[],m=[];if(o.push(3*d,3*d+1,3*d+2),e.color){var y=p(f,n,d,e.color);s.push(y[0],y[1],y[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){m.push(e.weight),g.push(e.id)})),m.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var b=[0,0,0,0],w=[0,0,0,0];m.forEach((function(e,t){var n=e,r=g[t];w.forEach((function(e,t,i){if(n>e){i[t]=n,n=e;var o=b[t];b[t]=r,r=o}}))})),g=b,m=w}for(;m.length<4;)m.push(0),g.push(0);for(var x=0;x<4;++x)l.push(m[x]),u.push(g[x])}if(e.normal){y=p(f,n,d,e.normal);a.push(y[0],y[1],y[2])}if(e.material&&"AllSame"!==e.material.mappingType)var E=p(f,n,d,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var r=p(f,n,d,e);void 0===c[t]&&(c[t]=[]),c[t].push(r[0]),c[t].push(r[1])})),r++,v&&(h.genFace(t,e,o,E,a,s,c,l,u,r),n++,r=0,o=[],a=[],s=[],c=[],l=[],u=[])})),t},genFace:function(e,t,n,r,i,o,a,s,c,l){for(var u=2;u<l;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(u-1)]),e.vertexWeights.push(s[4*(u-1)+1]),e.vertexWeights.push(s[4*(u-1)+2]),e.vertexWeights.push(s[4*(u-1)+3]),e.vertexWeights.push(s[4*u]),e.vertexWeights.push(s[4*u+1]),e.vertexWeights.push(s[4*u+2]),e.vertexWeights.push(s[4*u+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[4*(u-1)]),e.weightsIndices.push(c[4*(u-1)+1]),e.weightsIndices.push(c[4*(u-1)+2]),e.weightsIndices.push(c[4*(u-1)+3]),e.weightsIndices.push(c[4*u]),e.weightsIndices.push(c[4*u+1]),e.weightsIndices.push(c[4*u+2]),e.weightsIndices.push(c[4*u+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(u-1)]),e.colors.push(o[3*(u-1)+1]),e.colors.push(o[3*(u-1)+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(u-1)]),e.normal.push(i[3*(u-1)+1]),e.normal.push(i[3*(u-1)+2]),e.normal.push(i[3*u]),e.normal.push(i[3*u+1]),e.normal.push(i[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(u-1)]),e.uvs[n].push(a[n][2*(u-1)+1]),e.uvs[n].push(a[n][2*u]),e.uvs[n].push(a[n][2*u+1])}))},addMorphTargets:function(t,n,r,i){if(null!==r){t.morphAttributes.position=[],t.morphAttributes.normal=[];var o=this;r.rawTargets.forEach((function(r){var a=e.Objects.Geometry[r.geoID];void 0!==a&&o.genMorphGeometry(t,n,a,i)}))}},genMorphGeometry:function(e,t,n,r){var i=new THREE.BufferGeometry;n.attrName&&(i.name=n.attrName);for(var o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==t.Vertices?t.Vertices.a.slice():[],s=void 0!==n.Vertices?n.Vertices.a:[],c=void 0!==n.Indexes?n.Indexes.a:[],l=0;l<c.length;l++){var u=3*c[l];a[u]+=s[3*l],a[u+1]+=s[3*l+1],a[u+2]+=s[3*l+2]}var h={vertexIndices:o,vertexPositions:a},d=this.genBuffers(h),f=new THREE.Float32BufferAttribute(d.vertex,3);f.name=n.attrName,r.applyToBufferAttribute(f),e.morphAttributes.position.push(f)},parseNormals:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}},parseUVs:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}},parseVertexColors:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}},parseMaterialIndices:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=e.Materials.a,i=[],o=0;o<r.length;++o)i.push(o);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}},parseNurbsGeometry:function(e){if(void 0===THREE.NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new THREE.BufferGeometry;for(var n,r,i=t-1,o=e.KnotVector.a,a=[],s=e.Points.a,c=0,l=s.length;c<l;c+=4)a.push((new THREE.Vector4).fromArray(s,c));if("Closed"===e.Form)a.push(a[0]);else if("Periodic"===e.Form){n=i,r=o.length-1-n;for(c=0;c<i;++c)a.push(a[c])}var u=new THREE.NURBSCurve(i,o,a,n,r).getPoints(7*a.length),h=new Float32Array(3*u.length);u.forEach((function(e,t){e.toArray(h,3*t)}));var d=new THREE.BufferGeometry;return d.addAttribute("position",new THREE.BufferAttribute(h,3)),d}},a.prototype={constructor:a,parse:function(){var e=[],t=this.parseClips();if(void 0===t)return e;for(var n in t){var r=t[n],i=this.addClip(r);e.push(i)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,n=new Map;for(var r in t){var i=t[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(n){var r=e.Objects.AnimationCurve;for(var i in r){var o={id:r[i].id,times:r[i].KeyTime.a.map(d),values:r[i].KeyValueFloat.a},a=t.get(o.id);if(void 0!==a){var s=a.parents[0].ID,c=a.parents[0].relationship;c.match(/X/)?n.get(s).curves.x=o:c.match(/Y/)?n.get(s).curves.y=o:c.match(/Z/)?n.get(s).curves.z=o:c.match(/d|DeformPercent/)&&n.has(s)&&(n.get(s).curves.morph=o)}}},parseAnimationLayers:function(n){var r=e.Objects.AnimationLayer,i=new Map;for(var o in r){var a=[],s=t.get(parseInt(o));if(void 0!==s){var c=s.children,l=this;c.forEach((function(r,i){if(n.has(r.ID)){var o=n.get(r.ID);if(void 0!==o.curves.x||void 0!==o.curves.y||void 0!==o.curves.z){if(void 0===a[i]){t.get(r.ID).parents.forEach((function(e){void 0!==e.relationship&&(f=e.ID)}));var s=e.Objects.Model[f.toString()],c={modelName:THREE.PropertyBinding.sanitizeNodeName(s.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1],transform:l.getModelAnimTransform(s)};"PreRotation"in s&&(c.preRotations=s.PreRotation.value),"PostRotation"in s&&(c.postRotations=s.PostRotation.value),a[i]=c}a[i][o.attr]=o}else if(void 0!==o.curves.morph){if(void 0===a[i]){var u;t.get(r.ID).parents.forEach((function(e){void 0!==e.relationship&&(u=e.ID)}));var h=t.get(u).parents[0].ID,d=t.get(h).parents[0].ID,f=t.get(d).parents[0].ID;s=e.Objects.Model[f],c={modelName:THREE.PropertyBinding.sanitizeNodeName(s.attrName),morphName:e.Objects.Deformer[u].attrName};a[i]=c}a[i][o.attr]=o}}})),i.set(parseInt(o),a)}}return i},getModelAnimTransform:function(e){var t={};return"RotationOrder"in e&&(t.eulerOrder=parseInt(e.RotationOrder.value)),"Lcl_Translation"in e&&(t.translation=e.Lcl_Translation.value),"RotationOffset"in e&&(t.rotationOffset=e.RotationOffset.value),"Lcl_Rotation"in e&&(t.rotation=e.Lcl_Rotation.value),"PreRotation"in e&&(t.preRotation=e.PreRotation.value),"PostRotation"in e&&(t.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(t.scale=e.Lcl_Scaling.value),w(t)},parseAnimStacks:function(n){var r=e.Objects.AnimationStack,i={};for(var o in r){var a=t.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(a[0].ID);i[o]={name:r[o].attrName,layer:s}}return i},addClip:function(e){var t=[],n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new THREE.AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],n=new THREE.Vector3,r=new THREE.Quaternion,i=new THREE.Vector3;if(e.transform&&e.transform.decompose(n,r,i),n=n.toArray(),r=(new THREE.Euler).setFromQuaternion(r).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var a=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotations,e.postRotations);void 0!==a&&t.push(a)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==s&&t.push(s)}if(void 0!==e.DeformPercent){var c=this.generateMorphTrack(e);void 0!==c&&t.push(c)}return t},generateVectorTrack:function(e,t,n,r){var i=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(i,t,n);return new THREE.VectorKeyframeTrack(e+"."+r,i,o)},generateRotationTrack:function(e,t,n,r,i){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(THREE.Math.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(THREE.Math.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(THREE.Math.degToRad));var o=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(o,t,n);void 0!==r&&((r=r.map(THREE.Math.degToRad)).push("ZYX"),r=(new THREE.Euler).fromArray(r),r=(new THREE.Quaternion).setFromEuler(r)),void 0!==i&&((i=i.map(THREE.Math.degToRad)).push("ZYX"),i=(new THREE.Euler).fromArray(i),i=(new THREE.Quaternion).setFromEuler(i).inverse());for(var s=new THREE.Quaternion,c=new THREE.Euler,l=[],u=0;u<a.length;u+=3)c.set(a[u],a[u+1],a[u+2],"ZYX"),s.setFromEuler(c),void 0!==r&&s.premultiply(r),void 0!==i&&s.multiply(i),s.toArray(l,u/3*4);return new THREE.QuaternionKeyframeTrack(e+".quaternion",o,l)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,r=t.values.map((function(e){return e/100})),i=n.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new THREE.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})).filter((function(e,t,n){return n.indexOf(e)==t}))},getKeyframeTrackValues:function(e,t,n){var r=n,i=[],o=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var n=t.x.values[o];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==a){var c=t.y.values[a];i.push(c),r[1]=c}else i.push(r[1]);if(-1!==s){var l=t.z.values[s];i.push(l),r[2]=l}else i.push(r[2])})),i},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){for(var o=i/180,a=r/o,s=n+a,c=e.times[t-1],l=(e.times[t]-c)/o,u=c+l,h=[],d=[];u<e.times[t];)h.push(u),u+=l,d.push(s),s+=a;e.times=_(e.times,t,h),e.values=_(e.values,t,d)}}}},s.prototype={constructor:s,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,console.log("FBXTree: ",u),this.allNodes=new u,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){var i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!i&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):c?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}},parseNodeProperty:function(e,t,n){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var a=i.split(",").slice(1),s=parseInt(a[0]),c=parseInt(a[1]),l=i.split(",").slice(3);r="connections",function(e,t){for(var n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i=[s,c],l=l.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=E(i))}else this.parseNodeSpecialProperty(e,r,i)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=E(t.a))},parseNodeSpecialProperty:function(e,t,n){var r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=E(c)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),i)}},c.prototype={constructor:c,parse:function(e){var t=new l(e);t.skip(23);var n=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+n);for(var r=new u;!this.endOfContent(t);){var i=this.parseNode(t,n);null!==i&&r.add(i.name,i)}return r},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),a=e.getString(o);if(0===r)return null;for(var s=[],c=0;c<i;c++)s.push(this.parseProperty(e));var l=s.length>0?s[0]:"",u=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(a,n,d)}return n.propertyList=s,"number"==typeof l&&(n.id=l),""!==u&&(n.attrName=u),""!==h&&(n.attrType=h),""!==a&&(n.name=a),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){var i=[];n.propertyList.forEach((function(e,t){0!==t&&i.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){var o,a=n.propertyList[0],s=n.propertyList[1],c=n.propertyList[2],l=n.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[a]={type:s,type2:c,flag:l,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":n=e.getUint32();return e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}"undefined"==typeof Zlib&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var a=new l(new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(o))).decompress().buffer);switch(t){case"b":case"c":return a.getBooleanArray(r);case"d":return a.getFloat64Array(r);case"f":return a.getFloat32Array(r);case"i":return a.getInt32Array(r);case"l":return a.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},l.prototype={constructor:l,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),THREE.LoaderUtils.decodeText(new Uint8Array(t))}},u.prototype={constructor:u,add:function(e,t){this[e]=t}};var f=[];function p(e,t,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var o=i*r.dataSize,a=o+r.dataSize;return function(e,t,n,r){for(var i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(f,r.buffer,o,a)}var v=new THREE.Matrix4,g=new THREE.Euler,m=new THREE.Vector3,y=new THREE.Vector3,b=new THREE.Matrix4;function w(e){var t=new THREE.Matrix4;y.set(0,0,0),b.identity();var n,r=e.eulerOrder?x(e.eulerOrder):x(0);(e.translation&&y.fromArray(e.translation),e.rotationOffset&&y.add(m.fromArray(e.rotationOffset)),e.rotation)&&((n=e.rotation.map(THREE.Math.degToRad)).push(r),b.makeRotationFromEuler(g.fromArray(n)));e.preRotation&&((n=e.preRotation.map(THREE.Math.degToRad)).push(r),v.makeRotationFromEuler(g.fromArray(n)),b.premultiply(v));e.postRotation&&((n=e.postRotation.map(THREE.Math.degToRad)).push(r),v.makeRotationFromEuler(g.fromArray(n)),v.getInverse(v),b.multiply(v));return e.scale&&t.scale(m.fromArray(e.scale)),t.setPosition(y),t.multiply(b),t}function x(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===e?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function E(e){return e.split(",").map((function(e){return parseFloat(e)}))}function k(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(e,t,n))}function _(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}return r}()},HcvI:function(e,t){var n,r,i,o,a,s;e.exports=AFRAME.registerComponent("sphere-collider",{schema:{objects:{default:""},state:{default:"collided"},radius:{default:.05},watch:{default:!0}},init:function(){this.observer=null,this.els=[],this.collisions=[],this.handleHit=this.handleHit.bind(this),this.handleHitEnd=this.handleHitEnd.bind(this)},remove:function(){this.pause()},play:function(){var e=this.el.sceneEl;this.data.watch&&(this.observer=new MutationObserver(this.update.bind(this,null)),this.observer.observe(e,{childList:!0,subtree:!0}))},pause:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},update:function(){var e,t=this.data;e=t.objects?this.el.sceneEl.querySelectorAll(t.objects):this.el.sceneEl.children,this.els=Array.prototype.slice.call(e)},tick:(n=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Vector3,a=new THREE.Box3,s=new Map,function(){var e,t,c=this.el,l=this.data,u=c.getObject3D("mesh"),h=[];u&&(s.clear(),c.object3D.getWorldPosition(n),c.object3D.getWorldScale(i),e=l.radius*(t=i,Math.max.apply(null,t.toArray())),this.els.forEach((function(t){var i,c,l,u;t.isEntity&&(c=t.getObject3D("mesh"))&&(a.setFromObject(c).getSize(o),u=Math.max(o.x,o.y,o.z)/2,i=Math.sqrt(2*u*u),a.getCenter(r),i&&(l=n.distanceTo(r))<i+e&&(h.push(t),s.set(t,l)))})),h.sort((function(e,t){return s.get(e)>s.get(t)?1:-1})).forEach(this.handleHit),0===h.length&&c.emit("hit",{el:null}),this.collisions.filter((function(e){return!s.has(e)})).forEach(this.handleHitEnd),this.collisions=h)}),handleHit:function(e){e.emit("hit"),e.addState(this.data.state),this.el.emit("hit",{el:e})},handleHitEnd:function(e){e.emit("hitend"),e.removeState(this.data.state),this.el.emit("hitend",{el:e})}})},IBWK:function(e,t){e.exports=function(e){return 0===e?"x":1===e?"y":2===e?"z":"c"+(e+1)}},IqyP:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return j}));var r={value:function(){}};function i(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new o(r)}function o(e){this._=e}function a(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function s(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function c(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=r,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}o.prototype=i.prototype={constructor:o,on:function(e,t){var n,r=this._,i=a(e+"",r),o=-1,l=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<l;)if(n=(e=i[o]).type)r[n]=c(r[n],e.name,t);else if(null==t)for(n in r)r[n]=c(r[n],e.name,null);return this}for(;++o<l;)if((n=(e=i[o]).type)&&(n=s(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new o(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var l,u,h=i,d=0,f=0,p=0,v=0,g=0,m=0,y="object"==typeof performance&&performance.now?performance:Date,b="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function w(){return g||(b(x),g=y.now()+m)}function x(){g=0}function E(){this._call=this._time=this._next=null}function k(e,t,n){var r=new E;return r.restart(e,t,n),r}function _(){g=(v=y.now())+m,d=f=0;try{!function(){w(),++d;for(var e,t=l;t;)(e=g-t._time)>=0&&t._call.call(null,e),t=t._next;--d}()}finally{d=0,function(){var e,t,n=l,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:l=t);u=e,O(r)}(),g=0}}function T(){var e=y.now(),t=e-v;t>1e3&&(m-=t,v=e)}function O(e){d||(f&&(f=clearTimeout(f)),e-g>24?(e<1/0&&(f=setTimeout(_,e-y.now()-m)),p&&(p=clearInterval(p))):(p||(v=y.now(),p=setInterval(T,1e3)),d=1,b(_)))}E.prototype=k.prototype={constructor:E,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?w():+n)+(null==t?0:+t),this._next||u===this||(u?u._next=this:l=this,u=this),this._call=e,this._time=n,O()},stop:function(){this._call&&(this._call=null,this._time=1/0,O())}};var A=4294967296;function C(e){return e.x}function S(e){return e.y}function j(e){return e.z}var R=Math.PI*(3-Math.sqrt(5)),M=20*Math.PI/(9+Math.sqrt(221));t.a=function(e,t){t=t||2;var n,r,i=Math.min(3,Math.max(1,Math.round(t))),o=1,a=.001,s=1-Math.pow(a,1/300),c=0,l=.6,u=new Map,d=k(v),f=h("tick","end"),p=(r=1,function(){return(r=(1664525*r+1013904223)%A)/A});function v(){g(),f.call("tick",n),o<a&&(d.stop(),f.call("end",n))}function g(t){var r,a,h=e.length;void 0===t&&(t=1);for(var d=0;d<t;++d)for(o+=(c-o)*s,u.forEach((function(e){e(o)})),r=0;r<h;++r)null==(a=e[r]).fx?a.x+=a.vx*=l:(a.x=a.fx,a.vx=0),i>1&&(null==a.fy?a.y+=a.vy*=l:(a.y=a.fy,a.vy=0)),i>2&&(null==a.fz?a.z+=a.vz*=l:(a.z=a.fz,a.vz=0));return n}function m(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),null!=t.fz&&(t.z=t.fz),isNaN(t.x)||i>1&&isNaN(t.y)||i>2&&isNaN(t.z)){var o=10*(i>2?Math.cbrt(.5+n):i>1?Math.sqrt(.5+n):n),a=n*R,s=n*M;1===i?t.x=o:2===i?(t.x=o*Math.cos(a),t.y=o*Math.sin(a)):(t.x=o*Math.sin(a)*Math.cos(s),t.y=o*Math.cos(a),t.z=o*Math.sin(a)*Math.sin(s))}(isNaN(t.vx)||i>1&&isNaN(t.vy)||i>2&&isNaN(t.vz))&&(t.vx=0,i>1&&(t.vy=0),i>2&&(t.vz=0))}}function y(t){return t.initialize&&t.initialize(e,i,p),t}return null==e&&(e=[]),m(),n={tick:g,restart:function(){return d.restart(v),n},stop:function(){return d.stop(),n},numDimensions:function(e){return arguments.length?(i=Math.min(3,Math.max(1,Math.round(e))),u.forEach(y),n):i},nodes:function(t){return arguments.length?(e=t,m(),u.forEach(y),n):e},alpha:function(e){return arguments.length?(o=+e,n):o},alphaMin:function(e){return arguments.length?(a=+e,n):a},alphaDecay:function(e){return arguments.length?(s=+e,n):+s},alphaTarget:function(e){return arguments.length?(c=+e,n):c},velocityDecay:function(e){return arguments.length?(l=1-e,n):1-l},randomSource:function(e){return arguments.length?(p=e,u.forEach(y),n):p},force:function(e,t){return arguments.length>1?(null==t?u.delete(e):u.set(e,y(t)),n):u.get(e)},find:function(){var t,n,r,o,a,s,c=Array.prototype.slice.call(arguments),l=c.shift()||0,u=(i>1?c.shift():null)||0,h=(i>2?c.shift():null)||0,d=c.shift()||1/0,f=0,p=e.length;for(d*=d,f=0;f<p;++f)(o=(t=l-(a=e[f]).x)*t+(n=u-(a.y||0))*n+(r=h-(a.z||0))*r)<d&&(s=a,d=o);return s},on:function(e,t){return arguments.length>1?(f.on(e,t),n):f.on(e)}}}},IrXD:function(e,t,n){"use strict";(function(e){var n,r={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-r.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*r.Bounce.In(2*e):.5*r.Bounce.Out(2*e-1)+.5}}},i="undefined"==typeof self&&void 0!==e&&e.hrtime?function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},o=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=i()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var o=this._tweens[n[r]],a=!t;o&&!1===o.update(e,a)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),a={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=a.Utils.Linear;return t<0?o(e[0],e[1],r):t>1?o(e[n],e[n-1],n-r):o(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,o=a.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*o(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=a.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),o(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):o(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=a.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(n=[1],function(e){var t=1;if(n[e])return n[e];for(var r=e;r>1;r--)t*=r;return n[e]=t,t}),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t}}},s=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),c=new o,l=function(){function e(e,t){void 0===t&&(t=c),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=r.Linear.None,this._interpolationFunction=a.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=s.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?i()+parseFloat(e):e:i(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,r){for(var i in n){var o=e[i],a=Array.isArray(o),s=a?"array":typeof o,c=!a&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(c){var l=n[i];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,o)),n[i]=[o].concat(l)}if("object"!==s&&!a||!o||c)void 0===t[i]&&(t[i]=o),a||(t[i]*=1),r[i]=c?n[i].slice().reverse():t[i]||0;else{for(var u in t[i]=a?[]:{},o)t[i][u]=o[u];r[i]=a?[]:{},this._setupProperties(o,t[i],n[i],r[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=i()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=i()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=i()),void 0===t&&(t=!0),this._isPaused)return!0;var n,r,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var a=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,c=this._chainedTweens.length;s<c;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var o=t[i]||0,a=n[i],s=Array.isArray(e[i]),c=Array.isArray(a);!s&&c?e[i]=this._interpolationFunction(a,r):"object"==typeof a&&a?this._updateProperties(e[i],o,a,r):"number"==typeof(a=this._handleRelativeValue(o,a))&&(e[i]=o+(a-o)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),u=s.nextId,h=c,d=h.getAll.bind(h),f=h.removeAll.bind(h),p=h.add.bind(h),v=h.remove.bind(h),g=h.update.bind(h),m={Easing:r,Group:o,Interpolation:a,now:i,Sequence:s,nextId:u,Tween:l,VERSION:"18.6.4",getAll:d,removeAll:f,add:p,remove:v,update:g};t.a=m}).call(this,n("8oxB"))},JUsp:function(e,t,n){!function(e){var t="KeyboardEvent"in e;t||(e.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),"DOM_KEY_LOCATION_STANDARD"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0),"DOM_KEY_LOCATION_LEFT"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1),"DOM_KEY_LOCATION_RIGHT"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2),"DOM_KEY_LOCATION_NUMPAD"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3);var n=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,r=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,i=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,o=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;function a(e,t){return-1!==String(e).indexOf(t)}var s=a(navigator.platform,"Win")?"win":a(navigator.platform,"Mac")?"mac":a(navigator.platform,"CrOS")?"cros":a(navigator.platform,"Linux")?"linux":a(navigator.userAgent,"iPad")||a(navigator.platform,"iPod")||a(navigator.platform,"iPhone")?"ios":"",c=a(navigator.userAgent,"Chrome/")?"chrome":a(navigator.vendor,"Apple")?"safari":a(navigator.userAgent,"MSIE")?"ie":a(navigator.userAgent,"Gecko/")?"moz":a(navigator.userAgent,"Opera/")?"opera":"",l=c+"-"+s;function u(e,t,n){l!==t&&c!==t&&s!==t||Object.keys(n).forEach((function(t){e[t]=n[t]}))}var h={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:r},92:{code:"OSRight",location:i},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:o},97:{code:"Numpad1",keyCap:"1",location:o},98:{code:"Numpad2",keyCap:"2",location:o},99:{code:"Numpad3",keyCap:"3",location:o},100:{code:"Numpad4",keyCap:"4",location:o},101:{code:"Numpad5",keyCap:"5",location:o},102:{code:"Numpad6",keyCap:"6",location:o},103:{code:"Numpad7",keyCap:"7",location:o},104:{code:"Numpad8",keyCap:"8",location:o},105:{code:"Numpad9",keyCap:"9",location:o},106:{code:"NumpadMultiply",keyCap:"*",location:o},107:{code:"NumpadAdd",keyCap:"+",location:o},108:{code:"NumpadComma",keyCap:",",location:o},109:{code:"NumpadSubtract",keyCap:"-",location:o},110:{code:"NumpadDecimal",keyCap:".",location:o},111:{code:"NumpadDivide",keyCap:"/",location:o},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:o},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:r},161:{code:"ShiftRight",location:i},162:{code:"ControlLeft",location:r},163:{code:"ControlRight",location:i},164:{code:"AltLeft",location:r},165:{code:"AltRight",location:i},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};u(h,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:o},189:{code:"NumpadSubtract",keyCap:"-",location:o}}),u(h,"moz-mac",{12:{code:"NumLock",location:o},173:{code:"Minus",keyCap:"-"}}),u(h,"moz-win",{173:{code:"Minus",keyCap:"-"}}),u(h,"chrome-mac",{93:{code:"OSRight",location:i}}),u(h,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),u(h,"ios",{10:{code:"Enter",location:n}}),u(h,"safari-mac",{91:{code:"OSLeft",location:r},93:{code:"OSRight",location:i},229:{code:"KeyQ",keyCap:"Q"}});var d={};"cros"===s&&(d["U+00A0"]={code:"ShiftLeft",location:r},d["U+00A1"]={code:"ShiftRight",location:i},d["U+00A2"]={code:"ControlLeft",location:r},d["U+00A3"]={code:"ControlRight",location:i},d["U+00A4"]={code:"AltLeft",location:r},d["U+00A5"]={code:"AltRight",location:i}),"chrome-mac"===l&&(d["U+0010"]={code:"ContextMenu"}),"safari-mac"===l&&(d["U+0010"]={code:"ContextMenu"}),"ios"===s&&(d["U+0010"]={code:"Function"},d["U+001C"]={code:"ArrowLeft"},d["U+001D"]={code:"ArrowRight"},d["U+001E"]={code:"ArrowUp"},d["U+001F"]={code:"ArrowDown"},d["U+0001"]={code:"Home"},d["U+0004"]={code:"End"},d["U+000B"]={code:"PageUp"},d["U+000C"]={code:"PageDown"});var f=[];f[r]={16:{code:"ShiftLeft",location:r},17:{code:"ControlLeft",location:r},18:{code:"AltLeft",location:r}},f[i]={16:{code:"ShiftRight",location:i},17:{code:"ControlRight",location:i},18:{code:"AltRight",location:i}},f[o]={13:{code:"NumpadEnter",location:o}},u(f[o],"moz",{109:{code:"NumpadSubtract",location:o},107:{code:"NumpadAdd",location:o}}),u(f[r],"moz-mac",{224:{code:"OSLeft",location:r}}),u(f[i],"moz-mac",{224:{code:"OSRight",location:i}}),u(f[i],"moz-win",{91:{code:"OSRight",location:i}}),u(f[i],"mac",{93:{code:"OSRight",location:i}}),u(f[o],"chrome-mac",{12:{code:"NumLock",location:o}}),u(f[o],"safari-mac",{12:{code:"NumLock",location:o},187:{code:"NumpadAdd",location:o},189:{code:"NumpadSubtract",location:o},190:{code:"NumpadDecimal",location:o},191:{code:"NumpadDivide",location:o}});var p={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};u(p,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var v,g,m,y={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},b=(v=h,g="code",m={},Object.keys(v).forEach((function(e){var t=v[e];g in t&&(m[t[g]]=t)})),m);try{var w=t&&"location"in new KeyboardEvent("")}catch(E){}function x(e){var t="keyCode"in e?e.keyCode:"which"in e?e.which:0,n=function(){if(w||"keyLocation"in e){var n=w?e.location:e.keyLocation;if(n&&t in f[n])return f[n][t]}return"keyIdentifier"in e&&e.keyIdentifier in d?d[e.keyIdentifier]:t in h?h[t]:null}();if(!n)return null;var r,i=(r=p[n.code])?e.shiftKey&&"shiftKey"in r?r.shiftKey:r.key:n.code;return{code:n.code,key:i,location:n.location,keyCap:n.keyCap}}"KeyboardEvent"in e&&"defineProperty"in Object&&function(){function e(e,t,n){t in e||Object.defineProperty(e,t,n)}if(e(KeyboardEvent.prototype,"code",{get:function(){var e=x(this);return e?e.code:""}}),"key"in KeyboardEvent.prototype){var t=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var e=t.get.call(this);return y.hasOwnProperty(e)?y[e]:e}})}e(KeyboardEvent.prototype,"key",{get:function(){var e=x(this);return e&&"key"in e?e.key:"Unidentified"}}),e(KeyboardEvent.prototype,"location",{get:function(){var e=x(this);return e&&"location"in e?e.location:n}}),e(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in e.KeyboardEvent||(e.KeyboardEvent.queryKeyCap=function(e,t){if(e=String(e),!b.hasOwnProperty(e))return"Undefined";if(t&&"en-us"!==String(t).toLowerCase())throw Error("Unsupported locale");var n=b[e];return n.keyCap||n.code||"Undefined"}),e.identifyKey=function(e){if(!("code"in e)){var t=x(e);e.code=t?t.code:"",e.key=t&&"key"in t?t.key:"Unidentified",e.location="location"in e?e.location:"keyLocation"in e?e.keyLocation:t&&"location"in t?t.location:n,e.locale=""}}}(window)},JX1G:function(e,t,n){"use strict";n.r(t);var r,i=n("q1tI"),o=n.n(i),a=n("soUV"),s=(n("BIHw"),n("QGkA"),n("t8Zj")),c=n("Wbzz"),l=n("YwZP"),u=n("ZhwA"),h=n("VphZ"),d=n("N1om"),f=n.n(d),p=[],v="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(r||(r={}));var g,m=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),y=function(e){return e instanceof SVGElement&&"getBBox"in e},b=function(e){if(y(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||e.getClientRects().length)},w=function(e){var t,n,r=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},x="undefined"!=typeof window?window:{},E=new WeakMap,k=/auto|scroll/,_=/^tb|vertical/,T=/msie|trident/i.test(x.navigator&&x.navigator.userAgent),O=function(e){return parseFloat(e||"0")},A=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?t:e)||0,blockSize:(n?e:t)||0})},C=Object.freeze({devicePixelContentBoxSize:A(),borderBoxSize:A(),contentBoxSize:A(),contentRect:new m(0,0,0,0)}),S=function(e,t){if(void 0===t&&(t=!1),E.has(e)&&!t)return E.get(e);if(b(e))return E.set(e,C),C;var n=getComputedStyle(e),r=y(e)&&e.ownerSVGElement&&e.getBBox(),i=!T&&"border-box"===n.boxSizing,o=_.test(n.writingMode||""),a=!r&&k.test(n.overflowY||""),s=!r&&k.test(n.overflowX||""),c=r?0:O(n.paddingTop),l=r?0:O(n.paddingRight),u=r?0:O(n.paddingBottom),h=r?0:O(n.paddingLeft),d=r?0:O(n.borderTopWidth),f=r?0:O(n.borderRightWidth),p=r?0:O(n.borderBottomWidth),v=h+l,g=c+u,w=(r?0:O(n.borderLeftWidth))+f,x=d+p,S=s?e.offsetHeight-x-e.clientHeight:0,j=a?e.offsetWidth-w-e.clientWidth:0,R=i?v+w:0,M=i?g+x:0,D=r?r.width:O(n.width)-R-j,P=r?r.height:O(n.height)-M-S,N=D+v+j+w,L=P+g+S+x,I=Object.freeze({devicePixelContentBoxSize:A(Math.round(D*devicePixelRatio),Math.round(P*devicePixelRatio),o),borderBoxSize:A(N,L,o),contentBoxSize:A(D,P,o),contentRect:new m(h,c,D,P)});return E.set(e,I),I},j=function(e,t,n){var i=S(e,n),o=i.borderBoxSize,a=i.contentBoxSize,s=i.devicePixelContentBoxSize;switch(t){case r.DEVICE_PIXEL_CONTENT_BOX:return s;case r.BORDER_BOX:return o;default:return a}},R=function(e){var t=S(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]},M=function(e){if(b(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},D=function(){var e=1/0,t=[];p.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new R(t.target),i=M(t.target);r.push(n),t.lastReportedSize=j(t.target,t.observedBox),i<e&&(e=i)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},P=function(e){p.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(M(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},N=function(){var e,t=0;for(P(t);p.some((function(e){return e.activeTargets.length>0}));)t=D(),P(t);return p.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:v}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=v),window.dispatchEvent(e)),t>0},L=[],I=function(e){if(!g){var t=0,n=document.createTextNode("");new MutationObserver((function(){return L.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),g=function(){n.textContent=""+(t?t--:t++)}}L.push(e),g()},z=0,H={attributes:!0,characterData:!0,childList:!0,subtree:!0},F=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],B=function(e){return void 0===e&&(e=0),Date.now()+e},U=!1,V=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!U){U=!0;var n,r=B(e);n=function(){var n=!1;try{n=N()}finally{if(U=!1,e=r-B(),!z)return;n?t.run(1e3):e>0?t.run(e):t.start()}},I((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,H)};document.body?t():x.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),F.forEach((function(t){return x.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),F.forEach((function(t){return x.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),G=function(e){!z&&e>0&&V.start(),!(z+=e)&&V.stop()},q=function(){function e(e,t){this.target=e,this.observedBox=t||r.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=j(this.target,this.observedBox,!0);return e=this.target,y(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),K=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},W=new WeakMap,X=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Y=function(){function e(){}return e.connect=function(e,t){var n=new K(e,t);W.set(e,n)},e.observe=function(e,t,n){var r=W.get(e),i=0===r.observationTargets.length;X(r.observationTargets,t)<0&&(i&&p.push(r),r.observationTargets.push(new q(t,n&&n.box)),G(1),V.schedule())},e.unobserve=function(e,t){var n=W.get(e),r=X(n.observationTargets,t),i=1===n.observationTargets.length;r>=0&&(i&&p.splice(p.indexOf(n),1),n.observationTargets.splice(r,1),G(-1))},e.disconnect=function(e){var t=this,n=W.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Z=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Y.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!w(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Y.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!w(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Y.unobserve(this,e)},e.prototype.disconnect=function(){Y.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),Q="undefined"!=typeof window?n("X7FV").ForceGraph2D:null,J=function(){var e=Object(c.useStaticQuery)("1487428155").siteSearchIndex.index,t=function(){var e=Object(i.useRef)(),t=Object(i.useState)(0),n=t[0],r=t[1],o=Object(i.useState)(0),a=o[0],s=o[1],c=Object(i.useMemo)((function(){return new Z((function(e){var t=e[0];r(t.contentRect.width),s(t.contentRect.height)}))}),[]);return Object(i.useEffect)((function(){var t=e.current;return t&&c.observe(t),function(){return c.unobserve(t)}}),[c]),{ref:e,width:n,height:a}}(),n=t.ref,r=t.width,a=Object(i.useRef)(),d=Object(i.useState)({nodes:[],links:[]}),p=d[0],v=d[1],g=Object(i.useState)([]),m=g[0],y=g[1],b=Object(i.useState)([]),w=b[0],x=b[1],E=Object(i.useMemo)((function(){return u.Index.load(e)}),[e]);Object(i.useEffect)((function(){a.current.d3Force("collide",Object(h.b)(35))}),[]);var k=Object(i.useCallback)((function(e){var t=e.target.value;y(E.search(t,{expand:!0}).map((function(e){var t=e.ref;return E.documentStore.getDoc(t)})))}),[E]);Object(i.useEffect)((function(){var e=p.nodes,t=m.map((function(e){return e.id})),n=Object(s.a)(new Set(m.map((function(e){return e.tags})).flat())),r=e.filter((function(e){return t.includes(e.id)||n.includes(e.id)})),i=r.map((function(e){return e.id}));m.filter((function(e){return!i.includes(e.id)})).forEach((function(e){var t,n;r.push({id:e.id,name:e.title.replace("-"," "),type:e.slug?"blog":"repo",description:null!==(t=e.description)&&void 0!==t?t:"Github repository.",link:null!==(n=e.slug)&&void 0!==n?n:"https://github.com/renato145/"+e.name})})),n.filter((function(e){return!i.includes(e)})).forEach((function(e){r.push({id:e,name:e.replace("-"," "),type:"tag",description:"Tag",link:"/tags/"+f()(e)})}));var o=[];m.forEach((function(e){e.tags.forEach((function(t){o.push({source:t,target:e.id})}))})),v({nodes:r,links:o})}),[m]);return null===Q?o.a.createElement("p",null,"gatsby server dummy"):o.a.createElement("div",{ref:n,className:"h-full"},o.a.createElement(c.Link,{to:"/search",className:"text-xs"},"Go back to normal search"),o.a.createElement("input",{class:"mt-1 mb-2 bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full appearance-none leading-normal",type:"text",placeholder:"Search something",onChange:k}),o.a.createElement(Q,{ref:a,width:r,height:r/2,backgroundColor:"#eee",graphData:p,d3VelocityDecay:.9,linkCurvature:.25,nodeLabel:function(e){return e.description},onNodeClick:function(e){"repo"===e.type?window.open(e.link):Object(l.navigate)(e.link)},onNodeHover:function(e){if(e){var t=p.links.filter((function(t){return t.source.id===e.id||t.target.id===e.id})).map((function(e){return e.index}));x(t)}else x([])},linkHoverPrecision:15,linkWidth:function(e){return w.includes(e.index)?3:2},linkColor:function(e){return w.includes(e.index)?"#888":"#ccc"},nodeCanvasObject:function(e,t,n){var r=e.x,i=e.y,o=e.name,a=e.type,c=("tag"===a?14:16)/n,l=("tag"===a?.6:.5)*c,u=.1*c;t.font=("tag"===a?"bold ":"")+c+"px Sans-Serif";var d=function(e,t,n,r,i,o,a){void 0===r&&(r=12),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=!0);var s=e.split(" "),c=s.map((function(e){return t.measureText(e).width})),l=[],u=0,d="";c.forEach((function(e,t){var r=s[t];(u+=e)>n?(l.push(d),d=r,u=e):d+=(0===d.length?"":" ")+r})),l.push(d),l=l.filter((function(e){return e.length>0}));var f=a?Object(h.c)(l.map((function(e){return t.measureText(e).width}))):n,p=l.length*r;l.length>1&&(p+=o*(l.length-1));var v=[f,p].map((function(e){return e+2*i}));return{lines:l,measures:v}}(o,t,60,c,l,u),f=d.lines,p=d.measures;t.fillStyle="tag"===a?"rgba(147, 0, 58, 0.7)":"rgba(0, 66, 157, 0.7)",t.fillRect.apply(t,[r-p[0]/2,i-p[1]/2].concat(Object(s.a)(p))),t.textAlign="center",t.textBaseline="middle",t.fillStyle="#fff",f.forEach((function(e,n){return t.fillText(e,r,i+2*l+n*(u+c)-p[1]/2)}))},enableZoomPanInteraction:!0}))};t.default=function(e){var t=e.location;return o.a.createElement(a.a,{location:t,title:"",headerConfig:{title:"Search Graph"}},o.a.createElement(J,null))}},K0Sw:function(e,t,n){e.exports=function(e,t){if(!e)throw new Error("Graph structure cannot be undefined");var o=(t&&t.createSimulator||n("gtdD"))(t);if(Array.isArray(t))throw new Error("Physics settings is expected to be an object");var a=function(t){var n=e.getLinks(t);return n?1+n.length/3:1};t&&"function"==typeof t.nodeMass&&(a=t.nodeMass);var s=new Map,c={},l=0,u=o.settings.springTransform||i;l=0,e.forEachNode((function(e){g(e.id),l+=1})),e.forEachLink(y),e.on("changed",v);var h=!1,d={step:function(){if(0===l)return f(!0),!0;var e=o.step();d.lastMove=e,d.fire("step");var t=e/l<=.01;return f(t),t},getNodePosition:function(e){return x(e).pos},setNodePosition:function(e){var t=x(e);t.setPosition.apply(t,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(e){var t=c[e];if(t)return{from:t.from.pos,to:t.to.pos}},getGraphRect:function(){return o.getBBox()},forEachBody:p,pinNode:function(e,t){x(e.id).isPinned=!!t},isNodePinned:function(e){return x(e.id).isPinned},dispose:function(){e.off("changed",v),d.fire("disposed")},getBody:function(e){return s.get(e)},getSpring:function(t,n){var r;if(void 0===n)r="object"!=typeof t?t:t.id;else{var i=e.hasLink(t,n);if(!i)return;r=i.id}return c[r]},getForceVectorLength:function(){var e=0,t=0;return p((function(n){e+=Math.abs(n.force.x),t+=Math.abs(n.force.y)})),Math.sqrt(e*e+t*t)},simulator:o,graph:e,lastMove:0};return r(d),d;function f(e){var t;h!==e&&(h=e,t=e,d.fire("stable",t))}function p(e){s.forEach((function(t,n){e(t,n)}))}function v(t){for(var n=0;n<t.length;++n){var r=t[n];"add"===r.changeType?(r.node&&g(r.node.id),r.link&&y(r.link)):"remove"===r.changeType&&(r.node&&m(r.node),r.link&&b(r.link))}l=e.getNodesCount()}function g(t){var n=s.get(t);if(!n){var r=e.getNode(t);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var a=function(e){var t=[];if(!e.links)return t;for(var n=Math.min(e.links.length,2),r=0;r<n;++r){var i=e.links[r],o=i.fromId!==e.id?s.get(i.fromId):s.get(i.toId);o&&o.pos&&t.push(o)}return t}(r);i=o.getBestNewBodyPosition(a)}(n=o.addBodyAt(i)).id=t,s.set(t,n),w(t),function(e){return e&&(e.isPinned||e.data&&e.data.isPinned)}(r)&&(n.isPinned=!0)}}function m(e){var t=e.id,n=s.get(t);n&&(s.delete(t),o.removeBody(n))}function y(e){w(e.fromId),w(e.toId);var t=s.get(e.fromId),n=s.get(e.toId),r=o.addSpring(t,n,e.length);u(e,r),c[e.id]=r}function b(t){var n=c[t.id];if(n){var r=e.getNode(t.fromId),i=e.getNode(t.toId);r&&w(r.id),i&&w(i.id),delete c[t.id],o.removeSpring(n)}}function w(e){var t=s.get(e);if(t.mass=a(e),Number.isNaN(t.mass))throw new Error("Node mass should be a number")}function x(e){var t=s.get(e);return t||(g(e),t=s.get(e)),t}},e.exports.simulator=n("gtdD");var r=n("AMdQ");function i(){}},KNlp:function(e,t,n){var r=n("IBWK");e.exports=function(e){return function(t,n){for(var i=n&&n.indent||0,o=n&&void 0!==n.join?n.join:"\n",a=Array(i+1).join(" "),s=[],c=0;c<e;++c){var l=r(c),u=0===c?"":a;s.push(u+t.replace(/{var}/g,l))}return s.join(o)}}},LSLv:function(e,t,n){"use strict";t.a=function(e,t,n){var r,i=1;function o(){var o,a,s=r.length,c=0,l=0,u=0;for(o=0;o<s;++o)c+=(a=r[o]).x||0,l+=a.y||0,u+=a.z||0;for(c=(c/s-e)*i,l=(l/s-t)*i,u=(u/s-n)*i,o=0;o<s;++o)a=r[o],c&&(a.x-=c),l&&(a.y-=l),u&&(a.z-=u)}return null==e&&(e=0),null==t&&(t=0),null==n&&(n=0),o.initialize=function(e){r=e},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(e){return arguments.length?(t=+e,o):t},o.z=function(e){return arguments.length?(n=+e,o):n},o.strength=function(e){return arguments.length?(i=+e,o):i},o}},MsAy:function(e,t,n){n("EYlc"),n("mRFy"),n("Zgaw"),n("mvZv"),n("bQoG")},NT8w:function(e,t,n){"use strict";var r=n("sBL/"),i=n.n(r);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a=function e(t,n){var r=n.default,i=void 0===r?null:r,o=n.triggerUpdate,a=void 0===o||o,s=n.onChange,c=void 0===s?function(e,t){}:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.defaultVal=i,this.triggerUpdate=a,this.onChange=c};t.a=function(e){var t=e.stateInit,n=void 0===t?function(){return{}}:t,r=e.props,s=void 0===r?{}:r,c=e.methods,l=void 0===c?{}:c,u=e.aliases,h=void 0===u?{}:u,d=e.init,f=void 0===d?function(){}:d,p=e.update,v=void 0===p?function(){}:p,g=Object.keys(s).map((function(e){return new a(e,s[e])}));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},n instanceof Function?n(e):n,{initialised:!1}),r={};function a(t){return s(t,e),c(),a}var s=function(e,n){f.call(a,e,t,n),t.initialised=!0},c=i()((function(){t.initialised&&(v.call(a,t,r),r={})}),1);return g.forEach((function(e){a[e.name]=function(e){var n=e.name,i=e.triggerUpdate,o=void 0!==i&&i,s=e.onChange,l=void 0===s?function(e,t){}:s,u=e.defaultVal,h=void 0===u?null:u;return function(e){var i=t[n];if(!arguments.length)return i;var s=void 0===e?h:e;return t[n]=s,l.call(a,s,t,i),!r.hasOwnProperty(n)&&(r[n]=i),o&&c(),a}}(e)})),Object.keys(l).forEach((function(e){a[e]=function(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=l[e]).call.apply(n,[a,t].concat(i))}})),Object.entries(h).forEach((function(e){var t=o(e,2),n=t[0],r=t[1];return a[n]=a[r]})),a.resetProps=function(){return g.forEach((function(e){a[e.name](e.defaultVal)})),a},a.resetProps(),t._rerender=c,a}}},P2qj:function(e,t,n){var r=n("KNlp");function i(e){var t=r(e);return"\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ".concat(t("var d{var} = 0, t{var} = 0;",{indent:2}),"\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ").concat(t("body.velocity.{var} += coeff * body.force.{var};",{indent:4}),"\n    ").concat(t("var v{var} = body.velocity.{var};",{indent:4}),"\n    var v = Math.sqrt(").concat(t("v{var} * v{var}",{join:" + "}),");\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ").concat(t("body.velocity.{var} = v{var} / v;",{indent:6}),"\n    }\n\n    ").concat(t("d{var} = timeStep * body.velocity.{var};",{indent:4}),"\n\n    ").concat(t("body.pos.{var} += d{var};",{indent:4}),"\n\n    ").concat(t("t{var} += Math.abs(d{var});",{indent:4}),"\n  }\n\n  return (").concat(t("t{var} * t{var}",{join:" + "}),")/length;\n")}e.exports=function(e){var t=i(e);return new Function("bodies","timeStep","adaptiveTimeStepWeight",t)},e.exports.generateIntegratorFunctionBody=i},QHZA:function(e,t){var n={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};function r(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}e.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(n)},repetitions:{default:1/0,min:0},timeScale:{default:1}},init:function(){var e=this;this.model=null,this.mixer=null,this.activeActions=[];var t=this.el.getObject3D("mesh");t?this.load(t):this.el.addEventListener("model-loaded",(function(t){e.load(t.detail.model)}))},load:function(e){var t=this.el;this.model=e,this.mixer=new THREE.AnimationMixer(e),this.mixer.addEventListener("loop",(function(e){t.emit("animation-loop",{action:e.action,loopDelta:e.loopDelta})})),this.mixer.addEventListener("finished",(function(e){t.emit("animation-finished",{action:e.action,direction:e.direction})})),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(e){if(e){var t=this.data,r=AFRAME.utils.diff(t,e);if("clip"in r)return this.stopAction(),void(t.clip&&this.playAction());this.activeActions.forEach((function(e){"duration"in r&&t.duration&&e.setDuration(t.duration),"clampWhenFinished"in r&&(e.clampWhenFinished=t.clampWhenFinished),("loop"in r||"repetitions"in r)&&e.setLoop(n[t.loop],t.repetitions),"timeScale"in r&&e.setEffectiveTimeScale(t.timeScale)}))}},stopAction:function(){for(var e=this.data,t=0;t<this.activeActions.length;t++)e.crossFadeDuration?this.activeActions[t].fadeOut(e.crossFadeDuration):this.activeActions[t].stop();this.activeActions.length=0},playAction:function(){if(this.mixer){var e=this.model,t=this.data,i=e.animations||(e.geometry||{}).animations||[];if(i.length)for(var o,a,s=(o=t.clip,new RegExp("^"+o.split(/\*+/).map(r).join(".*")+"$")),c=0;a=i[c];c++)if(a.name.match(s)){var l=this.mixer.clipAction(a,e);l.enabled=!0,l.clampWhenFinished=t.clampWhenFinished,t.duration&&l.setDuration(t.duration),1!==t.timeScale&&l.setEffectiveTimeScale(t.timeScale),l.setLoop(n[t.loop],t.repetitions).fadeIn(t.crossFadeDuration).play(),this.activeActions.push(l)}}},tick:function(e,t){this.mixer&&!isNaN(t)&&this.mixer.update(t/1e3)}})},SEBh:function(e,t,n){var r=n("glrk"),i=n("HAuM"),o=n("tiKp")("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},V4tj:function(e,t,n){"use strict";function r(e,t,n){if(isNaN(t))return e;var r,i,o,a,s,c,l=e._root,u={data:n},h=e._x0,d=e._x1;if(!l)return e._root=u,e;for(;l.length;)if((a=t>=(i=(h+d)/2))?h=i:d=i,r=l,!(l=l[s=+a]))return r[s]=u,e;if(t===(o=+e._x.call(null,l.data)))return u.next=l,r?r[s]=u:e._root=u,e;do{r=r?r[s]=new Array(2):e._root=new Array(2),(a=t>=(i=(h+d)/2))?h=i:d=i}while((s=+a)==(c=+(o>=i)));return r[c]=l,r[s]=u,e}var i=function(e,t,n){this.node=e,this.x0=t,this.x1=n};function o(e){return e[0]}function a(e,t){var n=new s(null==t?o:t,NaN,NaN);return null==e?n:n.addAll(e)}function s(e,t,n){this._x=e,this._x0=t,this._x1=n,this._root=void 0}function c(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var l=a.prototype=s.prototype;l.copy=function(){var e,t,n=new s(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=c(r),n;for(e=[{source:r,target:n._root=new Array(2)}];r=e.pop();)for(var i=0;i<2;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(2)}):r.target[i]=c(t));return n},l.add=function(e){var t=+this._x.call(null,e);return r(this.cover(t),t,e)},l.addAll=function(e){var t,n,i=e.length,o=new Array(i),a=1/0,s=-1/0;for(t=0;t<i;++t)isNaN(n=+this._x.call(null,e[t]))||(o[t]=n,n<a&&(a=n),n>s&&(s=n));for(s<a&&(a=this._x0,s=this._x1),this.cover(a).cover(s),t=0;t<i;++t)r(this,o[t],e[t]);return this},l.cover=function(e){if(isNaN(e=+e))return this;var t=this._x0,n=this._x1;if(isNaN(t))n=(t=Math.floor(e))+1;else{if(!(t>e||e>n))return this;var r,i,o=n-t,a=this._root;switch(i=+(e<(t+n)/2)){case 0:do{(r=new Array(2))[i]=a,a=r}while(e>(n=t+(o*=2)));break;case 1:do{(r=new Array(2))[i]=a,a=r}while((t=n-(o*=2))>e)}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._x1=n,this},l.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},l.extent=function(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},l.find=function(e,t){var n,r,o,a,s,c=this._x0,l=this._x1,u=[],h=this._root;for(h&&u.push(new i(h,c,l)),null==t?t=1/0:(c=e-t,l=e+t);a=u.pop();)if(!(!(h=a.node)||(r=a.x0)>l||(o=a.x1)<c))if(h.length){var d=(r+o)/2;u.push(new i(h[1],d,o),new i(h[0],r,d)),(s=+(e>=d))&&(a=u[u.length-1],u[u.length-1]=u[u.length-1-s],u[u.length-1-s]=a)}else{var f=Math.abs(e-+this._x.call(null,h.data));f<t&&(t=f,c=e-f,l=e+f,n=h.data)}return n},l.remove=function(e){if(isNaN(o=+this._x.call(null,e)))return this;var t,n,r,i,o,a,s,c,l,u=this._root,h=this._x0,d=this._x1;if(!u)return this;if(u.length)for(;;){if((s=o>=(a=(h+d)/2))?h=a:d=a,t=u,!(u=u[c=+s]))return this;if(!u.length)break;t[c+1&1]&&(n=t,l=c)}for(;u.data!==e;)if(r=u,!(u=u.next))return this;return(i=u.next)&&delete u.next,r?(i?r.next=i:delete r.next,this):t?(i?t[c]=i:delete t[c],(u=t[0]||t[1])&&u===(t[1]||t[0])&&!u.length&&(n?n[l]=u:this._root=u),this):(this._root=i,this)},l.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},l.root=function(){return this._root},l.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},l.visit=function(e){var t,n,r,o,a=[],s=this._root;for(s&&a.push(new i(s,this._x0,this._x1));t=a.pop();)if(!e(s=t.node,r=t.x0,o=t.x1)&&s.length){var c=(r+o)/2;(n=s[1])&&a.push(new i(n,c,o)),(n=s[0])&&a.push(new i(n,r,c))}return this},l.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new i(this._root,this._x0,this._x1));t=n.pop();){var o=t.node;if(o.length){var a,s=t.x0,c=t.x1,l=(s+c)/2;(a=o[0])&&n.push(new i(a,s,l)),(a=o[1])&&n.push(new i(a,l,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.x1);return this},l.x=function(e){return arguments.length?(this._x=e,this):this._x};function u(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,c,l,u,h,d,f=e._root,p={data:r},v=e._x0,g=e._y0,m=e._x1,y=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((l=t>=(o=(v+m)/2))?v=o:m=o,(u=n>=(a=(g+y)/2))?g=a:y=a,i=f,!(f=f[h=u<<1|l]))return i[h]=p,e;if(s=+e._x.call(null,f.data),c=+e._y.call(null,f.data),t===s&&n===c)return p.next=f,i?i[h]=p:e._root=p,e;do{i=i?i[h]=new Array(4):e._root=new Array(4),(l=t>=(o=(v+m)/2))?v=o:m=o,(u=n>=(a=(g+y)/2))?g=a:y=a}while((h=u<<1|l)==(d=(c>=a)<<1|s>=o));return i[d]=f,i[h]=p,e}var h=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function d(e){return e[0]}function f(e){return e[1]}function p(e,t,n){var r=new v(null==t?d:t,null==n?f:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function v(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function g(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var m=p.prototype=v.prototype;m.copy=function(){var e,t,n=new v(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=g(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=g(t));return n},m.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return u(this.cover(t,n),t,n,e)},m.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),c=1/0,l=1/0,h=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<c&&(c=r),r>h&&(h=r),i<l&&(l=i),i>d&&(d=i));if(c>h||l>d)return this;for(this.cover(c,l).cover(h,d),n=0;n<o;++n)u(this,a[n],s[n],e[n]);return this},m.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,c=i-n||1,l=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=l,l=a,c*=2,s){case 0:i=n+c,o=r+c;break;case 1:n=i-c,o=r+c;break;case 2:i=n+c,r=o-c;break;case 3:n=i-c,r=o-c}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},m.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},m.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},m.find=function(e,t,n){var r,i,o,a,s,c,l,u=this._x0,d=this._y0,f=this._x1,p=this._y1,v=[],g=this._root;for(g&&v.push(new h(g,u,d,f,p)),null==n?n=1/0:(u=e-n,d=t-n,f=e+n,p=t+n,n*=n);c=v.pop();)if(!(!(g=c.node)||(i=c.x0)>f||(o=c.y0)>p||(a=c.x1)<u||(s=c.y1)<d))if(g.length){var m=(i+a)/2,y=(o+s)/2;v.push(new h(g[3],m,y,a,s),new h(g[2],i,y,m,s),new h(g[1],m,o,a,y),new h(g[0],i,o,m,y)),(l=(t>=y)<<1|e>=m)&&(c=v[v.length-1],v[v.length-1]=v[v.length-1-l],v[v.length-1-l]=c)}else{var b=e-+this._x.call(null,g.data),w=t-+this._y.call(null,g.data),x=b*b+w*w;if(x<n){var E=Math.sqrt(n=x);u=e-E,d=t-E,f=e+E,p=t+E,r=g.data}}return r},m.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,c,l,u,h,d,f=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(u=a>=(c=(v+m)/2))?v=c:m=c,t=f,!(f=f[h=u<<1|l]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[h]=i:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},m.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},m.root=function(){return this._root},m.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},m.visit=function(e){var t,n,r,i,o,a,s=[],c=this._root;for(c&&s.push(new h(c,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(c=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&c.length){var l=(r+o)/2,u=(i+a)/2;(n=c[3])&&s.push(new h(n,l,u,o,a)),(n=c[2])&&s.push(new h(n,r,u,l,a)),(n=c[1])&&s.push(new h(n,l,i,o,u)),(n=c[0])&&s.push(new h(n,r,i,l,u))}return this},m.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new h(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,c=t.x1,l=t.y1,u=(a+c)/2,d=(s+l)/2;(o=i[0])&&n.push(new h(o,a,s,u,d)),(o=i[1])&&n.push(new h(o,u,s,c,d)),(o=i[2])&&n.push(new h(o,a,d,u,l)),(o=i[3])&&n.push(new h(o,u,d,c,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},m.x=function(e){return arguments.length?(this._x=e,this):this._x},m.y=function(e){return arguments.length?(this._y=e,this):this._y};function y(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var o,a,s,c,l,u,h,d,f,p,v,g,m=e._root,y={data:i},b=e._x0,w=e._y0,x=e._z0,E=e._x1,k=e._y1,_=e._z1;if(!m)return e._root=y,e;for(;m.length;)if((d=t>=(a=(b+E)/2))?b=a:E=a,(f=n>=(s=(w+k)/2))?w=s:k=s,(p=r>=(c=(x+_)/2))?x=c:_=c,o=m,!(m=m[v=p<<2|f<<1|d]))return o[v]=y,e;if(l=+e._x.call(null,m.data),u=+e._y.call(null,m.data),h=+e._z.call(null,m.data),t===l&&n===u&&r===h)return y.next=m,o?o[v]=y:e._root=y,e;do{o=o?o[v]=new Array(8):e._root=new Array(8),(d=t>=(a=(b+E)/2))?b=a:E=a,(f=n>=(s=(w+k)/2))?w=s:k=s,(p=r>=(c=(x+_)/2))?x=c:_=c}while((v=p<<2|f<<1|d)==(g=(h>=c)<<2|(u>=s)<<1|l>=a));return o[g]=m,o[v]=y,e}var b=function(e,t,n,r,i,o,a){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=a};function w(e){return e[0]}function x(e){return e[1]}function E(e){return e[2]}function k(e,t,n,r){var i=new _(null==t?w:t,null==n?x:n,null==r?E:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function _(e,t,n,r,i,o,a,s,c){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=c,this._root=void 0}function T(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var O=k.prototype=_.prototype;O.copy=function(){var e,t,n=new _(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=T(r),n;for(e=[{source:r,target:n._root=new Array(8)}];r=e.pop();)for(var i=0;i<8;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(8)}):r.target[i]=T(t));return n},O.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return y(this.cover(t,n,r),t,n,r,e)},O.addAll=function(e){var t,n,r,i,o,a=e.length,s=new Array(a),c=new Array(a),l=new Array(a),u=1/0,h=1/0,d=1/0,f=-1/0,p=-1/0,v=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||isNaN(o=+this._z.call(null,t))||(s[n]=r,c[n]=i,l[n]=o,r<u&&(u=r),r>f&&(f=r),i<h&&(h=i),i>p&&(p=i),o<d&&(d=o),o>v&&(v=o));for(f<u&&(u=this._x0,f=this._x1),p<h&&(h=this._y0,p=this._y1),v<d&&(d=this._z0,v=this._z1),this.cover(u,h,d).cover(f,p,v),n=0;n<a;++n)y(this,s[n],c[n],l[n],e[n]);return this},O.cover=function(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,a=this._x1,s=this._y1,c=this._z1;if(isNaN(r))a=(r=Math.floor(e))+1,s=(i=Math.floor(t))+1,c=(o=Math.floor(n))+1;else{if(!(r>e||e>a||i>t||t>s||o>n||n>c))return this;var l,u,h=a-r,d=this._root;switch(u=(n<(o+c)/2)<<2|(t<(i+s)/2)<<1|e<(r+a)/2){case 0:do{(l=new Array(8))[u]=d,d=l}while(s=i+(h*=2),c=o+h,e>(a=r+h)||t>s||n>c);break;case 1:do{(l=new Array(8))[u]=d,d=l}while(s=i+(h*=2),c=o+h,(r=a-h)>e||t>s||n>c);break;case 2:do{(l=new Array(8))[u]=d,d=l}while(i=s-(h*=2),c=o+h,e>(a=r+h)||i>t||n>c);break;case 3:do{(l=new Array(8))[u]=d,d=l}while(i=s-(h*=2),c=o+h,(r=a-h)>e||i>t||n>c);break;case 4:do{(l=new Array(8))[u]=d,d=l}while(s=i+(h*=2),o=c-h,e>(a=r+h)||t>s||o>n);break;case 5:do{(l=new Array(8))[u]=d,d=l}while(s=i+(h*=2),o=c-h,(r=a-h)>e||t>s||o>n);break;case 6:do{(l=new Array(8))[u]=d,d=l}while(i=s-(h*=2),o=c-h,e>(a=r+h)||i>t||o>n);break;case 7:do{(l=new Array(8))[u]=d,d=l}while(i=s-(h*=2),o=c-h,(r=a-h)>e||i>t||o>n)}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=c,this},O.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},O.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},O.find=function(e,t,n,r){var i,o,a,s,c,l,u,h,d,f=this._x0,p=this._y0,v=this._z0,g=this._x1,m=this._y1,y=this._z1,w=[],x=this._root;for(x&&w.push(new b(x,f,p,v,g,m,y)),null==r?r=1/0:(f=e-r,p=t-r,v=n-r,g=e+r,m=t+r,y=n+r,r*=r);h=w.pop();)if(!(!(x=h.node)||(o=h.x0)>g||(a=h.y0)>m||(s=h.z0)>y||(c=h.x1)<f||(l=h.y1)<p||(u=h.z1)<v))if(x.length){var E=(o+c)/2,k=(a+l)/2,_=(s+u)/2;w.push(new b(x[7],E,k,_,c,l,u),new b(x[6],o,k,_,E,l,u),new b(x[5],E,a,_,c,k,u),new b(x[4],o,a,_,E,k,u),new b(x[3],E,k,s,c,l,_),new b(x[2],o,k,s,E,l,_),new b(x[1],E,a,s,c,k,_),new b(x[0],o,a,s,E,k,_)),(d=(n>=_)<<2|(t>=k)<<1|e>=E)&&(h=w[w.length-1],w[w.length-1]=w[w.length-1-d],w[w.length-1-d]=h)}else{var T=e-+this._x.call(null,x.data),O=t-+this._y.call(null,x.data),A=n-+this._z.call(null,x.data),C=T*T+O*O+A*A;if(C<r){var S=Math.sqrt(r=C);f=e-S,p=t-S,v=n-S,g=e+S,m=t+S,y=n+S,i=x.data}}return i},O.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e))||isNaN(s=+this._z.call(null,e)))return this;var t,n,r,i,o,a,s,c,l,u,h,d,f,p,v,g=this._root,m=this._x0,y=this._y0,b=this._z0,w=this._x1,x=this._y1,E=this._z1;if(!g)return this;if(g.length)for(;;){if((h=o>=(c=(m+w)/2))?m=c:w=c,(d=a>=(l=(y+x)/2))?y=l:x=l,(f=s>=(u=(b+E)/2))?b=u:E=u,t=g,!(g=g[p=f<<2|d<<1|h]))return this;if(!g.length)break;(t[p+1&7]||t[p+2&7]||t[p+3&7]||t[p+4&7]||t[p+5&7]||t[p+6&7]||t[p+7&7])&&(n=t,v=p)}for(;g.data!==e;)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):t?(i?t[p]=i:delete t[p],(g=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&g===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!g.length&&(n?n[v]=g:this._root=g),this):(this._root=i,this)},O.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},O.root=function(){return this._root},O.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},O.visit=function(e){var t,n,r,i,o,a,s,c,l=[],u=this._root;for(u&&l.push(new b(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=l.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.z0,a=t.x1,s=t.y1,c=t.z1)&&u.length){var h=(r+a)/2,d=(i+s)/2,f=(o+c)/2;(n=u[7])&&l.push(new b(n,h,d,f,a,s,c)),(n=u[6])&&l.push(new b(n,r,d,f,h,s,c)),(n=u[5])&&l.push(new b(n,h,i,f,a,d,c)),(n=u[4])&&l.push(new b(n,r,i,f,h,d,c)),(n=u[3])&&l.push(new b(n,h,d,o,a,s,f)),(n=u[2])&&l.push(new b(n,r,d,o,h,s,f)),(n=u[1])&&l.push(new b(n,h,i,o,a,d,f)),(n=u[0])&&l.push(new b(n,r,i,o,h,d,f))}return this},O.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new b(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,c=t.z0,l=t.x1,u=t.y1,h=t.z1,d=(a+l)/2,f=(s+u)/2,p=(c+h)/2;(o=i[0])&&n.push(new b(o,a,s,c,d,f,p)),(o=i[1])&&n.push(new b(o,d,s,c,l,f,p)),(o=i[2])&&n.push(new b(o,a,f,c,d,u,p)),(o=i[3])&&n.push(new b(o,d,f,c,l,u,p)),(o=i[4])&&n.push(new b(o,a,s,p,d,f,h)),(o=i[5])&&n.push(new b(o,d,s,p,l,f,h)),(o=i[6])&&n.push(new b(o,a,f,p,d,u,h)),(o=i[7])&&n.push(new b(o,d,f,p,l,u,h))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.z0,t.x1,t.y1,t.z1);return this},O.x=function(e){return arguments.length?(this._x=e,this):this._x},O.y=function(e){return arguments.length?(this._y=e,this):this._y},O.z=function(e){return arguments.length?(this._z=e,this):this._z};var A=n("DHMS"),C=n("sNXt"),S=n("IqyP");t.a=function(){var e,t,n,r,i,o,s=Object(A.a)(-30),c=1,l=1/0,u=.81;function h(r){var o,s=e.length,c=(1===t?a(e,S.b):2===t?p(e,S.b,S.c):3===t?k(e,S.b,S.c,S.d):null).visitAfter(f);for(i=r,o=0;o<s;++o)n=e[o],c.visit(v)}function d(){if(e){var t,n,r=e.length;for(o=new Array(r),t=0;t<r;++t)n=e[t],o[n.index]=+s(n,t,e)}}function f(e){var n,r,i,a,s,c,l=0,u=0,h=e.length;if(h){for(i=a=s=c=0;c<h;++c)(n=e[c])&&(r=Math.abs(n.value))&&(l+=n.value,u+=r,i+=r*(n.x||0),a+=r*(n.y||0),s+=r*(n.z||0));l*=Math.sqrt(4/h),e.x=i/u,t>1&&(e.y=a/u),t>2&&(e.z=s/u)}else{(n=e).x=n.data.x,t>1&&(n.y=n.data.y),t>2&&(n.z=n.data.z);do{l+=o[n.data.index]}while(n=n.next)}e.value=l}function v(e,a,s,h,d){if(!e.value)return!0;var f=[s,h,d][t-1],p=e.x-n.x,v=t>1?e.y-n.y:0,g=t>2?e.z-n.z:0,m=f-a,y=p*p+v*v+g*g;if(m*m/u<y)return y<l&&(0===p&&(y+=(p=Object(C.a)(r))*p),t>1&&0===v&&(y+=(v=Object(C.a)(r))*v),t>2&&0===g&&(y+=(g=Object(C.a)(r))*g),y<c&&(y=Math.sqrt(c*y)),n.vx+=p*e.value*i/y,t>1&&(n.vy+=v*e.value*i/y),t>2&&(n.vz+=g*e.value*i/y)),!0;if(!(e.length||y>=l)){(e.data!==n||e.next)&&(0===p&&(y+=(p=Object(C.a)(r))*p),t>1&&0===v&&(y+=(v=Object(C.a)(r))*v),t>2&&0===g&&(y+=(g=Object(C.a)(r))*g),y<c&&(y=Math.sqrt(c*y)));do{e.data!==n&&(m=o[e.data.index]*i/y,n.vx+=p*m,t>1&&(n.vy+=v*m),t>2&&(n.vz+=g*m))}while(e=e.next)}}return h.initialize=function(n,i,o){e=n,t=i,r=o,d()},h.strength=function(e){return arguments.length?(s="function"==typeof e?e:Object(A.a)(+e),d(),h):s},h.distanceMin=function(e){return arguments.length?(c=e*e,h):Math.sqrt(c)},h.distanceMax=function(e){return arguments.length?(l=e*e,h):Math.sqrt(l)},h.theta=function(e){return arguments.length?(u=e*e,h):Math.sqrt(u)},h}},W9gP:function(e,t){function n(e,t,n,r){e&&(t=t||[],e.traverse((function(e){var i;e.isMesh&&((i=e.material)?Array.isArray(i)?i:i.materials?i.materials:[i]:[]).forEach((function(e){e&&!("envMap"in e)||t.length&&-1===t.indexOf(e.name)||(e.envMap=n,e.reflectivity=r,e.needsUpdate=!0)}))})))}e.exports=AFRAME.registerComponent("cube-env-map",{multiple:!0,schema:{path:{default:""},extension:{default:"jpg",oneOf:["jpg","png"]},format:{default:"RGBFormat",oneOf:["RGBFormat","RGBAFormat"]},enableBackground:{default:!1},reflectivity:{default:1,min:0,max:1},materials:{default:[]}},init:function(){var e=this,t=this.data;this.texture=(new THREE.CubeTextureLoader).load([t.path+"posx."+t.extension,t.path+"negx."+t.extension,t.path+"posy."+t.extension,t.path+"negy."+t.extension,t.path+"posz."+t.extension,t.path+"negz."+t.extension]),this.texture.format=THREE[t.format],this.object3dsetHandler=function(){var t=e.el.getObject3D("mesh"),r=e.data;n(t,r.materials,e.texture,r.reflectivity)},this.el.addEventListener("object3dset",this.object3dsetHandler)},update:function(e){var t=this.data,r=this.el.getObject3D("mesh"),i=[],o=[];if(t.materials.length&&(e.materials?(i=t.materials.filter((function(t){return!e.materials.includes(t)})),o=e.materials.filter((function(e){return!t.materials.includes(e)}))):i=t.materials),i.length&&n(r,i,this.texture,t.reflectivity),o.length&&n(r,o,null,1),e.materials&&t.reflectivity!==e.reflectivity){var a=t.materials.filter((function(t){return e.materials.includes(t)}));a.length&&n(r,a,this.texture,t.reflectivity)}this.data.enableBackground&&!e.enableBackground?this.setBackground(this.texture):!this.data.enableBackground&&e.enableBackground&&this.setBackground(null)},remove:function(){this.el.removeEventListener("object3dset",this.object3dsetHandler);var e=this.el.getObject3D("mesh"),t=this.data;n(e,t.materials,null,1),t.enableBackground&&this.setBackground(null)},setBackground:function(e){this.el.sceneEl.object3D.background=e}})},WJkJ:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},WKiH:function(e,t,n){var r=n("HYAF"),i="["+n("WJkJ")+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},X2te:function(e,t){e.exports=function e(t,n){var r;t||(t={});if(n)for(r in n)if(n.hasOwnProperty(r)){var i=t.hasOwnProperty(r),o=typeof n[r];!i||typeof t[r]!==o?t[r]=n[r]:"object"===o&&(t[r]=e(t[r],n[r]))}return t}},X7FV:function(e,n,r){"use strict";r.r(n),r.d(n,"ForceGraph2D",(function(){return Co})),r.d(n,"ForceGraph3D",(function(){return Ao})),r.d(n,"ForceGraphAR",(function(){return Oo})),r.d(n,"ForceGraphVR",(function(){return To}));var i=r("q1tI"),o=r.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=function(e,t){var n=new Set(t);return Object.assign.apply(Object,[{}].concat(c(Object.entries(e).filter((function(e){var t=s(e,1)[0];return!n.has(t)})).map((function(e){var t=s(e,2);return a({},t[0],t[1])})))))},u=r("miPP"),h=r.n(u);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e,t){var n="object"===d(t)?t:{wrapperElementType:t,methodNames:(arguments.length<=2?void 0:arguments[2])||void 0,initPropNames:(arguments.length<=3?void 0:arguments[3])||void 0},r=n.wrapperElementType,a=void 0===r?"div":r,s=n.nodeMapper,c=void 0===s?function(e){return e}:s,u=n.methodNames,v=void 0===u?[]:u,g=n.initPropNames,m=void 0===g?[]:g;return Object(i.forwardRef)((function(t,n){var r=Object(i.useRef)(),s=f(Object(i.useState)({}),2),u=s[0],d=s[1];Object(i.useEffect)((function(){return d(t)}));var g=Object(i.useMemo)((function(){var n=h()(m.filter((function(e){return t.hasOwnProperty(e)})).map((function(e){return[e,t[e]]})));return e(n)}),[]);Object(i.useLayoutEffect)((function(){g(c(r.current))}),[]),Object(i.useEffect)((function(){return g._destructor instanceof Function?g._destructor:void 0}),[]);var y=Object(i.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g[e]instanceof Function?g[e].apply(g,n):void 0}),[g]),b=l(t,[].concat(p(v),p(m)));return Object.keys(b).filter((function(e){return u[e]!==t[e]})).forEach((function(e){return y(e,t[e])})),Object(i.useImperativeHandle)(n,(function(){return h()(v.map((function(e){return[e,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y.apply(void 0,[e].concat(n))}]})))})),o.a.createElement(a,{ref:r})}))},y=(r("sEhn"),r("MsAy"),r("cNTb"),r("NT8w"));function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".graph-nav-info {\n  position: absolute;\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n  font-family: Sans-serif;\n  z-index: 1000;\n}");var O=Object(y.a)({props:{width:{default:window.innerWidth,triggerUpdate:!1,onChange:function(e,t){t.container&&(t.container.style.width=e)}},height:{default:window.innerHeight,triggerUpdate:!1,onChange:function(e,t){t.container&&(t.container.style.height=e)}},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},backgroundColor:{default:"#002"},showNavInfo:{default:!0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeLabel:{default:"name"},nodeDesc:{default:"desc"},onNodeCenterHover:{},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkLabel:{default:"name"},linkDesc:{default:"desc"},onLinkCenterHover:{},linkHoverPrecision:{default:2},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:x(x({},Object.assign.apply(Object,[{}].concat(k(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map((function(e){return b({},e,(function(t){for(var n=t.forcegraph.components.forcegraph,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=n[e].apply(n,i);return a===n?this:a}))})))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,t){e.innerHTML="",t.container=document.createElement("div"),e.appendChild(t.container),t.container.style.position="relative",t.container.style.width=t.width,t.container.style.height=t.height,t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="graph-nav-info",t.navInfo.textContent="Mouse drag: look, gamepad/arrow/wasd keys: move";var n,r,i,o=document.createElement("a-scene");o.setAttribute("embedded",""),o.appendChild(t.sky=document.createElement("a-sky")),t.sky.setAttribute("radius",5e3),o.appendChild(n=document.createElement("a-entity")),n.setAttribute("position","0 0 300"),n.setAttribute("movement-controls","fly: true; speed: 7"),n.appendChild(r=document.createElement("a-entity")),r.setAttribute("camera",""),r.setAttribute("position","0 0.001 0"),r.setAttribute("look-controls","reverseMouseDrag: false; pointerLockEnabled: true"),r.appendChild(i=document.createElement("a-cursor")),i.setAttribute("color","lavender"),i.setAttribute("opacity",.5),i.setAttribute("raycaster","objects: ----none----"),o.appendChild(t.forcegraph=document.createElement("a-entity")),t.forcegraph.setAttribute("forcegraph",null),t.container.appendChild(o)},update:function(e,t){t.hasOwnProperty("backgroundColor")&&e.sky.setAttribute("color",e.backgroundColor),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none");var n=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeLabel","nodeDesc","onNodeCenterHover","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkLabel","linkDesc","onLinkCenterHover","linkHoverPrecision","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],r=Object.assign.apply(Object,[{}].concat(k(Object.entries(e).filter((function(e){var r=E(e,2),i=r[0],o=r[1];return t.hasOwnProperty(i)&&-1!=n.indexOf(i)&&null!=o})).map((function(e){var t=E(e,2);return b({},t[0],t[1])}))),k(Object.entries(e.graphData).map((function(e){var t=E(e,2);return b({},t[0],t[1])})))));e.forcegraph.setAttribute("forcegraph",r)}}),A=r("17x9"),C=r.n(A);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=Object(y.a)({props:{width:{},height:{},yOffset:{default:1.5},glScale:{default:200},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkHoverPrecision:{default:2},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},onNodeCenterHover:{},onLinkCenterHover:{},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:R(R({},Object.assign.apply(Object,[{}].concat(D(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map((function(e){return S({},e,(function(t){for(var n=t.forcegraph.components.forcegraph,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=n[e].apply(n,i);return a===n?this:a}))})))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.markerAttrs,i=void 0===r?{preset:"hiro"}:r;e.innerHTML="",t.container=document.createElement("div"),e.appendChild(t.container);var o=document.createElement("a-scene");o.setAttribute("embedded",""),o.setAttribute("arjs","debugUIEnabled: false;");var a=document.createElement("a-marker");Object.entries(i).forEach((function(e){var t=M(e,2),n=t[0],r=t[1];return a.setAttribute(n,r)})),o.appendChild(a),t.forcegraph=document.createElement("a-entity"),t.forcegraph.setAttribute("forcegraph",null),a.appendChild(t.forcegraph);var s=document.createElement("a-entity");s.setAttribute("camera",""),o.appendChild(s),t.container.appendChild(o)},update:function(e,t){t.hasOwnProperty("width")&&e.width&&(e.container.style.width=e.width),t.hasOwnProperty("height")&&e.height&&(e.container.style.height=e.height),t.hasOwnProperty("glScale")&&e.forcegraph.setAttribute("scale",D(new Array(3)).map((function(){return 1/e.glScale})).join(" ")),t.hasOwnProperty("yOffset")&&e.forcegraph.setAttribute("position","0 ".concat(e.yOffset," 0"));var n=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkHoverPrecision","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","onNodeCenterHover","onLinkCenterHover","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],r=Object.assign.apply(Object,[{}].concat(D(Object.entries(e).filter((function(e){var r=M(e,2),i=r[0],o=r[1];return t.hasOwnProperty(i)&&-1!=n.indexOf(i)&&null!=o})).map((function(e){var t=M(e,2);return S({},t[0],t[1])}))),D(Object.entries(e.graphData).map((function(e){var t=M(e,2);return S({},t[0],t[1])})))));e.forcegraph.setAttribute("forcegraph",r)}}),I=r("Womt"),z=function(e,t,n){var r=new I.x,i=new I.C,o=new I.M,a=new I.N,s=new I.N,c=new I.N,l=new I.r,u=[],h=null,d=null,f=this;function p(){n.addEventListener("mousemove",g,!1),n.addEventListener("mousedown",m,!1),n.addEventListener("mouseup",y,!1),n.addEventListener("mouseleave",y,!1),n.addEventListener("touchmove",b,!1),n.addEventListener("touchstart",w,!1),n.addEventListener("touchend",x,!1)}function v(){n.removeEventListener("mousemove",g,!1),n.removeEventListener("mousedown",m,!1),n.removeEventListener("mouseup",y,!1),n.removeEventListener("mouseleave",y,!1),n.removeEventListener("touchmove",b,!1),n.removeEventListener("touchstart",w,!1),n.removeEventListener("touchend",x,!1),n.style.cursor=""}function g(p){p.preventDefault();var v=n.getBoundingClientRect();if(o.x=(p.clientX-v.left)/v.width*2-1,o.y=-(p.clientY-v.top)/v.height*2+1,i.setFromCamera(o,t),h&&f.enabled)return i.ray.intersectPlane(r,s)&&h.position.copy(s.sub(a).applyMatrix4(l)),void f.dispatchEvent({type:"drag",object:h});if(u.length=0,i.setFromCamera(o,t),i.intersectObjects(e,!0,u),u.length>0){var g=u[0].object;r.setFromNormalAndCoplanarPoint(t.getWorldDirection(r.normal),c.setFromMatrixPosition(g.matrixWorld)),d!==g&&(f.dispatchEvent({type:"hoveron",object:g}),n.style.cursor="pointer",d=g)}else null!==d&&(f.dispatchEvent({type:"hoveroff",object:d}),n.style.cursor="auto",d=null)}function m(d){d.preventDefault(),u.length=0,i.setFromCamera(o,t),i.intersectObjects(e,!0,u),u.length>0&&(h=!0===f.transformGroup?e[0]:u[0].object,i.ray.intersectPlane(r,s)&&(l.getInverse(h.parent.matrixWorld),a.copy(s).sub(c.setFromMatrixPosition(h.matrixWorld))),n.style.cursor="move",f.dispatchEvent({type:"dragstart",object:h}))}function y(e){e.preventDefault(),h&&(f.dispatchEvent({type:"dragend",object:h}),h=null),n.style.cursor=d?"pointer":"auto"}function b(e){e.preventDefault(),e=e.changedTouches[0];var c=n.getBoundingClientRect();if(o.x=(e.clientX-c.left)/c.width*2-1,o.y=-(e.clientY-c.top)/c.height*2+1,i.setFromCamera(o,t),h&&f.enabled)return i.ray.intersectPlane(r,s)&&h.position.copy(s.sub(a).applyMatrix4(l)),void f.dispatchEvent({type:"drag",object:h})}function w(d){d.preventDefault(),d=d.changedTouches[0];var p=n.getBoundingClientRect();o.x=(d.clientX-p.left)/p.width*2-1,o.y=-(d.clientY-p.top)/p.height*2+1,u.length=0,i.setFromCamera(o,t),i.intersectObjects(e,!0,u),u.length>0&&(h=!0===f.transformGroup?e[0]:u[0].object,r.setFromNormalAndCoplanarPoint(t.getWorldDirection(r.normal),c.setFromMatrixPosition(h.matrixWorld)),i.ray.intersectPlane(r,s)&&(l.getInverse(h.parent.matrixWorld),a.copy(s).sub(c.setFromMatrixPosition(h.matrixWorld))),n.style.cursor="move",f.dispatchEvent({type:"dragstart",object:h}))}function x(e){e.preventDefault(),h&&(f.dispatchEvent({type:"dragend",object:h}),h=null),n.style.cursor="auto"}p(),this.enabled=!0,this.transformGroup=!1,this.activate=p,this.deactivate=v,this.dispose=function(){v()},this.getObjects=function(){return e}};(z.prototype=Object.create(I.l.prototype)).constructor=z;var H=r("j/yy"),F=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var n=this,r=-1,i=0,o=1,a=2,s=3,c=4;this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:I.q.ROTATE,MIDDLE:I.q.ZOOM,RIGHT:I.q.PAN},this.target=new I.N;var l=new I.N,u=1,h=r,d=r,f=new I.N,p=new I.M,v=new I.M,g=new I.N,m=0,y=new I.M,b=new I.M,w=0,x=0,E=new I.M,k=new I.M;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var _={type:"change"},T={type:"start"},O={type:"end"};this.handleResize=function(){var e=n.domElement.getBoundingClientRect(),t=n.domElement.ownerDocument.documentElement;n.screen.left=e.left+window.pageXOffset-t.clientLeft,n.screen.top=e.top+window.pageYOffset-t.clientTop,n.screen.width=e.width,n.screen.height=e.height};var A,C,S,j,R,M,D,P,N,L,z,H=(A=new I.M,function(e,t){return A.set((e-n.screen.left)/n.screen.width,(t-n.screen.top)/n.screen.height),A}),F=function(){var e=new I.M;return function(t,r){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),e}}();function B(e){!1!==n.enabled&&(window.removeEventListener("keydown",B),d===r&&(e.keyCode!==n.keys[i]||n.noRotate?e.keyCode!==n.keys[o]||n.noZoom?e.keyCode!==n.keys[a]||n.noPan||(d=a):d=o:d=i))}function U(){!1!==n.enabled&&(d=r,window.addEventListener("keydown",B,!1))}function V(e){if(!1!==n.enabled){if(e.preventDefault(),e.stopPropagation(),h===r)switch(e.button){case n.mouseButtons.LEFT:h=i;break;case n.mouseButtons.MIDDLE:h=o;break;case n.mouseButtons.RIGHT:h=a;break;default:h=r}var t=d!==r?d:h;t!==i||n.noRotate?t!==o||n.noZoom?t!==a||n.noPan||(E.copy(H(e.pageX,e.pageY)),k.copy(E)):(y.copy(H(e.pageX,e.pageY)),b.copy(y)):(v.copy(F(e.pageX,e.pageY)),p.copy(v)),n.domElement.ownerDocument.addEventListener("mousemove",G,!1),n.domElement.ownerDocument.addEventListener("mouseup",q,!1),n.dispatchEvent(T)}}function G(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=d!==r?d:h;t!==i||n.noRotate?t!==o||n.noZoom?t!==a||n.noPan||k.copy(H(e.pageX,e.pageY)):b.copy(H(e.pageX,e.pageY)):(p.copy(v),v.copy(F(e.pageX,e.pageY)))}}function q(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),h=r,n.domElement.ownerDocument.removeEventListener("mousemove",G),n.domElement.ownerDocument.removeEventListener("mouseup",q),n.dispatchEvent(O))}function K(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:y.y-=.025*e.deltaY;break;case 1:y.y-=.01*e.deltaY;break;default:y.y-=25e-5*e.deltaY}n.dispatchEvent(T),n.dispatchEvent(O)}}function W(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:h=s,v.copy(F(e.touches[0].pageX,e.touches[0].pageY)),p.copy(v);break;default:h=c;var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;x=w=Math.sqrt(t*t+r*r);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;E.copy(H(i,o)),k.copy(E)}n.dispatchEvent(T)}}function X(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:p.copy(v),v.copy(F(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;x=Math.sqrt(t*t+r*r);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;k.copy(H(i,o))}}function Y(e){if(!1!==n.enabled){switch(e.touches.length){case 0:h=r;break;case 1:h=s,v.copy(F(e.touches[0].pageX,e.touches[0].pageY)),p.copy(v)}n.dispatchEvent(O)}}function Z(e){!1!==n.enabled&&e.preventDefault()}this.rotateCamera=(S=new I.N,j=new I.A,R=new I.N,M=new I.N,D=new I.N,P=new I.N,function(){P.set(v.x-p.x,v.y-p.y,0),(C=P.length())?(f.copy(n.object.position).sub(n.target),R.copy(f).normalize(),M.copy(n.object.up).normalize(),D.crossVectors(M,R).normalize(),M.setLength(v.y-p.y),D.setLength(v.x-p.x),P.copy(M.add(D)),S.crossVectors(P,f).normalize(),C*=n.rotateSpeed,j.setFromAxisAngle(S,C),f.applyQuaternion(j),n.object.up.applyQuaternion(j),g.copy(S),m=C):!n.staticMoving&&m&&(m*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),j.setFromAxisAngle(g,m),f.applyQuaternion(j),n.object.up.applyQuaternion(j)),p.copy(v)}),this.zoomCamera=function(){var e;h===c?(e=w/x,w=x,n.object.isPerspectiveCamera?f.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom*=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(b.y-y.y)*n.zoomSpeed)&&e>0&&(n.object.isPerspectiveCamera?f.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom/=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?y.copy(b):y.y+=(b.y-y.y)*this.dynamicDampingFactor)},this.panCamera=(N=new I.M,L=new I.N,z=new I.N,function(){if(N.copy(k).sub(E),N.lengthSq()){if(n.object.isOrthographicCamera){var e=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,t=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;N.x*=e,N.y*=t}N.multiplyScalar(f.length()*n.panSpeed),z.copy(f).cross(n.object.up).setLength(N.x),z.add(L.copy(n.object.up).setLength(N.y)),n.object.position.add(z),n.target.add(z),n.staticMoving?E.copy(k):E.add(N.subVectors(k,E).multiplyScalar(n.dynamicDampingFactor))}}),this.checkDistances=function(){n.noZoom&&n.noPan||(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),y.copy(b)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),y.copy(b)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),l.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(_),l.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(l.distanceToSquared(n.object.position)>1e-6||u!==n.object.zoom)&&(n.dispatchEvent(_),l.copy(n.object.position),u=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){h=r,d=r,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(_),l.copy(n.object.position),u=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",Z,!1),n.domElement.removeEventListener("mousedown",V,!1),n.domElement.removeEventListener("wheel",K,!1),n.domElement.removeEventListener("touchstart",W,!1),n.domElement.removeEventListener("touchend",Y,!1),n.domElement.removeEventListener("touchmove",X,!1),n.domElement.ownerDocument.removeEventListener("mousemove",G,!1),n.domElement.ownerDocument.removeEventListener("mouseup",q,!1),window.removeEventListener("keydown",B,!1),window.removeEventListener("keyup",U,!1)},this.domElement.addEventListener("contextmenu",Z,!1),this.domElement.addEventListener("mousedown",V,!1),this.domElement.addEventListener("wheel",K,!1),this.domElement.addEventListener("touchstart",W,!1),this.domElement.addEventListener("touchend",Y,!1),this.domElement.addEventListener("touchmove",X,!1),window.addEventListener("keydown",B,!1),window.addEventListener("keyup",U,!1),this.handleResize(),this.update()};F.prototype=Object.create(I.l.prototype),F.prototype.constructor=F;var B=function(e,t){var n,r,i,o,a,s;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new I.N,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:I.q.ROTATE,MIDDLE:I.q.DOLLY,RIGHT:I.q.PAN},this.touches={ONE:I.I.ROTATE,TWO:I.I.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return v.phi},this.getAzimuthalAngle=function(){return v.theta},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(l),c.update(),f=d.NONE},this.update=(n=new I.N,r=(new I.A).setFromUnitVectors(e.up,new I.N(0,1,0)),i=r.clone().inverse(),o=new I.N,a=new I.A,s=2*Math.PI,function(){var e=c.object.position;n.copy(e).sub(c.target),n.applyQuaternion(r),v.setFromVector3(n),c.autoRotate&&f===d.NONE&&j(2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(v.theta+=g.theta*c.dampingFactor,v.phi+=g.phi*c.dampingFactor):(v.theta+=g.theta,v.phi+=g.phi);var t=c.minAzimuthAngle,u=c.maxAzimuthAngle;return isFinite(t)&&isFinite(u)&&(t<-Math.PI?t+=s:t>Math.PI&&(t-=s),u<-Math.PI?u+=s:u>Math.PI&&(u-=s),v.theta=t<u?Math.max(t,Math.min(u,v.theta)):v.theta>(t+u)/2?Math.max(t,v.theta):Math.min(u,v.theta)),v.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,v.phi)),v.makeSafe(),v.radius*=m,v.radius=Math.max(c.minDistance,Math.min(c.maxDistance,v.radius)),!0===c.enableDamping?c.target.addScaledVector(y,c.dampingFactor):c.target.add(y),n.setFromSpherical(v),n.applyQuaternion(i),e.copy(c.target).add(n),c.object.lookAt(c.target),!0===c.enableDamping?(g.theta*=1-c.dampingFactor,g.phi*=1-c.dampingFactor,y.multiplyScalar(1-c.dampingFactor)):(g.set(0,0,0),y.set(0,0,0)),m=1,!!(b||o.distanceToSquared(c.object.position)>p||8*(1-a.dot(c.object.quaternion))>p)&&(c.dispatchEvent(l),o.copy(c.object.position),a.copy(c.object.quaternion),b=!1,!0)}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",te,!1),c.domElement.removeEventListener("mousedown",W,!1),c.domElement.removeEventListener("wheel",Z,!1),c.domElement.removeEventListener("touchstart",J,!1),c.domElement.removeEventListener("touchend",ee,!1),c.domElement.removeEventListener("touchmove",$,!1),c.domElement.ownerDocument.removeEventListener("mousemove",X,!1),c.domElement.ownerDocument.removeEventListener("mouseup",Y,!1),c.domElement.removeEventListener("keydown",Q,!1)};var c=this,l={type:"change"},u={type:"start"},h={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=d.NONE,p=1e-6,v=new I.H,g=new I.H,m=1,y=new I.N,b=!1,w=new I.M,x=new I.M,E=new I.M,k=new I.M,_=new I.M,T=new I.M,O=new I.M,A=new I.M,C=new I.M;function S(){return Math.pow(.95,c.zoomSpeed)}function j(e){g.theta-=e}function R(e){g.phi-=e}var M,D=(M=new I.N,function(e,t){M.setFromMatrixColumn(t,0),M.multiplyScalar(-e),y.add(M)}),P=function(){var e=new I.N;return function(t,n){!0===c.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(c.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),N=function(){var e=new I.N;return function(t,n){var r=c.domElement;if(c.object.isPerspectiveCamera){var i=c.object.position;e.copy(i).sub(c.target);var o=e.length();o*=Math.tan(c.object.fov/2*Math.PI/180),D(2*t*o/r.clientHeight,c.object.matrix),P(2*n*o/r.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(D(t*(c.object.right-c.object.left)/c.object.zoom/r.clientWidth,c.object.matrix),P(n*(c.object.top-c.object.bottom)/c.object.zoom/r.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function L(e){c.object.isPerspectiveCamera?m/=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function z(e){c.object.isPerspectiveCamera?m*=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function H(e){w.set(e.clientX,e.clientY)}function F(e){k.set(e.clientX,e.clientY)}function B(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}}function U(e){if(1==e.touches.length)k.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);k.set(t,n)}}function V(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);O.set(0,r)}function G(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,n)}E.subVectors(x,w).multiplyScalar(c.rotateSpeed);var r=c.domElement;j(2*Math.PI*E.x/r.clientHeight),R(2*Math.PI*E.y/r.clientHeight),w.copy(x)}function q(e){if(1==e.touches.length)_.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);_.set(t,n)}T.subVectors(_,k).multiplyScalar(c.panSpeed),N(T.x,T.y),k.copy(_)}function K(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);A.set(0,r),C.set(0,Math.pow(A.y/O.y,c.zoomSpeed)),L(C.y),O.copy(A)}function W(e){if(!1!==c.enabled){var t;switch(e.preventDefault(),c.domElement.focus?c.domElement.focus():window.focus(),e.button){case 0:t=c.mouseButtons.LEFT;break;case 1:t=c.mouseButtons.MIDDLE;break;case 2:t=c.mouseButtons.RIGHT;break;default:t=-1}switch(t){case I.q.DOLLY:if(!1===c.enableZoom)return;!function(e){O.set(e.clientX,e.clientY)}(e),f=d.DOLLY;break;case I.q.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enablePan)return;F(e),f=d.PAN}else{if(!1===c.enableRotate)return;H(e),f=d.ROTATE}break;case I.q.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enableRotate)return;H(e),f=d.ROTATE}else{if(!1===c.enablePan)return;F(e),f=d.PAN}break;default:f=d.NONE}f!==d.NONE&&(c.domElement.ownerDocument.addEventListener("mousemove",X,!1),c.domElement.ownerDocument.addEventListener("mouseup",Y,!1),c.dispatchEvent(u))}}function X(e){if(!1!==c.enabled)switch(e.preventDefault(),f){case d.ROTATE:if(!1===c.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),E.subVectors(x,w).multiplyScalar(c.rotateSpeed);var t=c.domElement;j(2*Math.PI*E.x/t.clientHeight),R(2*Math.PI*E.y/t.clientHeight),w.copy(x),c.update()}(e);break;case d.DOLLY:if(!1===c.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),C.subVectors(A,O),C.y>0?L(S()):C.y<0&&z(S()),O.copy(A),c.update()}(e);break;case d.PAN:if(!1===c.enablePan)return;!function(e){_.set(e.clientX,e.clientY),T.subVectors(_,k).multiplyScalar(c.panSpeed),N(T.x,T.y),k.copy(_),c.update()}(e)}}function Y(e){!1!==c.enabled&&(c.domElement.ownerDocument.removeEventListener("mousemove",X,!1),c.domElement.ownerDocument.removeEventListener("mouseup",Y,!1),c.dispatchEvent(h),f=d.NONE)}function Z(e){!1===c.enabled||!1===c.enableZoom||f!==d.NONE&&f!==d.ROTATE||(e.preventDefault(),e.stopPropagation(),c.dispatchEvent(u),function(e){e.deltaY<0?z(S()):e.deltaY>0&&L(S()),c.update()}(e),c.dispatchEvent(h))}function Q(e){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(e){var t=!1;switch(e.keyCode){case c.keys.UP:N(0,c.keyPanSpeed),t=!0;break;case c.keys.BOTTOM:N(0,-c.keyPanSpeed),t=!0;break;case c.keys.LEFT:N(c.keyPanSpeed,0),t=!0;break;case c.keys.RIGHT:N(-c.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),c.update())}(e)}function J(e){if(!1!==c.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(c.touches.ONE){case I.I.ROTATE:if(!1===c.enableRotate)return;B(e),f=d.TOUCH_ROTATE;break;case I.I.PAN:if(!1===c.enablePan)return;U(e),f=d.TOUCH_PAN;break;default:f=d.NONE}break;case 2:switch(c.touches.TWO){case I.I.DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&V(e),c.enablePan&&U(e)}(e),f=d.TOUCH_DOLLY_PAN;break;case I.I.DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&V(e),c.enableRotate&&B(e)}(e),f=d.TOUCH_DOLLY_ROTATE;break;default:f=d.NONE}break;default:f=d.NONE}f!==d.NONE&&c.dispatchEvent(u)}}function $(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),f){case d.TOUCH_ROTATE:if(!1===c.enableRotate)return;G(e),c.update();break;case d.TOUCH_PAN:if(!1===c.enablePan)return;q(e),c.update();break;case d.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&K(e),c.enablePan&&q(e)}(e),c.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&K(e),c.enableRotate&&G(e)}(e),c.update();break;default:f=d.NONE}}function ee(e){!1!==c.enabled&&(c.dispatchEvent(h),f=d.NONE)}function te(e){!1!==c.enabled&&e.preventDefault()}c.domElement.addEventListener("contextmenu",te,!1),c.domElement.addEventListener("mousedown",W,!1),c.domElement.addEventListener("wheel",Z,!1),c.domElement.addEventListener("touchstart",J,!1),c.domElement.addEventListener("touchend",ee,!1),c.domElement.addEventListener("touchmove",$,!1),c.domElement.addEventListener("keydown",Q,!1),-1===c.domElement.tabIndex&&(c.domElement.tabIndex=0),this.update()};B.prototype=Object.create(I.l.prototype),B.prototype.constructor=B;var U=function(e,t){B.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=I.q.PAN,this.mouseButtons.RIGHT=I.q.ROTATE,this.touches.ONE=I.I.PAN,this.touches.TWO=I.I.DOLLY_ROTATE};(U.prototype=Object.create(I.l.prototype)).constructor=U;var V,G,q,K=function(e,t){function n(e,t){return function(){t.apply(e,arguments)}}function r(e){e.preventDefault()}void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,t&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this.tmpQuaternion=new I.A,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new I.N(0,0,0),this.rotationVector=new I.N(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(e){if(!this.dragToLook||this.mouseStatus>0){var t=this.getContainerDimensions(),n=t.size[0]/2,r=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this.moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this.updateRotationVector()}},this.mouseup=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(e){var t=e*this.movementSpeed,n=e*this.rollSpeed;this.object.translateX(this.moveVector.x*t),this.object.translateY(this.moveVector.y*t),this.object.translateZ(this.moveVector.z*t),this.tmpQuaternion.set(this.rotationVector.x*n,this.rotationVector.y*n,this.rotationVector.z*n,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),this.object.rotation.setFromQuaternion(this.object.quaternion,this.object.rotation.order)},this.updateMovementVector=function(){var e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",r,!1),this.domElement.removeEventListener("mousedown",o,!1),this.domElement.removeEventListener("mousemove",i,!1),this.domElement.removeEventListener("mouseup",a,!1),window.removeEventListener("keydown",s,!1),window.removeEventListener("keyup",c,!1)};var i=n(this,this.mousemove),o=n(this,this.mousedown),a=n(this,this.mouseup),s=n(this,this.keydown),c=n(this,this.keyup);this.domElement.addEventListener("contextmenu",r,!1),this.domElement.addEventListener("mousemove",i,!1),this.domElement.addEventListener("mousedown",o,!1),this.domElement.addEventListener("mouseup",a,!1),window.addEventListener("keydown",s,!1),window.addEventListener("keyup",c,!1),this.updateMovementVector(),this.updateRotationVector()},W={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function X(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(X.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),X.FullScreenQuad=(V=new I.v(-1,1,1,-1,0,1),G=new I.y(2,2),q=function(e){this._mesh=new I.s(G,e)},Object.defineProperty(q.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(q.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,V)}}),q);var Y=function(e,t){X.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof I.E?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=I.L.clone(e.uniforms),this.material=new I.E({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new X.FullScreenQuad(this.material)};Y.prototype=Object.assign(Object.create(X.prototype),{constructor:Y,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var Z=function(e,t){X.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};Z.prototype=Object.assign(Object.create(X.prototype),{constructor:Z,render:function(e,t,n){var r,i,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var Q=function(){X.call(this),this.needsSwap=!1};Q.prototype=Object.create(X.prototype),Object.assign(Q.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var J=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:I.p,magFilter:I.p,format:I.B,stencilBuffer:!1},r=e.getSize(new I.M);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new I.O(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===W&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Y&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Y(W),this.clock=new I.f};Object.assign(J.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Z&&(t instanceof Z?i=!0:t instanceof Q&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new I.M);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var $=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign($.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),$.FullScreenQuad=function(){var e=new I.v(-1,1,1,-1,0,1),t=new I.y(2,2),n=function(e){this._mesh=new I.s(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}();var ee=function(e,t,n,r,i){X.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};ee.prototype=Object.assign(Object.create(X.prototype),{constructor:ee,render:function(e,t,n){var r,i,o,a=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=a}});r("E9XD");function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ne=r("uRdJ"),re=r("9Hrx"),ie=r("Ccfo"),oe=r("gUOe");var ae=r("j/3L");function se(e,t,n){return(se=Object(ae.a)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Object(oe.a)(i,n.prototype),i}).apply(null,arguments)}function ce(e){var t="function"==typeof Map?new Map:void 0;return(ce=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return se(e,arguments,Object(ie.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(oe.a)(r,e)})(e)}var le=function(e){function t(t){var n;return n=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,Object(ne.a)(n)}return Object(re.a)(t,e),t}(ce(Error));function ue(e){return Math.round(255*e)}function he(e,t,n){return ue(e)+","+ue(t)+","+ue(n)}function de(e,t,n,r){if(void 0===r&&(r=he),0===t)return r(n,n,n);var i=(e%360+360)%360/60,o=(1-Math.abs(2*n-1))*t,a=o*(1-Math.abs(i%2-1)),s=0,c=0,l=0;i>=0&&i<1?(s=o,c=a):i>=1&&i<2?(s=a,c=o):i>=2&&i<3?(c=o,l=a):i>=3&&i<4?(c=a,l=o):i>=4&&i<5?(s=a,l=o):i>=5&&i<6&&(s=o,l=a);var u=n-o/2;return r(s+u,c+u,l+u)}var fe={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var pe=/^#[a-fA-F0-9]{6}$/,ve=/^#[a-fA-F0-9]{8}$/,ge=/^#[a-fA-F0-9]{3}$/,me=/^#[a-fA-F0-9]{4}$/,ye=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,be=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,we=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,xe=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function Ee(e){if("string"!=typeof e)throw new le(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return fe[t]?"#"+fe[t]:e}(e);if(t.match(pe))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(ve)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(ge))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(me)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var i=ye.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var o=be.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])};var a=we.exec(t);if(a){var s="rgb("+de(parseInt(""+a[1],10),parseInt(""+a[2],10)/100,parseInt(""+a[3],10)/100)+")",c=ye.exec(s);if(!c)throw new le(4,t,s);return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10)}}var l=xe.exec(t);if(l){var u="rgb("+de(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",h=ye.exec(u);if(!h)throw new le(4,t,u);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10),alpha:parseFloat(""+l[4])}}throw new le(5)}var ke=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function _e(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function Te(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return ke("#"+_e(e)+_e(t)+_e(n));if("object"==typeof e&&void 0===t&&void 0===n)return ke("#"+_e(e.red)+_e(e.green)+_e(e.blue));throw new le(6)}function Oe(e,t,n,r){if("string"==typeof e&&"number"==typeof t){var i=Ee(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r)return r>=1?Te(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?Te(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new le(7)}function Ae(e){return function e(t,n,r){return function(){var i=r.concat(Array.prototype.slice.call(arguments));return i.length>=n?t.apply(this,i):e(t,n,i)}}(e,e.length,[])}function Ce(e,t,n){return Math.max(e,Math.min(t,n))}function Se(e,t){if("transparent"===t)return t;var n=Ee(t);return Oe(te({},n,{alpha:Ce(0,1,(100*("number"==typeof n.alpha?n.alpha:1)+100*parseFloat(e))/100)}))}var je=Ae(Se);var Re=r("IrXD"),Me=r("+LDG");function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e){return function(e){if(Array.isArray(e))return Ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}");var ze=window.THREE?window.THREE:{WebGLRenderer:I.P,Scene:I.D,PerspectiveCamera:I.w,Raycaster:I.C,TextureLoader:I.J,Vector2:I.M,Vector3:I.N,Box3:I.c,Color:I.g,Mesh:I.s,SphereGeometry:I.G,MeshBasicMaterial:I.t,BackSide:I.b,EventDispatcher:I.l,MOUSE:I.q,Quaternion:I.A,Spherical:I.H,Clock:I.f},He=Object(y.a)({props:{width:{default:window.innerWidth,onChange:function(e,t,n){isNaN(e)&&(t.width=n)}},height:{default:window.innerHeight,onChange:function(e,t,n){isNaN(e)&&(t.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.toolTipElem&&(t.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(e.clock.getDelta()),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var n=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter((function(t){return e.hoverFilter(t.object)})).sort((function(t,n){return e.hoverOrderComparator(t.object,n.object)})),r=n.length?n[0]:null;t=r?r.object:null,e.intersectionPoint=r?r.point:null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj),e.toolTipElem.innerHTML=t&&Object(Me.default)(e.tooltipContent)(t)||"",e.hoverObj=t)}Re.a.update()}return this},getPointerPos:function(e){var t=e.pointerPos;return{x:t.x,y:t.y}},cameraPosition:function(e,t,n,r){var i=e.camera;if(t&&e.initialised){var o=t,a=n||{x:0,y:0,z:0};if(r){var s=Object.assign({},i.position),c=h();new Re.a.Tween(s).to(o,r).easing(Re.a.Easing.Quadratic.Out).onUpdate(l).start(),new Re.a.Tween(c).to(a,r/3).easing(Re.a.Easing.Quadratic.Out).onUpdate(u).start()}else l(o),u(a);return this}return Object.assign({},i.position,{lookAt:h()});function l(e){var t=e.x,n=e.y,r=e.z;void 0!==t&&(i.position.x=t),void 0!==n&&(i.position.y=n),void 0!==r&&(i.position.z=r)}function u(t){e.controls.target=new ze.Vector3(t.x,t.y,t.z)}function h(){return Object.assign(new ze.Vector3(0,0,-1e3).applyQuaternion(i.quaternion).add(i.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,i),t,n)},fitToBbox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=e.camera;if(t){var o=new ze.Vector3(0,0,0),a=2*Math.max.apply(Math,Ne(Object.entries(t).map((function(e){var t=Pe(e,2),n=t[0],r=t[1];return Math.max.apply(Math,Ne(r.map((function(e){return Math.abs(o[n]-e)}))))})))),s=(1-2*r/e.height)*i.fov,c=a/Math.atan(s*Math.PI/180),l=c/i.aspect,u=Math.max(c,l);if(u>0){var h=o.clone().sub(i.position).normalize().multiplyScalar(-u);this.cameraPosition(h,o,n)}}return this},getBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new ze.Box3(new ze.Vector3(0,0,0),new ze.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach((function(e){return n.expandByObject(e)})),Object.assign.apply(Object,Ne(["x","y","z"].map((function(e){return De({},e,[n.min[e],n.max[e]])}))))):null},getScreenCoords:function(e,t,n,r){var i=new ze.Vector3(t,n,r);return i.project(this.camera()),{x:(i.x+1)*e.width/2,y:-(i.y-1)*e.height/2}},intersectingObjects:function(e,t,n){var r=new ze.Vector2(t/e.width*2-1,-n/e.height*2+1),i=new ze.Raycaster;return i.params.Line.threshold=e.lineHoverPrecision,i.setFromCamera(r,e.camera),i.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new ze.Scene,camera:new ze.PerspectiveCamera,clock:new ze.Clock}},init:function(e,t,n){var r=n.controlType,i=void 0===r?"trackball":r,o=n.rendererConfig,a=void 0===o?{}:o,s=n.waitForLoadComplete,c=void 0===s||s;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[i]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.toolTipElem=document.createElement("div"),t.toolTipElem.classList.add("scene-tooltip"),t.container.appendChild(t.toolTipElem),t.pointerPos=new ze.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach((function(e){return t.container.addEventListener(e,(function(e){if(!t.isPointerDragging&&"pointermove"===e.type&&e.pressure>0&&[e.movementX,e.movementY].some((function(t){return Math.abs(t)>("touch"===e.pointerType?1:0)}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var n=(r=t.container,i=r.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop,{top:i.top+a,left:i.left+o});t.pointerPos.x=e.pageX-n.left,t.pointerPos.y=e.pageY-n.top,t.toolTipElem.style.top="".concat(t.pointerPos.y,"px"),t.toolTipElem.style.left="".concat(t.pointerPos.x,"px"),t.toolTipElem.style.transform="translate(-".concat(t.pointerPos.x/t.width*100,"%, 21px)")}var r,i,o,a}),{passive:!0})})),t.container.addEventListener("pointerup",(function(e){t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag)||requestAnimationFrame((function(){0===e.button&&t.onClick(t.hoverObj||null,e,t.intersectionPoint),2===e.button&&t.onRightClick&&t.onRightClick(t.hoverObj||null,e,t.intersectionPoint)}))}),{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",(function(e){t.onRightClick&&e.preventDefault()})),t.renderer=new ze.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},a)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.postProcessingComposer=new J(t.renderer),t.postProcessingComposer.addPass(new ee(t.scene,t.camera)),t.controls=new{trackball:F,orbit:B,fly:K}[i](t.camera,t.renderer.domElement),"fly"===i&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),"trackball"!==i&&"orbit"!==i||(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",(function(){return t.controlsEngaged=!0})),t.controls.addEventListener("change",(function(){t.controlsEngaged&&(t.controlsDragging=!0)})),t.controls.addEventListener("end",(function(){t.controlsEngaged=!1,t.controlsDragging=!1}))),t.renderer.setSize(t.width,t.height),t.postProcessingComposer.setSize(t.width,t.height),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new ze.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!c,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))&&(e.container.style.width=e.width,e.container.style.height=e.height,e.renderer.setSize(e.width,e.height),e.postProcessingComposer.setSize(e.width,e.height),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=e.skyRadius),e.camera.far=2.5*e.skyRadius,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new ze.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var n=Ee(e.backgroundColor).alpha;void 0===n&&(n=1),e.renderer.setClearColor(new ze.Color(je(1,e.backgroundColor)),n)}function r(){e.loadComplete=e.scene.visible=!0}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?(new ze.TextureLoader).load(e.backgroundImageUrl,(function(t){e.skysphere.material=new ze.MeshBasicMaterial({map:t,side:ze.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&r()})):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&r())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("objects")&&((t.objects||[]).forEach((function(t){return e.scene.remove(t)})),e.objects.forEach((function(t){return e.scene.add(t)})))}});function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ge(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qe(e,t){var n=new t;return{linkProp:function(t){return{default:n[t](),onChange:function(n,r){r[e][t](n)},triggerUpdate:!1}},linkMethod:function(t){return function(n){for(var r=n[e],i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=r[t].apply(r,o);return s===r?this:s}}}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}");var Ke=window.THREE?window.THREE:{AmbientLight:I.a,DirectionalLight:I.k,Vector3:I.N},We=qe("forceGraph",H.default),Xe=Object.assign.apply(Object,Ve(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(e){return Fe({},e,We.linkProp(e))})))),Ye=Object.assign.apply(Object,Ve(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map((function(e){return Fe({},e,We.linkMethod(e))})))),Ze=qe("renderObjs",He),Qe=Object.assign.apply(Object,Ve(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map((function(e){return Fe({},e,Ze.linkProp(e))})))),Je=Object.assign.apply(Object,Ve(["cameraPosition","postProcessingComposer"].map((function(e){return Fe({},e,Ze.linkMethod(e))}))).concat([{graph2ScreenCoords:Ze.linkMethod("getScreenCoords")}]));function $e(e){for(var t=e;t&&!t.hasOwnProperty("__graphObjType");)t=t.parent;return t}var et=Object(y.a)({props:Ue(Ue({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,t){return t.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,t){var n=t.renderObjs.controls();n&&(n.enabled=e)},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{default:function(){},triggerUpdate:!1},onNodeRightClick:{default:function(){},triggerUpdate:!1},onNodeHover:{default:function(){},triggerUpdate:!1},onLinkClick:{default:function(){},triggerUpdate:!1},onLinkRightClick:{default:function(){},triggerUpdate:!1},onLinkHover:{default:function(){},triggerUpdate:!1},onBackgroundClick:{default:function(){},triggerUpdate:!1},onBackgroundRightClick:{default:function(){},triggerUpdate:!1}},Xe),Qe),methods:Ue(Ue({zoomToFit:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return e.renderObjs.fitToBbox((r=e.forceGraph).getGraphBbox.apply(r,o),t,n),this},pauseAnimation:function(e){return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return null===e.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Ye),Je),stateInit:function(e){var t=e.controlType,n=e.rendererConfig;return{forceGraph:new H.default,renderObjs:He({controlType:t,rendererConfig:n})}},init:function(e,t){e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var n=document.createElement("div");t.container.appendChild(n),t.renderObjs(n);var r,i=t.renderObjs.camera(),o=t.renderObjs.renderer(),a=t.renderObjs.controls();a.enabled=!!t.enableNavigationControls,t.lastSetCameraZ=i.position.z,t.container.appendChild(r=document.createElement("div")),r.className="graph-info-msg",r.textContent="",t.forceGraph.onLoading((function(){r.textContent="Loading..."})).onFinishLoading((function(){r.textContent=""})).onUpdate((function(){t.graphData=t.forceGraph.graphData(),0===i.position.x&&0===i.position.y&&i.position.z===t.lastSetCameraZ&&t.graphData.nodes.length&&(i.lookAt(t.forceGraph.position),t.lastSetCameraZ=i.position.z=170*Math.cbrt(t.graphData.nodes.length))})).onFinishUpdate((function(){if(t._dragControls){var e=t.graphData.nodes.find((function(e){return e.__initialFixedPos&&!e.__disposeControlsAfterDrag}));e?e.__disposeControlsAfterDrag=!0:t._dragControls.dispose(),t._dragControls=void 0}if(t.enableNodeDrag&&t.enablePointerInteraction&&"d3"===t.forceEngine){var n=t._dragControls=new z(t.graphData.nodes.map((function(e){return e.__threeObj})).filter((function(e){return e})),i,o.domElement);n.addEventListener("dragstart",(function(e){a.enabled=!1,e.object.__initialPos=e.object.position.clone(),e.object.__prevPos=e.object.position.clone();var t=$e(e.object).__data;!t.__initialFixedPos&&(t.__initialFixedPos={fx:t.fx,fy:t.fy,fz:t.fz}),!t.__initialPos&&(t.__initialPos={x:t.x,y:t.y,z:t.z}),["x","y","z"].forEach((function(e){return t["f".concat(e)]=t[e]})),o.domElement.classList.add("grabbable")})),n.addEventListener("drag",(function(e){var n=$e(e.object);if(!e.object.hasOwnProperty("__graphObjType")){var r=e.object.__initialPos,i=e.object.__prevPos,o=e.object.position;n.position.add(o.clone().sub(i)),i.copy(o),o.copy(r)}var a=n.__data,s=n.position,c={x:s.x-a.x,y:s.y-a.y,z:s.z-a.z};["x","y","z"].forEach((function(e){return a["f".concat(e)]=a[e]=s[e]})),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),a.__dragged=!0,t.onNodeDrag(a,c)})),n.addEventListener("dragend",(function(e){delete e.object.__initialPos,delete e.object.__prevPos;var r=$e(e.object).__data;r.__disposeControlsAfterDrag&&(n.dispose(),delete r.__disposeControlsAfterDrag);var i=r.__initialFixedPos,s=r.__initialPos,c={x:s.x-r.x,y:s.y-r.y,z:s.z-r.z};i&&(["x","y","z"].forEach((function(e){var t="f".concat(e);void 0===i[t]&&delete r[t]})),delete r.__initialFixedPos,delete r.__initialPos,r.__dragged&&(delete r.__dragged,t.onNodeDragEnd(r,c))),t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.enableNavigationControls&&(a.enabled=!0),o.domElement.classList.remove("grabbable")}))}})),t.renderObjs.objects([new Ke.AmbientLight(12303291),new Ke.DirectionalLight(16777215,.6),t.forceGraph]).hoverOrderComparator((function(e,t){var n=$e(e);if(!n)return 1;var r=$e(t);if(!r)return-1;var i=function(e){return"node"===e.__graphObjType};return i(r)-i(n)})).tooltipContent((function(e){var n=$e(e);return n&&Object(Me.default)(t["".concat(n.__graphObjType,"Label")])(n.__data)||""})).hoverDuringDrag(!1).onHover((function(e){var n=$e(e);if(n!==t.hoverObj){var r=t.hoverObj?t.hoverObj.__graphObjType:null,i=t.hoverObj?t.hoverObj.__data:null,o=n?n.__graphObjType:null,a=n?n.__data:null;r&&r!==o&&t["on".concat("node"===r?"Node":"Link","Hover")](null,i),o&&t["on".concat("node"===o?"Node":"Link","Hover")](a,r===o?i:null),t.hoverObj=n}})).clickAfterDrag(!1).onClick((function(e,n){var r=$e(e);r?t["on".concat("node"===r.__graphObjType?"Node":"Link","Click")](r.__data,n):t.onBackgroundClick(n)})).onRightClick((function(e,n){var r=$e(e);r?t["on".concat("node"===r.__graphObjType?"Node":"Link","RightClick")](r.__data,n):t.onBackgroundRightClick(n)})),this._animationCycle()}}),tt=r("tB/L");function nt(){}var rt=function(e){return null==e?nt:function(){return this.querySelector(e)}},it=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function ot(){return[]}var at=function(e){return null==e?ot:function(){return this.querySelectorAll(e)}};var st=function(e){return function(){return this.matches(e)}};function ct(e){return function(t){return t.matches(e)}}var lt=Array.prototype.find;function ut(){return this.firstElementChild}var ht=Array.prototype.filter;function dt(){return this.children}var ft=function(e){return new Array(e.length)};function pt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pt.prototype={constructor:pt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var vt=function(e){return function(){return e}};function gt(e,t,n,r,i,o){for(var a,s=0,c=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new pt(e,o[s]);for(;s<c;++s)(a=t[s])&&(i[s]=a)}function mt(e,t,n,r,i,o,a){var s,c,l,u=new Map,h=t.length,d=o.length,f=new Array(h);for(s=0;s<h;++s)(c=t[s])&&(f[s]=l=a.call(c,c.__data__,s,t)+"",u.has(l)?i[s]=c:u.set(l,c));for(s=0;s<d;++s)l=a.call(e,o[s],s,o)+"",(c=u.get(l))?(r[s]=c,c.__data__=o[s],u.delete(l)):n[s]=new pt(e,o[s]);for(s=0;s<h;++s)(c=t[s])&&u.get(f[s])===c&&(i[s]=c)}function yt(e){return e.__data__}function bt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function wt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Et="http://www.w3.org/1999/xhtml",kt={svg:"http://www.w3.org/2000/svg",xhtml:Et,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_t=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),kt.hasOwnProperty(t)?{space:kt[t],local:e}:e};function Tt(e){return function(){this.removeAttribute(e)}}function Ot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function At(e,t){return function(){this.setAttribute(e,t)}}function Ct(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function St(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function jt(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Rt=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Mt(e){return function(){this.style.removeProperty(e)}}function Dt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Pt(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Nt(e,t){return e.style.getPropertyValue(t)||Rt(e).getComputedStyle(e,null).getPropertyValue(t)}function Lt(e){return function(){delete this[e]}}function It(e,t){return function(){this[e]=t}}function zt(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ht(e){return e.trim().split(/^|\s+/)}function Ft(e){return e.classList||new Bt(e)}function Bt(e){this._node=e,this._names=Ht(e.getAttribute("class")||"")}function Ut(e,t){for(var n=Ft(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Vt(e,t){for(var n=Ft(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Gt(e){return function(){Ut(this,e)}}function qt(e){return function(){Vt(this,e)}}function Kt(e,t){return function(){(t.apply(this,arguments)?Ut:Vt)(this,e)}}Bt.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wt(){this.textContent=""}function Xt(e){return function(){this.textContent=e}}function Yt(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Zt(){this.innerHTML=""}function Qt(e){return function(){this.innerHTML=e}}function Jt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function $t(){this.nextSibling&&this.parentNode.appendChild(this)}function en(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tn(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Et&&t.documentElement.namespaceURI===Et?t.createElement(e):t.createElementNS(n,e)}}function nn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var rn=function(e){var t=_t(e);return(t.local?nn:tn)(t)};function on(){return null}function an(){var e=this.parentNode;e&&e.removeChild(this)}function sn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ln(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function un(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function hn(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function dn(e,t,n){var r=Rt(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function fn(e,t){return function(){return dn(this,e,t)}}function pn(e,t){return function(){return dn(this,e,t.apply(this,arguments))}}var vn=r("nHqZ"),gn=r.n(vn),mn=(r("ls82"),gn.a.mark(yn));function yn(){var e,t,n,r,i,o,a;return gn.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){s.next=13;break}r=e[t],i=0,o=r.length;case 3:if(!(i<o)){s.next=10;break}if(!(a=r[i])){s.next=7;break}return s.next=7,a;case 7:++i,s.next=3;break;case 10:++t,s.next=1;break;case 13:case"end":return s.stop()}}),mn,this)}var bn=[null];function wn(e,t){this._groups=e,this._parents=t}function xn(){return new wn([[document.documentElement]],bn)}wn.prototype=xn.prototype=Object(tt.a)({constructor:wn,select:function(e){"function"!=typeof e&&(e=rt(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],c=s.length,l=r[i]=new Array(c),u=0;u<c;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),l[u]=a);return new wn(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:it(t)}}(e):at(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],c=s.length,l=0;l<c;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new wn(r,i)},selectChild:function(e){return this.select(null==e?ut:function(e){return function(){return lt.call(this.children,e)}}("function"==typeof e?e:ct(e)))},selectChildren:function(e){return this.selectAll(null==e?dt:function(e){return function(){return ht.call(this.children,e)}}("function"==typeof e?e:ct(e)))},filter:function(e){"function"!=typeof e&&(e=st(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&c.push(o);return new wn(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,yt);var n=t?mt:gt,r=this._parents,i=this._groups;"function"!=typeof e&&(e=vt(e));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],h=i[l],d=h.length,f=it(e.call(u,u&&u.__data__,l,r)),p=f.length,v=s[l]=new Array(p),g=a[l]=new Array(p),m=c[l]=new Array(d);n(u,h,v,g,m,f,t);for(var y,b,w=0,x=0;w<p;++w)if(y=v[w]){for(w>=x&&(x=w+1);!(b=g[x])&&++x<p;);y._next=b||null}}return(a=new wn(a,r))._enter=s,a._exit=c,a},enter:function(){return new wn(this._enter||this._groups.map(ft),this._parents)},exit:function(){return new wn(this._exit||this._groups.map(ft),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof wn))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,l=t[s],u=n[s],h=l.length,d=a[s]=new Array(h),f=0;f<h;++f)(c=l[f]||u[f])&&(d[f]=c);for(;s<r;++s)a[s]=t[s];return new wn(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=bt);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],c=s.length,l=i[o]=new Array(c),u=0;u<c;++u)(a=s[u])&&(l[u]=a);l.sort(t)}return new wn(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e,t=0,n=wt(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=_t(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Ot:Tt:"function"==typeof t?n.local?jt:St:n.local?Ct:At)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Mt:"function"==typeof t?Pt:Dt)(e,t,null==n?"":n)):Nt(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Lt:"function"==typeof t?zt:It)(e,t)):this.node()[e]},classed:function(e,t){var n=Ht(e+"");if(arguments.length<2){for(var r=Ft(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Kt:t?Gt:qt)(n,t))},text:function(e){return arguments.length?this.each(null==e?Wt:("function"==typeof e?Yt:Xt)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Zt:("function"==typeof e?Jt:Qt)(e)):this.node().innerHTML},raise:function(){return this.each($t)},lower:function(){return this.each(en)},append:function(e){var t="function"==typeof e?e:rn(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:rn(e),r=null==t?on:"function"==typeof t?t:rt(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(an)},clone:function(e){return this.select(e?cn:sn)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=ln(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?hn:un,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"==typeof t?pn:fn)(e,t))}},Symbol.iterator,yn);var En=xn,kn=function(e){return"string"==typeof e?new wn([[document.querySelector(e)]],[document.documentElement]):new wn([[e]],bn)},_n=(r("QFcT"),r("xo8x"));function Tn(e){e.stopImmediatePropagation()}var On=function(e){e.preventDefault(),e.stopImmediatePropagation()},An=function(e){var t=e.document.documentElement,n=kn(e).on("dragstart.drag",On,!0);"onselectstart"in t?n.on("selectstart.drag",On,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")};function Cn(e,t){var n=e.document.documentElement,r=kn(e).on("dragstart.drag",null);t&&(r.on("click.drag",On,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Sn=r("znUM"),jn=function(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]},Rn=r("dPRQ"),Mn=r("Pgey"),Dn=Object(_n.a)("start","end","cancel","interrupt"),Pn=[],Nn=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(c){var l,u,h,d;if(1!==n.state)return s();for(l in i)if((d=i[l]).name===n.name){if(3===d.state)return Object(Mn.a)(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(Object(Mn.a)((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(c))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,u=-1;l<h;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Object(Rn.c)((function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:Dn,tween:Pn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Ln(e,t){var n=zn(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function In(e,t){var n=zn(e,t);if(n.state>3)throw new Error("too late; already running");return n}function zn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var Hn=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}},Fn=r("S3lI");function Bn(e,t){var n,r;return function(){var i=In(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function Un(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=In(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function Vn(e,t,n){var r=e._id;return e.each((function(){var e=In(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return zn(e,r).value[t]}}var Gn=r("FmoU"),qn=r("4xfg"),Kn=r("42CK"),Wn=r("kO9b"),Xn=function(e,t){var n;return("number"==typeof t?qn.a:t instanceof Gn.e?Kn.a:(n=Object(Gn.e)(t))?(t=n,Kn.a):Wn.a)(e,t)};function Yn(e){return function(){this.removeAttribute(e)}}function Zn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qn(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Jn(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function $n(e,t,n){var r,i,o;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttribute(e))===(s=c+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,c));this.removeAttribute(e)}}function er(e,t,n){var r,i,o;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttributeNS(e.space,e.local))===(s=c+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,c));this.removeAttributeNS(e.space,e.local)}}function tr(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function nr(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rr(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&nr(e,i)),n}return i._value=t,i}function ir(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&tr(e,i)),n}return i._value=t,i}function or(e,t){return function(){Ln(this,e).delay=+t.apply(this,arguments)}}function ar(e,t){return t=+t,function(){Ln(this,e).delay=t}}function sr(e,t){return function(){In(this,e).duration=+t.apply(this,arguments)}}function cr(e,t){return t=+t,function(){In(this,e).duration=t}}function lr(e,t){if("function"!=typeof t)throw new Error;return function(){In(this,e).ease=t}}function ur(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Ln:In;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var hr=En.prototype.constructor;function dr(e){return function(){this.style.removeProperty(e)}}function fr(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function pr(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&fr(e,o,n)),r}return o._value=t,o}function vr(e){return function(t){this.textContent=e.call(this,t)}}function gr(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&vr(r)),t}return r._value=e,r}var mr=0;function yr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function br(){return++mr}var wr=En.prototype;yr.prototype=function(e){return En().transition(e)}.prototype=Object(tt.a)({constructor:yr,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=rt(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,c,l=r[a],u=l.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=l[d])&&(c=e.call(s,s.__data__,d,l))&&("__data__"in s&&(c.__data__=s.__data__),h[d]=c,Nn(h[d],t,n,d,h,zn(s,n)));return new yr(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=at(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c,l=r[s],u=l.length,h=0;h<u;++h)if(c=l[h]){for(var d,f=e.call(c,c.__data__,h,l),p=zn(c,n),v=0,g=f.length;v<g;++v)(d=f[v])&&Nn(d,t,n,v,f,p);o.push(f),a.push(c)}return new yr(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=st(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&c.push(o);return new yr(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,l=t[s],u=n[s],h=l.length,d=a[s]=new Array(h),f=0;f<h;++f)(c=l[f]||u[f])&&(d[f]=c);for(;s<r;++s)a[s]=t[s];return new yr(a,this._parents,this._name,this._id)},selection:function(){return new hr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=br(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,l=0;l<c;++l)if(a=s[l]){var u=zn(a,t);Nn(a,e,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new yr(r,this._parents,e,n)},call:wr.call,nodes:wr.nodes,node:wr.node,size:wr.size,empty:wr.empty,each:wr.each,on:function(e,t){var n=this._id;return arguments.length<2?zn(this.node(),n).on.on(e):this.each(ur(n,e,t))},attr:function(e,t){var n=_t(e),r="transform"===n?Fn.b:Xn;return this.attrTween(e,"function"==typeof t?(n.local?er:$n)(n,r,Vn(this,"attr."+e,t)):null==t?(n.local?Zn:Yn)(n):(n.local?Jn:Qn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=_t(e);return this.tween(n,(r.local?rr:ir)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Fn.a:Xn;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Nt(this,e),a=(this.style.removeProperty(e),Nt(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,dr(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Nt(this,e),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(e),c=s=Nt(this,e)),a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s))}}(e,r,Vn(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var c=In(this,e),l=c.on,u=null==c.value[a]?o||(o=dr(t)):void 0;l===n&&i===u||(r=(n=l).copy()).on(s,i=u),c.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Nt(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,pr(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Vn(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,gr(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=zn(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Bn:Un)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?or:ar)(t,e)):zn(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?sr:cr)(t,e)):zn(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(lr(t,e)):zn(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;In(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},c={value:function(){0==--i&&o()}};n.each((function(){var n=In(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t})),0===i&&o()}))}},Symbol.iterator,wr[Symbol.iterator]);var xr={time:null,delay:0,duration:250,ease:r("iSFD").a};function Er(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}En.prototype.interrupt=function(e){return this.each((function(){Hn(this,e)}))},En.prototype.transition=function(e){var t,n;e instanceof yr?(t=e._id,e=e._name):(t=br(),(n=xr).time=Object(Rn.b)(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,l=0;l<c;++l)(a=s[l])&&Nn(a,e,t,l,s,n||Er(a,t));return new yr(r,this._parents,e,t)};var kr=function(e){return function(){return e}};function _r(e,t){var n=t.sourceEvent,r=t.target,i=t.transform,o=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Tr(e,t,n){this.k=e,this.x=t,this.y=n}Tr.prototype={constructor:Tr,scale:function(e){return 1===e?this:new Tr(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Tr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Or=new Tr(1,0,0);function Ar(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Or;return e.__zoom}function Cr(e){e.stopImmediatePropagation()}Ar.prototype=Tr.prototype;var Sr=function(e){e.preventDefault(),e.stopImmediatePropagation()};function jr(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Rr(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Mr(){return this.__zoom||Or}function Dr(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Pr(){return navigator.maxTouchPoints||"ontouchstart"in this}function Nr(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var Lr=function(e){return function(){return e}};function Ir(e,t){var n=t.sourceEvent,r=t.subject,i=t.target,o=t.identifier,a=t.active,s=t.x,c=t.y,l=t.dx,u=t.dy,h=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function zr(e){return!e.ctrlKey&&!e.button}function Hr(){return this.parentNode}function Fr(e,t){return null==t?{x:e.x,y:e.y}:t}function Br(){return navigator.maxTouchPoints||"ontouchstart"in this}Ir.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ur(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Vr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gr(e,t){var n;if(void 0===t){var r,i=Ur(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n>o||void 0===n&&o>=o)&&(n=o)}}catch(u){i.e(u)}finally{i.f()}}else{var a,s=-1,c=Ur(e);try{for(c.s();!(a=c.n()).done;){var l=a.value;null!=(l=t(l,++s,e))&&(n>l||void 0===n&&l>=l)&&(n=l)}}catch(u){c.e(u)}finally{c.f()}}return n}function qr(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wr(e,t){var n;if(void 0===t){var r,i=qr(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n<o||void 0===n&&o>=o)&&(n=o)}}catch(u){i.e(u)}finally{i.f()}}else{var a,s=-1,c=qr(e);try{for(c.s();!(a=c.n()).done;){var l=a.value;null!=(l=t(l,++s,e))&&(n<l||void 0===n&&l>=l)&&(n=l)}}catch(u){c.e(u)}finally{c.f()}}return n}var Xr=r("hKI/"),Yr=r.n(Xr),Zr=r("Zss7"),Qr=r.n(Zr);function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ei(e){return function(e){if(Array.isArray(e))return ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ni=function(e,t,n){return(e<<16)+(t<<8)+n},ri=function(e,t){return 123*e%Math.pow(2,t)},ii=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;Jr(this,e),this.csBits=t,this.registry=["__reserved for background__"]}var t,n,r;return t=e,(n=[{key:"register",value:function(e){if(this.registry.length>=Math.pow(2,24-this.csBits))return null;var t,n=this.registry.length,r=ri(n,this.csBits),i=(t=n+(r<<24-this.csBits),"#".concat(Math.min(t,Math.pow(2,24)).toString(16).padStart(6,"0")));return this.registry.push(e),i}},{key:"lookup",value:function(e){var t,n,r,i,o,a="string"==typeof e?(t=e,n=Qr()(t).toRgb(),r=n.r,i=n.g,o=n.b,ni(r,i,o)):ni.apply(void 0,ei(e));if(!a)return null;var s=a&Math.pow(2,24-this.csBits)-1,c=a>>24-this.csBits&Math.pow(2,this.csBits)-1;return ri(s,this.csBits)!==c||s>=this.registry.length?null:this.registry[s]}}])&&$r(t.prototype,n),r&&$r(t,r),e}(),oi=r("IqyP"),ai=r("u+3c"),si=r("V4tj"),ci=r("LSLv"),li=r("x/eb"),ui=r("Kfaa"),hi=r("uouV"),di=r("fUQo"),fi=Math.abs,pi=Math.cos,vi=Math.sin,gi=Math.acos,mi=Math.atan2,yi=Math.sqrt,bi=Math.pow;function wi(e){return e<0?-bi(-e,1/3):bi(e,1/3)}var xi=Math.PI,Ei=2*xi,ki=xi/2,_i=Number.MAX_SAFE_INTEGER||9007199254740991,Ti=Number.MIN_SAFE_INTEGER||-9007199254740991,Oi={x:0,y:0,z:0},Ai={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){var n=t(e),r=n.x*n.x+n.y*n.y;return void 0!==n.z&&(r+=n.z*n.z),yi(r)},compute:function(e,t,n){if(0===e)return t[0].t=0,t[0];var r=t.length-1;if(1===e)return t[r].t=1,t[r];var i=1-e,o=t;if(0===r)return t[0].t=e,t[0];if(1===r){var a={x:i*o[0].x+e*o[1].x,y:i*o[0].y+e*o[1].y,t:e};return n&&(a.z=i*o[0].z+e*o[1].z),a}if(r<4){var s,c,l,u=i*i,h=e*e,d=0;2===r?(o=[o[0],o[1],o[2],Oi],s=u,c=i*e*2,l=h):3===r&&(s=u*i,c=u*e*3,l=i*h*3,d=e*h);var f={x:s*o[0].x+c*o[1].x+l*o[2].x+d*o[3].x,y:s*o[0].y+c*o[1].y+l*o[2].y+d*o[3].y,t:e};return n&&(f.z=s*o[0].z+c*o[1].z+l*o[2].z+d*o[3].z),f}for(var p=JSON.parse(JSON.stringify(t));p.length>1;){for(var v=0;v<p.length-1;v++)p[v]={x:p[v].x+(p[v+1].x-p[v].x)*e,y:p[v].y+(p[v+1].y-p[v].y)*e},void 0!==p[v].z&&(p[v]=p[v].z+(p[v+1].z-p[v].z)*e);p.splice(p.length-1,1)}return p[0].t=e,p[0]},computeWithRatios:function(e,t,n,r){var i,o=1-e,a=n,s=t,c=a[0],l=a[1],u=a[2],h=a[3];return c*=o,l*=e,2===s.length?(i=c+l,{x:(c*s[0].x+l*s[1].x)/i,y:(c*s[0].y+l*s[1].y)/i,z:!!r&&(c*s[0].z+l*s[1].z)/i,t:e}):(c*=o,l*=2*o,u*=e*e,3===s.length?(i=c+l+u,{x:(c*s[0].x+l*s[1].x+u*s[2].x)/i,y:(c*s[0].y+l*s[1].y+u*s[2].y)/i,z:!!r&&(c*s[0].z+l*s[1].z+u*s[2].z)/i,t:e}):(c*=o,l*=1.5*o,u*=3*o,h*=e*e*e,4===s.length?(i=c+l+u+h,{x:(c*s[0].x+l*s[1].x+u*s[2].x+h*s[3].x)/i,y:(c*s[0].y+l*s[1].y+u*s[2].y+h*s[3].y)/i,z:!!r&&(c*s[0].z+l*s[1].z+u*s[2].z+h*s[3].z)/i,t:e}):void 0))},derive:function(e,t){for(var n=[],r=e,i=r.length,o=i-1;i>1;i--,o--){for(var a,s=[],c=0;c<o;c++)a={x:o*(r[c+1].x-r[c].x),y:o*(r[c+1].y-r[c].y)},t&&(a.z=o*(r[c+1].z-r[c].z)),s.push(a);n.push(s),r=s}return n},between:function(e,t,n){return t<=e&&e<=n||Ai.approximately(e,t)||Ai.approximately(e,n)},approximately:function(e,t,n){return fi(e-t)<=(n||1e-6)},length:function(e){for(var t,n=Ai.Tvalues.length,r=0,i=0;i<n;i++)t=.5*Ai.Tvalues[i]+.5,r+=Ai.Cvalues[i]*Ai.arcfn(t,e);return.5*r},map:function(e,t,n,r,i){return r+(i-r)*((e-t)/(n-t))},lerp:function(e,t,n){var r={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return t.z&&n.z&&(r.z=t.z+e*(n.z-t.z)),r},pointToString:function(e){var t=e.x+"/"+e.y;return void 0!==e.z&&(t+="/"+e.z),t},pointsToString:function(e){return"["+e.map(Ai.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,a=n.y-e.y;return mi(r*a-i*o,r*o+i*a)},round:function(e,t){var n=""+e,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+t))},dist:function(e,t){var n=e.x-t.x,r=e.y-t.y;return yi(n*n+r*r)},closest:function(e,t){var n,r,i=bi(2,63);return e.forEach((function(e,o){(r=Ai.dist(t,e))<i&&(i=r,n=o)})),{mdist:i,mpos:n}},abcratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;var n=bi(e,t)+bi(1-e,t);return fi((n-1)/n)},projectionratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;var n=bi(1-e,t);return n/(bi(e,t)+n)},lli8:function(e,t,n,r,i,o,a,s){var c=(e-n)*(o-s)-(t-r)*(i-a);return 0!=c&&{x:((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/c,y:((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/c}},lli4:function(e,t,n,r){var i=e.x,o=e.y,a=t.x,s=t.y,c=n.x,l=n.y,u=r.x,h=r.y;return Ai.lli8(i,o,a,s,c,l,u,h)},lli:function(e,t){return Ai.lli4(e,e.c,t,t.c)},makeline:function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y,a=(i-n)/3,s=(o-r)/3;return new Bi(n,r,n+a,r+s,n+2*a,r+2*s,i,o)},findbbox:function(e){var t=_i,n=_i,r=Ti,i=Ti;return e.forEach((function(e){var o=e.bbox();t>o.x.min&&(t=o.x.min),n>o.y.min&&(n=o.y.min),r<o.x.max&&(r=o.x.max),i<o.y.max&&(i=o.y.max)})),{x:{min:t,mid:(t+r)/2,max:r,size:r-t},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(e,t,n,r,i){if(!Ai.bboxoverlap(t,r))return[];var o=[],a=[e.startcap,e.forward,e.back,e.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return a.forEach((function(t){t.virtual||s.forEach((function(r){if(!r.virtual){var a=t.intersects(r,i);a.length>0&&(a.c1=t,a.c2=r,a.s1=e,a.s2=n,o.push(a))}}))})),o},makeshape:function(e,t,n){var r=t.points.length,i=e.points.length,o=Ai.makeline(t.points[r-1],e.points[0]),a=Ai.makeline(e.points[i-1],t.points[0]),s={startcap:o,forward:e,back:t,endcap:a,bbox:Ai.findbbox([o,e,t,a]),intersections:function(e){return Ai.shapeintersections(s,s.bbox,e,e.bbox,n)}};return s},getminmax:function(e,t,n){if(!n)return{min:0,max:0};var r,i,o=_i,a=Ti;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(var s=0,c=n.length;s<c;s++)r=n[s],(i=e.get(r))[t]<o&&(o=i[t]),i[t]>a&&(a=i[t]);return{min:o,mid:(o+a)/2,max:a,size:a-o}},align:function(e,t){var n=t.p1.x,r=t.p1.y,i=-mi(t.p2.y-r,t.p2.x-n);return e.map((function(e){return{x:(e.x-n)*pi(i)-(e.y-r)*vi(i),y:(e.x-n)*vi(i)+(e.y-r)*pi(i)}}))},roots:function(e,t){t=t||{p1:{x:0,y:0},p2:{x:1,y:0}};var n=e.length-1,r=Ai.align(e,t),i=function(e){return 0<=e&&e<=1};if(2===n){var o=r[0].y,a=r[1].y,s=r[2].y,c=o-2*a+s;if(0!==c){var l=-yi(a*a-o*s),u=-o+a;return[-(l+u)/c,-(-l+u)/c].filter(i)}return a!==s&&0===c?[(2*a-s)/(2*a-2*s)].filter(i):[]}var h=r[0].y,d=r[1].y,f=r[2].y,p=3*d-h-3*f+r[3].y,v=3*h-6*d+3*f,g=-3*h+3*d,m=h;if(Ai.approximately(p,0)){if(Ai.approximately(v,0))return Ai.approximately(g,0)?[]:[-m/g].filter(i);var y=yi(g*g-4*v*m),b=2*v;return[(y-g)/b,(-g-y)/b].filter(i)}var w,x=(3*(g/=p)-(v/=p)*v)/3,E=x/3,k=(2*v*v*v-9*v*g+27*(m/=p))/27,_=k/2,T=_*_+E*E*E;if(T<0){var O=-x/3,A=yi(O*O*O),C=-k/(2*A),S=gi(C<-1?-1:C>1?1:C),j=2*wi(A);return[j*pi(S/3)-v/3,j*pi((S+Ei)/3)-v/3,j*pi((S+2*Ei)/3)-v/3].filter(i)}if(0===T)return[2*(w=_<0?wi(-_):-wi(_))-v/3,-w-v/3].filter(i);var R=yi(T);return[(w=wi(-_+R))-wi(_+R)-v/3].filter(i)},droots:function(e){if(3===e.length){var t=e[0],n=e[1],r=e[2],i=t-2*n+r;if(0!==i){var o=-yi(n*n-t*r),a=-t+n;return[-(o+a)/i,-(-o+a)/i]}return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[]}if(2===e.length){var s=e[0],c=e[1];return s!==c?[s/(s-c)]:[]}return[]},curvature:function(e,t,n,r,i){var o,a,s,c,l,u,h=Ai.compute(e,t),d=Ai.compute(e,n),f=h.x*h.x+h.y*h.y;if(r?(o=yi(bi(h.y*d.z-d.y*h.z,2)+bi(h.z*d.x-d.z*h.x,2)+bi(h.x*d.y-d.x*h.y,2)),a=bi(f+h.z*h.z,1.5)):(o=h.x*d.y-h.y*d.x,a=bi(f,1.5)),0===o||0===a)return{k:0,r:0};if(l=o/a,u=a/o,!i){var p=Ai.curvature(e-.001,t,n,r,!0).k,v=Ai.curvature(e+.001,t,n,r,!0).k;c=(v-l+(l-p))/2,s=(fi(v-l)+fi(l-p))/2}return{k:l,r:u,dk:c,adk:s}},inflections:function(e){if(e.length<4)return[];var t=Ai.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=t[2].x*t[1].y,r=t[3].x*t[1].y,i=t[1].x*t[2].y,o=18*(-3*n+2*r+3*i-t[3].x*t[2].y),a=18*(3*n-r-3*i),s=18*(i-n);if(Ai.approximately(o,0)){if(!Ai.approximately(a,0)){var c=-s/a;if(0<=c&&c<=1)return[c]}return[]}var l=a*a-4*o*s,u=Math.sqrt(l),h=2*o;return Ai.approximately(h,0)?[]:[(u-a)/h,-(a+u)/h].filter((function(e){return 0<=e&&e<=1}))},bboxoverlap:function(e,t){for(var n,r,i,o,a=["x","y"],s=a.length,c=0;c<s;c++)if(r=e[n=a[c]].mid,i=t[n].mid,o=(e[n].size+t[n].size)/2,fi(r-i)>=o)return!1;return!0},expandbox:function(e,t){t.x.min<e.x.min&&(e.x.min=t.x.min),t.y.min<e.y.min&&(e.y.min=t.y.min),t.z&&t.z.min<e.z.min&&(e.z.min=t.z.min),t.x.max>e.x.max&&(e.x.max=t.x.max),t.y.max>e.y.max&&(e.y.max=t.y.max),t.z&&t.z.max>e.z.max&&(e.z.max=t.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,t,n){var r=e.bbox(),i=t.bbox(),o=1e5,a=n||.5;if(r.x.size+r.y.size<a&&i.x.size+i.y.size<a)return[(o*(e._t1+e._t2)/2|0)/o+"/"+(o*(t._t1+t._t2)/2|0)/o];var s=e.split(.5),c=t.split(.5),l=[{left:s.left,right:c.left},{left:s.left,right:c.right},{left:s.right,right:c.right},{left:s.right,right:c.left}];l=l.filter((function(e){return Ai.bboxoverlap(e.left.bbox(),e.right.bbox())}));var u=[];return 0===l.length?u:(l.forEach((function(e){u=u.concat(Ai.pairiteration(e.left,e.right,a))})),u=u.filter((function(e,t){return u.indexOf(e)===t})))},getccenter:function(e,t,n){var r,i=t.x-e.x,o=t.y-e.y,a=n.x-t.x,s=n.y-t.y,c=i*pi(ki)-o*vi(ki),l=i*vi(ki)+o*pi(ki),u=a*pi(ki)-s*vi(ki),h=a*vi(ki)+s*pi(ki),d=(e.x+t.x)/2,f=(e.y+t.y)/2,p=(t.x+n.x)/2,v=(t.y+n.y)/2,g=d+c,m=f+l,y=p+u,b=v+h,w=Ai.lli8(d,f,g,m,p,v,y,b),x=Ai.dist(w,e),E=mi(e.y-w.y,e.x-w.x),k=mi(t.y-w.y,t.x-w.x),_=mi(n.y-w.y,n.x-w.x);return E<_?((E>k||k>_)&&(E+=Ei),E>_&&(r=_,_=E,E=r)):_<k&&k<E?(r=_,_=E,E=r):_+=Ei,w.s=E,w.e=_,w.r=x,w},numberSort:function(e,t){return e-t}},Ci=function(){function e(t){Object(hi.a)(this,e),this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}return Object(di.a)(e,[{key:"valueOf",value:function(){return this.toString()}},{key:"toString",value:function(){return"["+this.curves.map((function(e){return Ai.pointsToString(e.points)})).join(", ")+"]"}},{key:"addCurve",value:function(e){this.curves.push(e),this._3d=this._3d||e._3d}},{key:"length",value:function(){return this.curves.map((function(e){return e.length()})).reduce((function(e,t){return e+t}))}},{key:"curve",value:function(e){return this.curves[e]}},{key:"bbox",value:function(){for(var e=this.curves,t=e[0].bbox(),n=1;n<e.length;n++)Ai.expandbox(t,e[n].bbox());return t}},{key:"offset",value:function(t){var n=[];return this.curves.forEach((function(e){n.push.apply(n,Object(ui.a)(e.offset(t)))})),new e(n)}}]),e}(),Si=r("Q5Zl");var ji={x:!1,y:!1};function Ri(e,t,n){if("Z"!==t){if("M"!==t){var r=Object(Si.a)(e,[ji.x,ji.y].concat(Object(ui.a)(n))),i=n.slice(-2);return ji={x:i[0],y:i[1]},r}ji={x:n[0],y:n[1]}}}function Mi(e,t){for(var n,r,i=function(e){var t,n,r,i,o,a,s=(e=e.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ")).replace(/([a-zA-Z])\s?/g,"|$1").split("|"),c=s.length,l=[],u=0,h=0,d=0,f=0,p=0,v=0,g=0,m=0,y=0,b=0,w=0,x=0,E=0,k="";for(t=1;t<c;t++)if(i=(r=(n=s[t]).substring(0,1)).toLowerCase(),o=(l=(l=n.replace(r,"").trim().split(" ")).filter((function(e){return""!==e})).map(parseFloat)).length,"m"===i){if(k+="M ","m"===r?(d+=l[0],f+=l[1]):(d=l[0],f=l[1]),u=d,h=f,k+=d+" "+f+" ",o>2)for(a=0;a<o;a+=2)"m"===r?(d+=l[a],f+=l[a+1]):(d=l[a],f=l[a+1]),k+="L "+d+" "+f+" "}else if("l"===i)for(a=0;a<o;a+=2)"l"===r?(d+=l[a],f+=l[a+1]):(d=l[a],f=l[a+1]),k+="L "+d+" "+f+" ";else if("h"===i)for(a=0;a<o;a++)"h"===r?d+=l[a]:d=l[a],k+="L "+d+" "+f+" ";else if("v"===i)for(a=0;a<o;a++)"v"===r?f+=l[a]:f=l[a],k+="L "+d+" "+f+" ";else if("q"===i)for(a=0;a<o;a+=4)"q"===r?(p=d+l[a],v=f+l[a+1],d+=l[a+2],f+=l[a+3]):(p=l[a],v=l[a+1],d=l[a+2],f=l[a+3]),k+="Q "+p+" "+v+" "+d+" "+f+" ";else if("t"===i)for(a=0;a<o;a+=2)p=d+(d-p),v=f+(f-v),"t"===r?(d+=l[a],f+=l[a+1]):(d=l[a],f=l[a+1]),k+="Q "+p+" "+v+" "+d+" "+f+" ";else if("c"===i)for(a=0;a<o;a+=6)"c"===r?(p=d+l[a],v=f+l[a+1],g=d+l[a+2],m=f+l[a+3],d+=l[a+4],f+=l[a+5]):(p=l[a],v=l[a+1],g=l[a+2],m=l[a+3],d=l[a+4],f=l[a+5]),k+="C "+p+" "+v+" "+g+" "+m+" "+d+" "+f+" ";else if("s"===i)for(a=0;a<o;a+=4)p=d+(d-g),v=f+(f-m),"s"===r?(g=d+l[a],m=f+l[a+1],d+=l[a+2],f+=l[a+3]):(g=l[a],m=l[a+1],d=l[a+2],f=l[a+3]),k+="C "+p+" "+v+" "+g+" "+m+" "+d+" "+f+" ";else if("a"===i)for(a=0;a<o;a+=7)y=l[a],b=l[a+1],w=l[a+2],x=l[a+3],E=l[a+4],"a"===r?(d+=l[a+5],f+=l[a+6]):(d=l[a+5],f=l[a+6]),k+="A "+y+" "+b+" "+w+" "+x+" "+E+" "+d+" "+f+" ";else"z"===i&&(k+="Z ",d=u,f=h);return k.trim()}(t).split(" "),o=new RegExp("[MLCQZ]",""),a=[],s={C:6,Q:4,L:2,M:2};i.length;)n=i.splice(0,1)[0],o.test(n)&&(r=Ri(e,n,i.splice(0,s[n]).map(parseFloat)))&&a.push(r);return new e.PolyBezier(a)}var Di=Math.abs,Pi=Math.min,Ni=Math.max,Li=Math.cos,Ii=Math.sin,zi=Math.acos,Hi=Math.sqrt,Fi=Math.PI,Bi=function(){function e(t){Object(hi.a)(this,e);var n=t&&t.forEach?t:Array.from(arguments).slice(),r=!1;if("object"==typeof n[0]){r=n.length;var i=[];n.forEach((function(e){["x","y","z"].forEach((function(t){void 0!==e[t]&&i.push(e[t])}))})),n=i}var o=!1,a=n.length;if(r){if(r>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(6!==a&&8!==a&&9!==a&&12!==a&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");for(var s=this._3d=!o&&(9===a||12===a)||t&&t[0]&&void 0!==t[0].z,c=this.points=[],l=0,u=s?3:2;l<a;l+=u){var h={x:n[l],y:n[l+1]};s&&(h.z=n[l+2]),c.push(h)}var d=this.order=c.length-1,f=this.dims=["x","y"];s&&f.push("z"),this.dimlen=f.length;var p=Ai.align(c,{p1:c[0],p2:c[d]});this._linear=!p.some((function(e){return Di(e.y)>1e-4})),this._lut=[],this._t1=0,this._t2=1,this.update()}return Object(di.a)(e,[{key:"getUtils",value:function(){return e.getUtils()}},{key:"valueOf",value:function(){return this.toString()}},{key:"toString",value:function(){return Ai.pointsToString(this.points)}},{key:"toSVG",value:function(){if(this._3d)return!1;for(var e=this.points,t=["M",e[0].x,e[0].y,2===this.order?"Q":"C"],n=1,r=e.length;n<r;n++)t.push(e[n].x),t.push(e[n].y);return t.join(" ")}},{key:"setRatios",value:function(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}},{key:"verify",value:function(){var e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}},{key:"coordDigest",value:function(){return this.points.map((function(e,t){return""+t+e.x+e.y+(e.z?e.z:0)})).join("")}},{key:"update",value:function(){this._lut=[],this.dpoints=Ai.derive(this.points,this._3d),this.computedirection()}},{key:"computedirection",value:function(){var e=this.points,t=Ai.angle(e[0],e[this.order],e[1]);this.clockwise=t>0}},{key:"length",value:function(){return Ai.length(this.derivative.bind(this))}},{key:"getABC",value:function(t,n){n=n||this.get(t);var r=this.points[0],i=this.points[this.order];return e.getABC(this.order,r,n,i,t)}},{key:"getLUT",value:function(e){if(this.verify(),e=e||100,this._lut.length===e)return this._lut;this._lut=[],e--;for(var t,n,r=0;r<e;r++)n=r/(e-1),(t=this.compute(n)).t=n,this._lut.push(t);return this._lut}},{key:"on",value:function(e,n){n=n||5;for(var r,i=this.getLUT(),o=[],a=0;a<i.length;a++)r=i[a],Ai.dist(r,e)<n&&(o.push(r),a/i.length);return!!o.length&&(t/=o.length)}},{key:"project",value:function(e){var t,n,r=this.getLUT(),i=r.length-1,o=Ai.closest(r,e),a=o.mpos,s=(a-1)/i,c=(a+1)/i,l=.1/i,u=o.mdist,h=s,d=h;for(u+=1;h<c+l;h+=l)t=this.compute(h),(n=Ai.dist(e,t))<u&&(u=n,d=h);return d=d<0?0:d>1?1:d,(t=this.compute(d)).t=d,t.d=u,t}},{key:"get",value:function(e){return this.compute(e)}},{key:"point",value:function(e){return this.points[e]}},{key:"compute",value:function(e){return this.ratios?Ai.computeWithRatios(e,this.points,this.ratios,this._3d):Ai.compute(e,this.points,this._3d,this.ratios)}},{key:"raise",value:function(){for(var t,n,r=this.points,i=[r[0]],o=r.length,a=1;a<o;a++)t=r[a],n=r[a-1],i[a]={x:(o-a)/o*t.x+a/o*n.x,y:(o-a)/o*t.y+a/o*n.y};return i[o]=r[o-1],new e(i)}},{key:"derivative",value:function(e){return Ai.compute(e,this.dpoints[0])}},{key:"dderivative",value:function(e){return Ai.compute(e,this.dpoints[1])}},{key:"align",value:function(){var t=this.points;return new e(Ai.align(t,{p1:t[0],p2:t[t.length-1]}))}},{key:"curvature",value:function(e){return Ai.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}},{key:"inflections",value:function(){return Ai.inflections(this.points)}},{key:"normal",value:function(e){return this._3d?this.__normal3(e):this.__normal2(e)}},{key:"__normal2",value:function(e){var t=this.derivative(e),n=Hi(t.x*t.x+t.y*t.y);return{x:-t.y/n,y:t.x/n}}},{key:"__normal3",value:function(e){var t=this.derivative(e),n=this.derivative(e+.01),r=Hi(t.x*t.x+t.y*t.y+t.z*t.z),i=Hi(n.x*n.x+n.y*n.y+n.z*n.z);t.x/=r,t.y/=r,t.z/=r,n.x/=i,n.y/=i,n.z/=i;var o={x:n.y*t.z-n.z*t.y,y:n.z*t.x-n.x*t.z,z:n.x*t.y-n.y*t.x},a=Hi(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=a,o.y/=a,o.z/=a;var s=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{x:s[0]*t.x+s[1]*t.y+s[2]*t.z,y:s[3]*t.x+s[4]*t.y+s[5]*t.z,z:s[6]*t.x+s[7]*t.y+s[8]*t.z}}},{key:"hull",value:function(e){var t=this.points,n=[],r=[],i=0;for(r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],3===this.order&&(r[i++]=t[3]);t.length>1;){n=[];for(var o,a=0,s=t.length-1;a<s;a++)o=Ai.lerp(e,t[a],t[a+1]),r[i++]=o,n.push(o);t=n}return r}},{key:"split",value:function(t,n){if(0===t&&n)return this.split(n).left;if(1===n)return this.split(t).right;var r=this.hull(t),i={left:2===this.order?new e([r[0],r[3],r[5]]):new e([r[0],r[4],r[7],r[9]]),right:2===this.order?new e([r[5],r[4],r[2]]):new e([r[9],r[8],r[6],r[3]]),span:r};return i.left._t1=Ai.map(0,0,1,this._t1,this._t2),i.left._t2=Ai.map(t,0,1,this._t1,this._t2),i.right._t1=Ai.map(t,0,1,this._t1,this._t2),i.right._t2=Ai.map(1,0,1,this._t1,this._t2),n?(n=Ai.map(n,t,1,0,1),i.right.split(n).left):i}},{key:"extrema",value:function(){var e={},t=[];return this.dims.forEach(function(n){var r=function(e){return e[n]},i=this.dpoints[0].map(r);e[n]=Ai.droots(i),3===this.order&&(i=this.dpoints[1].map(r),e[n]=e[n].concat(Ai.droots(i))),e[n]=e[n].filter((function(e){return e>=0&&e<=1})),t=t.concat(e[n].sort(Ai.numberSort))}.bind(this)),e.values=t.sort(Ai.numberSort).filter((function(e,n){return t.indexOf(e)===n})),e}},{key:"bbox",value:function(){var e=this.extrema(),t={};return this.dims.forEach(function(n){t[n]=Ai.getminmax(this,n,e[n])}.bind(this)),t}},{key:"overlaps",value:function(e){var t=this.bbox(),n=e.bbox();return Ai.bboxoverlap(t,n)}},{key:"offset",value:function(t,n){if(void 0!==n){var r=this.get(t),i=this.normal(t),o={c:r,n:i,x:r.x+i.x*n,y:r.y+i.y*n};return this._3d&&(o.z=r.z+i.z*n),o}if(this._linear){var a=this.normal(0);return[new e(this.points.map((function(e){var n={x:e.x+t*a.x,y:e.y+t*a.y};return e.z&&a.z&&(n.z=e.z+t*a.z),n})))]}return this.reduce().map((function(e){return e._linear?e.offset(t)[0]:e.scale(t)}))}},{key:"simple",value:function(){if(3===this.order){var e=Ai.angle(this.points[0],this.points[3],this.points[1]),t=Ai.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&t<0||e<0&&t>0)return!1}var n=this.normal(0),r=this.normal(1),i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),Di(zi(i))<Fi/3}},{key:"reduce",value:function(){var e,t,n=0,r=0,i=[],o=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),n=a[0],e=1;e<a.length;e++)r=a[e],(t=this.split(n,r))._t1=n,t._t2=r,i.push(t),n=r;return i.forEach((function(e){for(n=0,r=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(t=e.split(n,r)).simple()){if(Di(n-(r-=.01))<.01)return[];(t=e.split(n,r))._t1=Ai.map(n,0,1,e._t1,e._t2),t._t2=Ai.map(r,0,1,e._t1,e._t2),o.push(t),n=r;break}n<1&&((t=e.split(n,1))._t1=Ai.map(n,0,1,e._t1,e._t2),t._t2=e._t2,o.push(t))})),o}},{key:"scale",value:function(t){var n=this,r=this.order,i=!1;if("function"==typeof t&&(i=t),i&&2===r)return this.raise().scale(i);var o=this.clockwise,a=i?i(0):t,s=i?i(1):t,c=[this.offset(0,10),this.offset(1,10)],l=this.points,u=[],h=Ai.lli4(c[0],c[0].c,c[1],c[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(e){var t=u[e*r]=Ai.copy(l[e*r]);t.x+=(e?s:a)*c[e].n.x,t.y+=(e?s:a)*c[e].n.y})),i?([0,1].forEach((function(e){if(2!==r||!e){var n=l[e+1],a={x:n.x-h.x,y:n.y-h.y},s=i?i((e+1)/r):t;i&&!o&&(s=-s);var c=Hi(a.x*a.x+a.y*a.y);a.x/=c,a.y/=c,u[e+1]={x:n.x+s*a.x,y:n.y+s*a.y}}})),new e(u)):([0,1].forEach((function(e){if(2!==r||!e){var t=u[e*r],i=n.derivative(e),o={x:t.x+i.x,y:t.y+i.y};u[e+1]=Ai.lli4(t,o,h,l[e+1])}})),new e(u))}},{key:"outline",value:function(e,t,n,r){t=void 0===t?e:t;var i,o=this.reduce(),a=o.length,s=[],c=[],l=0,u=this.length(),h=void 0!==n&&void 0!==r;function d(e,t,n,r,i){return function(o){var a=r/n,s=(r+i)/n,c=t-e;return Ai.map(o,0,1,e+a*c,e+s*c)}}o.forEach((function(i){var o=i.length();h?(s.push(i.scale(d(e,n,u,l,o))),c.push(i.scale(d(-t,-r,u,l,o)))):(s.push(i.scale(e)),c.push(i.scale(-t))),l+=o})),c=c.map((function(e){return(i=e.points)[3]?e.points=[i[3],i[2],i[1],i[0]]:e.points=[i[2],i[1],i[0]],e})).reverse();var f=s[0].points[0],p=s[a-1].points[s[a-1].points.length-1],v=c[a-1].points[c[a-1].points.length-1],g=c[0].points[0],m=Ai.makeline(v,f),y=Ai.makeline(p,g),b=[m].concat(s).concat([y]).concat(c);b.length;return new Ci(b)}},{key:"outlineshapes",value:function(e,t,n){t=t||e;for(var r=this.outline(e,t).curves,i=[],o=1,a=r.length;o<a/2;o++){var s=Ai.makeshape(r[o],r[a-o],n);s.startcap.virtual=o>1,s.endcap.virtual=o<a/2-1,i.push(s)}return i}},{key:"intersects",value:function(t,n){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof e&&(t=t.reduce()),this.curveintersects(this.reduce(),t,n)):this.selfintersects(n)}},{key:"lineIntersects",value:function(e){var t=this,n=Pi(e.p1.x,e.p2.x),r=Pi(e.p1.y,e.p2.y),i=Ni(e.p1.x,e.p2.x),o=Ni(e.p1.y,e.p2.y);return Ai.roots(this.points,e).filter((function(e){var a=t.get(e);return Ai.between(a.x,n,i)&&Ai.between(a.y,r,o)}))}},{key:"selfintersects",value:function(e){for(var t,n,r,i=this.reduce(),o=i.length-2,a=[],s=0;s<o;s++)n=i.slice(s,s+1),r=i.slice(s+2),t=this.curveintersects(n,r,e),a.push.apply(a,Object(ui.a)(t));return a}},{key:"curveintersects",value:function(e,t,n){var r=[];e.forEach((function(e){t.forEach((function(t){e.overlaps(t)&&r.push({left:e,right:t})}))}));var i=[];return r.forEach((function(e){var t=Ai.pairiteration(e.left,e.right,n);t.length>0&&(i=i.concat(t))})),i}},{key:"arcs",value:function(e){return e=e||.5,this._iterate(e,[])}},{key:"_error",value:function(e,t,n,r){var i=(r-n)/4,o=this.get(n+i),a=this.get(r-i),s=Ai.dist(e,t),c=Ai.dist(e,o),l=Ai.dist(e,a);return Di(c-s)+Di(l-s)}},{key:"_iterate",value:function(e,t){var n,r=0,i=1;do{n=0,i=1;var o=this.get(r),a=void 0,s=void 0,c=void 0,l=void 0,u=!1,h=!1,d=void 0,f=i,p=1;do{if(h=u,l=c,f=(r+i)/2,a=this.get(f),s=this.get(i),(c=Ai.getccenter(o,a,s)).interval={start:r,end:i},u=this._error(c,o,r,i)<=e,(d=h&&!u)||(p=i),u){if(i>=1){if(c.interval.end=p=1,l=c,i>1){var v={x:c.x+c.r*Li(c.e),y:c.y+c.r*Ii(c.e)};c.e+=Ai.angle({x:c.x,y:c.y},v,this.get(1))}break}i+=(i-r)/2}else i=f}while(!d&&n++<100);if(n>=100)break;l=l||c,t.push(l),r=p}while(i<1);return t}}],[{key:"SVGtoBeziers",value:function(t){return Mi(e,t)}},{key:"quadraticFromPoints",value:function(t,n,r,i){if(void 0===i&&(i=.5),0===i)return new e(n,n,r);if(1===i)return new e(t,n,n);var o=e.getABC(2,t,n,r,i);return new e(t,o.A,r)}},{key:"cubicFromPoints",value:function(t,n,r,i,o){void 0===i&&(i=.5);var a=e.getABC(3,t,n,r,i);void 0===o&&(o=Ai.dist(n,a.C));var s=o*(1-i)/i,c=Ai.dist(t,r),l=(r.x-t.x)/c,u=(r.y-t.y)/c,h=o*l,d=o*u,f=s*l,p=s*u,v=n.x-h,g=n.y-d,m=n.x+f,y=n.y+p,b=a.A,w=b.x+(v-b.x)/(1-i),x=b.y+(g-b.y)/(1-i),E=b.x+(m-b.x)/i,k=b.y+(y-b.y)/i;return new e(t,{x:t.x+(w-t.x)/i,y:t.y+(x-t.y)/i},{x:r.x+(E-r.x)/(1-i),y:r.y+(k-r.y)/(1-i)},r)}},{key:"getUtils",value:function(){return Ai}},{key:"getABC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=Ai.projectionratio(i,e),a=1-o,s={x:o*t.x+a*r.x,y:o*t.y+a*r.y},c=Ai.abcratio(i,e),l={x:n.x+(n.x-s.x)/c,y:n.y+(n.y-s.y)/c};return{A:l,B:n,C:s,S:t,E:r}}},{key:"PolyBezier",get:function(){return Ci}}]),e}(),Ui=r("mUZr");function Vi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Gi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ki=Symbol("implicit");var Wi=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Xi(e){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(n),!0).forEach((function(t){Yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ji(e,t){return(Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function eo(e,t,n){return(eo=$i()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Ji(i,n.prototype),i}).apply(null,arguments)}function to(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||ro(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e){return function(e){if(Array.isArray(e))return io(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ro(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(e,t){if(e){if("string"==typeof e)return io(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?io(e,t):void 0}}function io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .graph-tooltip {\n  position: absolute;\n  transform: translate(-50%, 25px);\n  font-family: sans-serif;\n  font-size: 16px;\n  padding: 4px;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(0,0,0,0.65);\n  visibility: hidden; /* by default */\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n");var oo=function e(){var t=new Map,n=[],r=[],i=Ki;function o(e){var o=e+"",a=t.get(o);if(!a){if(i!==Ki)return i;t.set(o,a=n.push(e))}return r[(a-1)%r.length]}return o.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;var r,i=Gi(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=a+"";t.has(s)||t.set(s,n.push(a))}}catch(c){i.e(c)}finally{i.f()}return o},o.range=function(e){return arguments.length?(r=Array.from(e),o):r.slice()},o.unknown=function(e){return arguments.length?(i=e,o):i},o.copy=function(){return e(n,r).unknown(i)},Vi.apply(o,arguments),o}(Wi);function ao(e,t,n){t&&"string"==typeof n&&e.filter((function(e){return!e[n]})).forEach((function(e){e[n]=oo(t(e))}))}var so=Object(y.a)({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,t){t.engineRunning=!1}},dagMode:{onChange:function(e,t){!e&&(t.graphData.nodes||[]).forEach((function(e){return e.fx=e.fy=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1},nodeColor:{default:"color",triggerUpdate:!1},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1},nodeVisibility:{default:!0,triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1},linkColor:{default:"color",triggerUpdate:!1},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1},linkWidth:{default:1,triggerUpdate:!1},linkCurvature:{default:0,triggerUpdate:!1},linkCanvasObject:{triggerUpdate:!1},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1},linkDirectionalArrowLength:{default:0,triggerUpdate:!1},linkDirectionalArrowColor:{triggerUpdate:!1},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,t,n){return void 0===n?e.forceLayout.force(t):(e.forceLayout.force(t,n),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var t,n,r,i,o,a;return!e.isShadow&&e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick())),function(){var t=Object(Me.default)(e.linkVisibility),n=Object(Me.default)(e.linkColor),r=Object(Me.default)(e.linkWidth),i=Object(Me.default)(e.linkLineDash),o=Object(Me.default)(e.linkCurvature),a=Object(Me.default)(e.linkCanvasObjectMode),s=e.ctx,c=2*e.isShadow,l=e.graphData.links.filter(t);l.forEach((function(e){var t=o(e);if(!t)return void(e.__controlPoints=null);var n=e.source,r=e.target;if(!(n&&r&&n.hasOwnProperty("x")&&r.hasOwnProperty("x")))return;var i=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));if(i>0){var a=Math.atan2(r.y-n.y,r.x-n.x),s=i*t,c={x:(n.x+r.x)/2+s*Math.cos(a-Math.PI/2),y:(n.y+r.y)/2+s*Math.sin(a-Math.PI/2)};e.__controlPoints=[c.x,c.y]}else{var l=70*t;e.__controlPoints=[r.x,r.y-l,r.x+l,r.y]}}));var u=[],h=[],d=l;if(e.linkCanvasObject){var f=[],p=[];l.forEach((function(e){return({before:u,after:h,replace:f}[a(e)]||p).push(e)})),d=[].concat(no(u),h,p),u=u.concat(f)}s.save(),u.forEach((function(t){return e.linkCanvasObject(t,s,e.globalScale)})),s.restore();var v=Object(Ui.a)(d,[n,r,i]);s.save(),Object.entries(v).forEach((function(t){var n=to(t,2),r=n[0],o=n[1],a=r&&"undefined"!==r?r:"rgba(0,0,0,0.15)";Object.entries(o).forEach((function(t){var n=to(t,2),r=n[0],o=n[1],l=(r||1)/e.globalScale+c;Object.entries(o).forEach((function(e){var t=to(e,2),n=(t[0],t[1]),r=i(n[0]);s.beginPath(),n.forEach((function(e){var t=e.source,n=e.target;if(t&&n&&t.hasOwnProperty("x")&&n.hasOwnProperty("x")){s.moveTo(t.x,t.y);var r=e.__controlPoints;r?s[2===r.length?"quadraticCurveTo":"bezierCurveTo"].apply(s,no(r).concat([n.x,n.y])):s.lineTo(n.x,n.y)}})),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r||[]),s.stroke()}))}))})),s.restore(),s.save(),h.forEach((function(t){return e.linkCanvasObject(t,s,e.globalScale)})),s.restore()}(),!e.isShadow&&(t=Object(Me.default)(e.linkDirectionalArrowLength),n=Object(Me.default)(e.linkDirectionalArrowRelPos),r=Object(Me.default)(e.linkVisibility),i=Object(Me.default)(e.linkDirectionalArrowColor||e.linkColor),o=Object(Me.default)(e.nodeVal),(a=e.ctx).save(),e.graphData.links.filter(r).forEach((function(r){var s=t(r);if(s&&!(s<0)){var c=r.source,l=r.target;if(c&&l&&c.hasOwnProperty("x")&&l.hasOwnProperty("x")){var u=Math.sqrt(Math.max(0,o(c)||1))*e.nodeRelSize,h=Math.sqrt(Math.max(0,o(l)||1))*e.nodeRelSize,d=Math.min(1,Math.max(0,n(r))),f=i(r)||"rgba(0,0,0,0.28)",p=s/1.6/2,v=r.__controlPoints&&eo(Bi,[c.x,c.y].concat(no(r.__controlPoints),[l.x,l.y])),g=v?function(e){return v.get(e)}:function(e){return{x:c.x+(l.x-c.x)*e||0,y:c.y+(l.y-c.y)*e||0}},m=v?v.length():Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)),y=u+s+(m-u-h-s)*d,b=g(y/m),w=g((y-s)/m),x=g((y-.8*s)/m),E=Math.atan2(b.y-w.y,b.x-w.x)-Math.PI/2;a.beginPath(),a.moveTo(b.x,b.y),a.lineTo(w.x+p*Math.cos(E),w.y+p*Math.sin(E)),a.lineTo(x.x,x.y),a.lineTo(w.x-p*Math.cos(E),w.y-p*Math.sin(E)),a.fillStyle=f,a.fill()}}})),a.restore()),!e.isShadow&&function(){var t=Object(Me.default)(e.linkDirectionalParticles),n=Object(Me.default)(e.linkDirectionalParticleSpeed),r=Object(Me.default)(e.linkDirectionalParticleWidth),i=Object(Me.default)(e.linkVisibility),o=Object(Me.default)(e.linkDirectionalParticleColor||e.linkColor),a=e.ctx;a.save(),e.graphData.links.filter(i).forEach((function(i){var s=t(i);if(i.hasOwnProperty("__photons")&&i.__photons.length){var c=i.source,l=i.target;if(c&&l&&c.hasOwnProperty("x")&&l.hasOwnProperty("x")){var u=n(i),h=i.__photons||[],d=Math.max(0,r(i)/2)/Math.sqrt(e.globalScale),f=o(i)||"rgba(0,0,0,0.28)";a.fillStyle=f;var p=i.__controlPoints?eo(Bi,[c.x,c.y].concat(no(i.__controlPoints),[l.x,l.y])):null,v=0,g=!1;h.forEach((function(e){var t=!!e.__singleHop;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=t?0:v/s),!t&&v++,e.__progressRatio+=u,e.__progressRatio>=1){if(t)return void(g=!0);e.__progressRatio=e.__progressRatio%1}var n=e.__progressRatio,r=p?p.get(n):{x:c.x+(l.x-c.x)*n||0,y:c.y+(l.y-c.y)*n||0};a.beginPath(),a.arc(r.x,r.y,d,0,2*Math.PI,!1),a.fill()})),g&&(i.__photons=i.__photons.filter((function(e){return!e.__singleHop||e.__progressRatio<=1})))}}})),a.restore()}(),function(){var t=Object(Me.default)(e.nodeVisibility),n=Object(Me.default)(e.nodeVal),r=Object(Me.default)(e.nodeColor),i=Object(Me.default)(e.nodeCanvasObjectMode),o=e.ctx,a=e.isShadow/e.globalScale,s=e.graphData.nodes.filter(t);o.save(),s.forEach((function(t){var s=i(t);if(!e.nodeCanvasObject||"before"!==s&&"replace"!==s||(e.nodeCanvasObject(t,o,e.globalScale,e.isShadow),"replace"!==s)){var c=Math.sqrt(Math.max(0,n(t)||1))*e.nodeRelSize+a;o.beginPath(),o.arc(t.x,t.y,c,0,2*Math.PI,!1),o.fillStyle=r(t)||"rgba(31, 120, 180, 0.92)",o.fill(),e.nodeCanvasObject&&"after"===s&&e.nodeCanvasObject(t,e.ctx,e.globalScale)}else o.restore()})),o.restore()}(),this},emitParticle:function(e,t){return t&&(!t.__photons&&(t.__photons=[]),t.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Object(oi.a)().force("link",Object(ai.a)()).force("charge",Object(si.a)()).force("center",Object(ci.a)()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.ctx=e},update:function(e){if(e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&ao(e.graphData.nodes,Object(Me.default)(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&ao(e.graphData.links,Object(Me.default)(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach((function(t){t.source=t[e.linkSource],t.target=t[e.linkTarget]})),!e.isShadow){var t=Object(Me.default)(e.linkDirectionalParticles);e.graphData.links.forEach((function(e){var n=Math.round(Math.abs(t(e)));n?e.__photons=no(Array(n)).map((function(){return{}})):delete e.__photons}))}e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var n=e.forceLayout.force("link");n&&n.id((function(t){return t[e.nodeId]})).links(e.graphData.links);var r=e.dagMode&&function(e,t){var n=e.nodes,r=e.links,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.nodeFilter,a=void 0===o?function(){return!0}:o,s=i.onLoopError,c=void 0===s?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:s,l={};n.forEach((function(e){return l[t(e)]={data:e,out:[],depth:-1,skip:!a(e)}})),r.forEach((function(e){var n=e.source,r=e.target,i=c(n),o=c(r);if(!l.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!l.hasOwnProperty(o))throw"Missing target node with id: ".concat(o);var a=l[i],s=l[o];function c(e){return"object"===Xi(e)?t(e):e}a.out.push(s)}));var u=[];d(Object.values(l));var h=Object.assign.apply(Object,[{}].concat(no(Object.entries(l).filter((function(e){return!to(e,2)[1].skip})).map((function(e){var t=to(e,2);return Yi({},t[0],t[1].depth)})))));return h;function d(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0,o=e.length;i<o;i++){var a=e[i];if(-1!==n.indexOf(a)){var s=function(){var e=[].concat(no(n.slice(n.indexOf(a))),[a]).map((function(e){return t(e.data)}));return u.some((function(t){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}))||(u.push(e),c(e)),"continue"}();if("continue"===s)continue}r>a.depth&&(a.depth=r,d(a.out,[].concat(no(n),[a]),r+(a.skip?0:1)))}}}(e.graphData,(function(t){return t[e.nodeId]}),{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),i=Math.max.apply(Math,no(Object.values(r||[]))),o=e.dagLevelDistance||e.graphData.nodes.length/(i||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(e.dagMode){var a=function(t,n){return function(a){return t?(r[a[e.nodeId]]-i/2)*o*(n?-1:1):void 0}},s=a(-1!==["lr","rl"].indexOf(e.dagMode),"rl"===e.dagMode),c=a(-1!==["td","bu"].indexOf(e.dagMode),"bu"===e.dagMode);e.graphData.nodes.filter(e.dagNodeFilter).forEach((function(e){e.fx=s(e),e.fy=c(e)}))}e.forceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?Object(li.a)((function(t){var n=r[t[e.nodeId]]||-1;return("radialin"===e.dagMode?i-n:n)*o})).strength((function(t){return e.dagNodeFilter(t)?1:0})):null);for(var l=0;l<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);l++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function co(e,t){var n=e instanceof Array?e:[e],r=new t;return{linkProp:function(e){return{default:r[e](),onChange:function(t,r){n.forEach((function(n){return r[n][e](t)}))},triggerUpdate:!1}},linkMethod:function(e){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=[];return n.forEach((function(n){var r=t[n],o=r[e].apply(r,i);o!==r&&a.push(o)})),a.length?a[0]:this}}}}var lo=co("forceGraph",so),uo=co(["forceGraph","shadowGraph"],so),ho=Object.assign.apply(Object,no(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(e){return Yi({},e,lo.linkProp(e))}))).concat(no(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map((function(e){return Yi({},e,uo.linkProp(e))}))))),fo=Object.assign.apply(Object,no(["d3Force","d3ReheatSimulation","emitParticle"].map((function(e){return Yi({},e,lo.linkMethod(e))}))));function po(e){if(e.canvas){var t=e.canvas.width,n=e.canvas.height;300===t&&150===n&&(t=n=0);var r=window.devicePixelRatio;t/=r,n/=r,[e.canvas,e.shadowCanvas].forEach((function(i){i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px"),i.width=e.width*r,i.height=e.height*r,t||n||i.getContext("2d").scale(r,r)}));var i=Ar(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-t)/2/i,(e.height-n)/2/i)}}function vo(e){var t=window.devicePixelRatio;e.setTransform(t,0,0,t,0,0)}function go(e,t,n){e.save(),vo(e),e.clearRect(0,0,t,n),e.restore()}var mo=Object(y.a)({props:Qi({width:{default:window.innerWidth,onChange:function(e,t){return po(t)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,t){return po(t)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){(e.nodes.length||e.links.length)&&console.info("force-graph loading",e.nodes.length+" nodes",e.links.length+" links"),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach((function(e){var n=e.type;e.objs.filter((function(e){if(!e.hasOwnProperty("__indexColor"))return!0;var n=t.colorTracker.lookup(e.__indexColor);return!n||!n.hasOwnProperty("d")||n.d!==e})).forEach((function(e){e.__indexColor=t.colorTracker.register({type:n,d:e})}))})),t.forceGraph.graphData(e),t.shadowGraph.graphData(e)},triggerUpdate:!1},backgroundColor:{onChange:function(e,t){t.canvas&&e&&(t.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null},triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{default:function(){},triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{default:function(){},triggerUpdate:!1},onLinkClick:{default:function(){},triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{default:function(){},triggerUpdate:!1},onBackgroundClick:{default:function(){},triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{default:function(){},triggerUpdate:!1},onZoomEnd:{default:function(){},triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},ho),aliases:{stopAnimation:"pauseAnimation"},methods:Qi({graph2ScreenCoords:function(e,t,n){var r=Ar(e.canvas);return{x:t*r.k+r.x,y:n*r.k+r.y}},screen2GraphCoords:function(e,t,n){var r=Ar(e.canvas);return{x:(t-r.x)/r.k,y:(n-r.y)/r.k}},centerAt:function(e,t,n,r){if(!e.canvas)return null;if(void 0!==t||void 0!==n){var i=Object.assign({},void 0!==t?{x:t}:{},void 0!==n?{y:n}:{});return r?new Re.a.Tween(o()).to(i,r).easing(Re.a.Easing.Quadratic.Out).onUpdate(a).start():a(i),this}return o();function o(){var t=Ar(e.canvas);return{x:(e.width/2-t.x)/t.k,y:(e.height/2-t.y)/t.k}}function a(t){var n=t.x,r=t.y;e.zoom.translateTo(e.zoom.__baseElem,void 0===n?o().x:n,void 0===r?o().y:r)}},zoom:function(e,t,n){return e.canvas?void 0!==t?(n?new Re.a.Tween({k:r()}).to({k:t},n).easing(Re.a.Easing.Quadratic.Out).onUpdate((function(e){return i(e.k)})).start():i(t),this):r():null;function r(){return Ar(e.canvas).k}function i(t){e.zoom.scaleTo(e.zoom.__baseElem,t)}},zoomToFit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=this.getGraphBbox.apply(this,i);if(a){var s={x:(a.x[0]+a.x[1])/2,y:(a.y[0]+a.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-2*n)/(a.x[1]-a.x[0]),(e.height-2*n)/(a.y[1]-a.y[0])));this.centerAt(s.x,s.y,t),this.zoom(c,t)}return this},getGraphBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=Object(Me.default)(e.nodeVal),r=function(t){return Math.sqrt(Math.max(0,n(t)||1))*e.nodeRelSize},i=e.graphData.nodes.filter(t).map((function(e){return{x:e.x,y:e.y,r:r(e)}}));return i.length?{x:[Gr(i,(function(e){return e.x-e.r})),Wr(i,(function(e){return e.x+e.r}))],y:[Gr(i,(function(e){return e.y-e.r})),Wr(i,(function(e){return e.y+e.r}))]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},fo),stateInit:function(){return{lastSetZoom:1,forceGraph:new so,shadowGraph:(new so).cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new ii}},init:function(e,t){e.innerHTML="";var n=document.createElement("div");n.classList.add("force-graph-container"),n.style.position="relative",e.appendChild(n),t.canvas=document.createElement("canvas"),t.backgroundColor&&(t.canvas.style.background=t.backgroundColor),n.appendChild(t.canvas),t.shadowCanvas=document.createElement("canvas");var r=t.canvas.getContext("2d"),i=t.shadowCanvas.getContext("2d");kn(t.canvas).call(function(){var e,t,n,r,i=zr,o=Hr,a=Fr,s=Br,c={},l=Object(_n.a)("start","drag","end"),u=0,h=0;function d(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!r&&i.call(this,a,s)){var c=b(this,o.call(this,a,s),a,s,"mouse");c&&(kn(a.view).on("mousemove.drag",p,!0).on("mouseup.drag",v,!0),An(a.view),Tn(a),n=!1,e=a.clientX,t=a.clientY,c("start",a))}}function p(r){if(On(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>h}c.mouse("drag",r)}function v(e){kn(e.view).on("mousemove.drag mouseup.drag",null),Cn(e.view,n),On(e),c.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,a=e.changedTouches,s=o.call(this,e,t),c=a.length;for(n=0;n<c;++n)(r=b(this,s,e,t,a[n].identifier,a[n]))&&(Tn(e),r("start",e,a[n]))}}function m(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=c[r[t].identifier])&&(On(e),n("drag",e,r[t]))}function y(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<o;++t)(n=c[i[t].identifier])&&(Tn(e),n("end",e,i[t]))}function b(e,t,n,r,i,o){var s,h,f,p=l.copy(),v=jn(o||n,t);if(null!=(f=a.call(e,new Ir("beforestart",{sourceEvent:n,target:d,identifier:i,active:u,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),r)))return s=f.x-v[0]||0,h=f.y-v[1]||0,function n(o,a,l){var g,m=v;switch(o){case"start":c[i]=n,g=u++;break;case"end":delete c[i],--u;case"drag":v=jn(l||a,t),g=u}p.call(o,e,new Ir(o,{sourceEvent:a,subject:f,target:d,identifier:i,active:g,x:v[0]+s,y:v[1]+h,dx:v[0]-m[0],dy:v[1]-m[1],dispatch:p}),r)}}return d.filter=function(e){return arguments.length?(i="function"==typeof e?e:Lr(!!e),d):i},d.container=function(e){return arguments.length?(o="function"==typeof e?e:Lr(e),d):o},d.subject=function(e){return arguments.length?(a="function"==typeof e?e:Lr(e),d):a},d.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Lr(!!e),d):s},d.on=function(){var e=l.on.apply(l,arguments);return e===l?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}().subject((function(){if(!t.enableNodeDrag)return null;var e=t.hoverObj;return e&&"Node"===e.type?e.d:null})).on("start",(function(e){var n=e.subject;n.__initialDragPos={x:n.x,y:n.y,fx:n.fx,fy:n.fy},e.active||(n.fx=n.x,n.fy=n.y),t.canvas.classList.add("grabbable")})).on("drag",(function(e){var n=e.subject,r=n.__initialDragPos,i=e,o=Ar(t.canvas).k,a={x:r.x+(i.x-r.x)/o-n.x,y:r.y+(i.y-r.y)/o-n.y};["x","y"].forEach((function(e){return n["f".concat(e)]=n[e]=r[e]+(i[e]-r[e])/o})),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.__dragged=!0,t.onNodeDrag(n,a)})).on("end",(function(e){var n=e.subject,r=n.__initialDragPos,i={x:n.x-r.x,y:n.y-r.y};void 0===r.fx&&(n.fx=void 0),void 0===r.fy&&(n.fy=void 0),delete n.__initialDragPos,t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.canvas.classList.remove("grabbable"),n.__dragged&&(delete n.__dragged,t.onNodeDragEnd(n,i))}))),t.zoom=function(){var e,t,n,r=jr,i=Rr,o=Nr,a=Dr,s=Pr,c=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,h=Sn.a,d=Object(_n.a)("start","zoom","end"),f=0,p=10;function v(e){e.property("__zoom",Mr).on("wheel.zoom",E).on("mousedown.zoom",k).on("dblclick.zoom",_).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(c[0],Math.min(c[1],t)))===e.k?e:new Tr(t,e.x,e.y)}function m(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Tr(e.k,r,i)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",(function(){w(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,o=arguments,a=w(e,o).event(r),s=i.apply(e,o),c=null==n?y(s):"function"==typeof n?n.apply(e,o):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,d="function"==typeof t?t.apply(e,o):t,f=h(u.invert(c).concat(l/u.k),d.invert(c).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=f(e),n=l/t[2];e=new Tr(n,c[0]-t[0]*n,c[1]-t[1]*n)}a.zoom(null,e)}}))}function w(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var s=w(this,n).event(e),u=this.__zoom,h=Math.max(c[0],Math.min(c[1],u.k*Math.pow(2,a.apply(this,arguments)))),d=jn(e);if(s.wheel)s.mouse[0][0]===d[0]&&s.mouse[0][1]===d[1]||(s.mouse[1]=u.invert(s.mouse[0]=d)),clearTimeout(s.wheel);else{if(u.k===h)return;s.mouse=[d,u.invert(d)],Hn(this),s.start()}Sr(e),s.wheel=setTimeout(f,150),s.zoom("mouse",o(m(g(u,h),s.mouse[0],s.mouse[1]),s.extent,l))}function f(){s.wheel=null,s.end()}}function k(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var s=w(this,i,!0).event(e),c=kn(e.view).on("mousemove.zoom",v,!0).on("mouseup.zoom",g,!0),u=jn(e,h),h=e.currentTarget,d=e.clientX,p=e.clientY;An(e.view),Cr(e),s.mouse=[u,this.__zoom.invert(u)],Hn(this),s.start()}function v(e){if(Sr(e),!s.moved){var t=e.clientX-d,n=e.clientY-p;s.moved=t*t+n*n>f}s.event(e).zoom("mouse",o(m(s.that.__zoom,s.mouse[0]=jn(e,h),s.mouse[1]),s.extent,l))}function g(e){c.on("mousemove.zoom mouseup.zoom",null),Cn(e.view,s.moved),Sr(e),s.event(e).end()}}function _(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var s=this.__zoom,c=jn(e.changedTouches?e.changedTouches[0]:e,this),h=s.invert(c),d=s.k*(e.shiftKey?.5:2),f=o(m(g(s,d),c,h),i.apply(this,n),l);Sr(e),u>0?kn(this).transition().duration(u).call(b,f,c,e):kn(this).call(v.transform,f,c,e)}}function T(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(r.apply(this,arguments)){var s,c,l,u,h=n.touches,d=h.length,f=w(this,o,n.changedTouches.length===d).event(n);for(Cr(n),c=0;c<d;++c)l=h[c],u=[u=jn(l,this),this.__zoom.invert(u),l.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,s=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(f.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),Hn(this),f.start())}}function O(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,s,c,u=w(this,n).event(e),h=e.changedTouches,d=h.length;for(Sr(e),i=0;i<d;++i)a=h[i],s=jn(a,this),u.touch0&&u.touch0[2]===a.identifier?u.touch0[0]=s:u.touch1&&u.touch1[2]===a.identifier&&(u.touch1[0]=s);if(a=u.that.__zoom,u.touch1){var f=u.touch0[0],p=u.touch0[1],v=u.touch1[0],y=u.touch1[1],b=(b=v[0]-f[0])*b+(b=v[1]-f[1])*b,x=(x=y[0]-p[0])*x+(x=y[1]-p[1])*x;a=g(a,Math.sqrt(b/x)),s=[(f[0]+v[0])/2,(f[1]+v[1])/2],c=[(p[0]+y[0])/2,(p[1]+y[1])/2]}else{if(!u.touch0)return;s=u.touch0[0],c=u.touch0[1]}u.zoom("touch",o(m(a,s,c),u.extent,l))}}function A(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(this.__zooming){var a,s,c=w(this,i).event(e),l=e.changedTouches,u=l.length;for(Cr(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),a=0;a<u;++a)s=l[a],c.touch0&&c.touch0[2]===s.identifier?delete c.touch0:c.touch1&&c.touch1[2]===s.identifier&&delete c.touch1;if(c.touch1&&!c.touch0&&(c.touch0=c.touch1,delete c.touch1),c.touch0)c.touch0[1]=this.__zoom.invert(c.touch0[0]);else if(c.end(),2===c.taps&&(s=jn(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<p)){var h=kn(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return v.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",Mr),e!==i?b(e,t,n,r):i.interrupt().each((function(){w(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},v.scaleBy=function(e,t,n,r){v.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,r)},v.scaleTo=function(e,t,n,r){v.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),c="function"==typeof t?t.apply(this,arguments):t;return o(m(g(r,c),a,s),e,l)}),n,r)},v.translateBy=function(e,t,n,r){v.transform(e,(function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}),null,r)},v.translateTo=function(e,t,n,r,a){v.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,s=null==r?y(e):"function"==typeof r?r.apply(this,arguments):r;return o(Or.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)}),r,a)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=kn(this.that).datum();d.call(e,this.that,new _r(e,{sourceEvent:this.sourceEvent,target:v,type:e,transform:this.that.__zoom,dispatch:d}),t)}},v.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:kr(+e),v):a},v.filter=function(e){return arguments.length?(r="function"==typeof e?e:kr(!!e),v):r},v.touchable=function(e){return arguments.length?(s="function"==typeof e?e:kr(!!e),v):s},v.extent=function(e){return arguments.length?(i="function"==typeof e?e:kr([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):i},v.scaleExtent=function(e){return arguments.length?(c[0]=+e[0],c[1]=+e[1],v):[c[0],c[1]]},v.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],v):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},v.constrain=function(e){return arguments.length?(o=e,v):o},v.duration=function(e){return arguments.length?(u=+e,v):u},v.interpolate=function(e){return arguments.length?(h=e,v):h},v.on=function(){var e=d.on.apply(d,arguments);return e===d?v:e},v.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,v):Math.sqrt(f)},v.tapDistance=function(e){return arguments.length?(p=+e,v):p},v}(),t.zoom(t.zoom.__baseElem=kn(t.canvas)),t.zoom.__baseElem.on("dblclick.zoom",null),t.zoom.filter((function(e){return!!t.enableZoomPanInteraction&&!e.button})).scaleExtent([.01,1e3]).on("zoom",(function(){var e=Ar(this);[r,i].forEach((function(t){vo(t),t.translate(e.x,e.y),t.scale(e.k,e.k)})),t.onZoom(Qi({},e))})).on("end",(function(){var e=Ar(this);t.onZoomEnd(Qi({},e))})),po(t),t.forceGraph.onFinishUpdate((function(){Ar(t.canvas).k===t.lastSetZoom&&t.graphData.nodes.length&&t.zoom.scaleTo(t.zoom.__baseElem,t.lastSetZoom=4/Math.cbrt(t.graphData.nodes.length))}));var o=document.createElement("div");o.classList.add("graph-tooltip"),n.appendChild(o);var a={x:-1e12,y:-1e12};["pointermove","pointerdown"].forEach((function(e){return n.addEventListener(e,(function(e){!t.isPointerDragging&&"pointermove"===e.type&&e.pressure>0&&[e.movementX,e.movementY].some((function(t){return Math.abs(t)>("touch"===e.pointerType?1:0)}))&&(t.isPointerDragging=!0);var r,i,s,c=(r=n.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop,{top:r.top+s,left:r.left+i});a.x=e.pageX-c.left,a.y=e.pageY-c.top,o.style.top="".concat(a.y,"px"),o.style.left="".concat(a.x,"px")}),{passive:!0})})),n.addEventListener("pointerup",(function(e){t.isPointerDragging?t.isPointerDragging=!1:requestAnimationFrame((function(){if(0===e.button&&(t.hoverObj?t["on".concat(t.hoverObj.type,"Click")](t.hoverObj.d,e):t.onBackgroundClick(e)),2===e.button)if(t.hoverObj){var n=t["on".concat(t.hoverObj.type,"RightClick")];n&&n(t.hoverObj.d,e)}else t.onBackgroundRightClick&&t.onBackgroundRightClick(e)}))}),{passive:!0}),n.addEventListener("contextmenu",(function(e){return!(t.onBackgroundRightClick||t.onNodeRightClick||t.onLinkRightClick)||(e.preventDefault(),!1)})),t.forceGraph(r),t.shadowGraph(i);var s=Yr()((function(){go(i,t.width,t.height),t.shadowGraph.linkWidth((function(e){return Object(Me.default)(t.linkWidth)(e)+t.linkHoverPrecision}));var e=Ar(t.canvas);t.shadowGraph.globalScale(e.k).tickFrame()}),800);(this._animationCycle=function e(){if(t.enablePointerInteraction){var n=null;if(!t.isPointerDragging){var c=window.devicePixelRatio,l=a.x>0&&a.y>0?i.getImageData(a.x*c,a.y*c,1,1):null;l&&(n=t.colorTracker.lookup(l.data))}if(n!==t.hoverObj){var u=t.hoverObj,h=u?u.type:null,d=n?n.type:null;h&&h!==d&&t["on".concat(h,"Hover")](null,u.d),d&&t["on".concat(d,"Hover")](n.d,h===d?u.d:null);var f=n&&Object(Me.default)(t["".concat(n.type.toLowerCase(),"Label")])(n.d)||"";o.style.visibility=f?"visible":"hidden",o.innerHTML=f,t.hoverObj=n}s()}go(r,t.width,t.height);var p=Ar(t.canvas).k;t.onRenderFramePre&&t.onRenderFramePre(r,p),t.forceGraph.globalScale(p).tickFrame(),t.onRenderFramePost&&t.onRenderFramePost(r,p),Re.a.update(),t.animationFrameRequestId=requestAnimationFrame(e)})()},update:function(e){}}),yo={width:C.a.number,height:C.a.number,graphData:C.a.shape({nodes:C.a.arrayOf(C.a.object).isRequired,links:C.a.arrayOf(C.a.object).isRequired}),backgroundColor:C.a.string,nodeRelSize:C.a.number,nodeId:C.a.string,nodeLabel:C.a.oneOfType([C.a.string,C.a.func]),nodeVal:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),nodeVisibility:C.a.oneOfType([C.a.bool,C.a.string,C.a.func]),nodeColor:C.a.oneOfType([C.a.string,C.a.func]),nodeAutoColorBy:C.a.oneOfType([C.a.string,C.a.func]),linkSource:C.a.string,linkTarget:C.a.string,linkLabel:C.a.oneOfType([C.a.string,C.a.func]),linkVisibility:C.a.oneOfType([C.a.bool,C.a.string,C.a.func]),linkHoverPrecision:C.a.number,linkColor:C.a.oneOfType([C.a.string,C.a.func]),linkAutoColorBy:C.a.oneOfType([C.a.string,C.a.func]),linkWidth:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),linkCurvature:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),linkDirectionalArrowLength:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),linkDirectionalArrowColor:C.a.oneOfType([C.a.string,C.a.func]),linkDirectionalArrowRelPos:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),linkDirectionalParticles:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),linkDirectionalParticleSpeed:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),linkDirectionalParticleWidth:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),linkDirectionalParticleColor:C.a.oneOfType([C.a.string,C.a.func]),dagMode:C.a.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:C.a.number,dagNodeFilter:C.a.func,onDagError:C.a.func,d3AlphaMin:C.a.number,d3AlphaDecay:C.a.number,d3VelocityDecay:C.a.number,warmupTicks:C.a.number,cooldownTicks:C.a.number,cooldownTime:C.a.number,onEngineTick:C.a.func,onEngineStop:C.a.func,getGraphBbox:C.a.func},bo={zoomToFit:C.a.func,onNodeClick:C.a.func,onNodeRightClick:C.a.func,onNodeHover:C.a.func,onNodeDrag:C.a.func,onNodeDragEnd:C.a.func,onLinkClick:C.a.func,onLinkRightClick:C.a.func,onLinkHover:C.a.func,onBackgroundClick:C.a.func,onBackgroundRightClick:C.a.func,enablePointerInteraction:C.a.bool,enableNodeDrag:C.a.bool},wo={showNavInfo:C.a.bool,nodeOpacity:C.a.number,nodeResolution:C.a.number,nodeThreeObject:C.a.oneOfType([C.a.object,C.a.string,C.a.func]),nodeThreeObjectExtend:C.a.oneOfType([C.a.bool,C.a.string,C.a.func]),linkOpacity:C.a.number,linkResolution:C.a.number,linkCurveRotation:C.a.oneOfType([C.a.number,C.a.string,C.a.func]),linkMaterial:C.a.oneOfType([C.a.object,C.a.string,C.a.func]),linkThreeObject:C.a.oneOfType([C.a.object,C.a.string,C.a.func]),linkThreeObjectExtend:C.a.oneOfType([C.a.bool,C.a.string,C.a.func]),linkPositionUpdate:C.a.func,linkDirectionalArrowResolution:C.a.number,linkDirectionalParticleResolution:C.a.number,forceEngine:C.a.oneOf(["d3","ngraph"]),ngraphPhysics:C.a.object,numDimensions:C.a.oneOf([1,2,3])},xo=Object.assign({},yo,bo,{linkLineDash:C.a.oneOfType([C.a.arrayOf(C.a.number),C.a.string,C.a.func]),nodeCanvasObject:C.a.func,nodeCanvasObjectMode:C.a.oneOfType([C.a.string,C.a.func]),linkCanvasObject:C.a.func,linkCanvasObjectMode:C.a.oneOfType([C.a.string,C.a.func]),enableZoomPanInteraction:C.a.bool,onZoom:C.a.func,onZoomEnd:C.a.func,onRenderFramePre:C.a.func,onRenderFramePost:C.a.func}),Eo=Object.assign({},yo,bo,wo,{enableNavigationControls:C.a.bool,controlType:C.a.oneOf(["trackball","orbit","fly"]),rendererConfig:C.a.object}),ko=Object.assign({},yo,wo,{nodeDesc:C.a.oneOfType([C.a.string,C.a.func]),linkDesc:C.a.oneOfType([C.a.string,C.a.func]),onNodeCenterHover:C.a.func,onLinkCenterHover:C.a.func}),_o=Object.assign({},yo,wo,{markerAttrs:C.a.object,yOffset:C.a.number,glScale:C.a.number,onNodeCenterHover:C.a.func,onLinkCenterHover:C.a.func}),To=m(O,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"]});To.displayName="ForceGraphVR",To.propTypes=ko;var Oo=m(L,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"],initPropNames:["markerAttrs"]});Oo.displayName="ForceGraphAR",Oo.propTypes=_o;var Ao=m(et,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","graph2ScreenCoords","postProcessingComposer","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig"]});Ao.displayName="ForceGraph3D",Ao.propTypes=Eo;var Co=m(mo,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});Co.displayName="ForceGraph2D",Co.propTypes=xo},Zgaw:function(e,t,n){n("cM1j"),n("W9gP"),n("gt/C"),n("9ifI"),n("Gd68"),n("DQrI"),n("5paa"),n("HcvI")},Zss7:function(e,t,n){var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,c=i.round,l=i.min,u=i.max,h=i.random;function d(e,t){if(t=t||{},(e=e||"")instanceof d)return e;if(!(this instanceof d))return new d(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,c=null,h=!1,d=!1;"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,n=!1;if(j[e])e=j[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=V.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=V.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=V.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=V.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=V.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=V.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=V.hex8.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),a:H(t[4]),format:n?"name":"hex8"};if(t=V.hex6.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),format:n?"name":"hex"};if(t=V.hex4.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),a:H(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=V.hex3.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(G(e.r)&&G(e.g)&&G(e.b)?(f=e.r,p=e.g,v=e.b,t={r:255*D(f,255),g:255*D(p,255),b:255*D(v,255)},h=!0,d="%"===String(e.r).substr(-1)?"prgb":"rgb"):G(e.h)&&G(e.s)&&G(e.v)?(r=I(e.s),s=I(e.v),t=function(e,t,n){e=6*D(e,360),t=D(t,100),n=D(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),c=n*(1-(1-o)*t),l=r%6;return{r:255*[n,s,a,a,c,n][l],g:255*[c,n,n,s,a,a][l],b:255*[a,a,c,n,n,s][l]}}(e.h,r,s),h=!0,d="hsv"):G(e.h)&&G(e.s)&&G(e.l)&&(r=I(e.s),c=I(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=D(e,360),t=D(t,100),n=D(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;r=a(c,s,e+1/3),i=a(c,s,e),o=a(c,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,c),h=!0,d="hsl"),e.hasOwnProperty("a")&&(n=e.a));var f,p,v;return n=M(n),{ok:h,format:e.format||d,r:l(255,u(t.r,0)),g:l(255,u(t.g,0)),b:l(255,u(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=c(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=n.ok,this._tc_id=s++}function f(e,t,n){e=D(e,255),t=D(t,255),n=D(n,255);var r,i,o=u(e,t,n),a=l(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var c=o-a;switch(i=s>.5?c/(2-o-a):c/(o+a),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:i,l:s}}function p(e,t,n){e=D(e,255),t=D(t,255),n=D(n,255);var r,i,o=u(e,t,n),a=l(e,t,n),s=o,c=o-a;if(i=0===o?0:c/o,o==a)r=0;else{switch(o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:i,v:s}}function v(e,t,n,r){var i=[L(c(e).toString(16)),L(c(t).toString(16)),L(c(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(e,t,n,r){return[L(z(r)),L(c(e).toString(16)),L(c(t).toString(16)),L(c(n).toString(16))].join("")}function m(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s-=t/100,n.s=P(n.s),d(n)}function y(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s+=t/100,n.s=P(n.s),d(n)}function b(e){return d(e).desaturate(100)}function w(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l+=t/100,n.l=P(n.l),d(n)}function x(e,t){t=0===t?0:t||10;var n=d(e).toRgb();return n.r=u(0,l(255,n.r-c(-t/100*255))),n.g=u(0,l(255,n.g-c(-t/100*255))),n.b=u(0,l(255,n.b-c(-t/100*255))),d(n)}function E(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l-=t/100,n.l=P(n.l),d(n)}function k(e,t){var n=d(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,d(n)}function _(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function T(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+120)%360,s:t.s,l:t.l}),d({h:(n+240)%360,s:t.s,l:t.l})]}function O(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+90)%360,s:t.s,l:t.l}),d({h:(n+180)%360,s:t.s,l:t.l}),d({h:(n+270)%360,s:t.s,l:t.l})]}function A(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+72)%360,s:t.s,l:t.l}),d({h:(n+216)%360,s:t.s,l:t.l})]}function C(e,t,n){t=t||6,n=n||30;var r=d(e).toHsl(),i=360/n,o=[d(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(d(r));return o}function S(e,t){t=t||6;for(var n=d(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(d({h:r,s:i,v:o})),o=(o+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=M(e),this._roundA=c(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=c(360*e.h),n=c(100*e.s),r=c(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=f(this._r,this._g,this._b),t=c(360*e.h),n=c(100*e.s),r=c(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return v(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[L(c(e).toString(16)),L(c(t).toString(16)),L(c(n).toString(16)),L(z(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*D(this._r,255))+"%",g:c(100*D(this._g,255))+"%",b:c(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*D(this._r,255))+"%, "+c(100*D(this._g,255))+"%, "+c(100*D(this._b,255))+"%)":"rgba("+c(100*D(this._r,255))+"%, "+c(100*D(this._g,255))+"%, "+c(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=d(e);n="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(O,arguments)}},d.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:I(e[r]));e=n}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:h(),g:h(),b:h()})},d.mix=function(e,t,n){n=0===n?0:n||50;var r=d(e).toRgb(),i=d(t).toRgb(),o=n/100;return d({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},d.readability=function(e,t){var n=d(e),r=d(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(e,t,n){var r,i,o=d.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},d.mostReadable=function(e,t,n){var r,i,o,a,s=null,c=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var l=0;l<t.length;l++)(r=d.readability(e,t[l]))>c&&(c=r,s=d(t[l]));return d.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],n))};var j=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=d.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(j);function M(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function D(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=l(t,u(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return l(1,u(0,e))}function N(e){return parseInt(e,16)}function L(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function z(e){return i.round(255*parseFloat(e)).toString(16)}function H(e){return N(e)/255}var F,B,U,V=(B="[\\s|\\(]+("+(F="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",U="[\\s|\\(]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",{CSS_UNIT:new RegExp(F),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+U),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+U),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+U),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(e){return!!V.CSS_UNIT.exec(e)}e.exports?e.exports=d:void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}(Math)},bQoG:function(e,t,n){n("5DQk"),n("6401"),n("kyDf"),n("Dp/p")},cM1j:function(e,t){e.exports=AFRAME.registerComponent("checkpoint",{schema:{offset:{default:{x:0,y:0,z:0},type:"vec3"}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this),this.offset=new THREE.Vector3},update:function(){this.offset.copy(this.data.offset)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.removeEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){var e=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!e)throw new Error("No `checkpoint-controls` component found.");e.components["checkpoint-controls"].setCheckpoint(this.el)},getOffset:function(){return this.offset.copy(this.data.offset)}})},cNTb:function(e,t,n){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var r=n("+LDG");"default"in r&&(r=r.default);var i=n("j/yy");"default"in i&&(i=i.default);var o=function(e){return"string"==typeof e?JSON.parse(e):e},a=function(e){if("function"==typeof e)return e;var t=eval;try{return t("("+e+")")}catch(n){}return null},s=function(e){return isNaN(parseFloat(e))?a(e)?a(e):e:parseFloat(e)};AFRAME.registerComponent("forcegraph",{schema:{jsonUrl:{type:"string",default:""},nodes:{parse:o,default:[]},links:{parse:o,default:[]},numDimensions:{type:"number",default:3},dagMode:{type:"string",default:""},dagLevelDistance:{type:"number",default:0},dagNodeFilter:{parse:a,function:function(){return!0}},onDagError:{parse:a,default:void 0},nodeRelSize:{type:"number",default:4},nodeId:{type:"string",default:"id"},nodeLabel:{parse:s,default:"name"},nodeDesc:{parse:s,default:"desc"},nodeVal:{parse:s,default:"val"},nodeResolution:{type:"number",default:8},nodeVisibility:{parse:s,default:!0},nodeColor:{parse:s,default:"color"},nodeAutoColorBy:{parse:s,default:""},nodeOpacity:{type:"number",default:.75},nodeThreeObject:{parse:s,default:null},nodeThreeObjectExtend:{parse:s,default:!1},linkSource:{type:"string",default:"source"},linkTarget:{type:"string",default:"target"},linkLabel:{parse:s,default:"name"},linkDesc:{parse:s,default:"desc"},linkHoverPrecision:{type:"number",default:2},linkVisibility:{parse:s,default:!0},linkColor:{parse:s,default:"color"},linkAutoColorBy:{parse:s,default:""},linkOpacity:{type:"number",default:.2},linkWidth:{parse:s,default:0},linkResolution:{type:"number",default:6},linkCurvature:{parse:s,default:0},linkCurveRotation:{parse:s,default:0},linkMaterial:{parse:s,default:null},linkThreeObject:{parse:s,default:null},linkThreeObjectExtend:{parse:s,default:!1},linkPositionUpdate:{parse:a,default:null},linkDirectionalArrowLength:{parse:s,default:0},linkDirectionalArrowColor:{parse:s,default:null},linkDirectionalArrowRelPos:{parse:s,default:.5},linkDirectionalArrowResolution:{type:"number",default:8},linkDirectionalParticles:{parse:s,default:0},linkDirectionalParticleSpeed:{parse:s,default:.01},linkDirectionalParticleWidth:{parse:s,default:.5},linkDirectionalParticleColor:{parse:s,default:null},linkDirectionalParticleResolution:{type:"number",default:4},onNodeCenterHover:{parse:a,default:function(){}},onLinkCenterHover:{parse:a,default:function(){}},forceEngine:{type:"string",default:"d3"},d3AlphaMin:{type:"number",default:0},d3AlphaDecay:{type:"number",default:.0228},d3VelocityDecay:{type:"number",default:.4},ngraphPhysics:{parse:o,default:null},warmupTicks:{type:"int",default:0},cooldownTicks:{type:"int",default:1e18},cooldownTime:{type:"int",default:15e3},onEngineTick:{parse:a,default:function(){}},onEngineStop:{parse:a,default:function(){}}},getGraphBbox:function(){return this.forceGraph||(this.forceGraph=new i),this.forceGraph.getGraphBbox()},emitParticle:function(){this.forceGraph||(this.forceGraph=new i);var e=this.forceGraph,t=e.emitParticle.apply(e,arguments);return t===e?this:t},d3Force:function(){this.forceGraph||(this.forceGraph=new i);var e=this.forceGraph,t=e.d3Force.apply(e,arguments);return t===e?this:t},d3ReheatSimulation:function(){return this.forceGraph&&this.forceGraph.d3ReheatSimulation(),this},refresh:function(){return this.forceGraph&&this.forceGraph.refresh(),this},init:function(){var e=this.state={};e.infoEl=document.createElement("a-text"),e.infoEl.setAttribute("position","0 -0.1 -1"),e.infoEl.setAttribute("width",1),e.infoEl.setAttribute("align","center"),e.infoEl.setAttribute("color","lavender"),e.tooltipEl=document.createElement("a-text"),e.tooltipEl.setAttribute("position","0 -0.5 -1"),e.tooltipEl.setAttribute("width",2),e.tooltipEl.setAttribute("align","center"),e.tooltipEl.setAttribute("color","lavender"),e.tooltipEl.setAttribute("value",""),e.subTooltipEl=document.createElement("a-text"),e.subTooltipEl.setAttribute("position","0 -0.6 -1"),e.subTooltipEl.setAttribute("width",1.5),e.subTooltipEl.setAttribute("align","center"),e.subTooltipEl.setAttribute("color","lavender"),e.subTooltipEl.setAttribute("value","");var t=document.querySelector("a-entity[camera], a-camera");t.appendChild(e.infoEl),t.appendChild(e.tooltipEl),t.appendChild(e.subTooltipEl),e.cameraObj=t.object3D.children.filter((function(e){return"PerspectiveCamera"===e.type}))[0],this.el.sceneEl.addEventListener("camera-set-active",(function(t){e.cameraObj=t.detail.cameraEl.components.camera.camera})),this.forceGraph||(this.forceGraph=new i),this.el.object3D.add(this.forceGraph),this.forceGraph.onLoading((function(){e.infoEl.setAttribute("value","Loading...")})).onFinishLoading((function(){e.infoEl.setAttribute("value","")}))},remove:function(){this.state.infoEl.remove(),this.state.tooltipEl.remove(),this.state.subTooltipEl.remove()},update:function(e){var t=this,n=this.data,r=AFRAME.utils.diff(n,e);["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].filter((function(e){return e in r})).forEach((function(e){t.forceGraph[e](""!==n[e]?n[e]:null)})),("nodes"in r||"links"in r)&&t.forceGraph.graphData({nodes:n.nodes,links:n.links})},tick:function(e,t){var n=new THREE.Raycaster;n.linePrecision=this.data.linkHoverPrecision,n.setFromCamera(new THREE.Vector2(0,0),this.state.cameraObj);var i=n.intersectObjects(this.forceGraph.children).filter((function(e){return-1!==["node","link"].indexOf(e.object.__graphObjType)})).sort((function(e,t){return n(t)-n(e);function n(e){return"node"===e.object.__graphObjType}})),o=i.length?i[0].object:null;if(o!==this.state.hoverObj){var a=this.state.hoverObj?this.state.hoverObj.__graphObjType:null,s=this.state.hoverObj?this.state.hoverObj.__data:null,c=o?o.__graphObjType:null,l=o?o.__data:null;a&&a!==c&&this.data["on"+("node"===a?"Node":"Link")+"CenterHover"](null,s),c&&this.data["on"+("node"===c?"Node":"Link")+"CenterHover"](l,a===c?s:null),this.state.hoverObj=o,this.state.tooltipEl.setAttribute("value",o&&r(this.data[o.__graphObjType+"Label"])(o.__data)||""),this.state.subTooltipEl.setAttribute("value",o&&r(this.data[o.__graphObjType+"Desc"])(o.__data)||"")}this.forceGraph.tickFrame()}})},cqv3:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},eAxV:function(e,t,n){var r=n("KNlp");function i(e){var t=r(e);return"\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ".concat(t("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6}),"\n    }\n  };\n")}e.exports=function(e){var t=i(e);return new Function("options",t)},e.exports.generateCreateDragForceFunctionBody=i},"gt/C":function(e,t){e.exports=AFRAME.registerComponent("grab",{init:function(){this.system=this.el.sceneEl.systems.physics,this.GRABBED_STATE="grabbed",this.grabbing=!1,this.hitEl=null,this.physics=this.el.sceneEl.systems.physics,this.constraint=null,this.onHit=this.onHit.bind(this),this.onGripOpen=this.onGripOpen.bind(this),this.onGripClose=this.onGripClose.bind(this)},play:function(){var e=this.el;e.addEventListener("hit",this.onHit),e.addEventListener("gripdown",this.onGripClose),e.addEventListener("gripup",this.onGripOpen),e.addEventListener("trackpaddown",this.onGripClose),e.addEventListener("trackpadup",this.onGripOpen),e.addEventListener("triggerdown",this.onGripClose),e.addEventListener("triggerup",this.onGripOpen)},pause:function(){var e=this.el;e.removeEventListener("hit",this.onHit),e.removeEventListener("gripdown",this.onGripClose),e.removeEventListener("gripup",this.onGripOpen),e.removeEventListener("trackpaddown",this.onGripClose),e.removeEventListener("trackpadup",this.onGripOpen),e.removeEventListener("triggerdown",this.onGripClose),e.removeEventListener("triggerup",this.onGripOpen)},onGripClose:function(){this.grabbing=!0},onGripOpen:function(){var e=this.hitEl;this.grabbing=!1,e&&(e.removeState(this.GRABBED_STATE),this.hitEl=void 0,this.system.removeConstraint(this.constraint),this.constraint=null)},onHit:function(e){var t=e.detail.el;t&&!t.is(this.GRABBED_STATE)&&this.grabbing&&!this.hitEl&&(t.addState(this.GRABBED_STATE),this.hitEl=t,this.constraint=new CANNON.LockConstraint(this.el.body,t.body),this.system.addConstraint(this.constraint))}})},gtdD:function(e,t,n){e.exports=function(e){var t=n("45M5"),u=n("X2te"),h=n("AMdQ");if(e){if(void 0!==e.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==e.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}e=u(e,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var d=l[e.dimensions];if(!d){var f=e.dimensions;d={Body:r(f,e.debug),createQuadTree:i(f),createBounds:o(f),createDragForce:a(f),createSpringForce:s(f),integrate:c(f)},l[f]=d}var p=d.Body,v=d.createQuadTree,g=d.createBounds,m=d.createDragForce,y=d.createSpringForce,b=d.integrate,w=n("2doD").random(42),x=[],E=[],k=v(e,w),_=g(x,e,w),T=y(e,w),O=m(e),A=[],C=new Map,S=0;M("nbody",(function(e){if(0===x.length)return;k.insertBodies(x);var t=x.length;for(;t--;){var n=x[t];n.isPinned||(n.reset(),k.updateBodyForce(n),O.update(n))}})),M("spring",(function(){var e=E.length;for(;e--;)T.update(E[e])}));var j={bodies:x,quadTree:k,springs:E,settings:e,addForce:M,removeForce:function(e){var t=A.indexOf(C.get(e));if(t<0)return;A.splice(t,1)},getForces:function(){return C},step:function(){for(var t=0;t<A.length;++t)A[t](S);var n=b(x,e.timeStep,e.adaptiveTimeStepWeight);return S+=1,n},addBody:function(e){if(!e)throw new Error("Body is required");return x.push(e),e},addBodyAt:function(e){if(!e)throw new Error("Body position is required");var t=function(e){return new p(e)}(e);return x.push(t),t},removeBody:function(e){if(e){var t=x.indexOf(e);if(!(t<0))return x.splice(t,1),0===x.length&&_.reset(),!0}},addSpring:function(e,n,r,i){if(!e||!n)throw new Error("Cannot add null spring to force simulator");"number"!=typeof r&&(r=-1);var o=new t(e,n,r,i>=0?i:-1);return E.push(o),o},getTotalMovement:function(){return 0},removeSpring:function(e){if(e){var t=E.indexOf(e);return t>-1?(E.splice(t,1),!0):void 0}},getBestNewBodyPosition:function(e){return _.getBestNewPosition(e)},getBBox:R,getBoundingBox:R,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(t){return void 0!==t?(e.gravity=t,k.options({gravity:t}),this):e.gravity},theta:function(t){return void 0!==t?(e.theta=t,k.options({theta:t}),this):e.theta}};return function(e,t){for(var n in e)D(e,t,n)}(e,j),h(j),j;function R(){return _.update(),_.box}function M(e,t){if(C.has(e))throw new Error("Force "+e+" is already added");C.set(e,t),A.push(t)}function D(e,t,n){if(e.hasOwnProperty(n)&&"function"!=typeof t[n]){var r=Number.isFinite(e[n]);t[n]=r?function(r){if(void 0!==r){if(!Number.isFinite(r))throw new Error("Value of "+n+" should be a valid number.");return e[n]=r,t}return e[n]}:function(r){return void 0!==r?(e[n]=r,t):e[n]}}}};var r=n("CszH"),i=n("lUvq"),o=n("1lwN"),a=n("eAxV"),s=n("vPw2"),c=n("P2qj"),l={}},h2JL:function(e,t){var n,r,i,o,a;e.exports=AFRAME.registerComponent("movement-controls",{dependencies:["rotation"],schema:{enabled:{default:!0},controls:{default:["gamepad","trackpad","keyboard","touch"]},speed:{default:.3,min:0},fly:{default:!1},constrainToNavMesh:{default:!1},camera:{default:"[movement-controls] [camera]",type:"selector"}},init:function(){var e=this.el;this.velocityCtrl=null,this.velocity=new THREE.Vector3,this.heading=new THREE.Quaternion,this.navGroup=null,this.navNode=null,e.sceneEl.hasLoaded?this.injectControls():e.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(e){var t=this.el,n=this.data,r=t.sceneEl.systems.nav;t.sceneEl.hasLoaded&&this.injectControls(),r&&n.constrainToNavMesh!==e.constrainToNavMesh&&(n.constrainToNavMesh?r.addAgent(this):r.removeAgent(this))},injectControls:function(){for(var e,t=this.data,n=0;n<t.controls.length;n++)e=t.controls[n]+"-controls",this.el.components[e]||this.el.setAttribute(e,"")},updateNavLocation:function(){this.navGroup=null,this.navNode=null},tick:(i=new THREE.Vector3,o=new THREE.Vector3,a=new THREE.Vector3,function(e,t){if(t){var n=this.el,r=this.data;if(r.enabled){this.updateVelocityCtrl();var s=this.velocityCtrl,c=this.velocity;if(s)if(t/1e3>.2?c.set(0,0,0):this.updateVelocity(t),r.constrainToNavMesh&&!1!==s.isNavMeshConstrained){if(c.lengthSq()<1e-5)return;i.copy(n.object3D.position),o.copy(c).multiplyScalar(t/1e3).add(i);var l=n.sceneEl.systems.nav;this.navGroup=null===this.navGroup?l.getGroup(i):this.navGroup,this.navNode=this.navNode||l.getNode(i,this.navGroup),this.navNode=l.clampStep(i,o,this.navGroup,this.navNode,a),n.object3D.position.copy(a)}else n.hasAttribute("velocity")?n.setAttribute("velocity",c):(n.object3D.position.x+=c.x*t/1e3,n.object3D.position.y+=c.y*t/1e3,n.object3D.position.z+=c.z*t/1e3)}}}),updateVelocityCtrl:function(){var e=this.data;if(e.enabled){for(var t=0,n=e.controls.length;t<n;t++){var r=this.el.components[e.controls[t]+"-controls"];if(r&&r.isVelocityActive())return void(this.velocityCtrl=r)}this.velocityCtrl=null}},updateVelocity:(n=new THREE.Vector2,r=new THREE.Quaternion,function(e){var t,i=this.el,o=this.velocityCtrl,a=this.velocity,s=this.data;if(o){if(!o.getVelocityDelta){if(o.getVelocity)return void a.copy(o.getVelocity());if(o.getPositionDelta)return void a.copy(o.getPositionDelta(e).multiplyScalar(1e3/e));throw new Error("Incompatible movement controls: ",o)}t=o.getVelocityDelta(e)}if(i.hasAttribute("velocity")&&!s.constrainToNavMesh&&a.copy(this.el.getAttribute("velocity")),t&&s.enabled){var c=s.camera;r.copy(c.object3D.quaternion),r.premultiply(i.object3D.quaternion),t.applyQuaternion(r);var l=t.length();s.fly?(a.copy(t),a.multiplyScalar(16.66667*this.data.speed)):(n.set(t.x,t.z),n.setLength(l*this.data.speed*16.66667),a.x=n.x,a.z=n.y)}})})},"hKI/":function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,h=Math.max,d=Math.min,f=function(){return l.Date.now()};function p(e,t,n){var r,i,o,a,s,c,l=0,u=!1,p=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function b(e){return l=e,s=setTimeout(x,t),u?y(e):a}function w(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-l>=o}function x(){var e=f();if(w(e))return E(e);s=setTimeout(x,function(e){var n=t-(e-c);return p?d(n,o-(e-l)):n}(e))}function E(e){return s=void 0,m&&r?y(e):(r=i=void 0,a)}function k(){var e=f(),n=w(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return b(c);if(p)return s=setTimeout(x,t),y(c)}return void 0===s&&(s=setTimeout(x,t)),a}return t=g(t)||0,v(n)&&(u=!!n.leading,o=(p="maxWait"in n)?h(g(n.maxWait)||0,t):o,m="trailing"in n?!!n.trailing:m),k.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},k.flush=function(){return void 0===s?a:E(f())},k}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return v(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),p(e,t,{leading:r,maxWait:t,trailing:i})}}).call(this,n("yLpj"))},hWGv:function(e,t,n){n("JUsp");var r=window.KeyboardEvent;e.exports=AFRAME.registerComponent("keyboard-controls",{schema:{enabled:{default:!0},debug:{default:!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this)},this.attachEventListeners()},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){var e=this.data,t=this.getKeys();return this.dVelocity.set(0,0,0),e.enabled&&((t.KeyW||t.ArrowUp)&&(this.dVelocity.z-=1),(t.KeyA||t.ArrowLeft)&&(this.dVelocity.x-=1),(t.KeyS||t.ArrowDown)&&(this.dVelocity.z+=1),(t.KeyD||t.ArrowRight)&&(this.dVelocity.x+=1)),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.pause()},attachEventListeners:function(){window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(e){AFRAME.utils.shouldCaptureKeyEvent(e)&&(this.localKeys[e.code]=!0,this.emit(e))},onKeyUp:function(e){AFRAME.utils.shouldCaptureKeyEvent(e)&&(delete this.localKeys[e.code],this.emit(e))},onBlur:function(){for(var e in this.localKeys)this.localKeys.hasOwnProperty(e)&&delete this.localKeys[e]},emit:function(e){"__keyboard-controls-proxy"in e&&this.el.emit(e.type,e),this.el.emit(e.type+":"+e.code,new r(e.type,e)),this.data.debug&&console.log(e.type+":"+e.code)},isPressed:function(e){return e in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){var e=this.el.sceneEl.components["proxy-controls"];return e&&e.isConnected()}})},"j/yy":function(e,t,n){"use strict";n.r(t);n("E9XD");var r=n("Womt"),i=n("IqyP"),o=n("u+3c"),a=n("V4tj"),s=n("LSLv"),c=n("x/eb"),l=n("FI3q"),u=n.n(l),h=n("K0Sw"),d=n.n(h),f=n("NT8w"),p=n("+LDG");function v(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n;if(void 0===t){var r,i=v(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n>o||void 0===n&&o>=o)&&(n=o)}}catch(u){i.e(u)}finally{i.f()}}else{var a,s=-1,c=v(e);try{for(c.s();!(a=c.n()).done;){var l=a.value;null!=(l=t(l,++s,e))&&(n>l||void 0===n&&l>=l)&&(n=l)}}catch(u){c.e(u)}finally{c.f()}}return n}function y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n;if(void 0===t){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n<o||void 0===n&&o>=o)&&(n=o)}}catch(u){i.e(u)}finally{i.f()}}else{var a,s=-1,c=y(e);try{for(c.s();!(a=c.n()).done;){var l=a.value;null!=(l=t(l,++s,e))&&(n<l||void 0===n&&l>=l)&&(n=l)}}catch(u){c.e(u)}finally{c.f()}}return n}var x=n("mUZr");function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(e,t,n){var r=n.objBindAttr,i=void 0===r?"__obj":r,o=n.dataBindAttr,a=void 0===o?"__data":o,s=n.idAccessor,c=n.purge,l=void 0!==c&&c,u=function(e){return e.hasOwnProperty(a)},h=t.filter((function(e){return!u(e)})),d=t.filter(u).map((function(e){return e[a]})),f=l?{enter:e,exit:d,update:[]}:function(e,t,n){var r={enter:[],update:[],exit:[]};if(n){var i=Object(x.a)(e,n,!1),o=Object(x.a)(t,n,!1),a=Object.assign({},i,o);Object.entries(a).forEach((function(e){var t=T(e,2),n=t[0],a=t[1],s=i.hasOwnProperty(n)?o.hasOwnProperty(n)?"update":"exit":"enter";r[s].push("update"===s?[i[n],o[n]]:a)}))}else{var s=new Set(e),c=new Set(t);new Set([].concat(O(s),O(c))).forEach((function(e){var t=s.has(e)?c.has(e)?"update":"exit":"enter";r[t].push("update"===t?[e,e]:e)}))}return r}(d,e,s);return f.update=f.update.map((function(e){var t=T(e,2),n=t[0],r=t[1];return n!==r&&(r[i]=n[i],r[i][a]=r),r})),f.exit=f.exit.concat(h.map((function(e){return E({},i,e)}))),f}var C=function(e,t,n,r,i){var o=i.createObj,a=void 0===o?function(e){return{}}:o,s=i.updateObj,c=void 0===s?function(e,t){}:s,l=i.exitObj,u=void 0===l?function(e){}:l,h=i.objBindAttr,d=void 0===h?"__obj":h,f=i.dataBindAttr,p=void 0===f?"__data":f,v=_(i,["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"]),g=A(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({objBindAttr:d,dataBindAttr:p},v)),m=g.enter,y=g.update;g.exit.forEach((function(e){var t=e[d];delete e[d],u(t),r(t)}));var b=function(e){var t=[];return e.forEach((function(e){var n=a(e);n&&(n[p]=e,e[d]=n,t.push(n))})),t}(m);!function(e){e.forEach((function(e){var t=e[d];t&&(t[p]=e,c(t,e))}))}([].concat(O(m),O(y))),b.forEach(n)};function S(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function j(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=Symbol("implicit");var D=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),P=n("Zss7"),N=n.n(P);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function q(e,t,n){return(q=G()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&V(i,n.prototype),i}).apply(null,arguments)}function K(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?W(e):t}function Y(e){var t=G();return function(){var n,r=U(e);if(t){var i=U(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return X(this,n)}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||J(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ee=function e(t){t.geometry&&t.geometry.dispose(),t.material&&function e(t){t instanceof Array?t.forEach(e):(t.map&&t.map.dispose(),t.dispose())}(t.material),t.texture&&t.texture.dispose(),t.children&&t.children.forEach(e)},te=function(e){for(;e.children.length;){var t=e.children[0];e.remove(t),ee(t)}};function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.objFilter,i=void 0===r?function(){return!0}:r,o=K(n,["objFilter"]);return C(e,t.children.filter(i),(function(e){return t.add(e)}),(function(e){t.remove(e),te(e)}),F({objBindAttr:"__threeObj"},o))}var re=function(e){return isNaN(e)?parseInt(N()(e).toHex(),16):e},ie=function(e){return isNaN(e)?N()(e).getAlpha():1},oe=function e(){var t=new Map,n=[],r=[],i=M;function o(e){var o=e+"",a=t.get(o);if(!a){if(i!==M)return i;t.set(o,a=n.push(e))}return r[(a-1)%r.length]}return o.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;var r,i=j(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=a+"";t.has(s)||t.set(s,n.push(a))}}catch(c){i.e(c)}finally{i.f()}return o},o.range=function(e){return arguments.length?(r=Array.from(e),o):r.slice()},o.unknown=function(e){return arguments.length?(i=e,o):i},o.copy=function(){return e(n,r).unknown(i)},S.apply(o,arguments),o}(D);function ae(e,t,n){t&&"string"==typeof n&&e.filter((function(e){return!e[n]})).forEach((function(e){e[n]=oe(t(e))}))}var se=window.THREE?window.THREE:{Group:r.m,Mesh:r.s,MeshLambertMaterial:r.u,Color:r.g,BufferGeometry:r.e,BufferAttribute:r.d,Matrix4:r.r,Vector3:r.N,SphereBufferGeometry:r.F,CylinderBufferGeometry:r.j,TubeBufferGeometry:r.K,ConeBufferGeometry:r.h,Line:r.n,LineBasicMaterial:r.o,QuadraticBezierCurve3:r.z,CubicBezierCurve3:r.i,Box3:r.c},ce={graph:u.a,forcelayout:d.a},le=(new se.BufferGeometry).setAttribute?"setAttribute":"addAttribute",ue=(new se.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix";var he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(t){B(i,t);var r=Y(i);function i(){var t;I(this,i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(t=r.call.apply(r,[this].concat(a))).__kapsuleInstance=e().apply(void 0,[].concat(Q(n?[W(t)]:[]),a)),t}return i}(t);return Object.keys(e()).forEach((function(e){return r.prototype[e]=function(){var t,n=(t=this.__kapsuleInstance)[e].apply(t,arguments);return n===this.__kapsuleInstance?this:n}})),r}(Object(f.a)({props:{jsonUrl:{onChange:function(e,t){var n=this;e&&!t.fetchingJson&&(t.fetchingJson=!0,t.onLoading(),fetch(e).then((function(e){return e.json()})).then((function(e){t.fetchingJson=!1,t.onFinishLoading(e),n.graphData(e)})))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){(e.nodes.length||e.links.length)&&console.info("force-graph loading",e.nodes.length+" nodes",e.links.length+" links"),t.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,t){var n=t.d3ForceLayout.force("charge");function r(e,t){e.forEach((function(e){delete e[t],delete e["v".concat(t)]}))}n&&n.strength(e>2?-60:-30),e<3&&r(t.graphData.nodes,"z"),e<2&&r(t.graphData.nodes,"y")}},dagMode:{onChange:function(e,t){!e&&"d3"===t.forceEngine&&(t.graphData.nodes||[]).forEach((function(e){return e.fx=e.fy=e.fz=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,t,n){return void 0===n?e.d3ForceLayout.force(t):(e.d3ForceLayout.force(t,n),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var t,n,r,i,o="ngraph"!==e.forceEngine;return e.engineRunning&&function(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||o&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[o?"tick":"step"](),e.onEngineTick());e.graphData.nodes.forEach((function(t){var n=t.__threeObj;if(n){var r=o?t:e.layout.getNodePosition(t[e.nodeId]);n.position.x=r.x,n.position.y=r.y||0,n.position.z=r.z||0}}));var t=Object(p.default)(e.linkWidth),n=Object(p.default)(e.linkCurvature),r=Object(p.default)(e.linkCurveRotation),i=Object(p.default)(e.linkThreeObjectExtend);e.graphData.links.forEach((function(a){var s=a.__lineObj;if(s){var c=o?a:e.layout.getLinkPosition(e.layout.graph.getLink(a.source,a.target).id),l=c[o?"source":"from"],u=c[o?"target":"to"];if(l&&u&&l.hasOwnProperty("x")&&u.hasOwnProperty("x")){!function(t){var i=o?t:e.layout.getLinkPosition(e.layout.graph.getLink(t.source,t.target).id),a=i[o?"source":"from"],s=i[o?"target":"to"];if(a&&s&&a.hasOwnProperty("x")&&s.hasOwnProperty("x")){var c=n(t);if(c){var l,u=new se.Vector3(a.x,a.y||0,a.z||0),h=new se.Vector3(s.x,s.y||0,s.z||0),d=u.distanceTo(h),f=r(t);if(d>0){var p=s.x-a.x,v=s.y-a.y||0,g=(new se.Vector3).subVectors(h,u),m=g.clone().multiplyScalar(c).cross(0!==p||0!==v?new se.Vector3(0,0,1):new se.Vector3(0,1,0)).applyAxisAngle(g.normalize(),f).add((new se.Vector3).addVectors(u,h).divideScalar(2));l=new se.QuadraticBezierCurve3(u,m,h)}else{var y=70*c,b=-f,w=b+Math.PI/2;l=new se.CubicBezierCurve3(u,new se.Vector3(y*Math.cos(w),y*Math.sin(w),0).add(u),new se.Vector3(y*Math.cos(b),y*Math.sin(b),0).add(u),h)}t.__curve=l}else t.__curve=null}}(a);var h=i(a);if(!e.linkPositionUpdate||!e.linkPositionUpdate(h?s.children[1]:s,{start:{x:l.x,y:l.y,z:l.z},end:{x:u.x,y:u.y,z:u.z}},a)||h){var d=a.__curve,f=s.children.length?s.children[0]:s;if("Line"===f.type){if(d)f.geometry.setFromPoints(d.getPoints(30));else{var p=f.geometry.getAttribute("position");p&&p.array&&6===p.array.length||f.geometry[le]("position",p=new se.BufferAttribute(new Float32Array(6),3)),p.array[0]=l.x,p.array[1]=l.y||0,p.array[2]=l.z||0,p.array[3]=u.x,p.array[4]=u.y||0,p.array[5]=u.z||0,p.needsUpdate=!0}f.geometry.computeBoundingSphere()}else if("Mesh"===f.type)if(d){"TubeBufferGeometry"!==f.geometry.type&&(f.position.set(0,0,0),f.rotation.set(0,0,0),f.scale.set(1,1,1));var v=Math.ceil(10*t(a))/10/2,g=new se.TubeBufferGeometry(d,30,v,e.linkResolution,!1);f.geometry.dispose(),f.geometry=g}else{if("CylinderBufferGeometry"!==f.geometry.type){var m=Math.ceil(10*t(a))/10/2,y=new se.CylinderBufferGeometry(m,m,1,e.linkResolution,1,!1);y[ue]((new se.Matrix4).makeTranslation(0,.5,0)),y[ue]((new se.Matrix4).makeRotationX(Math.PI/2)),f.geometry.dispose(),f.geometry=y}var b=new se.Vector3(l.x,l.y||0,l.z||0),w=new se.Vector3(u.x,u.y||0,u.z||0),x=b.distanceTo(w);f.position.x=b.x,f.position.y=b.y,f.position.z=b.z,f.scale.z=x,f.parent.localToWorld(w),f.lookAt(w)}}}}}))}(),t=Object(p.default)(e.linkDirectionalArrowRelPos),n=Object(p.default)(e.linkDirectionalArrowLength),r=Object(p.default)(e.nodeVal),e.graphData.links.forEach((function(i){var a=i.__arrowObj;if(a){var s=o?i:e.layout.getLinkPosition(e.layout.graph.getLink(i.source,i.target).id),c=s[o?"source":"from"],l=s[o?"target":"to"];if(c&&l&&c.hasOwnProperty("x")&&l.hasOwnProperty("x")){var u=Math.sqrt(Math.max(0,r(c)||1))*e.nodeRelSize,h=Math.sqrt(Math.max(0,r(l)||1))*e.nodeRelSize,d=n(i),f=t(i),p=i.__curve?function(e){return i.__curve.getPoint(e)}:function(e){var t=function(e,t,n,r){return t[e]+(n[e]-t[e])*r||0};return{x:t("x",c,l,e),y:t("y",c,l,e),z:t("z",c,l,e)}},v=i.__curve?i.__curve.getLength():Math.sqrt(["x","y","z"].map((function(e){return Math.pow((l[e]||0)-(c[e]||0),2)})).reduce((function(e,t){return e+t}),0)),g=u+d+(v-u-h-d)*f,m=p(g/v),y=p((g-d)/v);["x","y","z"].forEach((function(e){return a.position[e]=y[e]}));var b=q(se.Vector3,Q(["x","y","z"].map((function(e){return m[e]}))));a.parent.localToWorld(b),a.lookAt(b)}}})),i=Object(p.default)(e.linkDirectionalParticleSpeed),e.graphData.links.forEach((function(t){var n=t.__photonsObj&&t.__photonsObj.children,r=t.__singleHopPhotonsObj&&t.__singleHopPhotonsObj.children;if(r&&r.length||n&&n.length){var a=o?t:e.layout.getLinkPosition(e.layout.graph.getLink(t.source,t.target).id),s=a[o?"source":"from"],c=a[o?"target":"to"];if(s&&c&&s.hasOwnProperty("x")&&c.hasOwnProperty("x")){var l=i(t),u=t.__curve?function(e){return t.__curve.getPoint(e)}:function(e){var t=function(e,t,n,r){return t[e]+(n[e]-t[e])*r||0};return{x:t("x",s,c,e),y:t("y",s,c,e),z:t("z",s,c,e)}};[].concat(Q(n||[]),Q(r||[])).forEach((function(e,t){var r="singleHopPhotons"===e.parent.__linkThreeObjType;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=r?0:t/n.length),e.__progressRatio+=l,e.__progressRatio>=1){if(r)return e.parent.remove(e),void te(e);e.__progressRatio=e.__progressRatio%1}var i=e.__progressRatio,o=u(i);["x","y","z"].forEach((function(t){return e.position[t]=o[t]}))}))}}})),this},emitParticle:function(e,t){if(t){if(!t.__singleHopPhotonsObj){var n=new se.Group;n.__linkThreeObjType="singleHopPhotons",t.__singleHopPhotonsObj=n,e.graphScene.add(n)}var r=Object(p.default)(e.linkDirectionalParticleWidth),i=Math.ceil(10*r(t))/10/2,o=e.linkDirectionalParticleResolution,a=new se.SphereBufferGeometry(i,o,o),s=Object(p.default)(e.linkColor),c=Object(p.default)(e.linkDirectionalParticleColor)(t)||s(t)||"#f0f0f0",l=new se.Color(re(c)),u=3*e.linkOpacity,h=new se.MeshLambertMaterial({color:l,transparent:!0,opacity:u});t.__singleHopPhotonsObj.add(new se.Mesh(a,h))}return this},getGraphBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!e.initialised)return null;var n=function e(n){var r=[];if(n.geometry){n.geometry.computeBoundingBox();var i=new se.Box3;i.copy(n.geometry.boundingBox).applyMatrix4(n.matrixWorld),r.push(i)}return r.concat.apply(r,Q((n.children||[]).filter((function(e){return!e.hasOwnProperty("__graphObjType")||"node"===e.__graphObjType&&t(e.__data)})).map(e)))}(e.graphScene);return n.length?Object.assign.apply(Object,Q(["x","y","z"].map((function(e){return z({},e,[m(n,(function(t){return t.min[e]})),w(n,(function(t){return t.max[e]}))])})))):null}},stateInit:function(){return{d3ForceLayout:Object(i.a)().force("link",Object(o.a)()).force("charge",Object(a.a)()).force("center",Object(s.a)()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.graphScene=e},update:function(e,t){var n=function(e){return e.some((function(e){return t.hasOwnProperty(e)}))};if(e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&n(["nodeAutoColorBy","graphData","nodeColor"])&&ae(e.graphData.nodes,Object(p.default)(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&n(["linkAutoColorBy","graphData","linkColor"])&&ae(e.graphData.links,Object(p.default)(e.linkAutoColorBy),e.linkColor),e._flushObjects||n(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var r=Object(p.default)(e.nodeThreeObject),i=Object(p.default)(e.nodeThreeObjectExtend),o=Object(p.default)(e.nodeVal),a=Object(p.default)(e.nodeColor),s=Object(p.default)(e.nodeVisibility),l={},u={};ne(e.graphData.nodes.filter(s),e.graphScene,{purge:e._flushObjects||n(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(e){return"node"===e.__graphObjType},createObj:function(t){var n,o=r(t),a=i(t);return o&&e.nodeThreeObject===o&&(o=o.clone()),o&&!a?n=o:((n=new se.Mesh).__graphDefaultObj=!0,o&&a&&n.add(o)),n.__graphObjType="node",n},updateObj:function(t,n){if(t.__graphDefaultObj){var r=o(n)||1,i=Math.cbrt(r)*e.nodeRelSize,s=e.nodeResolution;"SphereBufferGeometry"===t.geometry.type&&t.geometry.parameters.radius===i&&t.geometry.parameters.widthSegments===s||(l.hasOwnProperty(r)||(l[r]=new se.SphereBufferGeometry(i,s,s)),t.geometry.dispose(),t.geometry=l[r]);var c=a(n),h=new se.Color(re(c||"#ffffaa")),d=e.nodeOpacity*ie(c);"MeshLambertMaterial"===t.material.type&&t.material.color.equals(h)&&t.material.opacity===d||(u.hasOwnProperty(c)||(u[c]=new se.MeshLambertMaterial({color:h,transparent:!0,opacity:d})),t.material.dispose(),t.material=u[c])}}})}if(e._flushObjects||n(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var h=Object(p.default)(e.linkThreeObject),d=Object(p.default)(e.linkThreeObjectExtend),f=Object(p.default)(e.linkMaterial),v=Object(p.default)(e.linkVisibility),g=Object(p.default)(e.linkColor),m=Object(p.default)(e.linkWidth),y={},b={},w={},x=e.graphData.links.filter(v);if(ne(x,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||n(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(e){return"link"===e.__graphObjType},createObj:function(t){var n,r,i=h(t),o=d(t);if(i&&e.linkThreeObject===i&&(i=i.clone()),!i||o)if(!!m(t))n=new se.Mesh;else{var a=new se.BufferGeometry;a[le]("position",new se.BufferAttribute(new Float32Array(6),3)),n=new se.Line(a)}return i?o?((r=new se.Group).__graphDefaultObj=!0,r.add(n),r.add(i)):r=i:(r=n).__graphDefaultObj=!0,r.renderOrder=10,r.__graphObjType="link",r},updateObj:function(t,n){if(t.__graphDefaultObj){var r=t.children.length?t.children[0]:t,i=Math.ceil(10*m(n))/10,o=!!i;if(o){var a=i/2,s=e.linkResolution;if("CylinderBufferGeometry"!==r.geometry.type||r.geometry.parameters.radiusTop!==a||r.geometry.parameters.radialSegments!==s){if(!y.hasOwnProperty(i)){var c=new se.CylinderBufferGeometry(a,a,1,s,1,!1);c[ue]((new se.Matrix4).makeTranslation(0,.5,0)),c[ue]((new se.Matrix4).makeRotationX(Math.PI/2)),y[i]=c}r.geometry.dispose(),r.geometry=y[i]}}var l=f(n);if(l)r.material=l;else{var u=g(n),h=new se.Color(re(u||"#f0f0f0")),d=e.linkOpacity*ie(u),p=o?"MeshLambertMaterial":"LineBasicMaterial";if(r.material.type!==p||!r.material.color.equals(h)||r.material.opacity!==d){var v=o?b:w;v.hasOwnProperty(u)||(v[u]=new se[p]({color:h,transparent:d<1,opacity:d,depthWrite:d>=1})),r.material.dispose(),r.material=v[u]}}}}}),e.linkDirectionalArrowLength||t.hasOwnProperty("linkDirectionalArrowLength")){var E=Object(p.default)(e.linkDirectionalArrowLength),k=Object(p.default)(e.linkDirectionalArrowColor);ne(x.filter(E),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(e){return"arrow"===e.__linkThreeObjType},createObj:function(){var e=new se.Mesh(void 0,new se.MeshLambertMaterial({transparent:!0}));return e.__linkThreeObjType="arrow",e},updateObj:function(t,n){var r=E(n),i=e.linkDirectionalArrowResolution;if("ConeBufferGeometry"!==t.geometry.type||t.geometry.parameters.height!==r||t.geometry.parameters.radialSegments!==i){var o=new se.ConeBufferGeometry(.25*r,r,i);o.translate(0,r/2,0),o.rotateX(Math.PI/2),t.geometry.dispose(),t.geometry=o}t.material.color=new se.Color(k(n)||g(n)||"#f0f0f0"),t.material.opacity=3*e.linkOpacity}})}if(e.linkDirectionalParticles||t.hasOwnProperty("linkDirectionalParticles")){var _=Object(p.default)(e.linkDirectionalParticles),T=Object(p.default)(e.linkDirectionalParticleWidth),O=Object(p.default)(e.linkDirectionalParticleColor),A={},C={};ne(x.filter(_),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(e){return"photons"===e.__linkThreeObjType},createObj:function(){var e=new se.Group;return e.__linkThreeObjType="photons",e},updateObj:function(t,n){var r,i=Math.round(Math.abs(_(n))),o=!!t.children.length&&t.children[0],a=Math.ceil(10*T(n))/10/2,s=e.linkDirectionalParticleResolution;o&&o.geometry.parameters.radius===a&&o.geometry.parameters.widthSegments===s?r=o.geometry:(C.hasOwnProperty(a)||(C[a]=new se.SphereBufferGeometry(a,s,s)),r=C[a],o&&o.geometry.dispose());var c,l=O(n)||g(n)||"#f0f0f0",u=new se.Color(re(l)),h=3*e.linkOpacity;o&&o.material.color.equals(u)&&o.material.opacity===h?c=o.material:(A.hasOwnProperty(l)||(A[l]=new se.MeshLambertMaterial({color:u,transparent:!0,opacity:h})),c=A[l],o&&o.material.dispose()),ne(Q(new Array(i)).map((function(e,t){return{idx:t}})),t,{idAccessor:function(e){return e.idx},createObj:function(){return new se.Mesh(r,c)},updateObj:function(e){e.geometry=r,e.material=c}})}})}}if(e._flushObjects=!1,n(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach((function(t){t.source=t[e.linkSource],t.target=t[e.linkTarget]}));var S,j="ngraph"!==e.forceEngine;if(j){(S=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var R=e.d3ForceLayout.force("link");R&&R.id((function(t){return t[e.nodeId]})).links(e.graphData.links);var M=e.dagMode&&function(e,t){var n=e.nodes,r=e.links,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.nodeFilter,a=void 0===o?function(){return!0}:o,s=i.onLoopError,c=void 0===s?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:s,l={};n.forEach((function(e){return l[t(e)]={data:e,out:[],depth:-1,skip:!a(e)}})),r.forEach((function(e){var n=e.source,r=e.target,i=c(n),o=c(r);if(!l.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!l.hasOwnProperty(o))throw"Missing target node with id: ".concat(o);var a=l[i],s=l[o];function c(e){return"object"===L(e)?t(e):e}a.out.push(s)}));var u=[];d(Object.values(l));var h=Object.assign.apply(Object,[{}].concat(Q(Object.entries(l).filter((function(e){return!Z(e,2)[1].skip})).map((function(e){var t=Z(e,2);return z({},t[0],t[1].depth)})))));return h;function d(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0,o=e.length;i<o;i++){var a=e[i];if(-1!==n.indexOf(a)){var s=function(){var e=[].concat(Q(n.slice(n.indexOf(a))),[a]).map((function(e){return t(e.data)}));return u.some((function(t){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}))||(u.push(e),c(e)),"continue"}();if("continue"===s)continue}r>a.depth&&(a.depth=r,d(a.out,[].concat(Q(n),[a]),r+(a.skip?0:1)))}}}(e.graphData,(function(t){return t[e.nodeId]}),{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),D=Math.max.apply(Math,Q(Object.values(M||[]))),P=e.dagLevelDistance||e.graphData.nodes.length/(D||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(e.dagMode){var N=function(t,n){return function(r){return t?(M[r[e.nodeId]]-D/2)*P*(n?-1:1):void 0}},I=N(-1!==["lr","rl"].indexOf(e.dagMode),"rl"===e.dagMode),H=N(-1!==["td","bu"].indexOf(e.dagMode),"td"===e.dagMode),B=N(-1!==["zin","zout"].indexOf(e.dagMode),"zout"===e.dagMode);e.graphData.nodes.filter(e.dagNodeFilter).forEach((function(e){e.fx=I(e),e.fy=H(e),e.fz=B(e)}))}e.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?Object(c.a)((function(t){var n=M[t[e.nodeId]]||-1;return("radialin"===e.dagMode?D-n:n)*P})).strength((function(t){return e.dagNodeFilter(t)?1:0})):null)}else{var U=ce.graph();e.graphData.nodes.forEach((function(t){U.addNode(t[e.nodeId])})),e.graphData.links.forEach((function(e){U.addLink(e.source,e.target)})),(S=ce.forcelayout(U,F({dimensions:e.numDimensions},e.ngraphPhysics))).graph=U}for(var V=0;V<e.warmupTicks&&!(j&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);V++)S[j?"tick":"step"]();e.layout=S,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}}),(window.THREE?window.THREE:{Group:r.m}).Group,!0);t.default=he},kyDf:function(e,t){e.exports.Primitive=AFRAME.registerPrimitive("a-ocean",{defaultComponents:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",amplitude:"ocean.amplitude",amplitudeVariance:"ocean.amplitudeVariance",speed:"ocean.speed",speedVariance:"ocean.speedVariance",color:"ocean.color",opacity:"ocean.opacity"}}),e.exports.Component=AFRAME.registerComponent("ocean",{schema:{width:{default:10,min:0},depth:{default:10,min:0},density:{default:10},amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:1},speedVariance:{default:2},color:{default:"#7AD2F7",type:"color"},opacity:{default:.8}},play:function(){var e=this.el,t=this.data,n=e.components.material,r=new THREE.PlaneGeometry(t.width,t.depth,t.density,t.density);r.mergeVertices(),this.waves=[];for(var i,o=0,a=r.vertices.length;o<a;o++)i=r.vertices[o],this.waves.push({z:i.z,ang:Math.random()*Math.PI*2,amp:t.amplitude+Math.random()*t.amplitudeVariance,speed:(t.speed+Math.random()*t.speedVariance)/1e3});n||((n={}).material=new THREE.MeshPhongMaterial({color:t.color,transparent:t.opacity<1,opacity:t.opacity,shading:THREE.FlatShading})),this.mesh=new THREE.Mesh(r,n.material),e.setObject3D("mesh",this.mesh)},remove:function(){this.el.removeObject3D("mesh")},tick:function(e,t){if(t){for(var n,r,i=this.mesh.geometry.vertices,o=0;n=i[o];o++)r=this.waves[o],n.z=r.z+Math.sin(r.ang)*r.amp,r.ang+=r.speed*t;this.mesh.geometry.verticesNeedUpdate=!0}}})},lUvq:function(e,t,n){var r=n("KNlp"),i=n("IBWK");function o(e){var t=r(e),n=Math.pow(2,e);return"\n".concat("\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n","\n").concat("\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n".concat(o("  this."),"\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ").concat(t("this.mass_{var} = 0;",{indent:2}),"\n\n  // bounding box coordinates\n  ").concat(t("this.min_{var} = 0;",{indent:2}),"\n  ").concat(t("this.max_{var} = 0;",{indent:2}),"\n}\n"),"\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n").concat(o("      node."),"\n      node.body = null;\n      node.mass = ").concat(t("node.mass_{var} = ",{join:""}),"0;\n      ").concat(t("node.min_{var} = node.max_{var} = ",{join:""}),"0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ").concat(t("var d{var};",{indent:4}),"\n    var r; \n    ").concat(t("var f{var} = 0;",{indent:4}),"\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ").concat(t("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8}),"\n        r = Math.sqrt(").concat(t("d{var} * d{var}",{join:" + "}),");\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ").concat(t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10}),"\n          r = Math.sqrt(").concat(t("d{var} * d{var}",{join:" + "}),");\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ").concat(t("f{var} += v * d{var};",{indent:8}),"\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ").concat(t("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8}),"\n        r = Math.sqrt(").concat(t("d{var} * d{var}",{join:" + "}),");\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ").concat(t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10}),"\n          r = Math.sqrt(").concat(t("d{var} * d{var}",{join:" + "}),");\n        }\n        // If s / r < θ, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_").concat(i(0)," - node.min_").concat(i(0),") / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ").concat(t("f{var} += v * d{var};",{indent:10}),"\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n").concat(function(){for(var e=Array(11).join(" "),t=[],r=0;r<n;++r)t.push(e+"if (node.quad".concat(r,") {")),t.push(e+"  queue[pushIdx] = node.quad".concat(r,";")),t.push(e+"  queueLength += 1;"),t.push(e+"  pushIdx += 1;"),t.push(e+"}");return t.join("\n")}(),"\n        }\n      }\n    }\n\n    ").concat(t("sourceBody.force.{var} += f{var};",{indent:4}),"\n  }\n\n  function insertBodies(bodies) {\n    ").concat(t("var {var}min = Number.MAX_VALUE;",{indent:4}),"\n    ").concat(t("var {var}max = Number.MIN_VALUE;",{indent:4}),"\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ").concat(t("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6}),"\n      ").concat(t("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6}),"\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ").concat(t("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4}),"\n\n    currentInCache = 0;\n    root = newNode();\n    ").concat(t("root.min_{var} = {var}min;",{indent:4}),"\n    ").concat(t("root.max_{var} = {var}min + maxSideLength;",{indent:4}),"\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ").concat(t("var {var} = body.pos.{var};",{indent:8}),"\n        node.mass += body.mass;\n        ").concat(t("node.mass_{var} += body.mass * {var};",{indent:8}),"\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ").concat(t("var min_{var} = node.min_{var};",{indent:8}),"\n        ").concat(t("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8}),"\n\n").concat(function(t){for(var n=[],r=Array(t+1).join(" "),o=0;o<e;++o)n.push(r+"if (".concat(i(o)," > max_").concat(i(o),") {")),n.push(r+"  quadIdx = quadIdx + ".concat(Math.pow(2,o),";")),n.push(r+"  min_".concat(i(o)," = max_").concat(i(o),";")),n.push(r+"  max_".concat(i(o)," = node.max_").concat(i(o),";")),n.push(r+"}");return n.join("\n")}(8),"\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ").concat(t("child.min_{var} = min_{var};",{indent:10}),"\n          ").concat(t("child.max_{var} = max_{var};",{indent:10}),"\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ").concat(t("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12}),"\n\n            ").concat(t("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12}),"\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\n\nfunction getChild(node, idx) {\n").concat(function(){for(var e=[],t=0;t<n;++t)e.push("  if (idx === ".concat(t,") return node.quad").concat(t,";"));return e.join("\n")}(),"\n  return null;\n}\n\nfunction setChild(node, idx, child) {\n").concat(function(){for(var e=[],t=0;t<n;++t){var r=0===t?"  ":"  else ";e.push("".concat(r,"if (idx === ").concat(t,") node.quad").concat(t," = child;"))}return e.join("\n")}(),"\n}\n\nfunction isSamePosition(point1, point2) {\n  ").concat(t("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2}),"\n\n  return ").concat(t("d{var} < 1e-8",{join:" && "}),";\n}\n\nreturn createQuadTree;\n\n");function o(e){for(var t=[],r=0;r<n;++r)t.push("".concat(e,"quad").concat(r," = null;"));return t.join("\n")}}e.exports=function(e){var t=o(e);return new Function(t)()},e.exports.generateQuadTreeFunctionBody=o},mRFy:function(e,t,n){n("QHZA"),n("oRDu"),n("3q1R"),n("skem"),n("4/OP")},mUZr:function(e,t,n){"use strict";n("E9XD");function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=(t instanceof Array?t.length?t:[void 0]:[t]).map((function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}})),l=e.reduce((function(e,t){var i=e,o=t;return c.forEach((function(e,t){var s,l=e.keyAccessor;if(e.isProp){var u=o,h=u[l],d=r(u,[l].map(a));s=h,o=d}else s=l(o,t);t+1<c.length?(i.hasOwnProperty(s)||(i[s]={}),i=i[s]):n?(i.hasOwnProperty(s)||(i[s]=[]),i[s].push(o)):i[s]=o})),e}),{});n instanceof Function&&function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===c.length?Object.keys(t).forEach((function(e){return t[e]=n(t[e])})):Object.values(t).forEach((function(t){return e(t,r+1)}))}(l);var u=l;return s&&(u=[],function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===c.length?u.push({keys:n,vals:t}):Object.entries(t).forEach((function(t){var r=i(t,2),a=r[0],s=r[1];return e(s,[].concat(o(n),[a]))}))}(l),t instanceof Array&&0===t.length&&1===u.length&&(u[0].keys=[])),u}},miPP:function(e,t,n){n("E9XD");var r=n("HsiO"),i=n("+YAX");e.exports=function(e){return i(e).reduce((function(e,t){var n=r(t,2),i=n[0],o=n[1];return e[i]=o,e}),{})}},mvZv:function(e,t,n){n("EIId"),n("FN59"),n("EyK7")},oRDu:function(e,t,n){THREE.ColladaLoader=n("1gda"),e.exports.Component=AFRAME.registerComponent("collada-model-legacy",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new THREE.ColladaLoader},update:function(){var e=this,t=this.el,n=this.data,r=this.el.sceneEl.systems.renderer;n&&(this.remove(),this.loader.load(n,(function(n){e.model=n.scene,e.model.traverse((function(e){if(e.isMesh){var t=e.material;t.color&&r.applyColorCorrection(t.color),t.map&&r.applyColorCorrection(t.map),t.emissive&&r.applyColorCorrection(t.emissive),t.emissiveMap&&r.applyColorCorrection(t.emissiveMap)}})),t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"collada",model:e.model})})))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},oSbB:function(e,t){e.exports=function(e,t,n){this.type=e,this.index=t,this.pressed=n.pressed,this.value=n.value}},p532:function(e,t,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("/qmn"),a=n("0Dky"),s=n("0GbY"),c=n("SEBh"),l=n("zfnd"),u=n("busE");r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),i||"function"!=typeof o||o.prototype.finally||u(o.prototype,"finally",s("Promise").prototype.finally)},"sBL/":function(e,t){function n(e,t,n){var r,i,o,a,s;function c(){var l=Date.now()-a;l<t&&l>=0?r=setTimeout(c,t-l):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var l=function(){o=this,i=arguments,a=Date.now();var l=n&&!r;return r||(r=setTimeout(c,t)),l&&(s=e.apply(o,i),o=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},l}n.debounce=n,e.exports=n},sNXt:function(e,t,n){"use strict";t.a=function(e){return 1e-6*(e()-.5)}},skem:function(e,t,n){var r,i=n("8L4W")(),o=function(){return r=r||i("https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js")};e.exports=AFRAME.registerComponent("gltf-model-legacy",{schema:{type:"model"},init:function(){var e=this;this.model=null,this.loader=null,this.loaderPromise=o().then((function(){e.loader=new THREE.GLTFLoader,e.loader.setCrossOrigin("Anonymous")}))},update:function(){var e=this,t=this,n=this.el,r=this.data;r&&(this.remove(),this.loaderPromise.then((function(){e.loader.load(r,(function(e){t.model=e.scene,t.model.animations=e.animations,n.setObject3D("mesh",t.model),n.emit("model-loaded",{format:"gltf",model:t.model})}))})))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},"u+3c":function(e,t,n){"use strict";var r=n("DHMS"),i=n("sNXt");function o(e){return e.index}function a(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}t.a=function(e){var t,n,s,c,l,u,h,d=o,f=function(e){return 1/Math.min(l[e.source.index],l[e.target.index])},p=Object(r.a)(30),v=1;function g(r){for(var o=0,a=e.length;o<v;++o)for(var s,l,d,f,p,g=0,m=0,y=0,b=0;g<a;++g)l=(s=e[g]).source,m=(d=s.target).x+d.vx-l.x-l.vx||Object(i.a)(h),c>1&&(y=d.y+d.vy-l.y-l.vy||Object(i.a)(h)),c>2&&(b=d.z+d.vz-l.z-l.vz||Object(i.a)(h)),m*=f=((f=Math.sqrt(m*m+y*y+b*b))-n[g])/f*r*t[g],y*=f,b*=f,d.vx-=m*(p=u[g]),c>1&&(d.vy-=y*p),c>2&&(d.vz-=b*p),l.vx+=m*(p=1-p),c>1&&(l.vy+=y*p),c>2&&(l.vz+=b*p)}function m(){if(s){var r,i,o=s.length,c=e.length,h=new Map(s.map((function(e,t){return[d(e,t,s),e]})));for(r=0,l=new Array(o);r<c;++r)(i=e[r]).index=r,"object"!=typeof i.source&&(i.source=a(h,i.source)),"object"!=typeof i.target&&(i.target=a(h,i.target)),l[i.source.index]=(l[i.source.index]||0)+1,l[i.target.index]=(l[i.target.index]||0)+1;for(r=0,u=new Array(c);r<c;++r)i=e[r],u[r]=l[i.source.index]/(l[i.source.index]+l[i.target.index]);t=new Array(c),y(),n=new Array(c),b()}}function y(){if(s)for(var n=0,r=e.length;n<r;++n)t[n]=+f(e[n],n,e)}function b(){if(s)for(var t=0,r=e.length;t<r;++t)n[t]=+p(e[t],t,e)}return null==e&&(e=[]),g.initialize=function(e,t,n){s=e,c=t,h=n,m()},g.links=function(t){return arguments.length?(e=t,m(),g):e},g.id=function(e){return arguments.length?(d=e,g):d},g.iterations=function(e){return arguments.length?(v=+e,g):v},g.strength=function(e){return arguments.length?(f="function"==typeof e?e:Object(r.a)(+e),y(),g):f},g.distance=function(e){return arguments.length?(p="function"==typeof e?e:Object(r.a)(+e),b(),g):p},g}},uTZd:function(e,t,n){"use strict";n.r(t),n.d(t,"Pathfinding",(function(){return v}));var r=function(){};r.computeCentroids=function(e){var t,n,r;for(t=0,n=e.faces.length;t<n;t++)(r=e.faces[t]).centroid=new THREE.Vector3(0,0,0),r.centroid.add(e.vertices[r.a]),r.centroid.add(e.vertices[r.b]),r.centroid.add(e.vertices[r.c]),r.centroid.divideScalar(3)},r.roundNumber=function(e,t){return Number(e.toFixed(t))},r.sample=function(e){return e[Math.floor(Math.random()*e.length)]},r.mergeVertexIds=function(e,t){var n=[];if(e.forEach((function(e){t.indexOf(e)>=0&&n.push(e)})),n.length<2)return[];n.includes(e[0])&&n.includes(e[e.length-1])&&e.push(e.shift()),n.includes(t[0])&&n.includes(t[t.length-1])&&t.push(t.shift()),n=[],e.forEach((function(e){t.includes(e)&&n.push(e)}));for(var r=n[1],i=n[0],o=e.slice();o[0]!==r;)o.push(o.shift());for(var a=0,s=t.slice();s[0]!==i;)if(s.push(s.shift()),a++>10)throw new Error("Unexpected state");return s.shift(),s.pop(),o.concat(s)},r.setPolygonCentroid=function(e,t){var n=new THREE.Vector3,r=t.vertices;e.vertexIds.forEach((function(e){n.add(r[e])})),n.divideScalar(e.vertexIds.length),e.centroid.copy(n)},r.cleanPolygon=function(e,t){for(var n=[],r=t.vertices,i=0;i<e.vertexIds.length;i++){var o,a,s,c=r[e.vertexIds[i]];0===i?(o=e.vertexIds[1],a=e.vertexIds[e.vertexIds.length-1]):i===e.vertexIds.length-1?(o=e.vertexIds[0],a=e.vertexIds[e.vertexIds.length-2]):(o=e.vertexIds[i+1],a=e.vertexIds[i-1]),s=r[a];var l=r[o].clone().sub(c),u=s.clone().sub(c),h=l.angleTo(u);if(h>Math.PI-.01&&h<Math.PI+.01){var d=[];e.neighbours.forEach((function(t){t.vertexIds.includes(e.vertexIds[i])||d.push(t)})),e.neighbours=d}else n.push(e.vertexIds[i])}e.vertexIds=n,this.setPolygonCentroid(e,t)},r.isConvex=function(e,t){var n=t.vertices;if(e.vertexIds.length<3)return!1;for(var r=!0,i=[],o=0;o<e.vertexIds.length;o++){var a,s,c=n[e.vertexIds[o]];0===o?(a=n[e.vertexIds[1]],s=n[e.vertexIds[e.vertexIds.length-1]]):o===e.vertexIds.length-1?(a=n[e.vertexIds[0]],s=n[e.vertexIds[e.vertexIds.length-2]]):(a=n[e.vertexIds[o+1]],s=n[e.vertexIds[o-1]]);var l=a.clone().sub(c),u=s.clone().sub(c),h=l.angleTo(u);if(h===Math.PI||0===h)return!1;var d=l.cross(u).y;i.push(d)}return i.forEach((function(e){0===e&&(r=!1)})),i.forEach(i[0]>0?function(e){e<0&&(r=!1)}:function(e){e>0&&(r=!1)}),r},r.distanceToSquared=function(e,t){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return n*n+r*r+i*i},r.isPointInPoly=function(e,t){for(var n=!1,r=-1,i=e.length,o=i-1;++r<i;o=r)(e[r].z<=t.z&&t.z<e[o].z||e[o].z<=t.z&&t.z<e[r].z)&&t.x<(e[o].x-e[r].x)*(t.z-e[r].z)/(e[o].z-e[r].z)+e[r].x&&(n=!n);return n},r.isVectorInPolygon=function(e,t,n){var r=1e5,i=-1e5,o=[];return t.vertexIds.forEach((function(e){r=Math.min(n[e].y,r),i=Math.max(n[e].y,i),o.push(n[e])})),!!(e.y<i+.5&&e.y>r-.5&&this.isPointInPoly(o,e))},r.triarea2=function(e,t,n){return(n.x-e.x)*(t.z-e.z)-(t.x-e.x)*(n.z-e.z)},r.vequal=function(e,t){return this.distanceToSquared(e,t)<1e-5};var i=function(e){this.content=[],this.scoreFunction=e};i.prototype.push=function(e){this.content.push(e),this.sinkDown(this.content.length-1)},i.prototype.pop=function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},i.prototype.remove=function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},i.prototype.size=function(){return this.content.length},i.prototype.rescoreElement=function(e){this.sinkDown(this.content.indexOf(e))},i.prototype.sinkDown=function(e){for(var t=this.content[e];e>0;){var n=(e+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},i.prototype.bubbleUp=function(e){for(var t=this.content.length,n=this.content[e],r=this.scoreFunction(n);;){var i=e+1<<1,o=i-1,a=null,s=void 0;if(o<t&&(s=this.scoreFunction(this.content[o]))<r&&(a=o),i<t&&this.scoreFunction(this.content[i])<(null===a?r:s)&&(a=i),null===a)break;this.content[e]=this.content[a],this.content[a]=n,e=a}};var o=function(){};o.init=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.f=0,n.g=0,n.h=0,n.cost=1,n.visited=!1,n.closed=!1,n.parent=null}},o.cleanUp=function(e){for(var t=0;t<e.length;t++){var n=e[t];delete n.f,delete n.g,delete n.h,delete n.cost,delete n.visited,delete n.closed,delete n.parent}},o.heap=function(){return new i((function(e){return e.f}))},o.search=function(e,t,n){this.init(e);var r=this.heap();for(r.push(t);r.size()>0;){var i=r.pop();if(i===n){for(var o=i,a=[];o.parent;)a.push(o),o=o.parent;return this.cleanUp(a),a.reverse()}i.closed=!0;for(var s=this.neighbours(e,i),c=0,l=s.length;c<l;c++){var u=s[c];if(!u.closed){var h=i.g+u.cost,d=u.visited;if(!d||h<u.g){if(u.visited=!0,u.parent=i,!u.centroid||!n.centroid)throw new Error("Unexpected state");u.h=u.h||this.heuristic(u.centroid,n.centroid),u.g=h,u.f=u.g+u.h,d?r.rescoreElement(u):r.push(u)}}}}return[]},o.heuristic=function(e,t){return r.distanceToSquared(e,t)},o.neighbours=function(e,t){for(var n=[],r=0;r<t.neighbours.length;r++)n.push(e[t.neighbours[r]]);return n};var a=1,s=function(){};s.buildZone=function(e){var t=this,n=this._buildNavigationMesh(e),i={};n.vertices.forEach((function(e){e.x=r.roundNumber(e.x,2),e.y=r.roundNumber(e.y,2),e.z=r.roundNumber(e.z,2)})),i.vertices=n.vertices;var o=this._buildPolygonGroups(n);i.groups=[];var a=function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return n};return o.forEach((function(e){var n=[];e.forEach((function(i){var o=i.neighbours.map((function(t){return a(e,t)})),s=i.neighbours.map((function(e){return t._getSharedVerticesInOrder(i,e)}));i.centroid.x=r.roundNumber(i.centroid.x,2),i.centroid.y=r.roundNumber(i.centroid.y,2),i.centroid.z=r.roundNumber(i.centroid.z,2),n.push({id:a(e,i),neighbours:o,vertexIds:i.vertexIds,centroid:i.centroid,portals:s})})),i.groups.push(n)})),i},s._buildNavigationMesh=function(e){return r.computeCentroids(e),e.mergeVertices(),this._buildPolygonsFromGeometry(e)},s._buildPolygonGroups=function(e){var t=[],n=0;return e.polygons.forEach((function(e){void 0===e.group&&(e.group=n++,function e(t){t.neighbours.forEach((function(n){void 0===n.group&&(n.group=t.group,e(n))}))}(e)),t[e.group]||(t[e.group]=[]),t[e.group].push(e)})),t},s._buildPolygonNeighbours=function(e,t,n){var r=new Set,i=n.get(e.vertexIds[0]),o=n.get(e.vertexIds[1]),a=n.get(e.vertexIds[2]);i.forEach((function(e){(o.has(e)||a.has(e))&&r.add(t.polygons[e])})),o.forEach((function(e){a.has(e)&&r.add(t.polygons[e])})),e.neighbours=Array.from(r)},s._buildPolygonsFromGeometry=function(e){for(var t=this,n=[],r=e.vertices,i=e.faceVertexUvs,o=new Map,s=0;s<r.length;s++)o.set(s,new Set);e.faces.forEach((function(e){n.push({id:a++,vertexIds:[e.a,e.b,e.c],centroid:e.centroid,normal:e.normal,neighbours:[]}),o.get(e.a).add(n.length-1),o.get(e.b).add(n.length-1),o.get(e.c).add(n.length-1)}));var c={polygons:n,vertices:r,faceVertexUvs:i};return n.forEach((function(e){t._buildPolygonNeighbours(e,c,o)})),c},s._getSharedVerticesInOrder=function(e,t){var n=e.vertexIds,r=t.vertexIds,i=new Set;if(n.forEach((function(e){r.includes(e)&&i.add(e)})),i.size<2)return[];i.has(n[0])&&i.has(n[n.length-1])&&n.push(n.shift()),i.has(r[0])&&i.has(r[r.length-1])&&r.push(r.shift());var o=[];return n.forEach((function(e){r.includes(e)&&o.push(e)})),o};var c=function(){this.portals=[]};c.prototype.push=function(e,t){void 0===t&&(t=e),this.portals.push({left:e,right:t})},c.prototype.stringPull=function(){var e,t,n,i=this.portals,o=[],a=0,s=0,c=0;t=i[0].left,n=i[0].right,o.push(e=i[0].left);for(var l=1;l<i.length;l++){var u=i[l].left,h=i[l].right;if(r.triarea2(e,n,h)<=0){if(!(r.vequal(e,n)||r.triarea2(e,t,h)>0)){o.push(t),t=e=t,n=e,s=a=s,c=a,l=a;continue}n=h,c=l}if(r.triarea2(e,t,u)>=0){if(!(r.vequal(e,t)||r.triarea2(e,n,u)<0)){o.push(n),t=e=n,n=e,s=a=c,c=a,l=a;continue}t=u,s=l}}return 0!==o.length&&r.vequal(o[o.length-1],i[i.length-1].left)||o.push(i[i.length-1].left),this.path=o,o};var l,u,h,d,f,p,v=function(){this.zones={}};v.createZone=function(e){return s.buildZone(e)},v.prototype.setZoneData=function(e,t){this.zones[e]=t},v.prototype.getGroup=function(e,t){if(!this.zones[e])return null;var n=null,i=Math.pow(50,2);return this.zones[e].groups.forEach((function(e,o){e.forEach((function(e){var a=r.distanceToSquared(e.centroid,t);a<i&&(n=o,i=a)}))})),n},v.prototype.getRandomNode=function(e,t,n,i){if(!this.zones[e])return new THREE.Vector3;n=n||null,i=i||0;var o=[];return this.zones[e].groups[t].forEach((function(e){n&&i?r.distanceToSquared(n,e.centroid)<i*i&&o.push(e.centroid):o.push(e.centroid)})),r.sample(o)||new THREE.Vector3},v.prototype.getClosestNode=function(e,t,n,i){void 0===i&&(i=!1);var o=this.zones[t].vertices,a=null,s=1/0;return this.zones[t].groups[n].forEach((function(t){var n=r.distanceToSquared(t.centroid,e);n<s&&(!i||r.isVectorInPolygon(e,t,o))&&(a=t,s=n)})),a},v.prototype.findPath=function(e,t,n,r){var i=this.zones[n].groups[r],a=this.zones[n].vertices,s=this.getClosestNode(e,n,r),l=this.getClosestNode(t,n,r,!0);if(!s||!l)return null;var u=o.search(i,s,l),h=function(e,t){for(var n=0;n<e.neighbours.length;n++)if(e.neighbours[n]===t.id)return e.portals[n]},d=new c;d.push(e);for(var f=0;f<u.length;f++){var p=u[f+1];if(p){var v=h(u[f],p);d.push(a[v[0]],a[v[1]])}}d.push(t),d.stringPull();var g=d.path.map((function(e){return new THREE.Vector3(e.x,e.y,e.z)}));return g.shift(),g},v.prototype.clampStep=(h=new THREE.Vector3,d=new THREE.Plane,f=new THREE.Triangle,p=new THREE.Vector3,function(e,t,n,r,i,o){var a=this.zones[r].vertices,s=this.zones[r].groups[i],c=[n],v={};v[n.id]=0,l=void 0,p.set(0,0,0),u=1/0,d.setFromCoplanarPoints(a[n.vertexIds[0]],a[n.vertexIds[1]],a[n.vertexIds[2]]),d.projectPoint(t,h),t.copy(h);for(var g=c.pop();g;g=c.pop()){f.set(a[g.vertexIds[0]],a[g.vertexIds[1]],a[g.vertexIds[2]]),f.closestPointToPoint(t,h),h.distanceToSquared(t)<u&&(l=g,p.copy(h),u=h.distanceToSquared(t));var m=v[g];if(!(m>2))for(var y=0;y<g.neighbours.length;y++){var b=s[g.neighbours[y]];b.id in v||(c.push(b),v[b.id]=m+1)}}return o.copy(p),l})},vPw2:function(e,t,n){var r=n("KNlp");function i(e){var t=r(e);return"\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ".concat(t("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6}),"\n      var r = Math.sqrt(").concat(t("d{var} * d{var}",{join:" + "}),");\n\n      if (r === 0) {\n        ").concat(t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8}),"\n        r = Math.sqrt(").concat(t("d{var} * d{var}",{join:" + "}),");\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ").concat(t("body1.force.{var} += coefficient * d{var}",{indent:6}),";\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ").concat(t("body2.force.{var} -= coefficient * d{var}",{indent:6}),";\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n")}e.exports=function(e){var t=i(e);return new Function("options","random",t)},e.exports.generateCreateSpringForceFunctionBody=i},"x/eb":function(e,t,n){"use strict";var r=n("DHMS");t.a=function(e,t,n,i){var o,a,s,c,l=Object(r.a)(.1);function u(e){for(var r=0,l=o.length;r<l;++r){var u=o[r],h=u.x-t||1e-6,d=(u.y||0)-n||1e-6,f=(u.z||0)-i||1e-6,p=Math.sqrt(h*h+d*d+f*f),v=(c[r]-p)*s[r]*e/p;u.vx+=h*v,a>1&&(u.vy+=d*v),a>2&&(u.vz+=f*v)}}function h(){if(o){var t,n=o.length;for(s=new Array(n),c=new Array(n),t=0;t<n;++t)c[t]=+e(o[t],t,o),s[t]=isNaN(c[t])?0:+l(o[t],t,o)}}return"function"!=typeof e&&(e=Object(r.a)(+e)),null==t&&(t=0),null==n&&(n=0),null==i&&(i=0),u.initialize=function(e,t){o=e,a=t,h()},u.strength=function(e){return arguments.length?(l="function"==typeof e?e:Object(r.a)(+e),h(),u):l},u.radius=function(t){return arguments.length?(e="function"==typeof t?t:Object(r.a)(+t),h(),u):e},u.x=function(e){return arguments.length?(t=+e,u):t},u.y=function(e){return arguments.length?(n=+e,u):n},u.z=function(e){return arguments.length?(i=+e,u):i},u}},xlRs:function(e,t){e.exports=AFRAME.registerComponent("trackpad-controls",{schema:{enabled:{default:!0},enableNegX:{default:!0},enablePosX:{default:!0},enableNegZ:{default:!0},enablePosZ:{default:!0},mode:{default:"touch",oneOf:["swipe","touch","press"]}},init:function(){this.dVelocity=new THREE.Vector3,this.zVel=0,this.xVel=0,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){var e=this.data,t=this.el.sceneEl;switch(t.addEventListener("axismove",this.onAxisMove),e.mode){case"swipe":case"touch":t.addEventListener("trackpadtouchstart",this.onTouchStart),t.addEventListener("trackpadtouchend",this.onTouchEnd);break;case"press":t.addEventListener("trackpaddown",this.onTouchStart),t.addEventListener("trackpadup",this.onTouchEnd)}},removeEventListeners:function(){var e=this.el.sceneEl;e.removeEventListener("axismove",this.onAxisMove),e.removeEventListener("trackpadtouchstart",this.onTouchStart),e.removeEventListener("trackpadtouchend",this.onTouchEnd),e.removeEventListener("trackpaddown",this.onTouchStart),e.removeEventListener("trackpadup",this.onTouchEnd)},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-this.zVel:1,this.dVelocity.x=this.isMoving?this.xVel:1,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onAxisMove=this.onAxisMove.bind(this)},onTouchStart:function(e){switch(this.data.mode){case"swipe":this.canRecordAxis=!0,this.startingAxisData=[];break;case"touch":case"press":this.isMoving=!0}e.preventDefault()},onTouchEnd:function(e){"swipe"==this.data.mode&&(this.startingAxisData=[]),this.isMoving=!1,e.preventDefault()},onAxisMove:function(e){switch(this.data.mode){case"swipe":return this.handleSwipeAxis(e);case"touch":case"press":return this.handleTouchAxis(e)}},handleSwipeAxis:function(e){var t=this.data,n=e.detail.axis;if(0===this.startingAxisData.length&&this.canRecordAxis&&(this.canRecordAxis=!1,this.startingAxisData[0]=n[0],this.startingAxisData[1]=n[1]),this.startingAxisData.length>0){var r=0,i=0;t.enableNegX&&n[0]<this.startingAxisData[0]&&(r=-1),t.enablePosX&&n[0]>this.startingAxisData[0]&&(r=1),t.enablePosZ&&n[1]>this.startingAxisData[1]&&(i=-1),t.enableNegZ&&n[1]<this.startingAxisData[1]&&(i=1);var o=Math.abs(this.startingAxisData[1]-n[1]);Math.abs(this.startingAxisData[0]-n[0])>o?(this.zVel=0,this.xVel=r,this.isMoving=!0):(this.xVel=0,this.zVel=i,this.isMoving=!0)}},handleTouchAxis:function(e){var t=this.data,n=e.detail.axis,r=0,i=0;t.enableNegX&&n[0]<0&&(r=-1),t.enablePosX&&n[0]>0&&(r=1),t.enablePosZ&&n[1]>0&&(i=-1),t.enableNegZ&&n[1]<0&&(i=1),Math.abs(n[0])>Math.abs(n[1])?(this.zVel=0,this.xVel=r):(this.xVel=0,this.zVel=i)}})},y3EA:function(e,n){var r=e.exports={VERSION:"0.1.1",PI:Math.PI,TAU:2*Math.PI,DEG_TO_RAD:.0174532925,RAD_TO_DEG:57.2957795,SQRT3:Math.sqrt(3),TILE:"tile",ENT:"entity",STR:"structure",HEX:"hex",SQR:"square",ABS:"abstract"};r.Board=function(e,t){if(!e)throw new Error("You must pass in a grid system for the board to use.");this.tiles=[],this.tileGroup=null,this.group=new THREE.Object3D,this.grid=null,this.overlay=null,this.finder=new r.AStarFinder(t),r.Loader.init(),this.setGrid(e)},r.Board.prototype={setEntityOnTile:function(e,t){var n=this.grid.cellToPixel(t.cell);e.position.copy(n),e.position.y+=e.heightOffset||0,e.tile&&(e.tile.entity=null),e.tile=t,t.entity=e},addTile:function(e){-1===this.tiles.indexOf(e)&&(this.tiles.push(e),this.snapTileToGrid(e),e.position.y=0,this.tileGroup.add(e.mesh),this.grid.add(e.cell),e.cell.tile=e)},removeTile:function(e){if(e){var t=this.tiles.indexOf(e);this.grid.remove(e.cell),-1!==t&&this.tiles.splice(t,1),e.dispose()}},removeAllTiles:function(){if(this.tileGroup)for(var e=this.tileGroup.children,t=0;t<e.length;t++)this.tileGroup.remove(e[t])},getTileAtCell:function(e){var t=this.grid.cellToHash(e);return e.tile||(void 0!==this.grid.cells[t]?this.grid.cells[t].tile:null)},snapToGrid:function(e){var t=this.grid.pixelToCell(e);e.copy(this.grid.cellToPixel(t))},snapTileToGrid:function(e){if(e.cell)e.position.copy(this.grid.cellToPixel(e.cell));else{var t=this.grid.pixelToCell(e.position);e.position.copy(this.grid.cellToPixel(t))}return e},getRandomTile:function(){var e=r.Tools.randomInt(0,this.tiles.length-1);return this.tiles[e]},findPath:function(e,t,n){return this.finder.findPath(e.cell,t.cell,n,this.grid)},setGrid:function(e){this.group.remove(this.tileGroup),this.grid&&e!==this.grid&&(this.removeAllTiles(),this.tiles.forEach((function(e){this.grid.remove(e.cell),e.dispose()})),this.grid.dispose()),this.grid=e,this.tiles=[],this.tileGroup=new THREE.Object3D,this.group.add(this.tileGroup)},generateOverlay:function(e){var t=new THREE.LineBasicMaterial({color:0,opacity:.3});this.overlay&&this.group.remove(this.overlay),this.overlay=new THREE.Object3D,this.grid.generateOverlay(e,this.overlay,t),this.group.add(this.overlay)},generateTilemap:function(e){this.reset();var t=this.grid.generateTiles(e);this.tiles=t,this.tileGroup=new THREE.Object3D;for(var n=0;n<t.length;n++)this.tileGroup.add(t[n].mesh);this.group.add(this.tileGroup)},reset:function(){this.removeAllTiles(),this.tileGroup&&this.group.remove(this.tileGroup)}},r.Board.prototype.constructor=r.Board,r.Cell=function(e,t,n,i){this.q=e||0,this.r=t||0,this.s=n||0,this.h=i||1,this.tile=null,this.userData={},this.walkable=!0,this._calcCost=0,this._priority=0,this._visited=!1,this._parent=null,this.uniqueID=r.LinkedList.generateID()},r.Cell.prototype={set:function(e,t,n){return this.q=e,this.r=t,this.s=n,this},copy:function(e){return this.q=e.q,this.r=e.r,this.s=e.s,this.h=e.h,this.tile=e.tile||null,this.userData=e.userData||{},this.walkable=e.walkable,this},add:function(e){return this.q+=e.q,this.r+=e.r,this.s+=e.s,this},equals:function(e){return this.q===e.q&&this.r===e.r&&this.s===e.s}},r.Cell.prototype.constructor=r.Cell,r.HexGrid=function(e){e=e||{},this.type=r.HEX,this.size=5,this.cellSize=void 0===e.cellSize?10:e.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var t,n=[];for(t=0;6>t;t++)n.push(this._createVertex(t));for(this.cellShape=new THREE.Shape,this.cellShape.moveTo(n[0].x,n[0].y),t=1;6>t;t++)this.cellShape.lineTo(n[t].x,n[t].y);this.cellShape.lineTo(n[0].x,n[0].y),this.cellShape.autoClose=!0,this.cellGeo=new THREE.Geometry,this.cellGeo.vertices=n,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape),this._cellWidth=2*this.cellSize,this._cellLength=.5*r.SQRT3*this._cellWidth,this._hashDelimeter=".",this._directions=[new r.Cell(1,-1,0),new r.Cell(1,0,-1),new r.Cell(0,1,-1),new r.Cell(-1,1,0),new r.Cell(-1,0,1),new r.Cell(0,-1,1)],this._diagonals=[new r.Cell(2,-1,-1),new r.Cell(1,1,-2),new r.Cell(-1,2,-1),new r.Cell(-2,1,1),new r.Cell(-1,-1,2),new r.Cell(1,-2,1)],this._list=[],this._vec3=new THREE.Vector3,this._cel=new r.Cell,this._conversionVec=new THREE.Vector3,this._geoCache=[],this._matCache=[]},r.HexGrid.TWO_THIRDS=2/3,r.HexGrid.prototype={cellToPixel:function(e){return this._vec3.x=e.q*this._cellWidth*.75,this._vec3.y=e.h,this._vec3.z=-(e.s-e.r)*this._cellLength*.5,this._vec3},pixelToCell:function(e){var t=e.x*(r.HexGrid.TWO_THIRDS/this.cellSize),n=(-e.x/3+r.SQRT3/3*e.z)/this.cellSize;return this._cel.set(t,n,-t-n),this._cubeRound(this._cel)},getCellAt:function(e){var t=e.x*(r.HexGrid.TWO_THIRDS/this.cellSize),n=(-e.x/3+r.SQRT3/3*e.z)/this.cellSize;return this._cel.set(t,n,-t-n),this._cubeRound(this._cel),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(e,t,n){var r,i,o=this._directions.length;for(this._list.length=0,r=0;o>r;r++)this._cel.copy(e),this._cel.add(this._directions[r]),!(i=this.cells[this.cellToHash(this._cel)])||n&&!n(e,i)||this._list.push(i);if(t)for(r=0;o>r;r++)this._cel.copy(e),this._cel.add(this._diagonals[r]),!(i=this.cells[this.cellToHash(this._cel)])||n&&!n(e,i)||this._list.push(i);return this._list},getRandomCell:function(){var e,t=0,n=r.Tools.randomInt(0,this.numCells);for(e in this.cells){if(t===n)return this.cells[e];t++}return this.cells[e]},cellToHash:function(e){return e.q+this._hashDelimeter+e.r+this._hashDelimeter+e.s},distance:function(e,t){return Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r),Math.abs(e.s-t.s))+(t.h-e.h)},clearPath:function(){var e,t;for(e in this.cells)(t=this.cells[e])._calcCost=0,t._priority=0,t._parent=null,t._visited=!1},traverse:function(e){var t;for(t in this.cells)e(this.cells[t])},generateTile:function(e,t,n){var i=Math.abs(e.h);1>i&&(i=1);var o=this._geoCache[i];o||(this.extrudeSettings.amount=i,o=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[i]=o);var a=new r.Tile({size:this.cellSize,scale:t,cell:e,geometry:o,material:n});return e.tile=a,a},generateTiles:function(e){e=e||{};var t,n,i,o=[],a={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};for(t in a=r.Tools.merge(a,e),this.cellSize=a.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*r.SQRT3*this._cellWidth,this.autogenerated=!0,this.extrudeSettings=a.extrudeSettings,this.cells)i=this.cells[t],(n=this.generateTile(i,a.tileScale,a.material)).position.copy(this.cellToPixel(i)),n.position.y=0,o.push(n);return o},generateTilePoly:function(e){e||(e=new THREE.MeshBasicMaterial({color:2405631}));var t=new THREE.Mesh(this.cellShapeGeo,e);return this._vec3.set(1,0,0),t.rotateOnAxis(this._vec3,r.PI/2),t},generate:function(e){var t,n,i,o;for(e=e||{},this.size=void 0===e.size?this.size:e.size,t=-this.size;t<this.size+1;t++)for(n=-this.size;n<this.size+1;n++)i=-t-n,Math.abs(t)<=this.size&&Math.abs(n)<=this.size&&Math.abs(i)<=this.size&&(o=new r.Cell(t,n,i),this.add(o))},generateOverlay:function(e,t,n){var i,o,a,s=this.cellShape.createPointsGeometry();for(i=-e;e+1>i;i++)for(o=-e;e+1>o;o++)if(a=-i-o,Math.abs(i)<=e&&Math.abs(o)<=e&&Math.abs(a)<=e){this._cel.set(i,o,a);var c=new THREE.Line(s,n);c.position.copy(this.cellToPixel(this._cel)),c.rotation.x=90*r.DEG_TO_RAD,t.add(c)}},add:function(e){var t=this.cellToHash(e);if(!this.cells[t])return this.cells[t]=e,this.numCells++,e},remove:function(e){var t=this.cellToHash(e);this.cells[t]&&(delete this.cells[t],this.numCells--)},dispose:function(){this.cells=null,this.numCells=0,this.cellShape=null,this.cellGeo.dispose(),this.cellGeo=null,this.cellShapeGeo.dispose(),this.cellShapeGeo=null,this._list=null,this._vec3=null,this._conversionVec=null,this._geoCache=null,this._matCache=null},load:function(e,t,n){var i=this;r.Tools.getJSON({url:e,callback:function(e){i.fromJSON(e),t.call(n||null,e)},cache:!1,scope:i})},fromJSON:function(e){var t,n,i=e.cells;for(this.cells={},this.numCells=0,this.size=e.size,this.cellSize=e.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*r.SQRT3*this._cellWidth,this.extrudeSettings=e.extrudeSettings,this.autogenerated=e.autogenerated,t=0;t<i.length;t++)(n=new r.Cell).copy(i[t]),this.add(n)},toJSON:function(){var e,t,n={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},r=[];for(t in this.cells)e=this.cells[t],r.push({q:e.q,r:e.r,s:e.s,h:e.h,walkable:e.walkable,userData:e.userData});return n.cells=r,n},_createVertex:function(e){var t=r.TAU/6*e;return new THREE.Vector3(this.cellSize*Math.cos(t),this.cellSize*Math.sin(t),0)},_cubeRound:function(e){var t=Math.round(e.q),n=Math.round(e.r),r=Math.round(e.s),i=Math.abs(t-e.q),o=Math.abs(n-e.r),a=Math.abs(r-e.s);return i>o&&i>a?t=-n-r:o>a?n=-t-r:r=-t-n,this._cel.set(t,n,r)}},r.HexGrid.prototype.constructor=r.HexGrid,r.SqrGrid=function(e){e=e||{},this.type=r.SQR,this.size=5,this.cellSize=void 0===e.cellSize?10:e.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var t=[];t.push(new THREE.Vector3),t.push(new THREE.Vector3(-this.cellSize,this.cellSize)),t.push(new THREE.Vector3(this.cellSize,this.cellSize)),t.push(new THREE.Vector3(this.cellSize,-this.cellSize)),this.cellShape=new THREE.Shape,this.cellShape.moveTo(-this.cellSize,-this.cellSize),this.cellShape.lineTo(-this.cellSize,this.cellSize),this.cellShape.lineTo(this.cellSize,this.cellSize),this.cellShape.lineTo(this.cellSize,-this.cellSize),this.cellShape.lineTo(-this.cellSize,-this.cellSize),this.cellGeo=new THREE.Geometry,this.cellGeo.vertices=t,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape),this._fullCellSize=2*this.cellSize,this._hashDelimeter=".",this._directions=[new r.Cell(1,0,0),new r.Cell(0,-1,0),new r.Cell(-1,0,0),new r.Cell(0,1,0)],this._diagonals=[new r.Cell(-1,-1,0),new r.Cell(-1,1,0),new r.Cell(1,1,0),new r.Cell(1,-1,0)],this._list=[],this._vec3=new THREE.Vector3,this._cel=new r.Cell,this._conversionVec=new THREE.Vector3,this._geoCache=[],this._matCache=[]},r.SqrGrid.prototype={cellToPixel:function(e){return this._vec3.x=e.q*this._fullCellSize,this._vec3.y=e.h,this._vec3.z=e.r*this._fullCellSize,this._vec3},pixelToCell:function(e){var t=Math.round(e.x/this._fullCellSize),n=Math.round(e.z/this._fullCellSize);return this._cel.set(t,n,0)},getCellAt:function(e){var t=Math.round(e.x/this._fullCellSize),n=Math.round(e.z/this._fullCellSize);return this._cel.set(t,n),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(e,t,n){var r,i,o=this._directions.length;for(this._list.length=0,r=0;o>r;r++)this._cel.copy(e),this._cel.add(this._directions[r]),!(i=this.cells[this.cellToHash(this._cel)])||n&&!n(e,i)||this._list.push(i);if(t)for(r=0;o>r;r++)this._cel.copy(e),this._cel.add(this._diagonals[r]),!(i=this.cells[this.cellToHash(this._cel)])||n&&!n(e,i)||this._list.push(i);return this._list},getRandomCell:function(){var e,t=0,n=r.Tools.randomInt(0,this.numCells);for(e in this.cells){if(t===n)return this.cells[e];t++}return this.cells[e]},cellToHash:function(e){return e.q+this._hashDelimeter+e.r},distance:function(e,t){return Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r))+(t.h-e.h)},clearPath:function(){var e,t;for(e in this.cells)(t=this.cells[e])._calcCost=0,t._priority=0,t._parent=null,t._visited=!1},traverse:function(e){var t;for(t in this.cells)e(this.cells[t])},generateTile:function(e,t,n){var i=Math.abs(e.h);1>i&&(i=1);var o=this._geoCache[i];o||(this.extrudeSettings.amount=i,o=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[i]=o);var a=new r.Tile({size:this.cellSize,scale:t,cell:e,geometry:o,material:n});return e.tile=a,a},generateTiles:function(e){e=e||{};var t,n,i,o=[],a={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};for(t in a=r.Tools.merge(a,e),this.cellSize=a.cellSize,this._fullCellSize=2*this.cellSize,this.autogenerated=!0,this.extrudeSettings=a.extrudeSettings,this.cells)i=this.cells[t],(n=this.generateTile(i,a.tileScale,a.material)).position.copy(this.cellToPixel(i)),n.position.y=0,o.push(n);return o},generateTilePoly:function(e){e||(e=new THREE.MeshBasicMaterial({color:2405631}));var t=new THREE.Mesh(this.cellShapeGeo,e);return this._vec3.set(1,0,0),t.rotateOnAxis(this._vec3,r.PI/2),t},generate:function(e){e=e||{},this.size=void 0===e.size?this.size:e.size;var t,n,i,o=Math.ceil(this.size/2);for(t=-o;o>t;t++)for(n=-o;o>n;n++)i=new r.Cell(t,n+1),this.add(i)},generateOverlay:function(e,t,n){var i,o,a=Math.ceil(e/2);for(i=-a;a>i;i++)for(o=-a;a>o;o++){this._cel.set(i,o);var s=new THREE.Line(this.cellGeo,n);s.position.copy(this.cellToPixel(this._cel)),s.rotation.x=90*r.DEG_TO_RAD,t.add(s)}},add:function(e){var t=this.cellToHash(e);if(!this.cells[t])return this.cells[t]=e,this.numCells++,e},remove:function(e){var t=this.cellToHash(e);this.cells[t]&&(delete this.cells[t],this.numCells--)},dispose:function(){this.cells=null,this.numCells=0,this.cellShape=null,this.cellGeo.dispose(),this.cellGeo=null,this.cellShapeGeo.dispose(),this.cellShapeGeo=null,this._list=null,this._vec3=null,this._conversionVec=null,this._geoCache=null,this._matCache=null},load:function(e,t,n){r.Tools.getJSON({url:e,callback:function(e){this.fromJSON(e),t.call(n||null,e)},cache:!1,scope:this})},fromJSON:function(e){var t,n,i=e.cells;for(this.cells={},this.numCells=0,this.size=e.size,this.cellSize=e.cellSize,this._fullCellSize=2*this.cellSize,this.extrudeSettings=e.extrudeSettings,this.autogenerated=e.autogenerated,t=0;t<i.length;t++)(n=new r.Cell).copy(i[t]),this.add(n)},toJSON:function(){var e,t,n={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},r=[];for(t in this.cells)e=this.cells[t],r.push({q:e.q,r:e.r,s:e.s,h:e.h,walkable:e.walkable,userData:e.userData});return n.cells=r,n}},r.SqrGrid.prototype.constructor=r.SqrGrid,r.Tile=function(e){e=e||{};var t={cell:null,geometry:null,material:null};if(!(t=r.Tools.merge(t,e)).cell||!t.geometry)throw new Error("Missing vg.Tile configuration");this.cell=t.cell,this.cell.tile&&this.cell.tile!==this&&this.cell.tile.dispose(),this.cell.tile=this,this.uniqueID=r.Tools.generateID(),this.geometry=t.geometry,this.material=t.material,this.material||(this.material=new THREE.MeshPhongMaterial({color:r.Tools.randomizeRGB("30, 30, 30",13)})),this.objectType=r.TILE,this.entity=null,this.userData={},this.selected=!1,this.highlight="0x0084cc",this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.userData.structure=this,this.position=this.mesh.position,this.rotation=this.mesh.rotation,this.rotation.x=-90*r.DEG_TO_RAD,this.mesh.scale.set(t.scale,t.scale,1),this.material.emissive?this._emissive=this.material.emissive.getHex():this._emissive=null},r.Tile.prototype={select:function(){return this.material.emissive&&this.material.emissive.setHex(this.highlight),this.selected=!0,this},deselect:function(){return null!==this._emissive&&this.material.emissive&&this.material.emissive.setHex(this._emissive),this.selected=!1,this},toggle:function(){return this.selected?this.deselect():this.select(),this},dispose:function(){this.cell&&this.cell.tile&&(this.cell.tile=null),this.cell=null,this.position=null,this.rotation=null,this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.mesh.userData.structure=null,this.mesh=null,this.material=null,this.userData=null,this.entity=null,this.geometry=null,this._emissive=null}},r.Tile.prototype.constructor=r.Tile,function(){var e=function(){this.obj=null,this.next=null,this.prev=null,this.free=!0},t=function(){this.first=null,this.last=null,this.length=0,this.objToNodeMap={},this.uniqueID=Date.now()+""+Math.floor(1e3*Math.random()),this.sortArray=[]};t.generateID=function(){return Math.random().toString(36).slice(2)+Date.now()},(t.prototype={getNode:function(e){return this.objToNodeMap[e.uniqueID]},addNode:function(n){var r=new e;if(!n.uniqueID)try{n.uniqueID=t.generateID()}catch(i){return console.error("[LinkedList.addNode] obj passed is immutable: cannot attach necessary identifier"),null}return r.obj=n,r.free=!1,this.objToNodeMap[n.uniqueID]=r,r},swapObjects:function(e,t){this.objToNodeMap[e.obj.uniqueID]=null,this.objToNodeMap[t.uniqueID]=e,e.obj=t},add:function(e){var t=this.objToNodeMap[e.uniqueID];if(t){if(!1===t.free)return;t.obj=e,t.free=!1,t.next=null,t.prev=null}else t=this.addNode(e);if(this.first){if(!this.last)throw new Error("[LinkedList.add] No last in the list -- that shouldn't happen here");this.last.next=t,t.prev=this.last,this.last=t,t.next=null}else this.first=t,this.last=t,t.next=null,t.prev=null;this.length++,this.showDebug&&this.dump("after add")},has:function(e){return!!this.objToNodeMap[e.uniqueID]},moveUp:function(e){this.dump("before move up");var t=this.getNode(e);if(!t)throw"Oops, trying to move an object that isn't in the list";if(t.prev){var n=t.prev,r=n.prev;t==this.last&&(this.last=n);var i=t.next;r&&(r.next=t),t.next=n,t.prev=n.prev,n.next=i,n.prev=t,this.first==n&&(this.first=t)}},moveDown:function(e){var t=this.getNode(e);if(!t)throw"Oops, trying to move an object that isn't in the list";if(t.next){var n=t.next;this.moveUp(n.obj),this.last==n&&(this.last=t)}},sort:function(e){var t,n,r=this.sortArray,i=this.first;for(r.length=0;i;)r.push(i.obj),i=i.next;for(this.clear(),r.sort(e),n=r.length,t=0;n>t;t++)this.add(r[t])},remove:function(e){var t=this.getNode(e);return!(!t||t.free)&&(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.prev||(this.first=t.next),t.next||(this.last=t.prev),t.free=!0,t.prev=null,t.next=null,this.length--,!0)},shift:function(){var e=this.first;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.first=e.next,e.next||(this.last=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)},pop:function(){var e=this.last;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.last=e.prev,e.prev||(this.first=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)},concat:function(e){for(var t=e.first;t;)this.add(t.obj),t=t.next},clear:function(){for(var e=this.first;e;)e.free=!0,e=e.next;this.first=null,this.length=0},dispose:function(){for(var e=this.first;e;)e.obj=null,e=e.next;this.first=null,this.objToNodeMap=null},dump:function(e){console.log("===================="+e+"=====================");for(var t=this.first;t;)console.log("{"+t.obj.toString()+"} previous="+(t.prev?t.prev.obj:"NULL")),t=t.next();console.log("==================================="),console.log("Last: {"+(this.last?this.last.obj:"NULL")+"} First: {"+(this.first?this.first.obj:"NULL")+"}")}}).constructor=t,r.LinkedList=t}(),function(){var e=function(e,t,n,r,i){this._listener=t,this.isOnce=n,this.context=r,this.signal=e,this._priority=i||0};(e.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this.isOnce&&this.detach()),t},detach:function(){return this.isBound()?this.signal.remove(this._listener,this.context):null},isBound:function(){return!!this.signal&&!!this._listener},_destroy:function(){delete this.signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this.isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}}).constructor=e;var t=function e(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){e.prototype.dispatch.apply(t,arguments)}};(t.prototype={memorize:!1,_shouldPropagate:!0,active:!0,validateListener:function(e,t){if("function"!=typeof e)throw new Error("Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))},_registerListener:function(t,n,r,i){var o,a=this._indexOfListener(t,r);if(-1!==a){if((o=this._bindings[a]).isOnce!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,n,r,i),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do{t--}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,r=this._bindings.length;r--;)if((n=this._bindings[r])._listener===e&&n.context===t)return r;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,n){return this.validateListener(e,"add"),this._registerListener(e,!1,t,n)},addOnce:function(e,t,n){return this.validateListener(e,"addOnce"),this._registerListener(e,!0,t,n)},remove:function(e,t){this.validateListener(e,"remove");var n=this._indexOfListener(e,t);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),e},removeAll:function(e){void 0===e&&(e=null);for(var t=this._bindings.length;t--;)e?this._bindings[t].context===e&&(this._bindings[t]._destroy(),this._bindings.splice(t,1)):this._bindings[t]._destroy();e||(this._bindings.length=0)},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var e,t=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=t),n){e=this._bindings.slice(),this._shouldPropagate=!0;do{n--}while(e[n]&&this._shouldPropagate&&!1!==e[n].execute(t))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}}).constructor=t,r.Signal=t}(),r.AStarFinder=function(e){e=e||{};var t={allowDiagonal:!1,heuristicFilter:null};t=r.Tools.merge(t,e),this.allowDiagonal=t.allowDiagonal,this.heuristicFilter=t.heuristicFilter,this.list=new r.LinkedList},r.AStarFinder.prototype={findPath:function(e,t,n,i){var o,a,s,c,l,u;for(n=n||this.heuristicFilter,i.clearPath(),this.list.clear(),this.list.add(e);this.list.length>0;){if(this.list.sort(this.compare),(o=this.list.shift())._visited=!0,o===t)return r.PathUtil.backtrace(t);for(l=0,u=(s=i.getNeighbors(o,this.allowDiagonal,n)).length;u>l;l++)if((c=s[l]).walkable&&(a=o._calcCost+i.distance(o,c),!c._visited||a<c._calcCost)){if(c._visited=!0,c._parent=o,c._calcCost=a,c._priority=a+i.distance(t,c),c===t)return r.PathUtil.backtrace(t);this.list.add(c)}}return null},compare:function(e,t){return e._priority-t._priority}},r.AStarFinder.prototype.constructor=r.AStarFinder,r.PathUtil={backtrace:function(e){for(var t=[e];e._parent;)e=e._parent,t.push(e);return t.reverse()},biBacktrace:function(e,t){var n=this.backtrace(e),r=this.backtrace(t);return n.concat(r.reverse())},pathLength:function(e){var t,n,r,i,o,a=0;for(t=1;t<e.length;++t)n=e[t-1],r=e[t],i=n[0]-r[0],o=n[1]-r[1],a+=Math.sqrt(i*i+o*o);return a},interpolate:function(e,t,n,r){var i,o,a,s,c,l,u=Math.abs,h=[];for(i=n>e?1:-1,o=r>t?1:-1,c=(a=u(n-e))-(s=u(r-t));e!==n||t!==r;)h.push([e,t]),(l=2*c)>-s&&(c-=s,e+=i),a>l&&(c+=a,t+=o);return h},expandPath:function(e){var t,n,r,i,o,a,s=[],c=e.length;if(2>c)return s;for(o=0;c-1>o;++o)for(t=e[o],n=e[o+1],i=(r=this.interpolate(t[0],t[1],n[0],n[1])).length,a=0;i-1>a;++a)s.push(r[a]);return s.push(e[c-1]),s},smoothenPath:function(e,t){var n,r,i,o,a,s,c,l,u,h,d,f,p=t.length,v=t[0][0],g=t[0][1],m=t[p-1][0],y=t[p-1][1];for(a=[[n=v,r=g]],c=2;p>c;++c){for(i=(u=t[c])[0],o=u[1],h=this.interpolate(n,r,i,o),f=!1,l=1;l<h.length;++l)if(d=h[l],!e.isWalkableAt(d[0],d[1])){f=!0;break}f&&(s=t[c-1],a.push(s),n=s[0],r=s[1])}return a.push([m,y]),a},compressPath:function(e){if(e.length<3)return e;var t,n,r,i,o,a,s=[],c=e[0][0],l=e[0][1],u=e[1][0],h=e[1][1],d=u-c,f=h-l;for(d/=o=Math.sqrt(d*d+f*f),f/=o,s.push([c,l]),a=2;a<e.length;a++)t=u,n=h,r=d,i=f,d=(u=e[a][0])-t,f=(h=e[a][1])-n,f/=o=Math.sqrt(d*d+f*f),((d/=o)!==r||f!==i)&&s.push([t,n]);return s.push([u,h]),s}},r.Loader={manager:null,imageLoader:null,crossOrigin:!1,init:function(e){this.crossOrigin=e||!1,this.manager=new THREE.LoadingManager((function(){}),(function(){}),(function(){console.warn("Error loading images")})),this.imageLoader=new THREE.ImageLoader(this.manager),this.imageLoader.crossOrigin=e},loadTexture:function(e,t,n,r){var i=new THREE.Texture(null,t);return this.imageLoader.load(e,(function(e){i.image=e,i.needsUpdate=!0,n&&n(i)}),null,(function(e){r&&r(e)})),i.sourceFile=e,i}},r.MouseCaster=function(e,t,n){this.down=!1,this.rightDown=!1,this.pickedObject=null,this.selectedObject=null,this.allHits=null,this.active=!0,this.shift=!1,this.ctrl=!1,this.wheel=0,this.position=new THREE.Vector3,this.screenPosition=new THREE.Vector2,this.signal=new r.Signal,this.group=e,this._camera=t,this._raycaster=new THREE.Raycaster,this._preventDefault=!1,(n=n||document).addEventListener("mousemove",this._onDocumentMouseMove.bind(this),!1),n.addEventListener("mousedown",this._onDocumentMouseDown.bind(this),!1),n.addEventListener("mouseup",this._onDocumentMouseUp.bind(this),!1),n.addEventListener("mousewheel",this._onMouseWheel.bind(this),!1),n.addEventListener("DOMMouseScroll",this._onMouseWheel.bind(this),!1)},r.MouseCaster.OVER="over",r.MouseCaster.OUT="out",r.MouseCaster.DOWN="down",r.MouseCaster.UP="up",r.MouseCaster.CLICK="click",r.MouseCaster.WHEEL="wheel",r.MouseCaster.prototype={update:function(){if(this.active){this._raycaster.setFromCamera(this.screenPosition,this._camera);var e,t,n=this._raycaster.intersectObject(this.group,!0);n.length>0?(t=(e=n[0]).object.userData.structure,this.pickedObject!=t&&(this.pickedObject&&this.signal.dispatch(r.MouseCaster.OUT,this.pickedObject),this.pickedObject=t,this.selectedObject=null,this.signal.dispatch(r.MouseCaster.OVER,this.pickedObject)),this.position.copy(e.point),this.screenPosition.z=e.distance):(this.pickedObject&&this.signal.dispatch(r.MouseCaster.OUT,this.pickedObject),this.pickedObject=null,this.selectedObject=null),this.allHits=n}},preventDefault:function(){this._preventDefault=!0},_onDocumentMouseDown:function(e){return(e=e||window.event).preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.pickedObject&&(this.selectedObject=this.pickedObject),this.shift=e.shiftKey,this.ctrl=e.ctrlKey,this.down=1===e.which,this.rightDown=3===e.which,void this.signal.dispatch(r.MouseCaster.DOWN,this.pickedObject))},_onDocumentMouseUp:function(e){return e.preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.shift=e.shiftKey,this.ctrl=e.ctrlKey,this.signal.dispatch(r.MouseCaster.UP,this.pickedObject),this.selectedObject&&this.pickedObject&&this.selectedObject.uniqueID===this.pickedObject.uniqueID&&this.signal.dispatch(r.MouseCaster.CLICK,this.pickedObject),this.down=1!==e.which&&this.down,void(this.rightDown=3!==e.which&&this.rightDown))},_onDocumentMouseMove:function(e){e.preventDefault(),this.screenPosition.x=e.clientX/window.innerWidth*2-1,this.screenPosition.y=-e.clientY/window.innerHeight*2+1},_onMouseWheel:function(e){if(this.active){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?this.wheel++:this.wheel--,this.signal.dispatch(r.MouseCaster.WHEEL,this.wheel)}}},r.MouseCaster.prototype.constructor=r.MouseCaster,r.Scene=function(e,t){var n={element:document.body,alpha:!0,antialias:!0,clearColor:"#fff",sortObjects:!1,fog:null,light:new THREE.DirectionalLight(16777215),lightPosition:null,cameraType:"PerspectiveCamera",cameraPosition:null,orthoZoom:4},i={minDistance:100,maxDistance:1e3,zoomSpeed:2,noZoom:!1};if(n=r.Tools.merge(n,e),"boolean"!=typeof t&&(i=r.Tools.merge(i,t)),this.renderer=new THREE.WebGLRenderer({alpha:n.alpha,antialias:n.antialias}),this.renderer.setClearColor(n.clearColor,0),this.renderer.sortObjects=n.sortObjects,this.width=window.innerWidth,this.height=window.innerHeight,this.orthoZoom=n.orthoZoom,this.container=new THREE.Scene,this.container.fog=n.fog,this.container.add(new THREE.AmbientLight(14540253)),n.lightPosition||n.light.position.set(-1,1,-1).normalize(),this.container.add(n.light),"OrthographicCamera"===n.cameraType){var o=window.innerWidth/this.orthoZoom,a=window.innerHeight/this.orthoZoom;this.camera=new THREE.OrthographicCamera(o/-2,o/2,a/2,a/-2,1,5e3)}else this.camera=new THREE.PerspectiveCamera(50,this.width/this.height,1,5e3);this.contolled=!!t,this.contolled&&(this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.minDistance=i.minDistance,this.controls.maxDistance=i.maxDistance,this.controls.zoomSpeed=i.zoomSpeed,this.controls.noZoom=i.noZoom),n.cameraPosition&&this.camera.position.copy(n.cameraPosition),window.addEventListener("resize",function(){if(this.width=window.innerWidth,this.height=window.innerHeight,"OrthographicCamera"===this.camera.type){var e=this.width/this.orthoZoom,t=this.height/this.orthoZoom;this.camera.left=e/-2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=t/-2}else this.camera.aspect=this.width/this.height;this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}.bind(this),!1),this.attachTo(n.element)},r.Scene.prototype={attachTo:function(e){e.style.width=this.width+"px",e.style.height=this.height+"px",this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),e.appendChild(this.renderer.domElement)},add:function(e){this.container.add(e)},remove:function(e){this.container.remove(e)},render:function(){this.contolled&&this.controls.update(),this.renderer.render(this.container,this.camera)},updateOrthoZoom:function(){if(this.orthoZoom<=0)this.orthoZoom=0;else{var e=this.width/this.orthoZoom,t=this.height/this.orthoZoom;this.camera.left=e/-2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=t/-2,this.camera.updateProjectionMatrix()}},focusOn:function(e){this.camera.lookAt(e.position)}},r.Scene.prototype.constructor=r.Scene,r.SelectionManager=function(e){this.mouse=e,this.onSelect=new r.Signal,this.onDeselect=new r.Signal,this.selected=null,this.toggleSelection=!1,this.mouse.signal.add(this.onMouse,this)},r.SelectionManager.prototype={select:function(e,t){e&&(t=t||!0,this.selected!==e&&this.clearSelection(t),e.selected?this.toggleSelection&&(t&&this.onDeselect.dispatch(e),e.deselect()):e.select(),this.selected=e,t&&this.onSelect.dispatch(e))},clearSelection:function(e){e=e||!0,this.selected&&(e&&this.onDeselect.dispatch(this.selected),this.selected.deselect()),this.selected=null},onMouse:function(e,t){switch(e){case r.MouseCaster.DOWN:t||this.clearSelection();break;case r.MouseCaster.CLICK:this.select(t)}}},r.SelectionManager.prototype.constructor=r.SelectionManager,r.Tools={clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},sign:function(e){return e&&e/Math.abs(e)},random:function(e,t){return 1===arguments.length?Math.random()*e-.5*e:Math.random()*(t-e)+e},randomInt:function(e,t){return 1===arguments.length?Math.random()*e-.5*e|0:Math.random()*(t-e+1)+e|0},normalize:function(e,t,n){return(e-t)/(n-t)},getShortRotation:function(e){return(e%=this.TAU)>this.PI?e-=this.TAU:e<-this.PI&&(e+=this.TAU),e},generateID:function(){return Math.random().toString(36).slice(2)+Date.now()},isPlainObject:function(e){if("object"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},merge:function(e,t){var n=this,r=Array.isArray(t),i=r&&[]||{};return r?(e=e||[],i=i.concat(e),t.forEach((function(t,r){void 0===i[r]?i[r]=t:n.isPlainObject(t)?i[r]=n.merge(e[r],t):-1===e.indexOf(t)&&i.push(t)})),i):(e&&n.isPlainObject(e)&&Object.keys(e).forEach((function(t){i[t]=e[t]})),Object.keys(t).forEach((function(r){t[r]&&n.isPlainObject(t[r])&&e[r]?i[r]=n.merge(e[r],t[r]):i[r]=t[r]})),i)},now:function(){return window.nwf?window.nwf.system.Performance.elapsedTime:window.performance.now()},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},radixSort:function(e,t,n,r){if(r=r||31,!((t=t||0)>=(n=n||e.length)-1||0>r)){for(var i=t,o=n,a=1<<r;o>i;)if(e[i]&a){--o;var s=e[i];e[i]=e[o],e[o]=s}else++i;this.radixSort(e,t,o,r-1),this.radixSort(e,o,n,r-1)}},randomizeRGB:function(e,t){var n,r,i=e.split(","),o="rgb(";for(t=this.randomInt(t),n=0;3>n;n++)0>(r=parseInt(i[n])+t)?r=0:r>255&&(r=255),o+=r+",";return(o=o.substring(0,o.length-1))+")"},getJSON:function(e){var t=new XMLHttpRequest,n=void 0!==e.cache&&e.cache?e.url:e.url+"?t="+Math.floor(1e4*Math.random())+Date.now();t.onreadystatechange=function(){if(200!==this.status)0!==this.status&&console.warn("[Tools.getJSON] Error: "+this.status+" ("+this.statusText+") :: "+e.url);else{var t=null;try{t=JSON.parse(this.responseText)}catch(n){return}e.callback.call(e.scope||null,t)}},t.open("GET",n,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Content-Type","application/json"),t.send("")}}},yNLB:function(e,t,n){var r=n("0Dky"),i=n("WJkJ");e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},zfnd:function(e,t,n){var r=n("glrk"),i=n("hh1v"),o=n("8GlL");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}}}]);
//# sourceMappingURL=component---src-pages-search-graph-js-0fb0285db9404b37b894.js.map